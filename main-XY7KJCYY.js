var m5=Object.create;var Gy=Object.defineProperty,v5=Object.defineProperties,y5=Object.getOwnPropertyDescriptor,C5=Object.getOwnPropertyDescriptors,b5=Object.getOwnPropertyNames,Uy=Object.getOwnPropertySymbols,w5=Object.getPrototypeOf,sE=Object.prototype.hasOwnProperty,VP=Object.prototype.propertyIsEnumerable;var BP=(t,e,n)=>e in t?Gy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})sE.call(e,n)&&BP(t,n,e[n]);if(Uy)for(var n of Uy(e))VP.call(e,n)&&BP(t,n,e[n]);return t},ae=(t,e)=>v5(t,C5(e));var zf=(t,e)=>{var n={};for(var i in t)sE.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Uy)for(var i of Uy(t))e.indexOf(i)<0&&VP.call(t,i)&&(n[i]=t[i]);return n};var _5=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),S5=(t,e)=>{for(var n in e)Gy(t,n,{get:e[n],enumerable:!0})},x5=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of b5(e))!sE.call(t,r)&&r!==n&&Gy(t,r,{get:()=>e[r],enumerable:!(i=y5(e,r))||i.enumerable});return t};var HP=(t,e,n)=>(n=t!=null?m5(w5(t)):{},x5(e||!t||!t.__esModule?Gy(n,"default",{value:t,enumerable:!0}):n,t));var oi=(t,e,n)=>new Promise((i,r)=>{var o=l=>{try{a(n.next(l))}catch(c){r(c)}},s=l=>{try{a(n.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())});var II=_5((TI,AI)=>{((t,e)=>{typeof define=="function"&&define.amd?define([],e):typeof AI=="object"&&typeof TI<"u"?AI.exports=e():t.Papa=e()})(TI,function t(){var e=typeof self<"u"?self:typeof window<"u"?window:e!==void 0?e:{},n,i=!e.document&&!!e.postMessage,r=e.IS_PAPA_WORKER||!1,o={},s=0,a={};function l(b){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var M=y(_);M.chunkSize=parseInt(M.chunkSize),_.step||_.chunk||(M.chunkSize=null),this._handle=new f(M),(this._handle.streamer=this)._config=M}).call(this,b),this.parseChunk=function(_,M){var x=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<x){let I=this._config.newline;I||(S=this._config.quoteChar||'"',I=this._handle.guessLineEndings(_,S)),_=[..._.split(I).slice(x)].join(I)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(_))!==void 0&&(_=S),this.isFirstChunk=!1,this._halted=!1;var x=this._partialLine+_,S=(this._partialLine="",this._handle.parse(x,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=S.meta.cursor,x=(this._finished||(this._partialLine=x.substring(_-this._baseIndex),this._baseIndex=_),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)e.postMessage({results:S,workerId:a.WORKER_ID,finished:x});else if(R(this._config.chunk)&&!M){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!x||!R(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),x||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(_){R(this._config.error)?this._config.error(_):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:_,finished:!1})}}function c(b){var _;(b=b||{}).chunkSize||(b.chunkSize=a.RemoteChunkSize),l.call(this,b),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=w(this._chunkLoaded,this),_.onerror=w(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var M,x=this._config.downloadRequestHeaders;for(M in x)_.setRequestHeader(M,x[M])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+S));try{_.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(M=>(M=M.getResponseHeader("Content-Range"))!==null?parseInt(M.substring(M.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(M){M=_.statusText||M,this._sendError(new Error(M))}}function d(b){(b=b||{}).chunkSize||(b.chunkSize=a.LocalChunkSize),l.call(this,b);var _,M,x=typeof FileReader<"u";this.stream=function(S){this._input=S,M=S.slice||S.webkitSlice||S.mozSlice,x?((_=new FileReader).onload=w(this._chunkLoaded,this),_.onerror=w(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),S=M.call(S,this._start,I)),_.readAsText(S,this._config.encoding));x||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(_.error)}}function u(b){var _;l.call(this,b=b||{}),this.stream=function(M){return _=M,this._nextChunk()},this._nextChunk=function(){var M,x;if(!this._finished)return M=this._config.chunkSize,_=M?(x=_.substring(0,M),_.substring(M)):(x=_,""),this._finished=!_,this.parseChunk(x)}}function h(b){l.call(this,b=b||{});var _=[],M=!0,x=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){x&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):M=!0},this._streamData=w(function(S){try{_.push(typeof S=="string"?S:S.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(I){this._streamError(I)}},this),this._streamError=w(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=w(function(){this._streamCleanUp(),x=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(b){var _,M,x,S,I=Math.pow(2,53),N=-I,B=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,U=this,j=0,Y=0,$=!1,re=!1,oe=[],ie={data:[],errors:[],meta:{}};function Ge(we){return b.skipEmptyLines==="greedy"?we.join("").trim()==="":we.length===1&&we[0].length===0}function Xe(){if(ie&&x&&(ye("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),x=!1),b.skipEmptyLines&&(ie.data=ie.data.filter(function(De){return!Ge(De)})),Z()){let De=function(Dt,rt){R(b.transformHeader)&&(Dt=b.transformHeader(Dt,rt)),oe.push(Dt)};var Re=De;if(ie)if(Array.isArray(ie.data[0])){for(var we=0;Z()&&we<ie.data.length;we++)ie.data[we].forEach(De);ie.data.splice(0,1)}else ie.data.forEach(De)}function pe(De,Dt){for(var rt=b.header?{}:[],Be=0;Be<De.length;Be++){var T=Be,ve=De[Be],ve=((ee,fe)=>(J=>(b.dynamicTypingFunction&&b.dynamicTyping[J]===void 0&&(b.dynamicTyping[J]=b.dynamicTypingFunction(J)),(b.dynamicTyping[J]||b.dynamicTyping)===!0))(ee)?fe==="true"||fe==="TRUE"||fe!=="false"&&fe!=="FALSE"&&((J=>{if(B.test(J)&&(J=parseFloat(J),N<J&&J<I))return 1})(fe)?parseFloat(fe):W.test(fe)?new Date(fe):fe===""?null:fe):fe)(T=b.header?Be>=oe.length?"__parsed_extra":oe[Be]:T,ve=b.transform?b.transform(ve,T):ve);T==="__parsed_extra"?(rt[T]=rt[T]||[],rt[T].push(ve)):rt[T]=ve}return b.header&&(Be>oe.length?ye("FieldMismatch","TooManyFields","Too many fields: expected "+oe.length+" fields but parsed "+Be,Y+Dt):Be<oe.length&&ye("FieldMismatch","TooFewFields","Too few fields: expected "+oe.length+" fields but parsed "+Be,Y+Dt)),rt}var Me;ie&&(b.header||b.dynamicTyping||b.transform)&&(Me=1,!ie.data.length||Array.isArray(ie.data[0])?(ie.data=ie.data.map(pe),Me=ie.data.length):ie.data=pe(ie.data,0),b.header&&ie.meta&&(ie.meta.fields=oe),Y+=Me)}function Z(){return b.header&&oe.length===0}function ye(we,pe,Me,Re){we={type:we,code:pe,message:Me},Re!==void 0&&(we.row=Re),ie.errors.push(we)}R(b.step)&&(S=b.step,b.step=function(we){ie=we,Z()?Xe():(Xe(),ie.data.length!==0&&(j+=we.data.length,b.preview&&j>b.preview?M.abort():(ie.data=ie.data[0],S(ie,U))))}),this.parse=function(we,pe,Me){var Re=b.quoteChar||'"',Re=(b.newline||(b.newline=this.guessLineEndings(we,Re)),x=!1,b.delimiter?R(b.delimiter)&&(b.delimiter=b.delimiter(we),ie.meta.delimiter=b.delimiter):((Re=((De,Dt,rt,Be,T)=>{var ve,ee,fe,J;T=T||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var Pe=0;Pe<T.length;Pe++){for(var ge,Ne=T[Pe],it=0,F=0,E=0,H=(fe=void 0,new v({comments:Be,delimiter:Ne,newline:Dt,preview:10}).parse(De)),Q=0;Q<H.data.length;Q++)rt&&Ge(H.data[Q])?E++:(ge=H.data[Q].length,F+=ge,fe===void 0?fe=ge:0<ge&&(it+=Math.abs(ge-fe),fe=ge));0<H.data.length&&(F/=H.data.length-E),(ee===void 0||it<=ee)&&(J===void 0||J<F)&&1.99<F&&(ee=it,ve=Ne,J=F)}return{successful:!!(b.delimiter=ve),bestDelimiter:ve}})(we,b.newline,b.skipEmptyLines,b.comments,b.delimitersToGuess)).successful?b.delimiter=Re.bestDelimiter:(x=!0,b.delimiter=a.DefaultDelimiter),ie.meta.delimiter=b.delimiter),y(b));return b.preview&&b.header&&Re.preview++,_=we,M=new v(Re),ie=M.parse(_,pe,Me),Xe(),$?{meta:{paused:!0}}:ie||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,M.abort(),_=R(b.chunk)?"":_.substring(M.getCharIndex())},this.resume=function(){U.streamer._halted?($=!1,U.streamer.parseChunk(_,!0)):setTimeout(U.resume,3)},this.aborted=function(){return re},this.abort=function(){re=!0,M.abort(),ie.meta.aborted=!0,R(b.complete)&&b.complete(ie),_=""},this.guessLineEndings=function(De,Re){De=De.substring(0,1048576);var Re=new RegExp(p(Re)+"([^]*?)"+p(Re),"gm"),Me=(De=De.replace(Re,"")).split("\r"),Re=De.split(`
`),De=1<Re.length&&Re[0].length<Me[0].length;if(Me.length===1||De)return`
`;for(var Dt=0,rt=0;rt<Me.length;rt++)Me[rt][0]===`
`&&Dt++;return Dt>=Me.length/2?`\r
`:"\r"}}function p(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(b){var _=(b=b||{}).delimiter,M=b.newline,x=b.comments,S=b.step,I=b.preview,N=b.fastMode,B=null,W=!1,U=b.quoteChar==null?'"':b.quoteChar,j=U;if(b.escapeChar!==void 0&&(j=b.escapeChar),(typeof _!="string"||-1<a.BAD_DELIMITERS.indexOf(_))&&(_=","),x===_)throw new Error("Comment character same as delimiter");x===!0?x="#":(typeof x!="string"||-1<a.BAD_DELIMITERS.indexOf(x))&&(x=!1),M!==`
`&&M!=="\r"&&M!==`\r
`&&(M=`
`);var Y=0,$=!1;this.parse=function(re,oe,ie){if(typeof re!="string")throw new Error("Input must be a string");var Ge=re.length,Xe=_.length,Z=M.length,ye=x.length,we=R(S),pe=[],Me=[],Re=[],De=Y=0;if(!re)return it();if(N||N!==!1&&re.indexOf(U)===-1){for(var Dt=re.split(M),rt=0;rt<Dt.length;rt++){if(Re=Dt[rt],Y+=Re.length,rt!==Dt.length-1)Y+=M.length;else if(ie)return it();if(!x||Re.substring(0,ye)!==x){if(we){if(pe=[],J(Re.split(_)),F(),$)return it()}else J(Re.split(_));if(I&&I<=rt)return pe=pe.slice(0,I),it(!0)}}return it()}for(var Be=re.indexOf(_,Y),T=re.indexOf(M,Y),ve=new RegExp(p(j)+p(U),"g"),ee=re.indexOf(U,Y);;)if(re[Y]===U)for(ee=Y,Y++;;){if((ee=re.indexOf(U,ee+1))===-1)return ie||Me.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:pe.length,index:Y}),ge();if(ee===Ge-1)return ge(re.substring(Y,ee).replace(ve,U));if(U===j&&re[ee+1]===j)ee++;else if(U===j||ee===0||re[ee-1]!==j){Be!==-1&&Be<ee+1&&(Be=re.indexOf(_,ee+1));var fe=Pe((T=T!==-1&&T<ee+1?re.indexOf(M,ee+1):T)===-1?Be:Math.min(Be,T));if(re.substr(ee+1+fe,Xe)===_){Re.push(re.substring(Y,ee).replace(ve,U)),re[Y=ee+1+fe+Xe]!==U&&(ee=re.indexOf(U,Y)),Be=re.indexOf(_,Y),T=re.indexOf(M,Y);break}if(fe=Pe(T),re.substring(ee+1+fe,ee+1+fe+Z)===M){if(Re.push(re.substring(Y,ee).replace(ve,U)),Ne(ee+1+fe+Z),Be=re.indexOf(_,Y),ee=re.indexOf(U,Y),we&&(F(),$))return it();if(I&&pe.length>=I)return it(!0);break}Me.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:pe.length,index:Y}),ee++}}else if(x&&Re.length===0&&re.substring(Y,Y+ye)===x){if(T===-1)return it();Y=T+Z,T=re.indexOf(M,Y),Be=re.indexOf(_,Y)}else if(Be!==-1&&(Be<T||T===-1))Re.push(re.substring(Y,Be)),Y=Be+Xe,Be=re.indexOf(_,Y);else{if(T===-1)break;if(Re.push(re.substring(Y,T)),Ne(T+Z),we&&(F(),$))return it();if(I&&pe.length>=I)return it(!0)}return ge();function J(E){pe.push(E),De=Y}function Pe(E){var H=0;return H=E!==-1&&(E=re.substring(ee+1,E))&&E.trim()===""?E.length:H}function ge(E){return ie||(E===void 0&&(E=re.substring(Y)),Re.push(E),Y=Ge,J(Re),we&&F()),it()}function Ne(E){Y=E,J(Re),Re=[],T=re.indexOf(M,Y)}function it(E){if(b.header&&!oe&&pe.length&&!W){var H=pe[0],Q=Object.create(null),de=new Set(H);let te=!1;for(let We=0;We<H.length;We++){let G=H[We];if(Q[G=R(b.transformHeader)?b.transformHeader(G,We):G]){let He,et=Q[G];for(;He=G+"_"+et,et++,de.has(He););de.add(He),H[We]=He,Q[G]++,te=!0,(B=B===null?{}:B)[He]=G}else Q[G]=1,H[We]=G;de.add(G)}te&&console.warn("Duplicate headers found and renamed."),W=!0}return{data:pe,errors:Me,meta:{delimiter:_,linebreak:M,aborted:$,truncated:!!E,cursor:De+(oe||0),renamedHeaders:B}}}function F(){S(it()),pe=[],Me=[]}},this.abort=function(){$=!0},this.getCharIndex=function(){return Y}}function m(b){var _=b.data,M=o[_.workerId],x=!1;if(_.error)M.userError(_.error,_.file);else if(_.results&&_.results.data){var S={abort:function(){x=!0,g(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(R(M.userStep)){for(var I=0;I<_.results.data.length&&(M.userStep({data:_.results.data[I],errors:_.results.errors,meta:_.results.meta},S),!x);I++);delete _.results}else R(M.userChunk)&&(M.userChunk(_.results,S,_.file),delete _.results)}_.finished&&!x&&g(_.workerId,_.results)}function g(b,_){var M=o[b];R(M.userComplete)&&M.userComplete(_),M.terminate(),delete o[b]}function C(){throw new Error("Not implemented.")}function y(b){if(typeof b!="object"||b===null)return b;var _,M=Array.isArray(b)?[]:{};for(_ in b)M[_]=y(b[_]);return M}function w(b,_){return function(){b.apply(_,arguments)}}function R(b){return typeof b=="function"}return a.parse=function(b,_){var M=(_=_||{}).dynamicTyping||!1;if(R(M)&&(_.dynamicTypingFunction=M,M={}),_.dynamicTyping=M,_.transform=!!R(_.transform)&&_.transform,!_.worker||!a.WORKERS_SUPPORTED)return M=null,a.NODE_STREAM_INPUT,typeof b=="string"?(b=(x=>x.charCodeAt(0)!==65279?x:x.slice(1))(b),M=new(_.download?c:u)(_)):b.readable===!0&&R(b.read)&&R(b.on)?M=new h(_):(e.File&&b instanceof File||b instanceof Object)&&(M=new d(_)),M.stream(b);(M=(()=>{var x;return!!a.WORKERS_SUPPORTED&&(x=(()=>{var S=e.URL||e.webkitURL||null,I=t.toString();return a.BLOB_URL||(a.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(x=new e.Worker(x)).onmessage=m,x.id=s++,o[x.id]=x)})()).userStep=_.step,M.userChunk=_.chunk,M.userComplete=_.complete,M.userError=_.error,_.step=R(_.step),_.chunk=R(_.chunk),_.complete=R(_.complete),_.error=R(_.error),delete _.worker,M.postMessage({input:b,config:_,workerId:M.id})},a.unparse=function(b,_){var M=!1,x=!0,S=",",I=`\r
`,N='"',B=N+N,W=!1,U=null,j=!1,Y=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||a.BAD_DELIMITERS.filter(function(oe){return _.delimiter.indexOf(oe)!==-1}).length||(S=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(M=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(W=_.skipEmptyLines),typeof _.newline=="string"&&(I=_.newline),typeof _.quoteChar=="string"&&(N=_.quoteChar),typeof _.header=="boolean"&&(x=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");U=_.columns}_.escapeChar!==void 0&&(B=_.escapeChar+N),_.escapeFormulae instanceof RegExp?j=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(j=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(N),"g"));if(typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(b)){if(!b.length||Array.isArray(b[0]))return $(null,b,W);if(typeof b[0]=="object")return $(U||Object.keys(b[0]),b,W)}else if(typeof b=="object")return typeof b.data=="string"&&(b.data=JSON.parse(b.data)),Array.isArray(b.data)&&(b.fields||(b.fields=b.meta&&b.meta.fields||U),b.fields||(b.fields=Array.isArray(b.data[0])?b.fields:typeof b.data[0]=="object"?Object.keys(b.data[0]):[]),Array.isArray(b.data[0])||typeof b.data[0]=="object"||(b.data=[b.data])),$(b.fields||[],b.data||[],W);throw new Error("Unable to serialize unrecognized input");function $(oe,ie,Ge){var Xe="",Z=(typeof oe=="string"&&(oe=JSON.parse(oe)),typeof ie=="string"&&(ie=JSON.parse(ie)),Array.isArray(oe)&&0<oe.length),ye=!Array.isArray(ie[0]);if(Z&&x){for(var we=0;we<oe.length;we++)0<we&&(Xe+=S),Xe+=re(oe[we],we);0<ie.length&&(Xe+=I)}for(var pe=0;pe<ie.length;pe++){var Me=(Z?oe:ie[pe]).length,Re=!1,De=Z?Object.keys(ie[pe]).length===0:ie[pe].length===0;if(Ge&&!Z&&(Re=Ge==="greedy"?ie[pe].join("").trim()==="":ie[pe].length===1&&ie[pe][0].length===0),Ge==="greedy"&&Z){for(var Dt=[],rt=0;rt<Me;rt++){var Be=ye?oe[rt]:rt;Dt.push(ie[pe][Be])}Re=Dt.join("").trim()===""}if(!Re){for(var T=0;T<Me;T++){0<T&&!De&&(Xe+=S);var ve=Z&&ye?oe[T]:T;Xe+=re(ie[pe][ve],T)}pe<ie.length-1&&(!Ge||0<Me&&!De)&&(Xe+=I)}}return Xe}function re(oe,ie){var Ge,Xe;return oe==null?"":oe.constructor===Date?JSON.stringify(oe).slice(1,25):(Xe=!1,j&&typeof oe=="string"&&j.test(oe)&&(oe="'"+oe,Xe=!0),Ge=oe.toString().replace(Y,B),(Xe=Xe||M===!0||typeof M=="function"&&M(oe,ie)||Array.isArray(M)&&M[ie]||((Z,ye)=>{for(var we=0;we<ye.length;we++)if(-1<Z.indexOf(ye[we]))return!0;return!1})(Ge,a.BAD_DELIMITERS)||-1<Ge.indexOf(S)||Ge.charAt(0)===" "||Ge.charAt(Ge.length-1)===" ")?N+Ge+N:Ge)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=v,a.ParserHandle=f,a.NetworkStreamer=c,a.FileStreamer=d,a.StringStreamer=u,a.ReadableStreamStreamer=h,e.jQuery&&((n=e.jQuery).fn.parse=function(b){var _=b.config||{},M=[];return this.each(function(I){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&e.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)M.push({file:this.files[N],inputElem:this,instanceConfig:n.extend({},_)})}),x(),this;function x(){if(M.length===0)R(b.complete)&&b.complete();else{var I,N,B,W,U=M[0];if(R(b.before)){var j=b.before(U.file,U.inputElem);if(typeof j=="object"){if(j.action==="abort")return I="AbortError",N=U.file,B=U.inputElem,W=j.reason,void(R(b.error)&&b.error({name:I},N,B,W));if(j.action==="skip")return void S();typeof j.config=="object"&&(U.instanceConfig=n.extend(U.instanceConfig,j.config))}else if(j==="skip")return void S()}var Y=U.instanceConfig.complete;U.instanceConfig.complete=function($){R(Y)&&Y($,U.file,U.inputElem),S()},a.parse(U.file,U.instanceConfig)}}function S(){M.splice(0,1),x()}}),r&&(e.onmessage=function(b){b=b.data,a.WORKER_ID===void 0&&b&&(a.WORKER_ID=b.workerId),typeof b.input=="string"?e.postMessage({workerId:a.WORKER_ID,results:a.parse(b.input,b.config),finished:!0}):(e.File&&b.input instanceof File||b.input instanceof Object)&&(b=a.parse(b.input,b.config))&&e.postMessage({workerId:a.WORKER_ID,results:b,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(l.prototype)).constructor=d,(u.prototype=Object.create(u.prototype)).constructor=u,(h.prototype=Object.create(l.prototype)).constructor=h,a})});var aE;function lE(){return aE}function Hs(t){let e=aE;return aE=t,e}var E5=Symbol("NotFound"),Wy=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function Zd(t){return t===E5||t?.name==="\u0275NotFound"}function Gf(t,e){return Object.is(t,e)}var ui=null,jy=!1,cE=1,M5=null,Qn=Symbol("SIGNAL");function ht(t){let e=ui;return ui=t,e}function $y(){return ui}var Us={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function za(t){if(jy)throw new Error("");if(ui===null)return;ui.consumerOnSignalRead(t);let e=ui.nextProducerIndex++;if(Ky(ui),e<ui.producerNode.length&&ui.producerNode[e]!==t&&Uf(ui)){let n=ui.producerNode[e];qy(n,ui.producerIndexOfThis[e])}ui.producerNode[e]!==t&&(ui.producerNode[e]=t,ui.producerIndexOfThis[e]=Uf(ui)?UP(t,ui,e):0),ui.producerLastReadVersion[e]=t.version}function zP(){cE++}function Jl(t){if(!(Uf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===cE)){if(!t.producerMustRecompute(t)&&!ec(t)){Qd(t);return}t.producerRecomputeValue(t),Qd(t)}}function dE(t){if(t.liveConsumerNode===void 0)return;let e=jy;jy=!0;try{for(let n of t.liveConsumerNode)n.dirty||R5(n)}finally{jy=e}}function uE(){return ui?.consumerAllowSignalWrites!==!1}function R5(t){t.dirty=!0,dE(t),t.consumerMarkedDirty?.(t)}function Qd(t){t.dirty=!1,t.lastCleanEpoch=cE}function Qo(t){return t&&(t.nextProducerIndex=0),ht(t)}function Gs(t,e){if(ht(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Uf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)qy(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ec(t){Ky(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(Jl(n),i!==n.version))return!0}return!1}function Jd(t){if(Ky(t),Uf(t))for(let e=0;e<t.producerNode.length;e++)qy(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function UP(t,e,n){if(GP(t),t.liveConsumerNode.length===0&&WP(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=UP(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function qy(t,e){if(GP(t),t.liveConsumerNode.length===1&&WP(t))for(let i=0;i<t.producerNode.length;i++)qy(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ky(r),r.producerIndexOfThis[i]=e}}function Uf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ky(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function GP(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function WP(t){return t.producerNode!==void 0}function Wf(t){M5?.(t)}function jf(t,e){let n=Object.create(D5);n.computation=t,e!==void 0&&(n.equal=e);let i=()=>{if(Jl(n),za(n),n.value===zs)throw n.error;return n.value};return i[Qn]=n,Wf(n),i}var Ha=Symbol("UNSET"),Ql=Symbol("COMPUTING"),zs=Symbol("ERRORED"),D5=ae(k({},Us),{value:Ha,dirty:!0,error:null,equal:Gf,kind:"computed",producerMustRecompute(t){return t.value===Ha||t.value===Ql},producerRecomputeValue(t){if(t.value===Ql)throw new Error("");let e=t.value;t.value=Ql;let n=Qo(t),i,r=!1;try{i=t.computation(),ht(null),r=e!==Ha&&e!==zs&&i!==zs&&t.equal(e,i)}catch(o){i=zs,t.error=o}finally{Gs(t,n)}if(r){t.value=e;return}t.value=i,t.version++}});function T5(){throw new Error}var jP=T5;function $P(t){jP(t)}function hE(t){jP=t}var A5=null;function fE(t,e){let n=Object.create($f);n.value=t,e!==void 0&&(n.equal=e);let i=()=>qP(n);return i[Qn]=n,Wf(n),[i,s=>tc(n,s),s=>Yy(n,s)]}function qP(t){return za(t),t.value}function tc(t,e){uE()||$P(t),t.equal(t.value,e)||(t.value=e,I5(t))}function Yy(t,e){uE()||$P(t),tc(t,e(t.value))}var $f=ae(k({},Us),{equal:Gf,value:void 0,kind:"signal"});function I5(t){t.version++,zP(),dE(t),A5?.(t)}function Ot(t){return typeof t=="function"}function eu(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Xy=eu(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function nc(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Kt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Ot(i))try{i()}catch(o){e=o instanceof Xy?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{KP(o)}catch(s){e=e??[],s instanceof Xy?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xy(e)}}add(e){var n;if(e&&e!==this)if(this.closed)KP(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&nc(n,e)}remove(e){let{_finalizers:n}=this;n&&nc(n,e),e instanceof t&&e._removeParent(this)}};Kt.EMPTY=(()=>{let t=new Kt;return t.closed=!0,t})();var pE=Kt.EMPTY;function Zy(t){return t instanceof Kt||t&&"closed"in t&&Ot(t.remove)&&Ot(t.add)&&Ot(t.unsubscribe)}function KP(t){Ot(t)?t():t.unsubscribe()}var yo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var tu={setTimeout(t,e,...n){let{delegate:i}=tu;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=tu;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Qy(t){tu.setTimeout(()=>{let{onUnhandledError:e}=yo;if(e)e(t);else throw t})}function qf(){}var YP=gE("C",void 0,void 0);function XP(t){return gE("E",void 0,t)}function ZP(t){return gE("N",t,void 0)}function gE(t,e,n){return{kind:t,value:e,error:n}}var ic=null;function nu(t){if(yo.useDeprecatedSynchronousErrorHandling){let e=!ic;if(e&&(ic={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=ic;if(ic=null,n)throw i}}else t()}function QP(t){yo.useDeprecatedSynchronousErrorHandling&&ic&&(ic.errorThrown=!0,ic.error=t)}var rc=class extends Kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zy(e)&&e.add(this)):this.destination=k5}static create(e,n,i){return new Ws(e,n,i)}next(e){this.isStopped?vE(ZP(e),this):this._next(e)}error(e){this.isStopped?vE(XP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vE(YP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},F5=Function.prototype.bind;function mE(t,e){return F5.call(t,e)}var yE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Jy(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Jy(i)}else Jy(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Jy(n)}}},Ws=class extends rc{constructor(e,n,i){super();let r;if(Ot(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&yo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&mE(e.next,o),error:e.error&&mE(e.error,o),complete:e.complete&&mE(e.complete,o)}):r=e}this.destination=new yE(r)}};function Jy(t){yo.useDeprecatedSynchronousErrorHandling?QP(t):Qy(t)}function P5(t){throw t}function vE(t,e){let{onStoppedNotification:n}=yo;n&&tu.setTimeout(()=>n(t,e))}var k5={closed:!0,next:qf,error:P5,complete:qf};var iu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function or(t){return t}function CE(...t){return bE(t)}function bE(t){return t.length===0?or:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Ct=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=L5(n)?n:new Ws(n,i,r);return nu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=JP(i),new i((r,o)=>{let s=new Ws({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[iu](){return this}pipe(...n){return bE(n)(this)}toPromise(n){return n=JP(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function JP(t){var e;return(e=t??yo.Promise)!==null&&e!==void 0?e:Promise}function O5(t){return t&&Ot(t.next)&&Ot(t.error)&&Ot(t.complete)}function L5(t){return t&&t instanceof rc||O5(t)&&Zy(t)}function wE(t){return Ot(t?.lift)}function St(t){return e=>{if(wE(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(t,e,n,i,r){return new _E(t,e,n,i,r)}var _E=class extends rc{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ru(){return St((t,e)=>{let n=null;t._refCount++;let i=bt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ou=class extends Ct{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,wE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Kt;let n=this.getSubject();e.add(this.source.subscribe(bt(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Kt.EMPTY)}return e}refCount(){return ru()(this)}};var ek=eu(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Qe=(()=>{class t extends Ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new eC(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new ek}next(n){nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?pE:(this.currentObservers=null,o.push(n),new Kt(()=>{this.currentObservers=null,nc(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Ct;return n.source=this,n}}return t.create=(e,n)=>new eC(e,n),t})(),eC=class extends Qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:pE}};var Jn=class extends Qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Kf={now(){return(Kf.delegate||Date).now()},delegate:void 0};var tC=class extends Qe{constructor(e=1/0,n=1/0,i=Kf){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var nC=class extends Kt{constructor(e,n){super()}schedule(e,n=0){return this}};var Yf={setInterval(t,e,...n){let{delegate:i}=Yf;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Yf;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var iC=class extends nC{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Yf.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Yf.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,nc(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var su=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};su.now=Kf.now;var rC=class extends su{constructor(e,n=su.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Xf=new rC(iC),tk=Xf;var Ui=new Ct(t=>t.complete());function oC(t){return t&&Ot(t.schedule)}function SE(t){return t[t.length-1]}function sC(t){return Ot(SE(t))?t.pop():void 0}function Jo(t){return oC(SE(t))?t.pop():void 0}function nk(t,e){return typeof SE(t)=="number"?t.pop():e}function rk(t,e,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{c(i.next(d))}catch(u){s(u)}}function l(d){try{c(i.throw(d))}catch(u){s(u)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function ik(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oc(t){return this instanceof oc?(this.v=t,this):new oc(t)}function ok(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(p){return Promise.resolve(p).then(f,u)}}function a(f,p){i[f]&&(r[f]=function(v){return new Promise(function(m,g){o.push([f,v,m,g])>1||l(f,v)})},p&&(r[f]=p(r[f])))}function l(f,p){try{c(i[f](p))}catch(v){h(o[0][3],v)}}function c(f){f.value instanceof oc?Promise.resolve(f.value.v).then(d,u):h(o[0][2],f)}function d(f){l("next",f)}function u(f){l("throw",f)}function h(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function sk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ik=="function"?ik(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var aC=t=>t&&typeof t.length=="number"&&typeof t!="function";function lC(t){return Ot(t?.then)}function cC(t){return Ot(t[iu])}function dC(t){return Symbol.asyncIterator&&Ot(t?.[Symbol.asyncIterator])}function uC(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function N5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hC=N5();function fC(t){return Ot(t?.[hC])}function pC(t){return ok(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield oc(n.read());if(r)return yield oc(void 0);yield yield oc(i)}}finally{n.releaseLock()}})}function gC(t){return Ot(t?.getReader)}function Cn(t){if(t instanceof Ct)return t;if(t!=null){if(cC(t))return B5(t);if(aC(t))return V5(t);if(lC(t))return H5(t);if(dC(t))return ak(t);if(fC(t))return z5(t);if(gC(t))return U5(t)}throw uC(t)}function B5(t){return new Ct(e=>{let n=t[iu]();if(Ot(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function V5(t){return new Ct(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function H5(t){return new Ct(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Qy)})}function z5(t){return new Ct(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ak(t){return new Ct(e=>{G5(t,e).catch(n=>e.error(n))})}function U5(t){return ak(pC(t))}function G5(t,e){var n,i,r,o;return rk(this,void 0,void 0,function*(){try{for(n=sk(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function br(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function mC(t,e=0){return St((n,i)=>{n.subscribe(bt(i,r=>br(i,t,()=>i.next(r),e),()=>br(i,t,()=>i.complete(),e),r=>br(i,t,()=>i.error(r),e)))})}function vC(t,e=0){return St((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function lk(t,e){return Cn(t).pipe(vC(e),mC(e))}function ck(t,e){return Cn(t).pipe(vC(e),mC(e))}function dk(t,e){return new Ct(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function uk(t,e){return new Ct(n=>{let i;return br(n,e,()=>{i=t[hC](),br(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>Ot(i?.return)&&i.return()})}function yC(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ct(n=>{br(n,e,()=>{let i=t[Symbol.asyncIterator]();br(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function hk(t,e){return yC(pC(t),e)}function fk(t,e){if(t!=null){if(cC(t))return lk(t,e);if(aC(t))return dk(t,e);if(lC(t))return ck(t,e);if(dC(t))return yC(t,e);if(fC(t))return uk(t,e);if(gC(t))return hk(t,e)}throw uC(t)}function En(t,e){return e?fk(t,e):Cn(t)}function Je(...t){let e=Jo(t);return En(t,e)}function Ua(t,e){let n=Ot(t)?t:()=>t,i=r=>r.error(n());return new Ct(e?r=>e.schedule(i,0,r):i)}function CC(t){return!!t&&(t instanceof Ct||Ot(t.lift)&&Ot(t.subscribe))}var Co=eu(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function xE(t,e){let n=typeof e=="object";return new Promise((i,r)=>{let o=!1,s;t.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?i(s):n?i(e.defaultValue):r(new Co)}})})}function pk(t){return t instanceof Date&&!isNaN(t)}function Ye(t,e){return St((n,i)=>{let r=0;n.subscribe(bt(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:W5}=Array;function j5(t,e){return W5(e)?t(...e):t(e)}function bC(t){return Ye(e=>j5(t,e))}var{isArray:$5}=Array,{getPrototypeOf:q5,prototype:K5,keys:Y5}=Object;function wC(t){if(t.length===1){let e=t[0];if($5(e))return{args:e,keys:null};if(X5(e)){let n=Y5(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function X5(t){return t&&typeof t=="object"&&q5(t)===K5}function _C(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function sc(...t){let e=Jo(t),n=sC(t),{args:i,keys:r}=wC(t);if(i.length===0)return En([],e);let o=new Ct(Z5(i,e,r?s=>_C(r,s):or));return n?o.pipe(bC(n)):o}function Z5(t,e,n=or){return i=>{gk(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)gk(e,()=>{let c=En(t[l],e),d=!1;c.subscribe(bt(i,u=>{o[l]=u,d||(d=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function gk(t,e,n){t?br(n,t,e):e()}function mk(t,e,n,i,r,o,s,a){let l=[],c=0,d=0,u=!1,h=()=>{u&&!l.length&&!c&&e.complete()},f=v=>c<i?p(v):l.push(v),p=v=>{o&&e.next(v),c++;let m=!1;Cn(n(v,d++)).subscribe(bt(e,g=>{r?.(g),o?f(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){let g=l.shift();s?br(e,s,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return t.subscribe(bt(e,f,()=>{u=!0,h()})),()=>{a?.()}}function ei(t,e,n=1/0){return Ot(e)?ei((i,r)=>Ye((o,s)=>e(i,o,r,s))(Cn(t(i,r))),n):(typeof e=="number"&&(n=e),St((i,r)=>mk(i,r,t,n)))}function Ga(t=1/0){return ei(or,t)}function vk(){return Ga(1)}function Wa(...t){return vk()(En(t,Jo(t)))}function ac(t){return new Ct(e=>{Cn(t()).subscribe(e)})}function lc(...t){let e=sC(t),{args:n,keys:i}=wC(t),r=new Ct(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let u=!1;Cn(n[d]).subscribe(bt(o,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||o.next(i?_C(i,a):a),o.complete())}))}});return e?r.pipe(bC(e)):r}function yk(t=0,e,n=tk){let i=-1;return e!=null&&(oC(e)?n=e:i=e),new Ct(r=>{let o=pk(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function js(...t){let e=Jo(t),n=nk(t,1/0),i=t;return i.length?i.length===1?Cn(i[0]):Ga(n)(En(i,e)):Ui}function tn(t,e){return St((n,i)=>{let r=0;n.subscribe(bt(i,o=>t.call(e,o,r++)&&i.next(o)))})}function Ck(t){return St((e,n)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,n.next(c)}s&&n.complete()},l=()=>{o=null,s&&n.complete()};e.subscribe(bt(n,c=>{i=!0,r=c,o||Cn(t(c)).subscribe(o=bt(n,a,l))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function SC(t,e=Xf){return Ck(()=>yk(t,e))}function bo(t){return St((e,n)=>{let i=null,r=!1,o;i=e.subscribe(bt(n,void 0,void 0,s=>{o=Cn(t(s,bo(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function bk(t,e,n,i,r){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(bt(s,d=>{let u=c++;l=a?t(l,d,u):(a=!0,d),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function es(t,e){return Ot(e)?ei(t,e,1):ei(t,1)}function cc(t,e=Xf){return St((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+t,d=e.now();if(d<c){r=this.schedule(void 0,c-d),i.add(r);return}a()}n.subscribe(bt(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function ja(t){return St((e,n)=>{let i=!1;e.subscribe(bt(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function sr(t){return t<=0?()=>Ui:St((e,n)=>{let i=0;e.subscribe(bt(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function xC(t,e=or){return t=t??Q5,St((n,i)=>{let r,o=!0;n.subscribe(bt(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function Q5(t,e){return t===e}function EC(t=J5){return St((e,n)=>{let i=!1;e.subscribe(bt(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function J5(){return new Co}function $s(t){return St((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function qs(t,e){let n=arguments.length>=2;return i=>i.pipe(t?tn((r,o)=>t(r,o,i)):or,sr(1),n?ja(e):EC(()=>new Co))}function au(t){return t<=0?()=>Ui:St((e,n)=>{let i=[];e.subscribe(bt(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function EE(t,e){let n=arguments.length>=2;return i=>i.pipe(t?tn((r,o)=>t(r,o,i)):or,au(1),n?ja(e):EC(()=>new Co))}function MC(){return St((t,e)=>{let n,i=!1;t.subscribe(bt(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function ME(t,e){return St(bk(t,e,arguments.length>=2,!0))}function Zf(t={}){let{connector:e=()=>new Qe,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,l,c=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,d=u=!1},p=()=>{let v=s;f(),v?.unsubscribe()};return St((v,m)=>{c++,!u&&!d&&h();let g=l=l??e();m.add(()=>{c--,c===0&&!u&&!d&&(a=RE(p,r))}),g.subscribe(m),!s&&c>0&&(s=new Ws({next:C=>g.next(C),error:C=>{u=!0,h(),a=RE(f,n,C),g.error(C)},complete:()=>{d=!0,h(),a=RE(f,i),g.complete()}}),Cn(v).subscribe(s))})(o)}}function RE(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Ws({next:()=>{i.unsubscribe(),t()}});return Cn(e(...n)).subscribe(i)}function RC(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,Zf({connector:()=>new tC(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Qf(t){return tn((e,n)=>t<=n)}function wo(...t){let e=Jo(t);return St((n,i)=>{(e?Wa(t,n,e):Wa(t,n)).subscribe(i)})}function $n(t,e){return St((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(bt(i,l=>{r?.unsubscribe();let c=0,d=o++;Cn(t(l,d)).subscribe(r=bt(i,u=>i.next(e?e(l,u,d,c++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function hi(t){return St((e,n)=>{Cn(t).subscribe(bt(n,()=>n.complete(),qf)),!n.closed&&e.subscribe(n)})}function DE(t,e=!1){return St((n,i)=>{let r=0;n.subscribe(bt(i,o=>{let s=t(o,r++);(s||e)&&i.next(o),!s&&i.complete()}))})}function on(t,e,n){let i=Ot(t)||e||n?{next:t,error:e,complete:n}:t;return i?St((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(bt(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):or}function TE(t,e,n){let i=Object.create(e7);i.source=t,i.computation=e,n!=null&&(i.equal=n);let o=()=>{if(Jl(i),za(i),i.value===zs)throw i.error;return i.value};return o[Qn]=i,Wf(i),o}function wk(t,e){Jl(t),tc(t,e),Qd(t)}function _k(t,e){Jl(t),Yy(t,e),Qd(t)}var e7=ae(k({},Us),{value:Ha,dirty:!0,error:null,equal:Gf,kind:"linkedSignal",producerMustRecompute(t){return t.value===Ha||t.value===Ql},producerRecomputeValue(t){if(t.value===Ql)throw new Error("");let e=t.value;t.value=Ql;let n=Qo(t),i;try{let r=t.source(),o=e===Ha||e===zs?void 0:{source:t.sourceValue,value:e};i=t.computation(r,o),t.sourceValue=r}catch(r){i=zs,t.error=r}finally{Gs(t,n)}if(e!==Ha&&i!==zs&&t.equal(e,i)){t.value=e;return}t.value=i,t.version++}});function Sk(t){let e=ht(null);try{return t()}finally{ht(e)}}var FC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Ie=class extends Error{code;constructor(e,n){super(qa(e,n)),this.code=e}};function t7(t){return`NG0${Math.abs(t)}`}function qa(t,e){return`${t7(t)}${e?": "+e:""}`}var cu=globalThis;function Pn(t){for(let e in t)if(t[e]===Pn)return e;throw Error("")}function Rk(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function wr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(wr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function PC(t,e){return t?e?`${t} ${e}`:t:e||""}var n7=Pn({__forward_ref__:Pn});function _o(t){return t.__forward_ref__=_o,t.toString=function(){return wr(this())},t}function Oi(t){return HE(t)?t():t}function HE(t){return typeof t=="function"&&t.hasOwnProperty(n7)&&t.__forward_ref__===_o}function Dk(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function le(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ft(t){return{providers:t.providers||[],imports:t.imports||[]}}function ip(t){return i7(t,kC)}function zE(t){return ip(t)!==null}function i7(t,e){return t.hasOwnProperty(e)&&t[e]||null}function r7(t){let e=t?.[kC]??null;return e||null}function IE(t){return t&&t.hasOwnProperty(TC)?t[TC]:null}var kC=Pn({\u0275prov:Pn}),TC=Pn({\u0275inj:Pn}),se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=le({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function UE(t){return t&&!!t.\u0275providers}var GE=Pn({\u0275cmp:Pn}),WE=Pn({\u0275dir:Pn}),jE=Pn({\u0275pipe:Pn}),$E=Pn({\u0275mod:Pn}),ep=Pn({\u0275fac:Pn}),gc=Pn({__NG_ELEMENT_ID__:Pn}),xk=Pn({__NG_ENV_ID__:Pn});function rp(t){return typeof t=="string"?t:t==null?"":String(t)}function Tk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():rp(t)}function qE(t,e){throw new Ie(-200,t)}function OC(t,e){throw new Ie(-201,!1)}var FE;function Ak(){return FE}function Pr(t){let e=FE;return FE=t,e}function KE(t,e,n){let i=ip(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(e!==void 0)return e;OC(t,"Injector")}var o7={},dc=o7,s7="__NG_DI_FLAG__",PE=class{injector;constructor(e){this.injector=e}retrieve(e,n){let i=uc(n)||0;try{return this.injector.get(e,i&8?null:dc,i)}catch(r){if(Zd(r))return r;throw r}}},AC="ngTempTokenPath",a7="ngTokenPath",l7=/\n/gm,c7="\u0275",Ek="__source";function d7(t,e=0){let n=lE();if(n===void 0)throw new Ie(-203,!1);if(n===null)return KE(t,void 0,e);{let i=u7(e),r=n.retrieve(t,i);if(Zd(r)){if(i.optional)return null;throw r}return r}}function je(t,e=0){return(Ak()||d7)(Oi(t),e)}function A(t,e){return je(t,uc(e))}function uc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function u7(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function kE(t){let e=[];for(let n=0;n<t.length;n++){let i=Oi(t[n]);if(Array.isArray(i)){if(i.length===0)throw new Ie(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=h7(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(je(r,o))}else e.push(je(i))}return e}function h7(t){return t[s7]}function f7(t,e,n,i){let r=t[AC];throw e[Ek]&&r.unshift(e[Ek]),t.message=p7(`
`+t.message,r,n,i),t[a7]=r,t[AC]=null,t}function p7(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==c7?t.slice(2):t;let r=wr(e);if(Array.isArray(e))r=e.map(wr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):wr(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(l7,`
  `)}`}function hc(t,e){let n=t.hasOwnProperty(ep);return n?t[ep]:null}function Ik(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Fk(t){return t.flat(Number.POSITIVE_INFINITY)}function LC(t,e){t.forEach(n=>Array.isArray(n)?LC(n,e):e(n))}function YE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function op(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Pk(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function kk(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function NC(t,e,n){let i=du(t,e);return i>=0?t[i|1]=n:(i=~i,kk(t,i,e,n)),i}function BC(t,e){let n=du(t,e);if(n>=0)return t[n|1]}function du(t,e){return g7(t,e,1)}function g7(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Ka={},Gi=[],ts=new se(""),XE=new se("",-1),ZE=new se(""),tp=class{get(e,n=dc){if(n===dc)throw new Wy(`NullInjectorError: No provider for ${wr(e)}!`);return n}};function QE(t){return t[$E]||null}function ns(t){return t[GE]||null}function JE(t){return t[WE]||null}function Ok(t){return t[jE]||null}function kr(t){return{\u0275providers:t}}function Lk(t){return kr([{provide:ts,multi:!0,useValue:t}])}function Nk(...t){return{\u0275providers:eM(!0,t),\u0275fromNgModule:!0}}function eM(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return LC(e,s=>{let a=s;IC(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Bk(r,o),n}function Bk(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];tM(r,o=>{e(o,i)})}}function IC(t,e,n,i){if(t=Oi(t),!t)return!1;let r=null,o=IE(t),s=!o&&ns(t);if(!o&&!s){let l=t.ngModule;if(o=IE(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)IC(c,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{LC(o.imports,d=>{IC(d,e,n,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&Bk(c,e)}if(!a){let c=hc(r)||(()=>new r);e({provide:r,useFactory:c,deps:Gi},r),e({provide:ZE,useValue:r,multi:!0},r),e({provide:ts,useValue:()=>je(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=t;tM(l,d=>{e(d,c)})}}else return!1;return r!==t&&t.providers!==void 0}function tM(t,e){for(let n of t)UE(n)&&(n=n.\u0275providers),Array.isArray(n)?tM(n,e):e(n)}var m7=Pn({provide:String,useValue:Pn});function Vk(t){return t!==null&&typeof t=="object"&&m7 in t}function v7(t){return!!(t&&t.useExisting)}function y7(t){return!!(t&&t.useFactory)}function fc(t){return typeof t=="function"}function Hk(t){return!!t.useClass}var sp=new se(""),DC={},Mk={},AE;function uu(){return AE===void 0&&(AE=new tp),AE}var bn=class{},pc=class extends bn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,LE(e,s=>this.processProvider(s)),this.records.set(XE,lu(void 0,this)),r.has("environment")&&this.records.set(bn,lu(void 0,this));let o=this.records.get(sp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ZE,Gi,{self:!0}))}retrieve(e,n){let i=uc(n)||0;try{return this.get(e,dc,i)}catch(r){if(Zd(r))return r;throw r}}destroy(){Jf(this),this._destroyed=!0;let e=ht(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ht(e)}}onDestroy(e){return Jf(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Jf(this);let n=Hs(this),i=Pr(void 0),r;try{return e()}finally{Hs(n),Pr(i)}}get(e,n=dc,i){if(Jf(this),e.hasOwnProperty(xk))return e[xk](this);let r=uc(i),o,s=Hs(this),a=Pr(void 0);try{if(!(r&4)){let c=this.records.get(e);if(c===void 0){let d=S7(e)&&ip(e);d&&this.injectableDefInScope(d)?c=lu(OE(e),DC):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let l=r&2?uu():this.parent;return n=r&8&&n===dc?null:n,l.get(e,n)}catch(l){if(Zd(l)){if((l[AC]=l[AC]||[]).unshift(wr(e)),s)throw l;return f7(l,e,"R3InjectorError",this.source)}else throw l}finally{Pr(a),Hs(s)}}resolveInjectorInitializers(){let e=ht(null),n=Hs(this),i=Pr(void 0),r;try{let o=this.get(ts,Gi,{self:!0});for(let s of o)s()}finally{Hs(n),Pr(i),ht(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(wr(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Oi(e);let n=fc(e)?e:Oi(e&&e.provide),i=b7(e);if(!fc(e)&&e.multi===!0){let r=this.records.get(n);r||(r=lu(void 0,DC,!0),r.factory=()=>kE(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=ht(null);try{return n.value===Mk?qE(wr(e)):n.value===DC&&(n.value=Mk,n.value=n.factory()),typeof n.value=="object"&&n.value&&_7(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ht(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Oi(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function OE(t){let e=ip(t),n=e!==null?e.factory:hc(t);if(n!==null)return n;if(t instanceof se)throw new Ie(204,!1);if(t instanceof Function)return C7(t);throw new Ie(204,!1)}function C7(t){if(t.length>0)throw new Ie(204,!1);let n=r7(t);return n!==null?()=>n.factory(t):()=>new t}function b7(t){if(Vk(t))return lu(void 0,t.useValue);{let e=nM(t);return lu(e,DC)}}function nM(t,e,n){let i;if(fc(t)){let r=Oi(t);return hc(r)||OE(r)}else if(Vk(t))i=()=>Oi(t.useValue);else if(y7(t))i=()=>t.useFactory(...kE(t.deps||[]));else if(v7(t))i=()=>je(Oi(t.useExisting));else{let r=Oi(t&&(t.useClass||t.provide));if(w7(t))i=()=>new r(...kE(t.deps));else return hc(r)||OE(r)}return i}function Jf(t){if(t.destroyed)throw new Ie(205,!1)}function lu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function w7(t){return!!t.deps}function _7(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function S7(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function LE(t,e){for(let n of t)Array.isArray(n)?LE(n,e):n&&UE(n)?LE(n.\u0275providers,e):e(n)}function xi(t,e){let n;t instanceof pc?(Jf(t),n=t):n=new PE(t);let i,r=Hs(n),o=Pr(void 0);try{return e()}finally{Hs(r),Pr(o)}}function iM(){return Ak()!==void 0||lE()!=null}function rM(t){if(!iM())throw new Ie(-203,!1)}var So=0,Mt=1,vt=2,fi=3,to=4,ar=5,mc=6,hu=7,ti=8,vc=9,is=10,Nn=11,fu=12,oM=13,yc=14,lr=15,Ya=16,Cc=17,rs=18,ap=19,sM=20,Ks=21,VC=22,Ys=23,Or=24,bc=25,pi=26,zk=1,aM=6,Xa=7,lp=8,wc=9,Ei=10;function os(t){return Array.isArray(t)&&typeof t[zk]=="object"}function xo(t){return Array.isArray(t)&&t[zk]===!0}function lM(t){return(t.flags&4)!==0}function Za(t){return t.componentOffset>-1}function HC(t){return(t.flags&1)===1}function ss(t){return!!t.template}function pu(t){return(t[vt]&512)!==0}function _c(t){return(t[vt]&256)===256}var cM="svg",Uk="math";function no(t){for(;Array.isArray(t);)t=t[So];return t}function dM(t,e){return no(e[t])}function Eo(t,e){return no(e[t.index])}function cp(t,e){return t.data[e]}function uM(t,e){return t[e]}function zC(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function io(t,e){let n=e[t];return os(n)?n:n[So]}function Gk(t){return(t[vt]&4)===4}function UC(t){return(t[vt]&128)===128}function Wk(t){return xo(t[fi])}function Xs(t,e){return e==null?null:t[e]}function hM(t){t[Cc]=0}function fM(t){t[vt]&1024||(t[vt]|=1024,UC(t)&&Qa(t))}function jk(t,e){for(;t>0;)e=e[yc],t--;return e}function dp(t){return!!(t[vt]&9216||t[Or]?.dirty)}function GC(t){t[is].changeDetectionScheduler?.notify(8),t[vt]&64&&(t[vt]|=1024),dp(t)&&Qa(t)}function Qa(t){t[is].changeDetectionScheduler?.notify(0);let e=$a(t);for(;e!==null&&!(e[vt]&8192||(e[vt]|=8192,!UC(e)));)e=$a(e)}function pM(t,e){if(_c(t))throw new Ie(911,!1);t[Ks]===null&&(t[Ks]=[]),t[Ks].push(e)}function $k(t,e){if(t[Ks]===null)return;let n=t[Ks].indexOf(e);n!==-1&&t[Ks].splice(n,1)}function $a(t){let e=t[fi];return xo(e)?e[fi]:e}function gM(t){return t[hu]??=[]}function mM(t){return t.cleanup??=[]}function qk(t,e,n,i){let r=gM(e);r.push(n),t.firstCreatePass&&mM(t).push(i,r.length-1)}var Ut={lFrame:a2(null),bindingsEnabled:!0,skipHydrationRootTNode:null},up=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(up||{}),x7=0,NE=!1;function Kk(){return Ut.lFrame.elementDepthCount}function Yk(){Ut.lFrame.elementDepthCount++}function Xk(){Ut.lFrame.elementDepthCount--}function vM(){return Ut.bindingsEnabled}function yM(){return Ut.skipHydrationRootTNode!==null}function Zk(t){return Ut.skipHydrationRootTNode===t}function Qk(){Ut.skipHydrationRootTNode=null}function At(){return Ut.lFrame.lView}function Bn(){return Ut.lFrame.tView}function wn(t){return Ut.lFrame.contextLView=t,t[ti]}function _n(t){return Ut.lFrame.contextLView=null,t}function Wi(){let t=CM();for(;t!==null&&t.type===64;)t=t.parent;return t}function CM(){return Ut.lFrame.currentTNode}function Jk(){let t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Sc(t,e){let n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function bM(){return Ut.lFrame.isParent}function wM(){Ut.lFrame.isParent=!1}function _M(){return Ut.lFrame.contextLView}function SM(t){Dk("Must never be called in production mode"),x7=t}function xM(){return NE}function gu(t){let e=NE;return NE=t,e}function e2(){let t=Ut.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function t2(t){return Ut.lFrame.bindingIndex=t}function xc(){return Ut.lFrame.bindingIndex++}function EM(t){let e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function n2(){return Ut.lFrame.inI18n}function i2(t,e){let n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,WC(e)}function r2(){return Ut.lFrame.currentDirectiveIndex}function WC(t){Ut.lFrame.currentDirectiveIndex=t}function o2(t){let e=Ut.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function jC(){return Ut.lFrame.currentQueryIndex}function hp(t){Ut.lFrame.currentQueryIndex=t}function E7(t){let e=t[Mt];return e.type===2?e.declTNode:e.type===1?t[ar]:null}function MM(t,e,n){if(n&4){let r=e,o=t;for(;r=r.parent,r===null&&!(n&1);)if(r=E7(o),r===null||(o=o[yc],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Ut.lFrame=s2();return i.currentTNode=e,i.lView=t,!0}function $C(t){let e=s2(),n=t[Mt];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function s2(){let t=Ut.lFrame,e=t===null?null:t.child;return e===null?a2(t):e}function a2(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function l2(){let t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var RM=l2;function qC(){let t=l2();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function c2(t){return(Ut.lFrame.contextLView=jk(t,Ut.lFrame.contextLView))[ti]}function as(){return Ut.lFrame.selectedIndex}function Ja(t){Ut.lFrame.selectedIndex=t}function KC(){let t=Ut.lFrame;return cp(t.tView,t.selectedIndex)}function Ec(){Ut.lFrame.currentNamespace=cM}function fp(){M7()}function M7(){Ut.lFrame.currentNamespace=null}function d2(){return Ut.lFrame.currentNamespace}var u2=!0;function YC(){return u2}function XC(t){u2=t}function BE(t,e=null,n=null,i){let r=DM(t,e,n,i);return r.resolveInjectorInitializers(),r}function DM(t,e=null,n=null,i,r=new Set){let o=[n||Gi,Nk(t)];return i=i||(typeof t=="object"?void 0:wr(t)),new pc(o,e||uu(),i||null,r)}var xt=class t{static THROW_IF_NOT_FOUND=dc;static NULL=new tp;static create(e,n){if(Array.isArray(e))return BE({name:""},n,e,"");{let i=e.name??"";return BE({name:i},e.parent,e.providers,i)}}static \u0275prov=le({token:t,providedIn:"any",factory:()=>je(XE)});static __NG_ELEMENT_ID__=-1},lt=new se(""),Li=(()=>{class t{static __NG_ELEMENT_ID__=R7;static __NG_ENV_ID__=n=>n}return t})(),np=class extends Li{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _c(this._lView)}onDestroy(e){let n=this._lView;return pM(n,e),()=>$k(n,e)}};function R7(){return new np(At())}var Si=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Lr=new se("",{providedIn:"root",factory:()=>{let t=A(bn),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Si),e.handleError(n))}}}),h2={provide:ts,useValue:()=>void A(Si),multi:!0},D7=new se("",{providedIn:"root",factory:()=>{let t=A(lt).defaultView;if(!t)return;let e=A(Lr),n=o=>{e(o.reason),o.preventDefault()},i=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},r=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),A(Li).onDestroy(()=>{t.removeEventListener("error",i),t.removeEventListener("unhandledrejection",n)})}});function TM(){return kr([Lk(()=>void A(D7))])}function Zs(t){return typeof t=="function"&&t[Qn]!==void 0}function It(t,e){let[n,i,r]=fE(t,e?.equal),o=n,s=o[Qn];return o.set=i,o.update=r,o.asReadonly=pp.bind(o),o}function pp(){let t=this[Qn];if(t.readonlyFn===void 0){let e=()=>this();e[Qn]=t,t.readonlyFn=e}return t.readonlyFn}var eo=class{},mu=new se("",{providedIn:"root",factory:()=>!1});var AM=new se(""),IM=new se("");var Mc=(()=>{class t{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=T7}return t})();function T7(){return new Mc(At(),Wi())}var Qs=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Jn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ct(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),vu=(()=>{class t{internalPendingTasks=A(Qs);scheduler=A(eo);errorHandler=A(Lr);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let i=this.add();n().catch(this.errorHandler).finally(i)}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})();function Rc(...t){}var gp=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new VE})}return t})(),VE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,i=this.queues.get(n);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,i]of this.queues)n===null?e||=this.flushQueue(i):e||=n.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}};function Ep(t){return{toString:t}.toString()}function O7(t){return typeof t=="function"}var rb=class{previousValue;currentValue;firstChange;constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function $2(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}var gi=(()=>{let t=()=>q2;return t.ngInherit=!0,t})();function q2(t){return t.type.prototype.ngOnChanges&&(t.setInput=N7),L7}function L7(){let t=Y2(this),e=t?.current;if(e){let n=t.previous;if(n===Ka)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function N7(t,e,n,i,r){let o=this.declaredInputs[i],s=Y2(t)||B7(t,{previous:Ka,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new rb(c&&c.currentValue,n,l===Ka),$2(t,e,r,n)}var K2="__ngSimpleChanges__";function Y2(t){return t[K2]||null}function B7(t,e){return t[K2]=e}var f2=[];var hn=function(t,e=null,n){for(let i=0;i<f2.length;i++){let r=f2[i];r(t,e,n)}};function V7(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=q2(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function X2(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function eb(t,e,n){Z2(t,e,3,n)}function tb(t,e,n,i){(t[vt]&3)===n&&Z2(t,e,n,i)}function FM(t,e){let n=t[vt];(n&3)===e&&(n&=16383,n+=1,t[vt]=n)}function Z2(t,e,n,i){let r=i!==void 0?t[Cc]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[Cc]+=65536),(a<o||o==-1)&&(H7(t,n,e,l),t[Cc]=(t[Cc]&4294901760)+l+2),l++}function p2(t,e){hn(4,t,e);let n=ht(null);try{e.call(t)}finally{ht(n),hn(5,t,e)}}function H7(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[vt]>>14<t[Cc]>>16&&(t[vt]&3)===e&&(t[vt]+=16384,p2(a,o)):p2(a,o)}var Cu=-1,Tc=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,i){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=i}};function z7(t){return(t.flags&8)!==0}function U7(t){return(t.flags&16)!==0}function G7(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];W7(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function Q2(t){return t===3||t===4||t===6}function W7(t){return t.charCodeAt(0)===64}function yp(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?g2(t,n,r,null,e[++i]):g2(t,n,r,null,null))}}return t}function g2(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){r!==null&&(t[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r)}function J2(t){return t!==Cu}function ob(t){return t&32767}function j7(t){return t>>16}function sb(t,e){let n=j7(t),i=e;for(;n>0;)i=i[yc],n--;return i}var GM=!0;function m2(t){let e=GM;return GM=t,e}var $7=256,e3=$7-1,t3=5,q7=0,ls={};function K7(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(gc)&&(i=n[gc]),i==null&&(i=n[gc]=q7++);let r=i&e3,o=1<<r;e.data[t+(r>>t3)]|=o}function ab(t,e){let n=n3(t,e);if(n!==-1)return n;let i=e[Mt];i.firstCreatePass&&(t.injectorIndex=e.length,PM(i.data,t),PM(e,null),PM(i.blueprint,null));let r=R1(t,e),o=t.injectorIndex;if(J2(r)){let s=ob(r),a=sb(r,e),l=a[Mt].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function PM(t,e){t.push(0,0,0,0,0,0,0,0,e)}function n3(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function R1(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=a3(r),i===null)return Cu;if(n++,r=r[yc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Cu}function WM(t,e,n){K7(t,e,n)}function Y7(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let o=n[r];if(Q2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(o===e)return n[r+1];r=r+2}}}return null}function i3(t,e,n){if(n&8||t!==void 0)return t;OC(e,"NodeInjector")}function r3(t,e,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let r=t[vc],o=Pr(void 0);try{return r?r.get(e,i,n&8):KE(e,i,n&8)}finally{Pr(o)}}return i3(i,e,n)}function o3(t,e,n,i=0,r){if(t!==null){if(e[vt]&2048&&!(i&2)){let s=J7(t,e,n,i,ls);if(s!==ls)return s}let o=s3(t,e,n,i,ls);if(o!==ls)return o}return r3(e,n,i,r)}function s3(t,e,n,i,r){let o=Z7(n);if(typeof o=="function"){if(!MM(e,t,i))return i&1?i3(r,n,i):r3(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&8))OC(n);else return s}finally{RM()}}else if(typeof o=="number"){let s=null,a=n3(t,e),l=Cu,c=i&1?e[lr][ar]:null;for((a===-1||i&4)&&(l=a===-1?R1(t,e):e[a+8],l===Cu||!y2(i,!1)?a=-1:(s=e[Mt],a=ob(l),e=sb(l,e)));a!==-1;){let d=e[Mt];if(v2(o,a,d.data)){let u=X7(a,e,n,s,i,c);if(u!==ls)return u}l=e[a+8],l!==Cu&&y2(i,e[Mt].data[a+8]===c)&&v2(o,a,e)?(s=d,a=ob(l),e=sb(l,e)):a=-1}}return r}function X7(t,e,n,i,r,o){let s=e[Mt],a=s.data[t+8],l=i==null?Za(a)&&GM:i!=s&&(a.type&3)!==0,c=r&1&&o===a,d=nb(a,s,n,l,c);return d!==null?Cp(e,s,d,a):ls}function nb(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,d=o>>20,u=i?a:a+d,h=r?a+d:c;for(let f=u;f<h;f++){let p=s[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(r){let f=s[l];if(f&&ss(f)&&f.type===n)return l}return null}function Cp(t,e,n,i){let r=t[n],o=e.data;if(r instanceof Tc){let s=r;s.resolving&&qE(Tk(o[n]));let a=m2(s.canSeeViewProviders);s.resolving=!0;let l=o[n].type||o[n],c,d=s.injectImpl?Pr(s.injectImpl):null,u=MM(t,i,0);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&V7(n,o[n],e)}finally{d!==null&&Pr(d),m2(a),s.resolving=!1,RM()}}return r}function Z7(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(gc)?t[gc]:void 0;return typeof e=="number"?e>=0?e&e3:Q7:e}function v2(t,e,n){let i=1<<t;return!!(n[e+(t>>t3)]&i)}function y2(t,e){return!(t&2)&&!(t&1&&e)}var Dc=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return o3(this._tNode,this._lView,e,uc(i),n)}};function Q7(){return new Dc(Wi(),At())}function ji(t){return Ep(()=>{let e=t.prototype.constructor,n=e[ep]||jM(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[ep]||jM(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function jM(t){return HE(t)?()=>{let e=jM(Oi(t));return e&&e()}:hc(t)}function J7(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[vt]&2048&&!pu(s);){let a=s3(o,s,n,i|2,ls);if(a!==ls)return a;let l=o.parent;if(!l){let c=s[sM];if(c){let d=c.get(n,ls,i);if(d!==ls)return d}l=a3(s),s=s[yc]}o=l}return r}function a3(t){let e=t[Mt],n=e.type;return n===2?e.declTNode:n===1?t[ar]:null}function wb(t){return Y7(Wi(),t)}function eW(){return Su(Wi(),At())}function Su(t,e){return new dt(Eo(t,e))}var dt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=eW}return t})();function l3(t){return t instanceof dt?t.nativeElement:t}function tW(){return this._results[Symbol.iterator]()}var Ac=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Qe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=Fk(e);(this._changesDetected=!Ik(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=tW};function c3(t){return(t.flags&128)===128}var D1=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(D1||{}),d3=new Map,nW=0;function iW(){return nW++}function rW(t){d3.set(t[ap],t)}function $M(t){d3.delete(t[ap])}var C2="__ngContext__";function Mp(t,e){os(e)?(t[C2]=e[ap],rW(e)):t[C2]=e}function u3(t){return f3(t[fu])}function h3(t){return f3(t[to])}function f3(t){for(;t!==null&&!xo(t);)t=t[to];return t}var qM;function T1(t){qM=t}function p3(){if(qM!==void 0)return qM;if(typeof document<"u")return document;throw new Ie(210,!1)}var xu=new se("",{providedIn:"root",factory:()=>oW}),oW="ng",_b=new se(""),il=new se("",{providedIn:"platform",factory:()=>"unknown"});var Rp=new se(""),Eu=new se("",{providedIn:"root",factory:()=>p3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sW="h",aW="b";var g3="r";var m3="di";var v3=!1,y3=new se("",{providedIn:"root",factory:()=>v3});var lW=(t,e,n,i)=>{};function cW(t,e,n,i){lW(t,e,n,i)}var dW=()=>null;function C3(t,e,n=!1){return dW(t,e,n)}function b3(t,e){let n=t.contentQueries;if(n!==null){let i=ht(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];hp(o),a.contentQueries(2,e[s],s)}}}finally{ht(i)}}}function KM(t,e,n){hp(0);let i=ht(null);try{e(t,n)}finally{ht(i)}}function w3(t,e,n){if(lM(e)){let i=ht(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{ht(i)}}}var Js=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Js||{}),ZC;function uW(){if(ZC===void 0&&(ZC=null,cu.trustedTypes))try{ZC=cu.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ZC}function Sb(t){return uW()?.createHTML(t)||t}var ea=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FC})`}},YM=class extends ea{getTypeName(){return"HTML"}},XM=class extends ea{getTypeName(){return"Style"}},ZM=class extends ea{getTypeName(){return"Script"}},QM=class extends ea{getTypeName(){return"URL"}},JM=class extends ea{getTypeName(){return"ResourceURL"}};function Do(t){return t instanceof ea?t.changingThisBreaksApplicationSecurity:t}function rl(t,e){let n=_3(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${FC})`)}return n===e}function _3(t){return t instanceof ea&&t.getTypeName()||null}function A1(t){return new YM(t)}function I1(t){return new XM(t)}function F1(t){return new ZM(t)}function P1(t){return new QM(t)}function k1(t){return new JM(t)}function hW(t){let e=new t1(t);return fW()?new e1(e):e}var e1=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Sb(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},t1=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Sb(e),n}};function fW(){try{return!!new window.DOMParser().parseFromString(Sb(""),"text/html")}catch{return!1}}var pW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dp(t){return t=String(t),t.match(pW)?t:"unsafe:"+t}function na(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Tp(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var S3=na("area,br,col,hr,img,wbr"),x3=na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),E3=na("rp,rt"),gW=Tp(E3,x3),mW=Tp(x3,na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vW=Tp(E3,na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),b2=Tp(S3,mW,vW,gW),M3=na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yW=na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),CW=na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),bW=Tp(M3,yW,CW),wW=na("script,style,template"),n1=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,i=!0,r=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){r.push(n),n=xW(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=SW(n);if(o){n=o;break}n=r.pop()}}return this.buf.join("")}startElement(e){let n=w2(e).toLowerCase();if(!b2.hasOwnProperty(n))return this.sanitizedSomething=!0,!wW.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!bW.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;M3[a]&&(l=Dp(l)),this.buf.push(" ",s,'="',_2(l),'"')}return this.buf.push(">"),!0}endElement(e){let n=w2(e).toLowerCase();b2.hasOwnProperty(n)&&!S3.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(_2(e))}};function _W(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function SW(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw R3(e);return e}function xW(t){let e=t.firstChild;if(e&&_W(t,e))throw R3(e);return e}function w2(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function R3(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var EW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,MW=/([^\#-~ |!])/g;function _2(t){return t.replace(/&/g,"&amp;").replace(EW,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(MW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var QC;function O1(t,e){let n=null;try{QC=QC||hW(t);let i=e?String(e):"";n=QC.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=QC.getInertBodyElement(i)}while(i!==o);let a=new n1().sanitizeChildren(S2(n)||n);return Sb(a)}finally{if(n){let i=S2(n)||n;for(;i.firstChild;)i.firstChild.remove()}}}function S2(t){return"content"in t&&RW(t)?t.content:null}function RW(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var $i=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}($i||{});function Fc(t){let e=DW();return e?e.sanitize($i.URL,t)||"":rl(t,"URL")?Do(t):Dp(rp(t))}function DW(){let t=At();return t&&t[is].sanitizer}function D3(t){return t instanceof Function?t():t}function TW(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}var T3="ng-template";function AW(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&TW(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(L1(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function L1(t){return t.type===4&&t.value!==T3}function IW(t,e,n){let i=t.type===4&&!n?T3:t.value;return e===i}function FW(t,e,n){let i=4,r=t.attrs,o=r!==null?OW(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Mo(i)&&!Mo(l))return!1;if(s&&Mo(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!IW(t,l,n)||l===""&&e.length===1){if(Mo(i))return!1;s=!0}}else if(i&8){if(r===null||!AW(t,r,l,n)){if(Mo(i))return!1;s=!0}}else{let c=e[++a],d=PW(l,r,L1(t),n);if(d===-1){if(Mo(i))return!1;s=!0;continue}if(c!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),i&2&&c!==u){if(Mo(i))return!1;s=!0}}}}return Mo(i)||s}function Mo(t){return(t&1)===0}function PW(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return LW(e,t)}function A3(t,e,n=!1){for(let i=0;i<e.length;i++)if(FW(t,e[i],n))return!0;return!1}function kW(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function OW(t){for(let e=0;e<t.length;e++){let n=t[e];if(Q2(n))return e}return t.length}function LW(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function NW(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function x2(t,e){return t?":not("+e.trim()+")":e}function BW(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Mo(s)&&(e+=x2(o,r),r=""),i=s,o=o||!Mo(i);n++}return r!==""&&(e+=x2(o,r)),e}function VW(t){return t.map(BW).join(",")}function HW(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Mo(r))break;r=o}i++}return n.length&&e.push(1,...n),e}var ro={};function zW(t,e){return t.createText(e)}function UW(t,e,n){t.setValue(e,n)}function I3(t,e,n){return t.createElement(e,n)}function lb(t,e,n,i,r){t.insertBefore(e,n,i,r)}function F3(t,e,n){t.appendChild(e,n)}function E2(t,e,n,i,r){i!==null?lb(t,e,n,i,r):F3(t,e,n)}function P3(t,e,n){t.removeChild(null,e,n)}function GW(t,e,n){t.setAttribute(e,"style",n)}function WW(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function k3(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&G7(t,e,i),r!==null&&WW(t,e,r),o!==null&&GW(t,e,o)}function N1(t,e,n,i,r,o,s,a,l,c,d){let u=pi+i,h=u+r,f=jW(u,h),p=typeof c=="function"?c():c;return f[Mt]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:d}}function jW(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:ro);return n}function $W(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=N1(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function B1(t,e,n,i,r,o,s,a,l,c,d){let u=e.blueprint.slice();return u[So]=r,u[vt]=i|4|128|8|64|1024,(c!==null||t&&t[vt]&2048)&&(u[vt]|=2048),hM(u),u[fi]=u[yc]=t,u[ti]=n,u[is]=s||t&&t[is],u[Nn]=a||t&&t[Nn],u[vc]=l||t&&t[vc]||null,u[ar]=o,u[ap]=iW(),u[mc]=d,u[sM]=c,u[lr]=e.type==2?t[lr]:u,u}function qW(t,e,n){let i=Eo(e,t),r=$W(n),o=t[is].rendererFactory,s=V1(t,B1(t,r,null,O3(n),i,e,null,o.createRenderer(i,n),null,null,null));return t[e.index]=s}function O3(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function L3(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function V1(t,e){return t[fu]?t[oM][to]=e:t[fu]=e,t[oM]=e,e}function ze(t=1){N3(Bn(),At(),as()+t,!1)}function N3(t,e,n,i){if(!i)if((e[vt]&3)===3){let o=t.preOrderCheckHooks;o!==null&&eb(e,o,n)}else{let o=t.preOrderHooks;o!==null&&tb(e,o,0,n)}Ja(n)}var xb=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(xb||{});function i1(t,e,n,i){let r=ht(null);try{let[o,s,a]=t.inputs[n],l=null;(s&xb.SignalBased)!==0&&(l=e[o][Qn]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),t.setInput!==null?t.setInput(e,l,i,n,o):$2(e,l,o,i)}finally{ht(r)}}function B3(t,e,n,i,r){let o=as(),s=i&2;try{Ja(-1),s&&e.length>pi&&N3(t,e,pi,!1),hn(s?2:0,r,n),n(i,r)}finally{Ja(o),hn(s?3:1,r,n)}}function H1(t,e,n){e9(t,e,n),(n.flags&64)===64&&t9(t,e,n)}function V3(t,e,n=Eo){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function KW(t,e,n,i){let o=i.get(y3,v3)||n===Js.ShadowDom,s=t.selectRootElement(e,o);return YW(s),s}function YW(t){XW(t)}var XW=()=>null;function ZW(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function QW(t,e,n,i,r,o){let s=e[Mt];if(z1(t,s,e,n,i)){Za(t)&&JW(e,t.index);return}H3(t,e,n,i,r,o)}function H3(t,e,n,i,r,o){if(t.type&3){let s=Eo(t,e);n=ZW(n),i=o!=null?o(i,t.value||"",n):i,r.setProperty(s,n,i)}else t.type&12}function JW(t,e){let n=io(e,t);n[vt]&16||(n[vt]|=64)}function e9(t,e,n){let i=n.directiveStart,r=n.directiveEnd;Za(n)&&qW(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ab(n,e);let o=n.initialInputs;for(let s=i;s<r;s++){let a=t.data[s],l=Cp(e,t,s,n);if(Mp(l,e),o!==null&&o9(e,s-i,l,a,n,o),ss(a)){let c=io(n.index,e);c[ti]=Cp(e,t,s,n)}}}function t9(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=r2();try{Ja(o);for(let a=i;a<r;a++){let l=t.data[a],c=e[a];WC(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&n9(l,c)}}finally{Ja(-1),WC(s)}}function n9(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function z3(t,e){let n=t.directiveRegistry,i=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];A3(e,o.selectors,!1)&&(i??=[],ss(o)?i.unshift(o):i.push(o))}return i}function i9(t,e,n,i,r,o){let s=Eo(t,e);r9(e[Nn],s,o,t.value,n,i,r)}function r9(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?rp(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function o9(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];i1(i,n,l,c)}}function s9(t,e){let n=t[vc];if(!n)return;n.get(Lr,null)?.(e)}function z1(t,e,n,i,r){let o=t.inputs?.[i],s=t.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1],u=e.data[c];i1(u,n[c],d,r),a=!0}if(o)for(let l of o){let c=n[l],d=e.data[l];i1(d,c,i,r),a=!0}return a}function a9(t,e){let n=io(e,t),i=n[Mt];l9(i,n);let r=n[So];r!==null&&n[mc]===null&&(n[mc]=C3(r,n[vc])),hn(18),U1(i,n,n[ti]),hn(19,n[ti])}function l9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function U1(t,e,n){$C(e);try{let i=t.viewQuery;i!==null&&KM(1,i,n);let r=t.template;r!==null&&B3(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[rs]?.finishViewCreation(t),t.staticContentQueries&&b3(t,e),t.staticViewQueries&&KM(2,t.viewQuery,n);let o=t.components;o!==null&&c9(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[vt]&=-5,qC()}}function c9(t,e){for(let n=0;n<e.length;n++)a9(t,e[n])}function Ap(t,e,n,i){let r=ht(null);try{let o=e.tView,a=t[vt]&4096?4096:16,l=B1(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[e.index];l[Ya]=c;let d=t[rs];return d!==null&&(l[rs]=d.createEmbeddedView(o)),U1(o,l,n),l}finally{ht(r)}}function bu(t,e){return!e||e.firstChild===null||c3(t)}var M2=!1,d9=new se(""),u9;function G1(t,e){return u9(t,e)}var ta=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ta||{});function Eb(t){return(t.flags&32)===32}function yu(t,e,n,i,r){if(i!=null){let o,s=!1;xo(i)?o=i:os(i)&&(s=!0,i=i[So]);let a=no(i);t===0&&n!==null?r==null?F3(e,n,a):lb(e,n,a,r||null,!0):t===1&&n!==null?lb(e,n,a,r||null,!0):t===2?P3(e,a,s):t===3&&e.destroyNode(a),o!=null&&w9(e,t,o,n,r)}}function h9(t,e){U3(t,e),e[So]=null,e[ar]=null}function f9(t,e,n,i,r,o){i[So]=r,i[ar]=e,Rb(t,i,n,1,r,o)}function U3(t,e){e[is].changeDetectionScheduler?.notify(9),Rb(t,e,e[Nn],2,null,null)}function p9(t){let e=t[fu];if(!e)return kM(t[Mt],t);for(;e;){let n=null;if(os(e))n=e[fu];else{let i=e[Ei];i&&(n=i)}if(!n){for(;e&&!e[to]&&e!==t;)os(e)&&kM(e[Mt],e),e=e[fi];e===null&&(e=t),os(e)&&kM(e[Mt],e),n=e&&e[to]}e=n}}function W1(t,e){let n=t[wc],i=n.indexOf(e);n.splice(i,1)}function Mb(t,e){if(_c(e))return;let n=e[Nn];n.destroyNode&&Rb(t,e,n,3,null,null),p9(e)}function kM(t,e){if(_c(e))return;let n=ht(null);try{e[vt]&=-129,e[vt]|=256,e[Or]&&Jd(e[Or]),m9(t,e),g9(t,e),e[Mt].type===1&&e[Nn].destroy();let i=e[Ya];if(i!==null&&xo(e[fi])){i!==e[fi]&&W1(i,e);let r=e[rs];r!==null&&r.detachView(t)}$M(e)}finally{ht(n)}}function g9(t,e){let n=t.cleanup,i=e[hu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[n[s+1]];n[s].call(a)}i!==null&&(e[hu]=null);let r=e[Ks];if(r!==null){e[Ks]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[Ys];if(o!==null){e[Ys]=null;for(let s of o)s.destroy()}}function m9(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Tc)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];hn(4,a,l);try{l.call(a)}finally{hn(5,a,l)}}else{hn(4,r,o);try{o.call(r)}finally{hn(5,r,o)}}}}}function G3(t,e,n){return v9(t,e.parent,n)}function v9(t,e,n){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return n[So];if(Za(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===Js.None||r===Js.Emulated)return null}return Eo(i,n)}function W3(t,e,n){return C9(t,e,n)}function y9(t,e,n){return t.type&40?Eo(t,n):null}var C9=y9,R2;function j1(t,e,n,i){let r=G3(t,i,e),o=e[Nn],s=i.parent||e[ar],a=W3(s,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)E2(o,r,n[l],a,!1);else E2(o,r,n,a,!1);R2!==void 0&&R2(o,i,e,n,r)}function mp(t,e){if(e!==null){let n=e.type;if(n&3)return Eo(e,t);if(n&4)return r1(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return mp(t,i);{let r=t[e.index];return xo(r)?r1(-1,r):no(r)}}else{if(n&128)return mp(t,e.next);if(n&32)return G1(e,t)()||no(t[e.index]);{let i=j3(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=$a(t[lr]);return mp(r,i)}else return mp(t,e.next)}}}return null}function j3(t,e){if(e!==null){let i=t[lr][ar],r=e.projection;return i.projection[r]}return null}function r1(t,e){let n=Ei+t+1;if(n<e.length){let i=e[n],r=i[Mt].firstChild;if(r!==null)return mp(i,r)}return e[Xa]}function $1(t,e,n,i,r,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=i[n.index],l=n.type;if(s&&e===0&&(a&&Mp(no(a),i),n.flags|=2),!Eb(n))if(l&8)$1(t,e,n.child,i,r,o,!1),yu(e,t,r,a,o);else if(l&32){let c=G1(n,i),d;for(;d=c();)yu(e,t,r,d,o);yu(e,t,r,a,o)}else l&16?$3(t,e,i,n,r,o):yu(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Rb(t,e,n,i,r,o){$1(n,i,t.firstChild,e,r,o,!1)}function b9(t,e,n){let i=e[Nn],r=G3(t,n,e),o=n.parent||e[ar],s=W3(o,n,e);$3(i,0,e,n,r,s)}function $3(t,e,n,i,r,o){let s=n[lr],l=s[ar].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];yu(e,t,r,d,o)}else{let c=l,d=s[fi];c3(i)&&(c.flags|=128),$1(t,e,c,d,r,o,!0)}}function w9(t,e,n,i,r){let o=n[Xa],s=no(n);o!==s&&yu(e,t,i,o,r);for(let a=Ei;a<n.length;a++){let l=n[a];Rb(l[Mt],l,t,e,i,o)}}function _9(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:ta.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ta.Important),t.setStyle(n,i,r,o))}}function bp(t,e,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&i.push(no(o)),xo(o)&&q3(o,i);let s=n.type;if(s&8)bp(t,e,n.child,i);else if(s&32){let a=G1(n,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=j3(e,n);if(Array.isArray(a))i.push(...a);else{let l=$a(e[lr]);bp(l[Mt],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function q3(t,e){for(let n=Ei;n<t.length;n++){let i=t[n],r=i[Mt].firstChild;r!==null&&bp(i[Mt],i,r,e)}t[Xa]!==t[So]&&e.push(t[Xa])}function K3(t){if(t[bc]!==null){for(let e of t[bc])e.impl.addSequence(e);t[bc].length=0}}var Y3=[];function S9(t){return t[Or]??x9(t)}function x9(t){let e=Y3.pop()??Object.create(M9);return e.lView=t,e}function E9(t){t.lView[Or]!==t&&(t.lView=null,Y3.push(t))}var M9=ae(k({},Us),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Qa(t.lView)},consumerOnSignalRead(){this.lView[Or]=this}});function R9(t){let e=t[Or]??Object.create(D9);return e.lView=t,e}var D9=ae(k({},Us),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=$a(t.lView);for(;e&&!X3(e[Mt]);)e=$a(e);e&&fM(e)},consumerOnSignalRead(){this.lView[Or]=this}});function X3(t){return t.type!==2}function Z3(t){if(t[Ys]===null)return;let e=!0;for(;e;){let n=!1;for(let i of t[Ys])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=n&&!!(t[vt]&8192)}}var T9=100;function q1(t,e=0){let i=t[is].rendererFactory,r=!1;r||i.begin?.();try{A9(t,e)}finally{r||i.end?.()}}function A9(t,e){let n=xM();try{gu(!0),o1(t,e);let i=0;for(;dp(t);){if(i===T9)throw new Ie(103,!1);i++,o1(t,1)}}finally{gu(n)}}function Q3(t,e){SM(e?up.Exhaustive:up.OnlyDirtyViews);try{q1(t)}finally{SM(up.Off)}}function I9(t,e,n,i){if(_c(e))return;let r=e[vt],o=!1,s=!1;$C(e);let a=!0,l=null,c=null;o||(X3(t)?(c=S9(e),l=Qo(c)):$y()===null?(a=!1,c=R9(e),l=Qo(c)):e[Or]&&(Jd(e[Or]),e[Or]=null));try{hM(e),t2(t.bindingStartIndex),n!==null&&B3(t,e,n,2,i);let d=(r&3)===3;if(!o)if(d){let f=t.preOrderCheckHooks;f!==null&&eb(e,f,null)}else{let f=t.preOrderHooks;f!==null&&tb(e,f,0,null),FM(e,0)}if(s||F9(e),Z3(e),J3(e,0),t.contentQueries!==null&&b3(t,e),!o)if(d){let f=t.contentCheckHooks;f!==null&&eb(e,f)}else{let f=t.contentHooks;f!==null&&tb(e,f,1),FM(e,1)}k9(t,e);let u=t.components;u!==null&&tO(e,u,0);let h=t.viewQuery;if(h!==null&&KM(2,h,i),!o)if(d){let f=t.viewCheckHooks;f!==null&&eb(e,f)}else{let f=t.viewHooks;f!==null&&tb(e,f,2),FM(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[VC]){for(let f of e[VC])f();e[VC]=null}o||(K3(e),e[vt]&=-73)}catch(d){throw o||Qa(e),d}finally{c!==null&&(Gs(c,l),a&&E9(c)),qC()}}function J3(t,e){for(let n=u3(t);n!==null;n=h3(n))for(let i=Ei;i<n.length;i++){let r=n[i];eO(r,e)}}function F9(t){for(let e=u3(t);e!==null;e=h3(e)){if(!(e[vt]&2))continue;let n=e[wc];for(let i=0;i<n.length;i++){let r=n[i];fM(r)}}}function P9(t,e,n){hn(18);let i=io(e,t);eO(i,n),hn(19,i[ti])}function eO(t,e){UC(t)&&o1(t,e)}function o1(t,e){let i=t[Mt],r=t[vt],o=t[Or],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&ec(o)),s||=!1,o&&(o.dirty=!1),t[vt]&=-9217,s)I9(i,t,i.template,t[ti]);else if(r&8192){let a=ht(null);try{Z3(t),J3(t,1);let l=i.components;l!==null&&tO(t,l,1),K3(t)}finally{ht(a)}}}function tO(t,e,n){for(let i=0;i<e.length;i++)P9(t,e[i],n)}function k9(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Ja(~r);else{let o=r,s=n[++i],a=n[++i];i2(s,o);let l=e[o];hn(24,l),a(2,l),hn(25,l)}}}finally{Ja(-1)}}function K1(t,e){let n=xM()?64:1088;for(t[is].changeDetectionScheduler?.notify(e);t;){t[vt]|=n;let i=$a(t);if(pu(t)&&!i)return t;t=i}return null}function nO(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function iO(t,e){let n=Ei+e;if(n<t.length)return t[n]}function Ip(t,e,n,i=!0){let r=e[Mt];if(O9(r,e,t,n),i){let s=r1(n,t),a=e[Nn],l=a.parentNode(t[Xa]);l!==null&&f9(r,t[ar],a,e,l,s)}let o=e[mc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rO(t,e){let n=wp(t,e);return n!==void 0&&Mb(n[Mt],n),n}function wp(t,e){if(t.length<=Ei)return;let n=Ei+e,i=t[n];if(i){let r=i[Ya];r!==null&&r!==t&&W1(r,i),e>0&&(t[n-1][to]=i[to]);let o=op(t,Ei+e);h9(i[Mt],i);let s=o[rs];s!==null&&s.detachView(o[Mt]),i[fi]=null,i[to]=null,i[vt]&=-129}return i}function O9(t,e,n,i){let r=Ei+i,o=n.length;i>0&&(n[r-1][to]=e),i<o-Ei?(e[to]=n[r],YE(n,Ei+i,e)):(n.push(e),e[to]=null),e[fi]=n;let s=e[Ya];s!==null&&n!==s&&oO(s,e);let a=e[rs];a!==null&&a.insertView(t),GC(e),e[vt]|=128}function oO(t,e){let n=t[wc],i=e[fi];if(os(i))t[vt]|=2;else{let r=i[fi][lr];e[lr]!==r&&(t[vt]|=2)}n===null?t[wc]=[e]:n.push(e)}var el=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Mt];return bp(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ti]}set context(e){this._lView[ti]=e}get destroyed(){return _c(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[fi];if(xo(e)){let n=e[lp],i=n?n.indexOf(this):-1;i>-1&&(wp(e,i),op(n,i))}this._attachedToViewContainer=!1}Mb(this._lView[Mt],this._lView)}onDestroy(e){pM(this._lView,e)}markForCheck(){K1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[vt]&=-129}reattach(){GC(this._lView),this._lView[vt]|=128}detectChanges(){this._lView[vt]|=1024,q1(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[vc].get(d9,M2)}catch{this.exhaustive=M2}}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pu(this._lView),n=this._lView[Ya];n!==null&&!e&&W1(n,this._lView),U3(this._lView[Mt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=e;let n=pu(this._lView),i=this._lView[Ya];i!==null&&!n&&oO(i,this._lView),GC(this._lView)}};var Nr=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=L9;constructor(n,i,r){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,r){let o=Ap(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:r});return new el(o)}}return t})();function L9(){return Db(Wi(),At())}function Db(t,e){return t.type&4?new Nr(e,t,Su(t,e)):null}function Fp(t,e,n,i,r){let o=t.data[e];if(o===null)o=N9(t,e,n,i,r),n2()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=Jk();o.injectorIndex=s===null?-1:s.injectorIndex}return Sc(o,!0),o}function N9(t,e,n,i,r){let o=CM(),s=bM(),a=s?o:o&&o.parent,l=t.data[e]=V9(t,a,n,e,i,r);return B9(t,l,o,s),l}function B9(t,e,n,i){t.firstChild===null&&(t.firstChild=e),n!==null&&(i?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function V9(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return yM()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var qxe=new RegExp(`^(\\d+)*(${aW}|${sW})*(.*)`);function H9(t){let e=t[aM]??[],i=t[fi][Nn],r=[];for(let o of e)o.data[m3]!==void 0?r.push(o):z9(o,i);t[aM]=r}function z9(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[g3];for(;n<r;){let o=i.nextSibling;P3(e,i,!1),i=o,n++}}}var U9=()=>null,G9=()=>null;function cb(t,e){return U9(t,e)}function sO(t,e,n){return G9(t,e,n)}var aO=class{},Tb=class{},s1=class{resolveComponentFactory(e){throw new Ie(917,!1)}},Pp=class{static NULL=new s1},qn=class{},Mi=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>W9()}return t})();function W9(){let t=At(),e=Wi(),n=io(e.index,t);return(os(n)?n:t)[Nn]}var lO=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>null})}return t})();var ib={},a1=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){let r=this.injector.get(e,ib,i);return r!==ib||n===ib?r:this.parentInjector.get(e,n,i)}};function D2(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=PC(r,a);else if(o==2){let l=a,c=e[++s];i=PC(i,l+": "+c+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function Kn(t,e=0){let n=At();if(n===null)return je(t,e);let i=Wi();return o3(i,n,Oi(t),e)}function Y1(){let t="invalid";throw new Error(t)}function cO(t,e,n,i,r){let o=i===null?null:{"":-1},s=r(t,n);if(s!==null){let a=s,l=null,c=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,l,c]=d.resolveHostDirectives(s);break}q9(t,e,n,a,o,l,c)}o!==null&&i!==null&&j9(n,i,o)}function j9(t,e,n){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new Ie(-301,!1);i.push(e[r],o)}}function $9(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function q9(t,e,n,i,r,o,s){let a=i.length,l=!1;for(let h=0;h<a;h++){let f=i[h];!l&&ss(f)&&(l=!0,$9(t,n,h)),WM(ab(n,e),t,f.type)}J9(n,t.data.length,a);for(let h=0;h<a;h++){let f=i[h];f.providersResolver&&f.providersResolver(f)}let c=!1,d=!1,u=L3(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=i[h];if(n.mergedAttrs=yp(n.mergedAttrs,f.hostAttrs),Y9(t,n,e,u,f),Q9(u,f,r),s!==null&&s.has(f)){let[v,m]=s.get(f);n.directiveToIndex.set(f.type,[u,v+n.directiveStart,m+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,u);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!d&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),d=!0),u++}K9(t,n,o)}function K9(t,e,n){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=t.data[i];if(n===null||!n.has(r))T2(0,e,r,i),T2(1,e,r,i),I2(e,i,!1);else{let o=n.get(r);A2(0,e,o,i),A2(1,e,o,i),I2(e,i,!0)}}}function T2(t,e,n,i){let r=t===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),dO(e,o)}}function A2(t,e,n,i){let r=t===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),dO(e,s)}}function dO(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function I2(t,e,n){let{attrs:i,inputs:r,hostDirectiveInputs:o}=t;if(i===null||!n&&r===null||n&&o===null||L1(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&r.hasOwnProperty(l)){let c=r[l];for(let d of c)if(d===e){s??=[],s.push(l,i[a+1]);break}}else if(n&&o.hasOwnProperty(l)){let c=o[l];for(let d=0;d<c.length;d+=2)if(c[d]===e){s??=[],s.push(c[d+1],i[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Y9(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=hc(r.type,!0)),s=new Tc(o,ss(r),Kn);t.blueprint[i]=s,n[i]=s,X9(t,e,i,L3(t,n,r.hostVars,ro),r)}function X9(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Z9(s)!=a&&s.push(a),s.push(n,i,o)}}function Z9(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Q9(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ss(e)&&(n[""]=t)}}function J9(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function uO(t,e,n,i,r,o,s,a){let l=e.consts,c=Xs(l,s),d=Fp(e,t,2,i,c);return o&&cO(e,n,d,Xs(l,a),r),d.mergedAttrs=yp(d.mergedAttrs,d.attrs),d.attrs!==null&&D2(d,d.attrs,!1),d.mergedAttrs!==null&&D2(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function hO(t,e){X2(t,e),lM(e)&&t.queries.elementEnd(e)}function ej(t,e,n){return t[e]=n}function ia(t,e,n){if(n===ro)return!1;let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function OM(t,e,n){return function i(r){let o=Za(t)?io(t.index,e):e;K1(o,5);let s=e[ti],a=F2(e,s,n,r),l=i.__ngNextListenerFn__;for(;l;)a=F2(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function F2(t,e,n,i){let r=ht(null);try{return hn(6,e,n),n(i)!==!1}catch(o){return s9(t,o),!1}finally{hn(7,e,n),ht(r)}}function tj(t,e,n,i,r,o,s,a){let l=HC(t),c=!1,d=null;if(!i&&l&&(d=nj(e,n,o,t.index)),d!==null){let u=d.__ngLastListenerFn__||d;u.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,c=!0}else{let u=Eo(t,n),h=i?i(u):u;cW(n,h,o,a);let f=r.listen(h,o,a),p=i?v=>i(no(v[t.index])):t.index;fO(p,e,n,o,a,f,!1)}return c}function nj(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[hu],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function fO(t,e,n,i,r,o,s){let a=e.firstCreatePass?mM(e):null,l=gM(n),c=l.length;l.push(r,o),a&&a.push(i,t,c,(c+1)*(s?-1:1))}function P2(t,e,n,i,r,o){let s=e[n],a=e[Mt],c=a.data[n].outputs[i],u=s[c].subscribe(o);fO(t.index,a,e,r,o,u,!0)}var l1=Symbol("BINDING");var db=class extends Pp{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ns(e);return new tl(n,this.ngModule)}};function ij(t){return Object.keys(t).map(e=>{let[n,i,r]=t[e],o={propName:n,templateName:e,isSignal:(i&xb.SignalBased)!==0};return r&&(o.transform=r),o})}function rj(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function oj(t,e,n){let i=e instanceof bn?e:e?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new a1(n,i):n}function sj(t){let e=t.get(qn,null);if(e===null)throw new Ie(407,!1);let n=t.get(lO,null),i=t.get(eo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function aj(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return I3(e,n,n==="svg"?cM:n==="math"?Uk:null)}var tl=class extends Tb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ij(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=rj(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=VW(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,i,r,o,s){hn(22);let a=ht(null);try{let l=this.componentDef,c=lj(i,l,s,o),d=oj(l,r||this.ngModule,e),u=sj(d),h=u.rendererFactory.createRenderer(null,l),f=i?KW(h,i,l.encapsulation,d):aj(l,h),p=s?.some(k2)||o?.some(g=>typeof g!="function"&&g.bindings.some(k2)),v=B1(null,c,null,512|O3(l),null,null,u,h,d,null,C3(f,d,!0));v[pi]=f,$C(v);let m=null;try{let g=uO(pi,c,v,"#host",()=>c.directiveRegistry,!0,0);f&&(k3(h,f,g),Mp(f,v)),H1(c,v,g),w3(c,g,v),hO(c,g),n!==void 0&&dj(g,this.ngContentSelectors,n),m=io(g.index,v),v[ti]=m[ti],U1(c,v,null)}catch(g){throw m!==null&&$M(m),$M(v),g}finally{hn(23),qC()}return new ub(this.componentType,v,!!p)}finally{ht(a)}}};function lj(t,e,n,i){let r=t?["ng-version","20.0.7"]:HW(e.selectors[0]),o=null,s=null,a=0;if(n)for(let d of n)a+=d[l1].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(i)for(let d=0;d<i.length;d++){let u=i[d];if(typeof u!="function")for(let h of u.bindings){a+=h[l1].requiredVars;let f=d+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let l=[e];if(i)for(let d of i){let u=typeof d=="function"?d:d.type,h=JE(u);l.push(h)}return N1(0,null,cj(o,s),1,a,l,null,null,null,[r],null)}function cj(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let i of t)i.create();if(n&2&&e)for(let i of e)i.update()}}function k2(t){let e=t[l1].kind;return e==="input"||e==="twoWay"}var ub=class extends aO{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=cp(n[Mt],pi),this.location=Su(this._tNode,n),this.instance=io(this._tNode.index,n)[ti],this.hostView=this.changeDetectorRef=new el(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let r=this._rootLView,o=z1(i,r[Mt],r,e,n);this.previousInputValues.set(e,n);let s=io(i.index,r);K1(s,1)}get injector(){return new Dc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dj(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null&&o.length?Array.from(o):null)}}var mi=(()=>{class t{static __NG_ELEMENT_ID__=uj}return t})();function uj(){let t=Wi();return gO(t,At())}var hj=mi,pO=class extends hj{_lContainer;_hostTNode;_hostLView;constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Su(this._hostTNode,this._hostLView)}get injector(){return new Dc(this._hostTNode,this._hostLView)}get parentInjector(){let e=R1(this._hostTNode,this._hostLView);if(J2(e)){let n=sb(e,this._hostLView),i=ob(e),r=n[Mt].data[i+8];return new Dc(r,n)}else return new Dc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=O2(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ei}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=cb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,bu(this._hostTNode,s)),a}createComponent(e,n,i,r,o,s,a){let l=e&&!O7(e),c;if(l)c=n;else{let m=n||{};c=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef,s=m.directives,a=m.bindings}let d=l?e:new tl(ns(e)),u=i||this.parentInjector;if(!o&&d.ngModule==null){let g=(l?u:this.parentInjector).get(bn,null);g&&(o=g)}let h=ns(d.componentType??{}),f=cb(this._lContainer,h?.id??null),p=f?.firstChild??null,v=d.create(u,r,p,o,s,a);return this.insertImpl(v.hostView,c,bu(this._hostTNode,f)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Wk(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[fi],c=new pO(l,l[ar],l[fi]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ip(s,r,o,i),e.attachToViewContainerRef(),YE(LM(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=O2(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=wp(this._lContainer,n);i&&(op(LM(this._lContainer),n),Mb(i[Mt],i))}detach(e){let n=this._adjustIndex(e,-1),i=wp(this._lContainer,n);return i&&op(LM(this._lContainer),n)!=null?new el(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function O2(t){return t[lp]}function LM(t){return t[lp]||(t[lp]=[])}function gO(t,e){let n,i=e[t.index];return xo(i)?n=i:(n=nO(i,e,null,t),e[t.index]=n,V1(e,n)),pj(n,e,t,i),new pO(n,t,e)}function fj(t,e){let n=t[Nn],i=n.createComment(""),r=Eo(e,t),o=n.parentNode(r);return lb(n,o,i,n.nextSibling(r),!1),i}var pj=vj,gj=()=>!1;function mj(t,e,n){return gj(t,e,n)}function vj(t,e,n,i){if(t[Xa])return;let r;n.type&8?r=no(i):r=fj(e,n),t[Xa]=r}var c1=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},d1=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Z1(e,n).matches!==null&&this.queries[n].setDirty()}},hb=class{flags;read;predicate;constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=_j(e):this.predicate=e}},u1=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},h1=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,yj(n,o)),this.matchTNodeWithReadOption(e,n,nb(n,e,o,!1,!1))}else i===Nr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,nb(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===dt||r===mi||r===Nr&&n.type&4)this.addMatch(n.index,-2);else{let o=nb(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function yj(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function Cj(t,e){return t.type&11?Su(t,e):t.type&4?Db(t,e):null}function bj(t,e,n,i){return n===-1?Cj(e,t):n===-2?wj(t,e,i):Cp(t,t[Mt],n,e)}function wj(t,e,n){if(n===dt)return Su(e,t);if(n===Nr)return Db(e,t);if(n===mi)return gO(e,t)}function mO(t,e,n,i){let r=e[rs].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(bj(e,d,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function f1(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=mO(t,e,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],d=e[-l];for(let u=Ei;u<d.length;u++){let h=d[u];h[Ya]===h[fi]&&f1(h[Mt],h,c,i)}if(d[wc]!==null){let u=d[wc];for(let h=0;h<u.length;h++){let f=u[h];f1(f[Mt],f,c,i)}}}}}return i}function X1(t,e){return t[rs].queries[e].queryList}function vO(t,e,n){let i=new Ac((n&4)===4);return qk(t,e,i,i.destroy),(e[rs]??=new d1).queries.push(new c1(i))-1}function yO(t,e,n){let i=Bn();return i.firstCreatePass&&(bO(i,new hb(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),vO(i,At(),e)}function CO(t,e,n,i){let r=Bn();if(r.firstCreatePass){let o=Wi();bO(r,new hb(e,n,i),o.index),Sj(r,t),(n&2)===2&&(r.staticContentQueries=!0)}return vO(r,At(),n)}function _j(t){return t.split(",").map(e=>e.trim())}function bO(t,e,n){t.queries===null&&(t.queries=new u1),t.queries.track(new h1(e,n))}function Sj(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function Z1(t,e){return t.queries.getByIndex(e)}function wO(t,e){let n=t[Mt],i=Z1(n,e);return i.crossesNgTemplate?f1(n,t,e,[]):mO(n,t,i,e)}function _O(t,e,n){let i,r=jf(()=>{i._dirtyCounter();let o=xj(i,t);if(e&&o===void 0)throw new Ie(-951,!1);return o});return i=r[Qn],i._dirtyCounter=It(0),i._flatValue=void 0,r}function Q1(t){return _O(!0,!1,t)}function J1(t){return _O(!0,!0,t)}function SO(t,e){let n=t[Qn];n._lView=At(),n._queryIndex=e,n._queryList=X1(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(i=>i+1))}function xj(t,e){let n=t._lView,i=t._queryIndex;if(n===void 0||i===void 0||n[vt]&4)return e?void 0:Gi;let r=X1(n,i),o=wO(n,i);return r.reset(o,l3),e?r.first:r._changesDetected||t._flatValue===void 0?t._flatValue=r.toArray():t._flatValue}var L2=new Set;function oo(t){L2.has(t)||(L2.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var nl=class{},Ab=class{};var fb=class extends nl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new db(this);constructor(e,n,i,r=!0){super(),this.ngModuleType=e,this._parent=n;let o=QE(e);this._bootstrapComponents=D3(o.bootstrap),this._r3Injector=DM(e,n,[{provide:nl,useValue:this},{provide:Pp,useValue:this.componentFactoryResolver},...i],wr(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pb=class extends Ab{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new fb(this.moduleType,e,[])}};var _p=class extends nl{injector;componentFactoryResolver=new db(this);instance=null;constructor(e){super();let n=new pc([...e.providers,{provide:nl,useValue:this},{provide:Pp,useValue:this.componentFactoryResolver}],e.parent||uu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mu(t,e,n=null){return new _p({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ej=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=eM(!1,n.type),r=i.length>0?Mu([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:t,providedIn:"environment",factory:()=>new t(je(bn))})}return t})();function ot(t){return Ep(()=>{let e=xO(t),n=ae(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===D1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Ej).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Js.Emulated,styles:t.styles||Gi,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&oo("NgStandalone"),EO(n);let i=t.dependencies;return n.directiveDefs=N2(i,!1),n.pipeDefs=N2(i,!0),n.id=Aj(n),n})}function Mj(t){return ns(t)||JE(t)}function Rj(t){return t!==null}function yt(t){return Ep(()=>({type:t.type,bootstrap:t.bootstrap||Gi,declarations:t.declarations||Gi,imports:t.imports||Gi,exports:t.exports||Gi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Dj(t,e){if(t==null)return Ka;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=xb.None,l=null),n[o]=[i,a,l],e[o]=s}return n}function Tj(t){if(t==null)return Ka;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function wt(t){return Ep(()=>{let e=xO(t);return EO(e),e})}function xO(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ka,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Gi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Dj(t.inputs,e),outputs:Tj(t.outputs),debugInfo:null}}function EO(t){t.features?.forEach(e=>e(t))}function N2(t,e){if(!t)return null;let n=e?Ok:Mj;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(Rj)}function Aj(t){let e=0,n=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ij(t){return Object.getPrototypeOf(t.prototype).constructor}function Ri(t){let e=Ij(t.type),n=!0,i=[t];for(;e;){let r;if(ss(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ie(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=NM(t.inputs),s.declaredInputs=NM(t.declaredInputs),s.outputs=NM(t.outputs);let a=r.hostBindings;a&&Lj(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&kj(t,l),c&&Oj(t,c),Fj(t,r),Rk(t.outputs,r.outputs),ss(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ri&&(n=!1)}}e=Object.getPrototypeOf(e)}Pj(i)}function Fj(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n])}}function Pj(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=yp(r.hostAttrs,n=yp(n,r.hostAttrs))}}function NM(t){return t===Ka?{}:t===Gi?[]:t}function kj(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function Oj(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function Lj(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Nj(t,e,n,i,r,o,s,a,l){let c=e.consts,d=Fp(e,t,4,s||null,a||null);vM()&&cO(e,n,d,Xs(c,l),z3),d.mergedAttrs=yp(d.mergedAttrs,d.attrs),X2(e,d);let u=d.tView=N1(2,d,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,d),u.queries=e.queries.embeddedTView(d)),d}function wu(t,e,n,i,r,o,s,a,l,c,d){let u=n+pi,h=e.firstCreatePass?Nj(u,e,t,i,r,o,s,a,c):e.data[u];l&&(h.flags|=l),Sc(h,!1);let f=Bj(e,t,h,n);YC()&&j1(e,t,f,h),Mp(f,t);let p=nO(f,t,f,h);return t[u]=p,V1(t,p),mj(p,h,t),HC(h)&&H1(e,t,h),c!=null&&V3(t,h,d),h}function ra(t,e,n,i,r,o,s,a){let l=At(),c=Bn(),d=Xs(c.consts,o);return wu(l,c,t,e,n,i,r,d,void 0,s,a),ra}var Bj=Vj;function Vj(t,e,n,i){return XC(!0),e[Nn].createComment("")}var Ib=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Ib||{}),ol=new se(""),MO=!1,p1=class extends Qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,iM()&&(this.destroyRef=A(Li,{optional:!0})??void 0,this.pendingTasks=A(Qs,{optional:!0})??void 0)}emit(e){let n=ht(null);try{super.next(e)}finally{ht(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Kt&&e.add(a),a}wrapInTimeout(e){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},q=p1;function RO(t){let e,n;function i(){t=Rc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),i()})),()=>i()}function B2(t){return queueMicrotask(()=>t()),()=>{t=Rc}}var eR="isAngularZone",gb=eR+"_ID",Hj=0,$e=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new q(!1);onMicrotaskEmpty=new q(!1);onStable=new q(!1);onError=new q(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=MO}=e;if(typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Gj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(eR)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Ie(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,zj,Rc,Rc);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},zj={};function tR(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Uj(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){RO(()=>{t.callbackScheduled=!1,g1(t),t.isCheckStableRunning=!0,tR(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),g1(t)}function Gj(t){let e=()=>{Uj(t)},n=Hj++;t._inner=t._inner.fork({name:"angular",properties:{[eR]:!0,[gb]:n,[gb+n]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(Wj(l))return i.invokeTask(o,s,a,l);try{return V2(t),i.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),H2(t)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return V2(t),i.invoke(o,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!jj(l)&&e(),H2(t)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,g1(t),tR(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function g1(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function V2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function H2(t){t._nesting--,tR(t)}var mb=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new q;onMicrotaskEmpty=new q;onStable=new q;onError=new q;run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function Wj(t){return DO(t,"__ignore_ng_zone__")}function jj(t){return DO(t,"__scheduler_tick__")}function DO(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Fb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),nR=[0,1,2,3],iR=(()=>{class t{ngZone=A($e);scheduler=A(eo);errorHandler=A(Si,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){A(ol,{optional:!0})}execute(){let n=this.sequences.size>0;n&&hn(16),this.executing=!0;for(let i of nR)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&hn(17)}register(n){let{view:i}=n;i!==void 0?((i[bc]??=[]).push(n),Qa(i),i[vt]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,i){return i?i.run(Ib.AFTER_NEXT_RENDER,n):n()}static \u0275prov=le({token:t,providedIn:"root",factory:()=>new t})}return t})(),Sp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,i,r,o,s=null){this.impl=e,this.hooks=n,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[bc];e&&(this.view[bc]=e.filter(n=>n!==this))}};function oa(t,e){let n=e?.injector??A(xt);return oo("NgAfterNextRender"),qj(t,n,e,!0)}function $j(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function qj(t,e,n,i){let r=e.get(Fb);r.impl??=e.get(iR);let o=e.get(ol,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Li):null,a=e.get(Mc,null,{optional:!0}),l=new Sp(r.impl,$j(t),a?.view,i,s,o?.snapshot(null));return r.impl.register(l),l}var Pb=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var rR=new se("");function Pc(t){return!!t&&typeof t.then=="function"}function TO(t){return!!t&&typeof t.subscribe=="function"}var oR=new se("");function Ru(t){return kr([{provide:oR,multi:!0,useValue:t}])}var sR=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=A(oR,{optional:!0})??[];injector=A(xt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=xi(this.injector,r);if(Pc(o))n.push(o);else if(TO(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kp=new se("");function AO(){hE(()=>{let t="";throw new Ie(600,t)})}function IO(t){return t.isBoundToModule}var Kj=10;var so=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(Lr);afterRenderManager=A(Fb);zonelessEnabled=A(mu);rootEffectScheduler=A(gp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Qe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(Qs);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ye(n=>!n))}constructor(){A(ol,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=A(bn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,r=xt.NULL){return this._injector.get($e).run(()=>{hn(10);let s=n instanceof Tb;if(!this._injector.get(sR).done){let p="";throw new Ie(405,p)}let l;s?l=n:l=this._injector.get(Pp).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=IO(l)?void 0:this._injector.get(nl),d=i||l.selector,u=l.create(r,[],d,c),h=u.location.nativeElement,f=u.injector.get(rR,null);return f?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),vp(this.components,u),f?.unregisterApplication(h)}),this._loadComponent(u),hn(11,u),u})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){hn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ib.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ie(101,!1);let n=ht(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ht(n),this.afterTick.next(),hn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(qn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Kj;)hn(14),this.synchronizeOnce(),hn(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!dp(r))continue;let o=i&&!this.zonelessEnabled?0:1;q1(r,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>dp(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;vp(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(kp,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>vp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Ie(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Mn(t,e,n,i){let r=At(),o=xc();if(ia(r,o,e)){let s=Bn(),a=KC();i9(a,r,t,e,n,i)}return Mn}var m1=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function BM(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function Yj(t,e,n){let i,r,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=t.at(o),d=e[o],u=BM(o,c,o,d,n);if(u!==0){u<0&&t.updateValue(o,d),o++;continue}let h=t.at(s),f=e[l],p=BM(s,h,l,f,n);if(p!==0){p<0&&t.updateValue(s,f),s--,l--;continue}let v=n(o,c),m=n(s,h),g=n(o,d);if(Object.is(g,m)){let C=n(l,f);Object.is(C,v)?(t.swap(o,s),t.updateValue(s,f),l--,s--):t.move(s,o),t.updateValue(o,d),o++;continue}if(i??=new vb,r??=U2(t,o,s,n),v1(t,i,o,g))t.updateValue(o,d),o++,s++;else if(r.has(g))i.set(v,t.detach(o)),s--;else{let C=t.create(o,e[o]);t.attach(o,C),o++,s++}}for(;o<=l;)z2(t,i,n,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let d=t.at(o),u=c.value,h=BM(o,d,o,u,n);if(h!==0)h<0&&t.updateValue(o,u),o++,c=l.next();else{i??=new vb,r??=U2(t,o,s,n);let f=n(o,u);if(v1(t,i,o,f))t.updateValue(o,u),o++,s++,c=l.next();else if(!r.has(f))t.attach(o,t.create(o,u)),o++,s++,c=l.next();else{let p=n(o,d);i.set(p,t.detach(o)),s--}}}for(;!c.done;)z2(t,i,n,t.length,c.value),c=l.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(l=>{t.destroy(l)})}function v1(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function z2(t,e,n,i,r){if(v1(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function U2(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var vb=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function fn(t,e,n,i,r,o,s,a){oo("NgControlFlow");let l=At(),c=Bn(),d=Xs(c.consts,o);return wu(l,c,t,e,n,i,r,d,256,s,a),aR}function aR(t,e,n,i,r,o,s,a){oo("NgControlFlow");let l=At(),c=Bn(),d=Xs(c.consts,o);return wu(l,c,t,e,n,i,r,d,512,s,a),aR}function pn(t,e){oo("NgControlFlow");let n=At(),i=xc(),r=n[i]!==ro?n[i]:-1,o=r!==-1?yb(n,pi+r):void 0,s=0;if(ia(n,i,t)){let a=ht(null);try{if(o!==void 0&&rO(o,s),t!==-1){let l=pi+t,c=yb(n,l),d=w1(n[Mt],l),u=sO(c,d,n),h=Ap(n,d,e,{dehydratedView:u});Ip(c,h,s,bu(d,u))}}finally{ht(a)}}else if(o!==void 0){let a=iO(o,s);a!==void 0&&(a[ti]=e)}}var y1=class{lContainer;$implicit;$index;constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Ei}};function Op(t,e){return e}var C1=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function sl(t,e,n,i,r,o,s,a,l,c,d,u,h){oo("NgControlFlow");let f=At(),p=Bn(),v=l!==void 0,m=At(),g=a?s.bind(m[lr][ti]):s,C=new C1(v,g);m[pi+t]=C,wu(f,p,t+1,e,n,i,r,Xs(p.consts,o),256),v&&wu(f,p,t+2,l,c,d,u,Xs(p.consts,h),512)}var b1=class extends m1{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i}get length(){return this.lContainer.length-Ei}at(e){return this.getLView(e)[ti].$implicit}attach(e,n){let i=n[mc];this.needsIndexUpdate||=e!==this.length,Ip(this.lContainer,n,e,bu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Xj(this.lContainer,e)}create(e,n){let i=cb(this.lContainer,this.templateTNode.tView.ssrId),r=Ap(this.hostLView,this.templateTNode,new y1(this.lContainer,n,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Mb(e[Mt],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[ti].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ti].$index=e}getLView(e){return Zj(this.lContainer,e)}};function al(t){let e=ht(null),n=as();try{let i=At(),r=i[Mt],o=i[n],s=n+1,a=yb(i,s);if(o.liveCollection===void 0){let c=w1(r,s);o.liveCollection=new b1(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(Yj(l,t,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=xc(),d=l.length===0;if(ia(i,c,d)){let u=n+2,h=yb(i,u);if(d){let f=w1(r,u),p=sO(h,f,i),v=Ap(i,f,void 0,{dehydratedView:p});Ip(h,v,0,bu(f,p))}else r.firstUpdatePass&&H9(h),rO(h,0)}}}finally{ht(e)}}function yb(t,e){return t[e]}function Xj(t,e){return wp(t,e)}function Zj(t,e){return iO(t,e)}function w1(t,e){return cp(t,e)}function Yt(t,e,n){let i=At(),r=xc();if(ia(i,r,e)){let o=Bn(),s=KC();QW(s,i,t,e,i[Nn],n)}return Yt}function _1(t,e,n,i,r){z1(e,t,n,r?"class":"style",i)}function be(t,e,n,i){let r=At(),o=Bn(),s=pi+t,a=r[Nn],l=o.firstCreatePass?uO(s,o,r,e,z3,vM(),n,i):o.data[s],c=Qj(o,r,l,a,e,t);r[s]=c;let d=HC(l);return Sc(l,!0),k3(a,c,l),!Eb(l)&&YC()&&j1(o,r,c,l),(Kk()===0||d)&&Mp(c,r),Yk(),d&&(H1(o,r,l),w3(o,l,r)),i!==null&&V3(r,l),be}function xe(){let t=Wi();bM()?wM():(t=t.parent,Sc(t,!1));let e=t;Zk(e)&&Qk(),Xk();let n=Bn();return n.firstCreatePass&&hO(n,e),e.classesWithoutHost!=null&&z7(e)&&_1(n,e,At(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&U7(e)&&_1(n,e,At(),e.stylesWithoutHost,!1),xe}function Lt(t,e,n,i){return be(t,e,n,i),xe(),Lt}var Qj=(t,e,n,i,r,o)=>(XC(!0),I3(i,r,d2()));function Ni(){return At()}function ll(t,e,n){let i=At(),r=xc();if(ia(i,r,e)){let o=Bn(),s=KC();H3(s,i,t,e,i[Nn],n)}return ll}var Lp="en-US";var Jj=Lp;function FO(t){typeof t=="string"&&(Jj=t.toLowerCase().replace(/_/g,"-"))}function Jt(t,e,n){let i=At(),r=Bn(),o=Wi();return e$(r,i,i[Nn],o,t,e,n),Jt}function e$(t,e,n,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=OM(i,e,o),tj(i,t,e,s,n,r,o,l)&&(a=!1)),a){let c=i.outputs?.[r],d=i.hostDirectiveOutputs?.[r];if(d&&d.length)for(let u=0;u<d.length;u+=2){let h=d[u],f=d[u+1];l??=OM(i,e,o),P2(i,e,h,f,r,l)}if(c&&c.length)for(let u of c)l??=OM(i,e,o),P2(i,e,u,r,r,l)}}function rn(t=1){return c2(t)}function t$(t,e){let n=null,i=kW(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?A3(t,o,!0):NW(i,o))return r}return n}function Vn(t){let e=At()[lr][ar];if(!e.projection){let n=t?t.length:1,i=e.projection=Pk(n,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?t$(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function Gt(t,e=0,n,i,r,o){let s=At(),a=Bn(),l=i?t+1:null;l!==null&&wu(s,a,l,i,r,o,null,n);let c=Fp(a,pi+t,16,null,n||null);c.projection===null&&(c.projection=e),wM();let u=!s[mc]||yM();s[lr][ar].projection[c.projection]===null&&l!==null?n$(s,a,l):u&&!Eb(c)&&b9(a,s,c)}function n$(t,e,n){let i=pi+n,r=e.data[i],o=t[i],s=cb(o,r.tView.ssrId),a=Ap(t,r,void 0,{dehydratedView:s});Ip(o,a,0,bu(r,s))}function si(t,e,n,i){CO(t,e,n,i)}function kn(t,e,n){yO(t,e,n)}function $t(t){let e=At(),n=Bn(),i=jC();hp(i+1);let r=Z1(n,i);if(t.dirty&&Gk(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=wO(e,i);t.reset(o,l3),t.notifyOnChanges()}return!0}return!1}function qt(){return X1(At(),jC())}function kb(t,e,n,i,r){SO(e,CO(t,n,i,r))}function Du(t,e,n,i){SO(t,yO(e,n,i))}function Np(t=1){hp(jC()+t)}function sa(t){let e=_M();return uM(e,pi+t)}function JC(t,e){return t<<17|e<<2}function Ic(t){return t>>17&32767}function i$(t){return(t&2)==2}function r$(t,e){return t&131071|e<<17}function S1(t){return t|2}function _u(t){return(t&131068)>>2}function VM(t,e){return t&-131069|e<<2}function o$(t){return(t&1)===1}function x1(t){return t|1}function s$(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Ic(s),l=_u(s);t[i]=n;let c=!1,d;if(Array.isArray(n)){let u=n;d=u[1],(d===null||du(u,d)>0)&&(c=!0)}else d=n;if(r)if(l!==0){let h=Ic(t[a+1]);t[i+1]=JC(h,a),h!==0&&(t[h+1]=VM(t[h+1],i)),t[a+1]=r$(t[a+1],i)}else t[i+1]=JC(a,0),a!==0&&(t[a+1]=VM(t[a+1],i)),a=i;else t[i+1]=JC(l,0),a===0?a=i:t[l+1]=VM(t[l+1],i),l=i;c&&(t[i+1]=S1(t[i+1])),G2(t,d,i,!0),G2(t,d,i,!1),a$(e,d,t,i,o),s=JC(a,l),o?e.classBindings=s:e.styleBindings=s}function a$(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&du(o,e)>=0&&(n[i+1]=x1(n[i+1]))}function G2(t,e,n,i){let r=t[n+1],o=e===null,s=i?Ic(r):_u(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];l$(l,e)&&(a=!0,t[s+1]=i?x1(c):S1(c)),s=i?Ic(c):_u(c)}a&&(t[n+1]=i?S1(r):x1(r))}function l$(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?du(t,e)>=0:!1}var Ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function c$(t){return t.substring(Ro.key,Ro.keyEnd)}function d$(t){return u$(t),PO(t,kO(t,0,Ro.textEnd))}function PO(t,e){let n=Ro.textEnd;return n===e?-1:(e=Ro.keyEnd=h$(t,Ro.key=e,n),kO(t,e,n))}function u$(t){Ro.key=0,Ro.keyEnd=0,Ro.value=0,Ro.valueEnd=0,Ro.textEnd=t.length}function kO(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function h$(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Nt(t,e){return p$(t,e,null,!0),Nt}function Br(t){g$(w$,f$,t,!0)}function f$(t,e){for(let n=d$(e);n>=0;n=PO(e,n))NC(t,c$(e),!0)}function p$(t,e,n,i){let r=At(),o=Bn(),s=EM(2);if(o.firstUpdatePass&&LO(o,t,s,i),e!==ro&&ia(r,s,e)){let a=o.data[as()];NO(o,a,r,r[Nn],t,r[s+1]=S$(e,n),i,s)}}function g$(t,e,n,i){let r=Bn(),o=EM(2);r.firstUpdatePass&&LO(r,null,o,i);let s=At();if(n!==ro&&ia(s,o,n)){let a=r.data[as()];if(BO(a,i)&&!OO(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=PC(l,n||"")),_1(r,a,s,n,i)}else _$(r,a,s,s[Nn],s[o+1],s[o+1]=b$(t,e,n),i,o)}}function OO(t,e){return e>=t.expandoStartIndex}function LO(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[as()],s=OO(t,n);BO(o,i)&&e===null&&!s&&(e=!1),e=m$(r,o,e,i),s$(r,o,e,n,s,i)}}function m$(t,e,n,i){let r=o2(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=HM(null,t,e,n,i),n=xp(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=HM(r,t,e,n,i),o===null){let l=v$(t,e,i);l!==void 0&&Array.isArray(l)&&(l=HM(null,t,e,l[1],i),l=xp(l,e.attrs,i),y$(t,e,i,l))}else o=C$(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function v$(t,e,n){let i=n?e.classBindings:e.styleBindings;if(_u(i)!==0)return t[Ic(i)]}function y$(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Ic(r)]=i}function C$(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=xp(i,s,n)}return xp(i,e.attrs,n)}function HM(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=xp(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function xp(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),NC(t,s,n?!0:e[++o]))}return t===void 0?null:t}function b$(t,e,n){if(n==null||n==="")return Gi;let i=[],r=Do(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function w$(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&NC(t,i,n)}function _$(t,e,n,i,r,o,s,a){r===ro&&(r=Gi);let l=0,c=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=l<r.length?r[l+1]:void 0,f=c<o.length?o[c+1]:void 0,p=null,v;d===u?(l+=2,c+=2,h!==f&&(p=u,v=f)):u===null||d!==null&&d<u?(l+=2,p=d):(c+=2,p=u,v=f),p!==null&&NO(t,e,n,i,p,v,s,a),d=l<r.length?r[l]:null,u=c<o.length?o[c]:null}}function NO(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],d=o$(c)?W2(l,e,n,r,_u(c),s):void 0;if(!Cb(d)){Cb(o)||i$(c)&&(o=W2(l,null,n,r,a,s));let u=dM(as(),n);_9(i,s,u,r,o)}}function W2(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),d=c?l[1]:l,u=d===null,h=n[r+1];h===ro&&(h=u?Gi:void 0);let f=u?BC(h,i):d===i?h:void 0;if(c&&!Cb(f)&&(f=BC(l,i)),Cb(f)&&(a=f,s))return a;let p=t[r+1];r=s?Ic(p):_u(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=BC(l,i))}return a}function Cb(t){return t!==void 0}function S$(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=wr(Do(t)))),t}function BO(t,e){return(t.flags&(e?8:16))!==0}function Vt(t,e=""){let n=At(),i=Bn(),r=t+pi,o=i.firstCreatePass?Fp(i,r,1,e,null):i.data[r],s=x$(i,n,o,e,t);n[r]=s,YC()&&j1(i,n,s,o),Sc(o,!1)}var x$=(t,e,n,i,r)=>(XC(!0),zW(e[Nn],i));function VO(t,e,n,i=""){return ia(t,xc(),n)?e+rp(n)+i:ro}function Di(t){return Vr("",t),Di}function Vr(t,e,n){let i=At(),r=VO(i,t,e,n);return r!==ro&&E$(i,as(),r),Vr}function E$(t,e,n){let i=dM(e,t);UW(t[Nn],i,n)}var HO={};function Ob(t){let e=Bn(),n=At(),i=t+pi,r=Fp(e,i,128,null,null);return Sc(r,!1),zC(e,n,i,HO),Ob}function lR(t){oo("NgLet");let e=Bn(),n=At(),i=as();return zC(e,n,i,t),t}function Lb(t){let e=_M(),n=uM(e,pi+t);if(n===HO)throw new Ie(314,!1);return n}function cR(t,e,n=""){return VO(At(),t,e,n)}function M$(t,e,n){let i=Bn();if(i.firstCreatePass){let r=ss(t);E1(n,i.data,i.blueprint,r,!0),E1(e,i.data,i.blueprint,r,!1)}}function E1(t,e,n,i,r){if(t=Oi(t),Array.isArray(t))for(let o=0;o<t.length;o++)E1(t[o],e,n,i,r);else{let o=Bn(),s=At(),a=Wi(),l=fc(t)?t:Oi(t.provide),c=nM(t),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(fc(t)||!t.multi){let f=new Tc(c,r,Kn),p=UM(l,e,r?d:d+h,u);p===-1?(WM(ab(a,s),o,l),zM(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=UM(l,e,d+h,u),p=UM(l,e,d,d+h),v=f>=0&&n[f],m=p>=0&&n[p];if(r&&!m||!r&&!v){WM(ab(a,s),o,l);let g=T$(r?D$:R$,n.length,r,i,c);!r&&m&&(n[p].providerFactory=g),zM(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(g),s.push(g)}else{let g=zO(n[r?p:f],c,!r&&i);zM(o,t,f>-1?f:p,g)}!r&&i&&m&&n[p].componentProviders++}}}function zM(t,e,n,i){let r=fc(e),o=Hk(e);if(r||o){let l=(o?Oi(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=c.indexOf(n);d===-1?c.push(n,[i,l]):c[d+1].push(i,l)}else c.push(n,l)}}}function zO(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function UM(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function R$(t,e,n,i){return M1(this.multi,[])}function D$(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Cp(n,n[Mt],this.providerFactory.index,i);o=a.slice(0,s),M1(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],M1(r,o);return o}function M1(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function T$(t,e,n,i,r){let o=new Tc(t,n,Kn);return o.multi=[],o.index=e,o.componentProviders=0,zO(o,r,i&&!n),o}function vi(t,e=[]){return n=>{n.providersResolver=(i,r)=>M$(i,r?r(t):t,e)}}function dR(t,e,n,i){return I$(At(),e2(),t,e,n,i)}function A$(t,e){let n=t[e];return n===ro?void 0:n}function I$(t,e,n,i,r,o){let s=e+n;return ia(t,s,r)?ej(t,s+1,o?i.call(o,r):i(r)):A$(t,s+1)}function Nb(t,e){return Db(t,e)}var bb=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},uR=(()=>{class t{compileModuleSync(n){return new pb(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),r=QE(n),o=D3(r.declarations).reduce((s,a)=>{let l=ns(a);return l&&s.push(new tl(l)),s},[]);return new bb(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var F$=(()=>{class t{zone=A($e);changeDetectionScheduler=A(eo);applicationRef=A(so);applicationErrorHandler=A(Lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),UO=new se("",{factory:()=>!1});function hR({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new $e(ae(k({},pR()),{scheduleInRootZone:n})),[{provide:$e,useFactory:t},{provide:ts,multi:!0,useFactory:()=>{let i=A(F$,{optional:!0});return()=>i.initialize()}},{provide:ts,multi:!0,useFactory:()=>{let i=A(P$);return()=>{i.initialize()}}},e===!0?{provide:AM,useValue:!0}:[],{provide:IM,useValue:n??MO},{provide:Lr,useFactory:()=>{let i=A($e),r=A(bn),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(Si),o.handleError(s))})}}}]}function fR(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,i=hR({ngZoneFactory:()=>{let r=pR(t);return r.scheduleInRootZone=n,r.shouldCoalesceEventChangeDetection&&oo("NgZone_CoalesceEvent"),new $e(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return kr([{provide:UO,useValue:!0},{provide:mu,useValue:!1},i])}function pR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var P$=(()=>{class t{subscription=new Kt;initialized=!1;zone=A($e);pendingTasks=A(Qs);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var GO=(()=>{class t{applicationErrorHandler=A(Lr);appRef=A(so);taskService=A(Qs);ngZone=A($e);zonelessEnabled=A(mu);tracing=A(ol,{optional:!0});disableScheduling=A(AM,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gb):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(IM,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof mb||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let i=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?B2:RO;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,B2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function k$(){return typeof $localize<"u"&&$localize.locale||Lp}var gR=new se("",{providedIn:"root",factory:()=>A(gR,{optional:!0,skipSelf:!0})||k$()});var Bb=class{destroyed=!1;listeners=null;errorHandler=A(Si,{optional:!0});destroyRef=A(Li);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new Ie(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(qa(953,!1));return}if(this.listeners===null)return;let n=ht(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{ht(n)}}};function en(t){return Sk(t)}function Tn(t,e){return jf(t,e?.equal)}var mR=class{[Qn];constructor(e){this[Qn]=e}destroy(){this[Qn].destroy()}};function cs(t,e){let n=e?.injector??A(xt),i=e?.manualCleanup!==!0?n.get(Li):null,r,o=n.get(Mc,null,{optional:!0}),s=n.get(eo);return o!==null?(r=N$(o.view,s,t),i instanceof np&&i._lView===o.view&&(i=null)):r=B$(t,n.get(gp),s),r.injector=n,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new mR(r)}var $O=ae(k({},Us),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Rc,run(){if(this.dirty=!1,this.hasRun&&!ec(this))return;this.hasRun=!0;let t=i=>(this.cleanupFns??=[]).push(i),e=Qo(this),n=gu(!1);try{this.maybeCleanup(),this.fn(t)}finally{gu(n),Gs(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let t=ht(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ht(t)}}}),O$=ae(k({},$O),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Jd(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),L$=ae(k({},$O),{consumerMarkedDirty(){this.view[vt]|=8192,Qa(this.view),this.notifier.notify(13)},destroy(){Jd(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Ys]?.delete(this)}});function N$(t,e,n){let i=Object.create(L$);return i.view=t,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=n,t[Ys]??=new Set,t[Ys].add(i),i.consumerMarkedDirty(i),i}function B$(t,e,n){let i=Object.create(O$);return i.fn=t,i.scheduler=e,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}var V$=t=>t;function Tu(t,e){if(typeof t=="function"){let n=TE(t,V$,e?.equal);return WO(n)}else{let n=TE(t.source,t.computation,t.equal);return WO(n)}}function WO(t){let e=t[Qn],n=t;return n.set=i=>wk(e,i),n.update=i=>_k(e,i),n.asReadonly=pp.bind(t),n}var qO=!0;function wR(t){let e=t.request,n=t.params??e??(()=>null);return new Vb(n,z$(t),t.defaultValue,t.equal?H$(t.equal):void 0,t.injector??A(xt),qO)}var vR=class{value;constructor(e){this.value=e,this.value.set=this.set.bind(this),this.value.update=this.update.bind(this),this.value.asReadonly=pp}isError=Tn(()=>this.status()==="error");update(e){this.set(e(en(this.value)))}isLoading=Tn(()=>this.status()==="loading"||this.status()==="reloading");hasValue(){return this.isError()?!1:this.value()!==void 0}asReadonly(){return this}},Vb=class extends vR{loaderFn;equal;pendingTasks;state;extRequest;effectRef;pendingController;resolvePendingTask=void 0;destroyed=!1;unregisterOnDestroy;constructor(e,n,i,r,o,s=qO){super(Tn(()=>{let a=this.state().stream?.();if(!a||this.state().status==="loading"&&this.error())return i;if(!yR(a)){if(s)throw new CR(this.error());return i}return a.value},{equal:r})),this.loaderFn=n,this.equal=r,this.extRequest=Tu({source:e,computation:a=>({request:a,reload:0})}),this.state=Tu({source:this.extRequest,computation:(a,l)=>{let c=a.request===void 0?"idle":"loading";return l?{extRequest:a,status:c,previousStatus:jO(l.value),stream:l.value.extRequest.request===a.request?l.value.stream:void 0}:{extRequest:a,status:c,previousStatus:"idle",stream:void 0}}}),this.effectRef=cs(this.loadEffect.bind(this),{injector:o,manualCleanup:!0}),this.pendingTasks=o.get(vu),this.unregisterOnDestroy=o.get(Li).onDestroy(()=>this.destroy())}status=Tn(()=>jO(this.state()));error=Tn(()=>{let e=this.state().stream?.();return e&&!yR(e)?e.error:void 0});set(e){if(this.destroyed)return;let n=en(this.error),i=en(this.state);if(!n){let r=en(this.value);if(i.status==="local"&&(this.equal?this.equal(r,e):r===e))return}this.state.set({extRequest:i.extRequest,status:"local",previousStatus:"local",stream:It({value:e})}),this.abortInProgressLoad()}reload(){let{status:e}=en(this.state);return e==="idle"||e==="loading"?!1:(this.extRequest.update(({request:n,reload:i})=>({request:n,reload:i+1})),!0)}destroy(){this.destroyed=!0,this.unregisterOnDestroy(),this.effectRef.destroy(),this.abortInProgressLoad(),this.state.set({extRequest:{request:void 0,reload:0},status:"idle",previousStatus:"idle",stream:void 0})}loadEffect(){return oi(this,null,function*(){let e=this.extRequest(),{status:n,previousStatus:i}=en(this.state);if(e.request===void 0)return;if(n!=="loading")return;this.abortInProgressLoad();let r=this.resolvePendingTask=this.pendingTasks.add(),{signal:o}=this.pendingController=new AbortController;try{let s=yield en(()=>this.loaderFn({params:e.request,request:e.request,abortSignal:o,previous:{status:i}}));if(o.aborted||en(this.extRequest)!==e)return;this.state.set({extRequest:e,status:"resolved",previousStatus:"resolved",stream:s})}catch(s){if(o.aborted||en(this.extRequest)!==e)return;this.state.set({extRequest:e,status:"resolved",previousStatus:"error",stream:It({error:_R(s)})})}finally{r?.(),r=void 0}})}abortInProgressLoad(){en(()=>this.pendingController?.abort()),this.pendingController=void 0,this.resolvePendingTask?.(),this.resolvePendingTask=void 0}};function H$(t){return(e,n)=>e===void 0||n===void 0?e===n:t(e,n)}function z$(t){return U$(t)?t.stream:e=>oi(null,null,function*(){try{return It({value:yield t.loader(e)})}catch(n){return It({error:_R(n)})}})}function U$(t){return!!t.stream}function jO(t){switch(t.status){case"loading":return t.extRequest.reload===0?"loading":"reloading";case"resolved":return yR(t.stream())?"resolved":"error";default:return t.status}}function yR(t){return t.error===void 0}function _R(t){return t instanceof Error?t:new bR(t)}var CR=class extends Error{constructor(e){super(e.message,{cause:e})}},bR=class extends Error{constructor(e){super(String(e),{cause:e})}};var eL=Symbol("InputSignalNode#UNSET"),J$=ae(k({},$f),{transformFn:void 0,applyValueToInputSignal(t,e){tc(t,e)}});function tL(t,e){let n=Object.create(J$);n.value=t,n.transformFn=e?.transform;function i(){if(za(n),n.value===eL){let r=null;throw new Ie(-950,r)}return n.value}return i[Qn]=n,i}var aa=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>wb(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},eq=new se("");eq.__NG_ELEMENT_ID__=t=>{let e=Wi();if(e===null)throw new Ie(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new Ie(204,!1)};function Vp(t){return new Bb}function KO(t,e){return tL(t,e)}function tq(t){return tL(eL,t)}var ao=(KO.required=tq,KO);function YO(t,e){return Q1(e)}function nq(t,e){return J1(e)}var Au=(YO.required=nq,YO);function XO(t,e){return Q1(e)}function iq(t,e){return J1(e)}var zb=(XO.required=iq,XO);var xR=new se(""),rq=new se("");function Bp(t){return!t.moduleRef}function oq(t){let e=Bp(t)?t.r3Injector:t.moduleRef.injector,n=e.get($e);return n.run(()=>{Bp(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=e.get(Lr),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:i})}),Bp(t)){let o=()=>e.destroy(),s=t.platformInjector.get(xR);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(xR);s.add(o),t.moduleRef.onDestroy(()=>{vp(t.allPlatformModules,t.moduleRef),r.unsubscribe(),s.delete(o)})}return aq(i,n,()=>{let o=e.get(sR);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(gR,Lp);if(FO(s||Lp),!e.get(rq,!0))return Bp(t)?e.get(so):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Bp(t)){let l=e.get(so);return t.rootComponent!==void 0&&l.bootstrap(t.rootComponent),l}else return sq?.(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}var sq;function aq(t,e,n){try{let i=n();return Pc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t(i)),i}}var Hb=null;function lq(t=[],e){return xt.create({name:e,providers:[{provide:sp,useValue:"platform"},{provide:xR,useValue:new Set([()=>Hb=null])},...t]})}function cq(t=[]){if(Hb)return Hb;let e=lq(t);return Hb=e,AO(),dq(e),e}function dq(t){let e=t.get(_b,null);xi(t,()=>{e?.forEach(n=>n())})}var Bi=(()=>{class t{static __NG_ELEMENT_ID__=uq}return t})();function uq(t){return hq(Wi(),At(),(t&16)===16)}function hq(t,e,n){if(Za(t)&&!n){let i=io(t.index,e);return new el(i,i)}else if(t.type&175){let i=e[lr];return new el(i,e)}return null}function nL(t){hn(8);try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=cq(i),o=[hR({}),{provide:eo,useExisting:GO},h2,...n||[]],s=new _p({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return oq({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{hn(9)}}function L(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function la(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}var SR=Symbol("NOT_SET"),iL=new Set,fq=ae(k({},$f),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:SR,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(t){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==SR&&!ec(this))return this.signal;try{for(let r of this.cleanup??iL)r()}finally{this.cleanup?.clear()}let e=[];t!==void 0&&e.push(t),e.push(this.registerCleanupFn);let n=Qo(this),i;try{i=this.userFn.apply(null,e)}finally{Gs(this,n)}return(this.value===SR||!this.equal(this.value,i))&&(this.value=i,this.version++),this.signal}}),ER=class extends Sp{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(e,n,i,r,o,s=null){super(e,[void 0,void 0,void 0,void 0],i,!1,o,s),this.scheduler=r;for(let a of nR){let l=n[a];if(l===void 0)continue;let c=Object.create(fq);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(za(c),c.value),c.signal[Qn]=c,c.registerCleanupFn=d=>(c.cleanup??=new Set).add(d),this.nodes[a]=c,this.hooks[a]=d=>c.phaseFn(d)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let e of this.nodes)for(let n of e?.cleanup??iL)n()}};function rL(t,e){let n=e?.injector??A(xt),i=n.get(eo),r=n.get(Fb),o=n.get(ol,null,{optional:!0});r.impl??=n.get(iR);let s=t;typeof s=="function"&&(s={mixedReadWrite:t});let a=n.get(Mc,null,{optional:!0}),l=new ER(r.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,i,n.get(Li),o?.snapshot(null));return r.impl.register(l),l}function Ub(t,e){let n=ns(t),i=e.elementInjector||uu();return new tl(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function oL(t){let e=ns(t);if(!e)return null;let n=new tl(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var lL=null;function ca(){return lL}function RR(t){lL??=t}var Hp=class{},zp=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>A(cL),providedIn:"platform"})}return t})(),DR=new se(""),cL=(()=>{class t extends zp{_location;_history;_doc=A(lt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ca().getBaseHref(this._doc)}onPopState(n){let i=ca().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=ca().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Gb(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function sL(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function To(t){return t&&t[0]!=="?"?`?${t}`:t}var da=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>A(jb),providedIn:"root"})}return t})(),Wb=new se(""),jb=(()=>{class t extends da{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??A(lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Gb(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+To(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+To(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+To(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||t)(je(zp),je(Wb,8))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ds=(()=>{class t{_subject=new Qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=mq(sL(aL(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+To(i))}normalize(n){return t.stripTrailingSlash(gq(this._basePath,aL(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+To(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+To(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=To;static joinWithSlash=Gb;static stripTrailingSlash=sL;static \u0275fac=function(i){return new(i||t)(je(da))};static \u0275prov=le({token:t,factory:()=>pq(),providedIn:"root"})}return t})();function pq(){return new ds(je(da))}function gq(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aL(t){return t.replace(/\/index.html$/,"")}function mq(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var AR=(()=>{class t extends da{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,i){super(),this._platformLocation=n,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(n){let i=Gb(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+To(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+To(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(i){return new(i||t)(je(zp),je(Wb,8))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();var TR=/\s+/,dL=[],IR=(()=>{class t{_ngEl;_renderer;initialClasses=dL;rawClass;stateMap=new Map;constructor(n,i){this._ngEl=n,this._renderer=i}set klass(n){this.initialClasses=n!=null?n.trim().split(TR):dL}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(TR):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let r=this.stateMap.get(n);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(TR).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||t)(Kn(dt),Kn(Mi))};static \u0275dir=wt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var FR=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(n){this._viewContainerRef=n}ngOnChanges(n){if(this._shouldRecreateView(n)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(n,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||t)(Kn(mi))};static \u0275dir=wt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[gi]})}return t})();function Up(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var kc=class{};var kR="browser",bq="server";function hL(t){return t===kR}function fL(t){return t===bq}var pL=(()=>{class t{static \u0275prov=le({token:t,providedIn:"root",factory:()=>new PR(A(lt),window)})}return t})(),PR=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(ae(k({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let i=wq(this.document,e);i&&(this.scrollToElement(i,n),i.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(qa(2400,!1))}}scrollToElement(e,n){let i=e.getBoundingClientRect(),r=i.left+this.window.pageXOffset,o=i.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ae(k({},n),{left:r-s[0],top:o-s[1]}))}};function wq(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var Kb=new se(""),Yb=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r,o){return this._findPluginFor(i).addEventListener(n,i,r,o)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new Ie(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||t)(je(Kb),je($e))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),Gp=class{_doc;constructor(e){this._doc=e}manager},$b="ng-app-id";function gL(t){for(let e of t)e.remove()}function mL(t,e){let n=e.createElement("style");return n.textContent=t,n}function _q(t,e,n,i){let r=t.head?.querySelectorAll(`style[${$b}="${e}"],link[${$b}="${e}"]`);if(r)for(let o of r)o.removeAttribute($b),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function LR(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Xb=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,this.isServer=fL(o),_q(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let r of n)this.addUsage(r,this.inline,mL);i?.forEach(r=>this.addUsage(r,this.external,LR))}removeStyles(n,i){for(let r of n)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,i,r){let o=i.get(n);o?o.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(n,this.doc)))})}removeUsage(n,i){let r=i.get(n);r&&(r.usage--,r.usage<=0&&(gL(r.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gL(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(n,mL(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(n,LR(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute($b,this.appId),n.appendChild(i)}static \u0275fac=function(i){return new(i||t)(je(lt),je(xu),je(Eu,8),je(il))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),OR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},BR=/%COMP%/g;var yL="%COMP%",Sq=`_nghost-${yL}`,xq=`_ngcontent-${yL}`,Eq=!0,CL=new se("",{providedIn:"root",factory:()=>Eq});function Mq(t){return xq.replace(BR,t)}function Rq(t){return Sq.replace(BR,t)}function bL(t,e){return e.map(n=>n.replace(BR,t))}var Iu=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,r,o,s,a,l,c=null,d=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new Wp(n,s,l,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,i);return r instanceof qb?r.applyToHost(n):r instanceof jp&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case Js.Emulated:o=new qb(l,c,i,this.appId,d,s,a,u,h);break;case Js.ShadowDom:return new NR(l,c,n,i,s,a,this.nonce,u,h);default:o=new jp(l,c,i,d,s,a,u,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||t)(je(Yb),je(Xb),je(xu),je(CL),je(lt),je(il),je($e),je(Eu),je(ol,8))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),Wp=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,i,r,o){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(OR[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(vL(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(vL(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){n.remove()}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ie(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=OR[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=OR[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ta.DashCase|ta.Important)?e.style.setProperty(n,i,r&ta.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ta.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i,r){if(typeof e=="string"&&(e=ca().getGlobalEventTarget(this.doc,e),!e))throw new Ie(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,r)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function vL(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var NR=class extends Wp{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,i,r,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=r.styles;d=bL(r.id,d);for(let h of d){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let u=r.getExternalStyles?.();if(u)for(let h of u){let f=LR(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jp=class extends Wp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,i,r,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let d=i.styles;this.styles=c?bL(c,d):d,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},qb=class extends jp{contentAttr;hostAttr;constructor(e,n,i,r,o,s,a,l,c){let d=r+"-"+i.id;super(e,n,i,o,s,a,l,c,d),this.contentAttr=Mq(d),this.hostAttr=Rq(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}};var Zb=class t extends Hp{supportsDOMEvents=!0;static makeCurrent(){RR(new t)}onAndCancel(e,n,i,r){return e.addEventListener(n,i,r),()=>{e.removeEventListener(n,i,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Dq();return n==null?null:Tq(n)}resetBaseElement(){$p=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Up(document.cookie,e)}},$p=null;function Dq(){return $p=$p||document.head.querySelector("base"),$p?$p.getAttribute("href"):null}function Tq(t){return new URL(t,document.baseURI).pathname}var Aq=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),_L=(()=>{class t extends Gp{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r,o){return n.addEventListener(i,r,o),()=>this.removeEventListener(n,i,r,o)}removeEventListener(n,i,r,o){return n.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||t)(je(lt))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),wL=["alt","control","meta","shift"],Iq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fq={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},SL=(()=>{class t extends Gp{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,i,r,o){let s=t.parseEventName(i),a=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ca().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),wL.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=Iq[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),wL.forEach(s=>{if(s!==r){let a=Fq[s];a(n)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{t.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||t)(je(lt))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();function VR(t,e){return nL(k({rootComponent:t},Pq(e)))}function Pq(t){return{appProviders:[...Bq,...t?.providers??[]],platformProviders:Nq}}function kq(){Zb.makeCurrent()}function Oq(){return new Si}function Lq(){return T1(document),document}var Nq=[{provide:il,useValue:kR},{provide:_b,useValue:kq,multi:!0},{provide:lt,useFactory:Lq}];var Bq=[{provide:sp,useValue:"root"},{provide:Si,useFactory:Oq},{provide:Kb,useClass:_L,multi:!0,deps:[lt]},{provide:Kb,useClass:SL,multi:!0,deps:[lt]},Iu,Xb,Yb,{provide:qn,useExisting:Iu},{provide:kc,useClass:Aq},[]];var Pu=class{},qp=class{},dl=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=n.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.addHeaderEntry(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(n):this.headers.set(i,[n])}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Jb=class{encodeKey(e){return xL(e)}encodeValue(e){return xL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Vq(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var Hq=/%(\d[a-f0-9])/gi,zq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xL(t){return encodeURIComponent(t).replace(Hq,(e,n)=>zq[n]??e)}function Qb(t){return`${t}`}var ua=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Jb,e.fromString){if(e.fromObject)throw new Ie(2805,!1);this.map=Vq(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(Qb):[Qb(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Qb(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Qb(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var e0=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Uq(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function EL(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function ML(t){return typeof Blob<"u"&&t instanceof Blob}function RL(t){return typeof FormData<"u"&&t instanceof FormData}function Gq(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var DL="Content-Type",TL="Accept",AL="X-Request-URL",IL="text/plain",FL="application/json",Wq=`${FL}, ${IL}, */*`,Fu=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,i,r){this.url=n,this.method=e.toUpperCase();let o;if(Uq(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new dl,this.context??=new e0,!this.params)this.params=new ua,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||EL(this.body)||ML(this.body)||RL(this.body)||Gq(this.body)?this.body:this.body instanceof ua?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||RL(this.body)?null:ML(this.body)?this.body.type||null:EL(this.body)?null:typeof this.body=="string"?IL:this.body instanceof ua?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?FL:null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,l=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,d=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),d)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),u)),new t(n,i,a,{params:u,headers:d,context:h,reportProgress:c,responseType:r,withCredentials:l,transferCache:s,keepalive:o})}},Oc=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Oc||{}),ku=class{headers;status;statusText;url;ok;type;constructor(e,n=200,i="OK"){this.headers=e.headers||new dl,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},t0=class t extends ku{constructor(e={}){super(e)}type=Oc.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Kp=class t extends ku{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Oc.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Yp=class extends ku{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},jq=200,$q=204;function HR(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache,keepalive:t.keepalive}}var ul=(()=>{class t{handler;constructor(n){this.handler=n}request(n,i,r={}){let o;if(n instanceof Fu)o=n;else{let l;r.headers instanceof dl?l=r.headers:l=new dl(r.headers);let c;r.params&&(r.params instanceof ua?c=r.params:c=new ua({fromObject:r.params})),o=new Fu(n,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive})}let s=Je(o).pipe(es(l=>this.handler.handle(l)));if(n instanceof Fu||r.observe==="events")return s;let a=s.pipe(tn(l=>l instanceof Kp));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ye(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Ie(2806,!1);return l.body}));case"blob":return a.pipe(Ye(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Ie(2807,!1);return l.body}));case"text":return a.pipe(Ye(l=>{if(l.body!==null&&typeof l.body!="string")throw new Ie(2808,!1);return l.body}));case"json":default:return a.pipe(Ye(l=>l.body))}case"response":return a;default:throw new Ie(2809,!1)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:new ua().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,HR(r,i))}post(n,i,r={}){return this.request("POST",n,HR(r,i))}put(n,i,r={}){return this.request("PUT",n,HR(r,i))}static \u0275fac=function(i){return new(i||t)(je(Pu))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();var qq=new se("");function Kq(t,e){return e(t)}function Yq(t,e,n){return(i,r)=>xi(n,()=>e(i,o=>t(o,r)))}var PL=new se(""),kL=new se(""),OL=new se("",{providedIn:"root",factory:()=>!0});var n0=(()=>{class t extends Pu{backend;injector;chain=null;pendingTasks=A(vu);contributeToStability=A(OL);constructor(n,i){super(),this.backend=n,this.injector=i}handle(n){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(PL),...this.injector.get(kL,[])]));this.chain=i.reduceRight((r,o)=>Yq(r,o,this.injector),Kq)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(n,r=>this.backend.handle(r)).pipe($s(i))}else return this.chain(n,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||t)(je(qp),je(bn))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();var Xq=/^\)\]\}',?\n/,Zq=RegExp(`^${AL}:`,"m");function Qq(t){return"responseURL"in t&&t.responseURL?t.responseURL:Zq.test(t.getAllResponseHeaders())?t.getResponseHeader(AL):null}var zR=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new Ie(-2800,!1);n.keepalive;let i=this.xhrFactory;return Je(null).pipe($n(()=>new Ct(o=>{let s=i.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((v,m)=>s.setRequestHeader(v,m.join(","))),n.headers.has(TL)||s.setRequestHeader(TL,Wq),!n.headers.has(DL)){let v=n.detectContentTypeHeader();v!==null&&s.setRequestHeader(DL,v)}if(n.responseType){let v=n.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=n.serializeBody(),l=null,c=()=>{if(l!==null)return l;let v=s.statusText||"OK",m=new dl(s.getAllResponseHeaders()),g=Qq(s)||n.url;return l=new t0({headers:m,status:s.status,statusText:v,url:g}),l},d=()=>{let{headers:v,status:m,statusText:g,url:C}=c(),y=null;m!==$q&&(y=typeof s.response>"u"?s.responseText:s.response),m===0&&(m=y?jq:0);let w=m>=200&&m<300;if(n.responseType==="json"&&typeof y=="string"){let R=y;y=y.replace(Xq,"");try{y=y!==""?JSON.parse(y):null}catch(b){y=R,w&&(w=!1,y={error:b,text:y})}}w?(o.next(new Kp({body:y,headers:v,status:m,statusText:g,url:C||void 0})),o.complete()):o.error(new Yp({error:y,headers:v,status:m,statusText:g,url:C||void 0}))},u=v=>{let{url:m}=c(),g=new Yp({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:m||void 0});o.error(g)},h=!1,f=v=>{h||(o.next(c()),h=!0);let m={type:Oc.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(m.total=v.total),n.responseType==="text"&&s.responseText&&(m.partialText=s.responseText),o.next(m)},p=v=>{let m={type:Oc.UploadProgress,loaded:v.loaded};v.lengthComputable&&(m.total=v.total),o.next(m)};return s.addEventListener("load",d),s.addEventListener("error",u),s.addEventListener("timeout",u),s.addEventListener("abort",u),n.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",p)),s.send(a),o.next({type:Oc.Sent}),()=>{s.removeEventListener("error",u),s.removeEventListener("abort",u),s.removeEventListener("load",d),s.removeEventListener("timeout",u),n.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||t)(je(kc))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),LL=new se(""),Jq="XSRF-TOKEN",eK=new se("",{providedIn:"root",factory:()=>Jq}),tK="X-XSRF-TOKEN",nK=new se("",{providedIn:"root",factory:()=>tK}),Xp=class{},iK=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,i){this.doc=n,this.cookieName=i}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Up(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(i){return new(i||t)(je(lt),je(eK))};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();function rK(t,e){let n=t.url.toLowerCase();if(!A(LL)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=A(Xp).getToken(),r=A(nK);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}function UR(...t){let e=[ul,zR,n0,{provide:Pu,useExisting:n0},{provide:qp,useFactory:()=>A(qq,{optional:!0})??A(zR)},{provide:PL,useValue:rK,multi:!0},{provide:LL,useValue:!0},{provide:Xp,useClass:iK}];for(let n of t)e.push(...n.\u0275providers);return kr(e)}var NL=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(i){return new(i||t)(je(lt))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var GR=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=je(sK),r},providedIn:"root"})}return t})(),sK=(()=>{class t extends GR{_doc;constructor(n){super(),this._doc=n}sanitize(n,i){if(i==null)return null;switch(n){case $i.NONE:return i;case $i.HTML:return rl(i,"HTML")?Do(i):O1(this._doc,String(i)).toString();case $i.STYLE:return rl(i,"Style")?Do(i):i;case $i.SCRIPT:if(rl(i,"Script"))return Do(i);throw new Ie(5200,!1);case $i.URL:return rl(i,"URL")?Do(i):Dp(String(i));case $i.RESOURCE_URL:if(rl(i,"ResourceURL"))return Do(i);throw new Ie(5201,!1);default:throw new Ie(5202,!1)}}bypassSecurityTrustHtml(n){return A1(n)}bypassSecurityTrustStyle(n){return I1(n)}bypassSecurityTrustScript(n){return F1(n)}bypassSecurityTrustUrl(n){return P1(n)}bypassSecurityTrustResourceUrl(n){return k1(n)}static \u0275fac=function(i){return new(i||t)(je(lt))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ht="primary",cg=Symbol("RouteTitle"),KR=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bc(t){return new KR(t)}function $L(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function aK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!us(t[n],e[n]))return!1;return!0}function us(t,e){let n=t?YR(t):void 0,i=e?YR(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!qL(t[r],e[r]))return!1;return!0}function YR(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qL(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function KL(t){return t.length>0?t[t.length-1]:null}function fa(t){return CC(t)?t:Pc(t)?En(Promise.resolve(t)):Je(t)}var lK={exact:XL,subset:ZL},YL={exact:cK,subset:dK,ignored:()=>!0};function VL(t,e,n){return lK[n.paths](t.root,e.root,n.matrixParams)&&YL[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function cK(t,e){return us(t,e)}function XL(t,e,n){if(!Lc(t.segments,e.segments)||!o0(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!XL(t.children[i],e.children[i],n))return!1;return!0}function dK(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qL(t[n],e[n]))}function ZL(t,e,n){return QL(t,e,e.segments,n)}function QL(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Lc(r,n)||e.hasChildren()||!o0(r,n,i))}else if(t.segments.length===n.length){if(!Lc(t.segments,n)||!o0(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!ZL(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Lc(t.segments,r)||!o0(t.segments,r,i)||!t.children[Ht]?!1:QL(t.children[Ht],e,o,i)}}function o0(t,e,n){return e.every((i,r)=>YL[n](t[r].parameters,i.parameters))}var fs=class{root;queryParams;fragment;_queryParamMap;constructor(e=new sn([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Bc(this.queryParams),this._queryParamMap}toString(){return fK.serialize(this)}},sn=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return s0(this)}},hl=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Bc(this.parameters),this._parameterMap}toString(){return eN(this)}};function uK(t,e){return Lc(t,e)&&t.every((n,i)=>us(n.parameters,e[i].parameters))}function Lc(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function hK(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ht&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ht&&(n=n.concat(e(r,i)))}),n}var Vc=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>new fl,providedIn:"root"})}return t})(),fl=class{parse(e){let n=new ZR(e);return new fs(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Zp(e.root,!0)}`,i=mK(e.queryParams),r=typeof e.fragment=="string"?`#${pK(e.fragment)}`:"";return`${n}${i}${r}`}},fK=new fl;function s0(t){return t.segments.map(e=>eN(e)).join("/")}function Zp(t,e){if(!t.hasChildren())return s0(t);if(e){let n=t.children[Ht]?Zp(t.children[Ht],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Ht&&i.push(`${r}:${Zp(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=hK(t,(i,r)=>r===Ht?[Zp(t.children[Ht],!1)]:[`${r}:${Zp(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ht]!=null?`${s0(t)}/${n[0]}`:`${s0(t)}/(${n.join("//")})`}}function JL(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function i0(t){return JL(t).replace(/%3B/gi,";")}function pK(t){return encodeURI(t)}function XR(t){return JL(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function a0(t){return decodeURIComponent(t)}function HL(t){return a0(t.replace(/\+/g,"%20"))}function eN(t){return`${XR(t.path)}${gK(t.parameters)}`}function gK(t){return Object.entries(t).map(([e,n])=>`;${XR(e)}=${XR(n)}`).join("")}function mK(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${i0(n)}=${i0(r)}`).join("&"):`${i0(n)}=${i0(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var vK=/^[^\/()?;#]+/;function WR(t){let e=t.match(vK);return e?e[0]:""}var yK=/^[^\/()?;=#]+/;function CK(t){let e=t.match(yK);return e?e[0]:""}var bK=/^[^=?&#]+/;function wK(t){let e=t.match(bK);return e?e[0]:""}var _K=/^[^&#]+/;function SK(t){let e=t.match(_K);return e?e[0]:""}var ZR=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Ht]=new sn(e,n)),i}parseSegment(){let e=WR(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ie(4009,!1);return this.capture(e),new hl(a0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=CK(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=WR(this.remaining);r&&(i=r,this.capture(i))}e[a0(n)]=a0(i)}parseQueryParam(e){let n=wK(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=SK(this.remaining);s&&(i=s,this.capture(i))}let r=HL(n),o=HL(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=WR(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ie(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ht);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Ht]:new sn([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ie(4011,!1)}};function tN(t){return t.segments.length>0?new sn([],{[Ht]:t}):t}function nN(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=nN(r);if(i===Ht&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new sn(t.segments,e);return xK(n)}function xK(t){if(t.numberOfChildren===1&&t.children[Ht]){let e=t.children[Ht];return new sn(t.segments.concat(e.segments),e.children)}return t}function Hu(t){return t instanceof fs}function iN(t,e,n=null,i=null){let r=rN(t);return oN(r,e,n,i)}function rN(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new sn(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=tN(i);return e??r}function oN(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return jR(r,r,r,n,i);let o=EK(e);if(o.toRoot())return jR(r,r,new sn([],{}),n,i);let s=MK(o,r,t),a=s.processChildren?Jp(s.segmentGroup,s.index,o.commands):aN(s.segmentGroup,s.index,o.commands);return jR(r,s.segmentGroup,a,n,i)}function l0(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function tg(t){return typeof t=="object"&&t!=null&&t.outlets}function jR(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;t===e?s=n:s=sN(t,e,n);let a=tN(nN(s));return new fs(a,o,r)}function sN(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=sN(o,e,n)}),new sn(t.segments,i)}var c0=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&l0(i[0]))throw new Ie(4003,!1);let r=i.find(tg);if(r&&r!==KL(i))throw new Ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function EK(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new c0(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new c0(n,e,i)}var Nu=class{segmentGroup;processChildren;index;constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function MK(t,e,n){if(t.isAbsolute)return new Nu(e,!0,0);if(!n)return new Nu(e,!1,NaN);if(n.parent===null)return new Nu(n,!0,0);let i=l0(t.commands[0])?0:1,r=n.segments.length-1+i;return RK(n,r,t.numberOfDoubleDots)}function RK(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ie(4005,!1);r=i.segments.length}return new Nu(i,!1,r-o)}function DK(t){return tg(t[0])?t[0].outlets:{[Ht]:t}}function aN(t,e,n){if(t??=new sn([],{}),t.segments.length===0&&t.hasChildren())return Jp(t,e,n);let i=TK(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new sn(t.segments.slice(0,i.pathIndex),{});return o.children[Ht]=new sn(t.segments.slice(i.pathIndex),t.children),Jp(o,0,r)}else return i.match&&r.length===0?new sn(t.segments,{}):i.match&&!t.hasChildren()?QR(t,e,n):i.match?Jp(t,0,r):QR(t,e,n)}function Jp(t,e,n){if(n.length===0)return new sn(t.segments,{});{let i=DK(n),r={};if(Object.keys(i).some(o=>o!==Ht)&&t.children[Ht]&&t.numberOfChildren===1&&t.children[Ht].segments.length===0){let o=Jp(t.children[Ht],e,n);return new sn(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=aN(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new sn(t.segments,r)}}function TK(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(tg(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!UL(l,c,s))return o;i+=2}else{if(!UL(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function QR(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(tg(o)){let l=AK(o.outlets);return new sn(i,l)}if(r===0&&l0(n[0])){let l=t.segments[e];i.push(new hl(l.path,zL(n[0]))),r++;continue}let s=tg(o)?o.outlets[Ht]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&l0(a)?(i.push(new hl(s,zL(a))),r+=2):(i.push(new hl(s,{})),r++)}return new sn(i,{})}function AK(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=QR(new sn([],{}),0,i))}),e}function zL(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function UL(t,e,n){return t==n.path&&us(e,n.parameters)}var Bu="imperative",yi=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(yi||{}),zr=class{id;url;constructor(e,n){this.id=e,this.url=n}},pl=class extends zr{type=yi.NavigationStart;navigationTrigger;restoredState;constructor(e,n,i="imperative",r=null){super(e,n),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Io=class extends zr{urlAfterRedirects;type=yi.NavigationEnd;constructor(e,n,i){super(e,n),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cr=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(cr||{}),zu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(zu||{}),hs=class extends zr{reason;code;type=yi.NavigationCancel;constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ps=class extends zr{reason;code;type=yi.NavigationSkipped;constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r}},Uu=class extends zr{error;target;type=yi.NavigationError;constructor(e,n,i,r){super(e,n),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ng=class extends zr{urlAfterRedirects;state;type=yi.RoutesRecognized;constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},d0=class extends zr{urlAfterRedirects;state;type=yi.GuardsCheckStart;constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u0=class extends zr{urlAfterRedirects;state;shouldActivate;type=yi.GuardsCheckEnd;constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},h0=class extends zr{urlAfterRedirects;state;type=yi.ResolveStart;constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},f0=class extends zr{urlAfterRedirects;state;type=yi.ResolveEnd;constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},p0=class{route;type=yi.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},g0=class{route;type=yi.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},m0=class{snapshot;type=yi.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},v0=class{snapshot;type=yi.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},y0=class{snapshot;type=yi.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},C0=class{snapshot;type=yi.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gu=class{routerEvent;position;anchor;type=yi.Scroll;constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ig=class{},Wu=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function IK(t){return!(t instanceof ig)&&!(t instanceof Wu)}function FK(t,e){return t.providers&&!t._injector&&(t._injector=Mu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ao(t){return t.outlet||Ht}function PK(t,e){let n=t.filter(i=>Ao(i)===e);return n.push(...t.filter(i=>Ao(i)!==e)),n}function dg(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var b0=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return dg(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Hc(this.rootInjector)}},Hc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,i){let r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new b0(this.rootInjector),this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(i){return new(i||t)(je(bn))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),w0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=JR(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=JR(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=eD(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return eD(e,this._root).map(n=>n.value)}};function JR(t,e){if(t===e.value)return e;for(let n of e.children){let i=JR(t,n);if(i)return i}return null}function eD(t,e){if(t===e.value)return[e];for(let n of e.children){let i=eD(t,n);if(i.length)return i.unshift(e),i}return[]}var Hr=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Lu(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var rg=class extends w0{snapshot;constructor(e,n){super(e),this.snapshot=n,lD(this,e)}toString(){return this.snapshot.toString()}};function lN(t){let e=kK(t),n=new Jn([new hl("",{})]),i=new Jn({}),r=new Jn({}),o=new Jn({}),s=new Jn(""),a=new ha(n,i,o,s,r,Ht,t,e.root);return a.snapshot=e.root,new rg(new Hr(a,[]),e)}function kK(t){let e={},n={},i={},r="",o=new Nc([],e,i,r,n,Ht,t,null,{});return new og("",new Hr(o,[]))}var ha=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ye(c=>c[cg]))??Je(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ye(e=>Bc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ye(e=>Bc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _0(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),r?.data),t._resolvedData)}:i={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},r&&dN(r)&&(i.resolve[cg]=r.title),i}var Nc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[cg]}constructor(e,n,i,r,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},og=class extends w0{url;constructor(e,n){super(n),this.url=e,lD(this,n)}toString(){return cN(this._root)}};function lD(t,e){e.value._routerState=t,e.children.forEach(n=>lD(t,n))}function cN(t){let e=t.children.length>0?` { ${t.children.map(cN).join(", ")} } `:"";return`${t.value}${e}`}function $R(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,us(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),us(e.params,n.params)||t.paramsSubject.next(n.params),aK(e.url,n.url)||t.urlSubject.next(n.url),us(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tD(t,e){let n=us(t.params,e.params)&&uK(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||tD(t.parent,e.parent))}function dN(t){return typeof t.title=="string"||t.title===null}var uN=new se(""),ug=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ht;activateEvents=new q;deactivateEvents=new q;attachEvents=new q;detachEvents=new q;routerOutletData=ao(void 0);parentContexts=A(Hc);location=A(mi);changeDetector=A(Bi);inputBinder=A(hg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ie(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Ie(4013,!1);this._activatedRoute=n;let r=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new nD(n,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[gi]})}return t})(),nD=class{route;childContexts;parent;outletData;constructor(e,n,i,r){this.route=e,this.childContexts=n,this.parent=i,this.outletData=r}get(e,n){return e===ha?this.route:e===Hc?this.childContexts:e===uN?this.outletData:this.parent.get(e,n)}},hg=new se(""),cD=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:i}=n,r=sc([i.queryParams,i.params,i.data]).pipe($n(([o,s,a],l)=>(a=k(k(k({},o),s),a),l===0?Je(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(n);return}let s=oL(i.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,r)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})(),dD=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Lt(0,"router-outlet")},dependencies:[ug],encapsulation:2})}return t})();function uD(t){let e=t.children&&t.children.map(uD),n=e?ae(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ht&&(n.component=dD),n}function OK(t,e,n){let i=sg(t,e._root,n?n._root:void 0);return new rg(i,e)}function sg(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=LK(t,e,n);return new Hr(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sg(t,a)),s}}let i=NK(e.value),r=e.children.map(o=>sg(t,o));return new Hr(i,r)}}function LK(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return sg(t,i,r);return sg(t,i)})}function NK(t){return new ha(new Jn(t.url),new Jn(t.params),new Jn(t.queryParams),new Jn(t.fragment),new Jn(t.data),t.outlet,t.component,t)}var ju=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},hN="ngNavigationCancelingError";function S0(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Hu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=fN(!1,cr.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function fN(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[hN]=!0,n.cancellationCode=e,n}function BK(t){return pN(t)&&Hu(t.url)}function pN(t){return!!t&&t[hN]}var VK=(t,e,n,i)=>Ye(r=>(new iD(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),iD=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),$R(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Lu(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Lu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Lu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Lu(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new C0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new v0(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if($R(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),$R(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},x0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vu=class{component;route;constructor(e,n){this.component=e,this.route=n}};function HK(t,e,n){let i=t._root,r=e?e._root:null;return Qp(i,r,n,[i.value])}function zK(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qu(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!zE(t)?t:e.get(t):i}function Qp(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Lu(e);return t.children.forEach(s=>{UK(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>eg(a,n.getContext(s),r)),r}function UK(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=GK(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new x0(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Qp(t,e,a?a.children:null,i,r):Qp(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Vu(a.outlet.component,s))}else s&&eg(e,a,r),r.canActivateChecks.push(new x0(i)),o.component?Qp(t,null,a?a.children:null,i,r):Qp(t,null,n,i,r);return r}function GK(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Lc(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Lc(t.url,e.url)||!us(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tD(t,e)||!us(t.queryParams,e.queryParams);case"paramsChange":default:return!tD(t,e)}}function eg(t,e,n){let i=Lu(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?eg(s,e.children.getContext(o),n):eg(s,null,n):eg(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vu(e.outlet.component,r)):n.canDeactivateChecks.push(new Vu(null,r)):n.canDeactivateChecks.push(new Vu(null,r))}function fg(t){return typeof t=="function"}function WK(t){return typeof t=="boolean"}function jK(t){return t&&fg(t.canLoad)}function $K(t){return t&&fg(t.canActivate)}function qK(t){return t&&fg(t.canActivateChild)}function KK(t){return t&&fg(t.canDeactivate)}function YK(t){return t&&fg(t.canMatch)}function gN(t){return t instanceof Co||t?.name==="EmptyError"}var r0=Symbol("INITIAL_VALUE");function $u(){return $n(t=>sc(t.map(e=>e.pipe(sr(1),wo(r0)))).pipe(Ye(e=>{for(let n of e)if(n!==!0){if(n===r0)return r0;if(n===!1||XK(n))return n}return!0}),tn(e=>e!==r0),sr(1)))}function XK(t){return Hu(t)||t instanceof ju}function ZK(t,e){return ei(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Je(ae(k({},n),{guardsResult:!0})):QK(s,i,r,t).pipe(ei(a=>a&&WK(a)?JK(i,o,t,e):Je(a)),Ye(a=>ae(k({},n),{guardsResult:a})))})}function QK(t,e,n,i){return En(t).pipe(ei(r=>rY(r.component,r.route,n,e,i)),qs(r=>r!==!0,!0))}function JK(t,e,n,i){return En(e).pipe(es(r=>Wa(tY(r.route.parent,i),eY(r.route,i),iY(t,r.path,n),nY(t,r.route,n))),qs(r=>r!==!0,!0))}function eY(t,e){return t!==null&&e&&e(new y0(t)),Je(!0)}function tY(t,e){return t!==null&&e&&e(new m0(t)),Je(!0)}function nY(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Je(!0);let r=i.map(o=>ac(()=>{let s=dg(e)??n,a=qu(o,s),l=$K(a)?a.canActivate(e,t):xi(s,()=>a(e,t));return fa(l).pipe(qs())}));return Je(r).pipe($u())}function iY(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>zK(s)).filter(s=>s!==null).map(s=>ac(()=>{let a=s.guards.map(l=>{let c=dg(s.node)??n,d=qu(l,c),u=qK(d)?d.canActivateChild(i,t):xi(c,()=>d(i,t));return fa(u).pipe(qs())});return Je(a).pipe($u())}));return Je(o).pipe($u())}function rY(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Je(!0);let s=o.map(a=>{let l=dg(e)??r,c=qu(a,l),d=KK(c)?c.canDeactivate(t,e,n,i):xi(l,()=>c(t,e,n,i));return fa(d).pipe(qs())});return Je(s).pipe($u())}function oY(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return Je(!0);let o=r.map(s=>{let a=qu(s,t),l=jK(a)?a.canLoad(e,n):xi(t,()=>a(e,n));return fa(l)});return Je(o).pipe($u(),mN(i))}function mN(t){return CE(on(e=>{if(typeof e!="boolean")throw S0(t,e)}),Ye(e=>e===!0))}function sY(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return Je(!0);let o=r.map(s=>{let a=qu(s,t),l=YK(a)?a.canMatch(e,n):xi(t,()=>a(e,n));return fa(l)});return Je(o).pipe($u(),mN(i))}var ag=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},lg=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ou(t){return Ua(new ag(t))}function aY(t){return Ua(new Ie(4e3,!1))}function lY(t){return Ua(fN(!1,cr.GuardRejected))}var rD=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Je(i);if(r.numberOfChildren>1||!r.children[Ht])return aY(`${e.redirectTo}`);r=r.children[Ht]}}applyRedirectCommands(e,n,i,r,o){return cY(n,r,o).pipe(Ye(s=>{if(s instanceof fs)throw new lg(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,i);if(s[0]==="/")throw new lg(a);return a}))}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new fs(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new sn(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new Ie(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}};function cY(t,e,n){if(typeof t=="string")return Je(t);let i=t,{queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:d,title:u}=e;return fa(xi(n,()=>i({params:c,data:d,queryParams:r,fragment:o,routeConfig:s,url:a,outlet:l,title:u})))}var oD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dY(t,e,n,i,r){let o=vN(t,e,n);return o.matched?(i=FK(e,i),sY(i,e,n,r).pipe(Ye(s=>s===!0?o:k({},oD)))):Je(o)}function vN(t,e,n){if(e.path==="**")return uY(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},oD):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||$L)(n,t,e);if(!r)return k({},oD);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?k(k({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function uY(t){return{matched:!0,parameters:t.length>0?KL(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function GL(t,e,n,i){return n.length>0&&pY(t,n,i)?{segmentGroup:new sn(e,fY(i,new sn(n,t.children))),slicedSegments:[]}:n.length===0&&gY(t,n,i)?{segmentGroup:new sn(t.segments,hY(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new sn(t.segments,t.children),slicedSegments:n}}function hY(t,e,n,i){let r={};for(let o of n)if(M0(t,e,o)&&!i[Ao(o)]){let s=new sn([],{});r[Ao(o)]=s}return k(k({},i),r)}function fY(t,e){let n={};n[Ht]=e;for(let i of t)if(i.path===""&&Ao(i)!==Ht){let r=new sn([],{});n[Ao(i)]=r}return n}function pY(t,e,n){return n.some(i=>M0(t,e,i)&&Ao(i)!==Ht)}function gY(t,e,n){return n.some(i=>M0(t,e,i))}function M0(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function mY(t,e,n){return e.length===0&&!t.children[n]}var sD=class{};function vY(t,e,n,i,r,o,s="emptyOnly"){return new aD(t,e,n,i,r,s,o).recognize()}var yY=31,aD=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new rD(this.urlSerializer,this.urlTree)}noMatchError(e){return new Ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=GL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ye(({children:n,rootSnapshot:i})=>{let r=new Hr(i,n),o=new og("",r),s=iN(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Nc([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ht,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ht,n).pipe(Ye(i=>({children:i,rootSnapshot:n})),bo(i=>{if(i instanceof lg)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ag?this.noMatchError(i):i}))}processSegmentGroup(e,n,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i,o):this.processSegment(e,n,i,i.segments,r,!0,o).pipe(Ye(s=>s instanceof Hr?[s]:[]))}processChildren(e,n,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return En(o).pipe(es(s=>{let a=i.children[s],l=PK(n,s);return this.processSegmentGroup(e,l,a,s,r)}),ME((s,a)=>(s.push(...a),s)),ja(null),EE(),ei(s=>{if(s===null)return Ou(i);let a=yN(s);return CY(a),Je(a)}))}processSegment(e,n,i,r,o,s,a){return En(n).pipe(es(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,i,r,o,s,a).pipe(bo(c=>{if(c instanceof ag)return Je(null);throw c}))),qs(l=>!!l),bo(l=>{if(gN(l))return mY(i,r,o)?Je(new sD):Ou(i);throw l}))}processSegmentAgainstRoute(e,n,i,r,o,s,a,l){return Ao(i)!==s&&(s===Ht||!M0(r,o,i))?Ou(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s,l):Ou(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=vN(n,r,o);if(!l)return Ou(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yY&&(this.allowRedirects=!1));let f=new Nc(o,c,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,WL(r),Ao(r),r.component??r._loadedComponent??null,r,jL(r)),p=_0(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,f,e).pipe($n(m=>this.applyRedirects.lineralizeSegments(r,m)),ei(m=>this.processSegment(e,i,n,m.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,n,i,r,o,s){let a=dY(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe($n(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe($n(({routes:c})=>{let d=i._loadedInjector??e,{parameters:u,consumedSegments:h,remainingSegments:f}=l,p=new Nc(h,u,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,WL(i),Ao(i),i.component??i._loadedComponent??null,i,jL(i)),v=_0(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:m,slicedSegments:g}=GL(n,h,f,c);if(g.length===0&&m.hasChildren())return this.processChildren(d,c,m,p).pipe(Ye(y=>new Hr(p,y)));if(c.length===0&&g.length===0)return Je(new Hr(p,[]));let C=Ao(i)===o;return this.processSegment(d,c,m,g,C?Ht:o,!0,p).pipe(Ye(y=>new Hr(p,y instanceof Hr?[y]:[])))}))):Ou(n)))}getChildConfig(e,n,i){return n.children?Je({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Je({routes:n._loadedRoutes,injector:n._loadedInjector}):oY(e,n,i,this.urlSerializer).pipe(ei(r=>r?this.configLoader.loadChildren(e,n).pipe(on(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):lY(n))):Je({routes:[],injector:e})}};function CY(t){t.sort((e,n)=>e.value.outlet===Ht?-1:n.value.outlet===Ht?1:e.value.outlet.localeCompare(n.value.outlet))}function bY(t){let e=t.value.routeConfig;return e&&e.path===""}function yN(t){let e=[],n=new Set;for(let i of t){if(!bY(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=yN(i.children);e.push(new Hr(i.value,r))}return e.filter(i=>!n.has(i))}function WL(t){return t.data||{}}function jL(t){return t.resolve||{}}function wY(t,e,n,i,r,o){return ei(s=>vY(t,e,n,i,s.extractedUrl,r,o).pipe(Ye(({state:a,tree:l})=>ae(k({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function _Y(t,e){return ei(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return Je(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of CN(l))s.add(c);let a=0;return En(s).pipe(es(l=>o.has(l)?SY(l,i,t,e):(l.data=_0(l,l.parent,t).resolve,Je(void 0))),on(()=>a++),au(1),ei(l=>a===s.size?Je(n):Ui))})}function CN(t){let e=t.children.map(n=>CN(n)).flat();return[t,...e]}function SY(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!dN(r)&&(o[cg]=r.title),ac(()=>(t.data=_0(t,t.parent,n).resolve,xY(o,t,e,i).pipe(Ye(s=>(t._resolvedData=s,t.data=k(k({},t.data),s),null)))))}function xY(t,e,n,i){let r=YR(t);if(r.length===0)return Je({});let o={};return En(r).pipe(ei(s=>EY(t[s],e,n,i).pipe(qs(),on(a=>{if(a instanceof ju)throw S0(new fl,a);o[s]=a}))),au(1),Ye(()=>o),bo(s=>gN(s)?Ui:Ua(s)))}function EY(t,e,n,i){let r=dg(e)??i,o=qu(t,r),s=o.resolve?o.resolve(e,n):xi(r,()=>o(e,n));return fa(s)}function qR(t){return $n(e=>{let n=t(e);return n?En(n).pipe(Ye(()=>e)):Je(e)})}var hD=(()=>{class t{buildTitle(n){let i,r=n.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ht);return i}getResolvedTitleForRoute(n){return n.data[cg]}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>A(bN),providedIn:"root"})}return t})(),bN=(()=>{class t extends hD{title;constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||t)(je(NL))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zc=new se("",{providedIn:"root",factory:()=>({})}),Uc=new se(""),R0=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(uR);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Je(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=fa(n.loadComponent()).pipe(Ye(_N),on(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),$s(()=>{this.componentLoaders.delete(n)})),r=new ou(i,()=>new Qe).pipe(ru());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Je({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=wN(i,this.compiler,n,this.onLoadEndListener).pipe($s(()=>{this.childrenLoaders.delete(i)})),s=new ou(o,()=>new Qe).pipe(ru());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wN(t,e,n,i){return fa(t.loadChildren()).pipe(Ye(_N),ei(r=>r instanceof Ab||Array.isArray(r)?Je(r):En(e.compileModuleAsync(r))),Ye(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(Uc,[],{optional:!0,self:!0}).flat()),{routes:s.map(uD),injector:o}}))}function MY(t){return t&&typeof t=="object"&&"default"in t}function _N(t){return MY(t)?t.default:t}var D0=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>A(RY),providedIn:"root"})}return t})(),RY=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fD=new se(""),pD=new se("");function SN(t,e,n){let i=t.get(pD),r=t.get(lt);if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),DY(t))),{onViewTransitionCreated:l}=i;return l&&xi(t,()=>l({transition:a,from:e,to:n})),s}function DY(t){return new Promise(e=>{oa({read:()=>setTimeout(e)},{injector:t})})}var gD=new se(""),T0=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Qe;transitionAbortWithErrorSubject=new Qe;configLoader=A(R0);environmentInjector=A(bn);destroyRef=A(Li);urlSerializer=A(Vc);rootContexts=A(Hc);location=A(ds);inputBindingEnabled=A(hg,{optional:!0})!==null;titleStrategy=A(hD);options=A(zc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(D0);createViewTransition=A(fD,{optional:!0});navigationErrorHandler=A(gD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Je(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=r=>this.events.next(new p0(r)),i=r=>this.events.next(new g0(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;this.transitions?.next(ae(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))}setupNavigations(n){return this.transitions=new Jn(null),this.transitions.pipe(tn(i=>i!==null),$n(i=>{let r=!1;return Je(i).pipe($n(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",cr.SupersededByNewNavigation),Ui;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ae(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let l="";return this.events.next(new ps(o.id,this.urlSerializer.serialize(o.rawUrl),l,zu.IgnoredSameUrlNavigation)),o.resolve(!1),Ui}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Je(o).pipe($n(l=>(this.events.next(new pl(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ui:Promise.resolve(l))),wY(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),on(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ae(k({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let c=new ng(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:d,restoredState:u,extras:h}=o,f=new pl(l,this.urlSerializer.serialize(c),d,u);this.events.next(f);let p=lN(this.rootComponentType).snapshot;return this.currentTransition=i=ae(k({},o),{targetSnapshot:p,urlAfterRedirects:c,extras:ae(k({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=c,Je(i)}else{let l="";return this.events.next(new ps(o.id,this.urlSerializer.serialize(o.extractedUrl),l,zu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ui}}),on(o=>{let s=new d0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ye(o=>(this.currentTransition=i=ae(k({},o),{guards:HK(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),ZK(this.environmentInjector,o=>this.events.next(o)),on(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw S0(this.urlSerializer,o.guardsResult);let s=new u0(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),tn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",cr.GuardRejected),!1)),qR(o=>{if(o.guards.canActivateChecks.length!==0)return Je(o).pipe(on(s=>{let a=new h0(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),$n(s=>{let a=!1;return Je(s).pipe(_Y(this.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",cr.NoDataFromResolver)}}))}),on(s=>{let a=new f0(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),qR(o=>{let s=a=>{let l=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(a.routeConfig).pipe(on(c=>{a.component=c}),Ye(()=>{})));for(let c of a.children)l.push(...s(c));return l};return sc(s(o.targetSnapshot.root)).pipe(ja(null),sr(1))}),qR(()=>this.afterPreactivation()),$n(()=>{let{currentSnapshot:o,targetSnapshot:s}=i,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?En(a).pipe(Ye(()=>i)):Je(i)}),Ye(o=>{let s=OK(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=ae(k({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,i}),on(()=>{this.events.next(new ig)}),VK(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),sr(1),hi(new Ct(o=>{let s=i.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(tn(()=>!r&&!i.targetRouterState),on(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",cr.Aborted)}))),on({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Io(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),hi(this.transitionAbortWithErrorSubject.pipe(on(o=>{throw o}))),$s(()=>{r||this.cancelNavigationTransition(i,"",cr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),bo(o=>{if(this.destroyed)return i.resolve(!1),Ui;if(r=!0,pN(o))this.events.next(new hs(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),BK(o)?this.events.next(new Wu(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let s=new Uu(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let a=xi(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ju){let{message:l,cancellationCode:c}=S0(this.urlSerializer,a);this.events.next(new hs(i.id,this.urlSerializer.serialize(i.extractedUrl),l,c)),this.events.next(new Wu(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(a)}}return Ui}))}))}cancelNavigationTransition(n,i,r){let o=new hs(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TY(t){return t!==Bu}var xN=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>A(AY),providedIn:"root"})}return t})(),E0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},AY=(()=>{class t extends E0{static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),EN=(()=>{class t{urlSerializer=A(Vc);options=A(zc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(ds);urlHandlingStrategy=A(D0);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new fs;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:i,targetBrowserUrl:r}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,i):i,s=r??o;return s instanceof fs?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:i,initialUrl:r}){i&&n?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=n):this.rawUrlTree=r}routerState=lN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:()=>A(IY),providedIn:"root"})}return t})(),IY=(()=>{class t extends EN{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{n(i.url,i.state,"popstate")})})}handleRouterEvent(n,i){n instanceof pl?this.updateStateMemento():n instanceof ps?this.commitTransition(i):n instanceof ng?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof ig?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):n instanceof hs&&n.code!==cr.SupersededByNewNavigation&&n.code!==cr.Redirect?this.restoreHistory(i):n instanceof Uu?this.restoreHistory(i,!0):n instanceof Io&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,l=k(k({},s),this.generateNgRouterState(r,a));this.location.replaceState(n,"",l)}else{let a=k(k({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function A0(t,e){t.events.pipe(tn(n=>n instanceof Io||n instanceof hs||n instanceof Uu||n instanceof ps),Ye(n=>n instanceof Io||n instanceof ps?0:(n instanceof hs?n.code===cr.Redirect||n.code===cr.SupersededByNewNavigation:!1)?2:1),tn(n=>n!==2),sr(1)).subscribe(()=>{e()})}var FY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pa=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(Pb);stateManager=A(EN);options=A(zc,{optional:!0})||{};pendingTasks=A(Qs);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(T0);urlSerializer=A(Vc);location=A(ds);urlHandlingStrategy=A(D0);injector=A(bn);_events=new Qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(xN);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(Uc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(hg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Kt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof hs&&i.code!==cr.Redirect&&i.code!==cr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Io)this.navigated=!0;else if(i instanceof Wu){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=k({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||TY(r.source)},s);this.scheduleNavigation(a,Bu,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}IK(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortWithErrorSubject.next(r)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i,r)=>{this.navigateToSyncWithBrowser(n,r,i)})}navigateToSyncWithBrowser(n,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=k({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,i,s,o).catch(l=>{this.injector.get(Lr)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(uD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=rN(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),u=this.currentUrlTree.root}return oN(u,n,d,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){let r=Hu(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Bu,null,i)}navigate(n,i={skipLocationChange:!1}){return kY(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,i){let r;if(i===!0?r=k({},FY):i===!1?r=k({},PY):r=i,Hu(n))return VL(this.currentUrlTree,n,r);let o=this.parseUrl(n);return VL(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.entries(n).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((u,h)=>{a=u,l=h});let d=this.pendingTasks.add();return A0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kY(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Ie(4008,!1)}var pg=class{};var MN=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,i,r,o){this.router=n,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(tn(n=>n instanceof Io),es(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Mu(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return En(r).pipe(Ga())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(n,i):r=Je(null);let o=r.pipe(ei(s=>s===null?Je(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return En([o,s]).pipe(Ga())}else return o})}static \u0275fac=function(i){return new(i||t)(je(pa),je(bn),je(pg),je(R0))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RN=new se(""),OY=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Bu;restoredId=0;store={};constructor(n,i,r,o,s={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof pl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Io?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof ps&&n.code===zu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Gu&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>oi(this,null,function*(){yield new Promise(r=>{setTimeout(r),typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}),this.zone.run(()=>{this.transitions.events.next(new Gu(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){Y1()};static \u0275prov=le({token:t,factory:t.\u0275fac})}return t})();function vD(t,...e){return kr([{provide:Uc,multi:!0,useValue:t},[],{provide:ha,useFactory:DN,deps:[pa]},{provide:kp,multi:!0,useFactory:TN},e.map(n=>n.\u0275providers)])}function DN(t){return t.routerState.root}function gg(t,e){return{\u0275kind:t,\u0275providers:e}}function TN(){let t=A(xt);return e=>{let n=t.get(so);if(e!==n.components[0])return;let i=t.get(pa),r=t.get(AN);t.get(yD)===1&&i.initialNavigation(),t.get(PN,null,{optional:!0})?.setUpPreloading(),t.get(RN,null,{optional:!0})?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var AN=new se("",{factory:()=>new Qe}),yD=new se("",{providedIn:"root",factory:()=>1});function IN(){let t=[{provide:yD,useValue:0},Ru(()=>{let e=A(xt);return e.get(DR,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(pa),o=e.get(AN);A0(r,()=>{i(!0)}),e.get(T0).afterPreactivation=()=>(i(!0),o.closed?Je(void 0):o),r.initialNavigation()}))})];return gg(2,t)}function FN(){let t=[Ru(()=>{A(pa).setUpLocationChangeListener()}),{provide:yD,useValue:2}];return gg(3,t)}var PN=new se("");function kN(t){return gg(0,[{provide:PN,useExisting:MN},{provide:pg,useExisting:t}])}function ON(){return gg(8,[cD,{provide:hg,useExisting:cD}])}function LN(t){oo("NgRouterViewTransitions");let e=[{provide:fD,useValue:SN},{provide:pD,useValue:k({skipNextTransition:!!t?.skipInitialTransition},t)}];return gg(9,e)}var NN=[ds,{provide:Vc,useClass:fl},pa,Hc,{provide:ha,useFactory:DN,deps:[pa]},R0,[]],CD=(()=>{class t{constructor(){}static forRoot(n,i){return{ngModule:t,providers:[NN,[],{provide:Uc,multi:!0,useValue:n},[],i?.errorHandler?{provide:gD,useValue:i.errorHandler}:[],{provide:zc,useValue:i||{}},i?.useHash?NY():BY(),LY(),i?.preloadingStrategy?kN(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?VY(i):[],i?.bindToComponentInputs?ON().\u0275providers:[],i?.enableViewTransitions?LN().\u0275providers:[],HY()]}}static forChild(n){return{ngModule:t,providers:[{provide:Uc,multi:!0,useValue:n}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({})}return t})();function LY(){return{provide:RN,useFactory:()=>{let t=A(pL),e=A($e),n=A(zc),i=A(T0),r=A(Vc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new OY(r,i,t,e,n)}}}function NY(){return{provide:da,useClass:AR}}function BY(){return{provide:da,useClass:jb}}function VY(t){return[t.initialNavigation==="disabled"?FN().\u0275providers:[],t.initialNavigation==="enabledBlocking"?IN().\u0275providers:[]]}var mD=new se("");function HY(){return[{provide:mD,useFactory:TN},{provide:kp,multi:!0,useExisting:mD}]}var K_={};S5(K_,{ACESFilmicToneMapping:()=>A_,AddEquation:()=>xa,AddOperation:()=>NT,AdditiveAnimationBlendMode:()=>V_,AdditiveBlending:()=>R_,AgXToneMapping:()=>UT,AlphaFormat:()=>O_,AlwaysCompare:()=>iA,AlwaysDepth:()=>Jm,AlwaysStencilFunc:()=>bw,AmbientLight:()=>Bm,AnimationAction:()=>Km,AnimationClip:()=>kl,AnimationLoader:()=>Vw,AnimationMixer:()=>Qw,AnimationObjectGroup:()=>Zw,AnimationUtils:()=>Bw,ArcCurve:()=>im,ArrayCamera:()=>jm,ArrowHelper:()=>b_,AttachedBindMode:()=>Cw,Audio:()=>$m,AudioAnalyser:()=>Xw,AudioContext:()=>qh,AudioListener:()=>Kw,AudioLoader:()=>$w,AxesHelper:()=>w_,BackSide:()=>Xi,BasicDepthPacking:()=>KT,BasicShadowMap:()=>vT,BatchedMesh:()=>Yg,Bone:()=>Rh,BooleanKeyframeTrack:()=>bs,Box2:()=>a_,Box3:()=>Ci,Box3Helper:()=>y_,BoxGeometry:()=>Rl,BoxHelper:()=>v_,BufferAttribute:()=>an,BufferGeometry:()=>Bt,BufferGeometryLoader:()=>Wm,ByteType:()=>F_,Cache:()=>Bo,Camera:()=>ld,CameraHelper:()=>m_,CanvasTexture:()=>Lw,CapsuleGeometry:()=>Jg,CatmullRomCurve3:()=>rm,CineonToneMapping:()=>HT,CircleGeometry:()=>em,ClampToEdgeWrapping:()=>Wr,Clock:()=>Kh,Color:()=>Le,ColorKeyframeTrack:()=>Wh,ColorManagement:()=>Zt,CompressedArrayTexture:()=>kw,CompressedCubeTexture:()=>Ow,CompressedTexture:()=>ud,CompressedTextureLoader:()=>Hw,ConeGeometry:()=>Ih,ConstantAlphaFactor:()=>kT,ConstantColorFactor:()=>FT,Controls:()=>S_,CubeCamera:()=>Vg,CubeReflectionMapping:()=>Ss,CubeRefractionMapping:()=>Aa,CubeTexture:()=>Dl,CubeTextureLoader:()=>zw,CubeUVReflectionMapping:()=>md,CubicBezierCurve:()=>Fh,CubicBezierCurve3:()=>om,CubicInterpolant:()=>Am,CullFaceBack:()=>E_,CullFaceFront:()=>mT,CullFaceFrontBack:()=>qB,CullFaceNone:()=>gT,Curve:()=>Er,CurvePath:()=>am,CustomBlending:()=>yT,CustomToneMapping:()=>zT,CylinderGeometry:()=>Ah,Cylindrical:()=>o_,Data3DTexture:()=>ad,DataArrayTexture:()=>sd,DataTexture:()=>qr,DataTextureLoader:()=>Uw,DataUtils:()=>Sw,DecrementStencilOp:()=>aV,DecrementWrapStencilOp:()=>cV,DefaultLoadingManager:()=>hA,DepthFormat:()=>id,DepthStencilFormat:()=>wd,DepthTexture:()=>Th,DetachedBindMode:()=>WT,DirectionalLight:()=>Nm,DirectionalLightHelper:()=>g_,DiscreteInterpolant:()=>Im,DodecahedronGeometry:()=>tm,DoubleSide:()=>Go,DstAlphaFactor:()=>RT,DstColorFactor:()=>TT,DynamicCopyUsage:()=>xV,DynamicDrawUsage:()=>yV,DynamicReadUsage:()=>wV,EdgesGeometry:()=>nm,EllipseCurve:()=>hd,EqualCompare:()=>JT,EqualDepth:()=>tv,EqualStencilFunc:()=>fV,EquirectangularReflectionMapping:()=>Xh,EquirectangularRefractionMapping:()=>Zh,Euler:()=>Vo,EventDispatcher:()=>fr,ExtrudeGeometry:()=>um,FileLoader:()=>uo,Float16BufferAttribute:()=>Tw,Float32BufferAttribute:()=>Ue,FloatType:()=>hr,Fog:()=>Ug,FogExp2:()=>zg,FramebufferTexture:()=>Pw,FrontSide:()=>ys,Frustum:()=>Da,FrustumArray:()=>Kg,GLBufferAttribute:()=>i_,GLSL1:()=>MV,GLSL3:()=>z_,GreaterCompare:()=>eA,GreaterDepth:()=>iv,GreaterEqualCompare:()=>nA,GreaterEqualDepth:()=>nv,GreaterEqualStencilFunc:()=>vV,GreaterStencilFunc:()=>gV,GridHelper:()=>f_,Group:()=>_a,HalfFloatType:()=>Cd,HemisphereLight:()=>Pm,HemisphereLightHelper:()=>h_,IcosahedronGeometry:()=>hm,ImageBitmapLoader:()=>jw,ImageLoader:()=>Ol,ImageUtils:()=>Bg,IncrementStencilOp:()=>sV,IncrementWrapStencilOp:()=>lV,InstancedBufferAttribute:()=>Ra,InstancedBufferGeometry:()=>Gm,InstancedInterleavedBuffer:()=>n_,InstancedMesh:()=>qg,Int16BufferAttribute:()=>Rw,Int32BufferAttribute:()=>Dw,Int8BufferAttribute:()=>xw,IntType:()=>ov,InterleavedBuffer:()=>dd,InterleavedBufferAttribute:()=>Tl,Interpolant:()=>Al,InterpolateDiscrete:()=>mh,InterpolateLinear:()=>Ng,InterpolateSmooth:()=>Ag,InterpolationSamplingMode:()=>TV,InterpolationSamplingType:()=>DV,InvertStencilOp:()=>dV,KeepStencilOp:()=>_l,KeyframeTrack:()=>pr,LOD:()=>Wg,LatheGeometry:()=>fm,Layers:()=>Cs,LessCompare:()=>QT,LessDepth:()=>ev,LessEqualCompare:()=>H_,LessEqualDepth:()=>Ml,LessEqualStencilFunc:()=>pV,LessStencilFunc:()=>hV,Light:()=>Uo,LightProbe:()=>zm,Line:()=>zo,Line3:()=>l_,LineBasicMaterial:()=>Fi,LineCurve:()=>Ph,LineCurve3:()=>sm,LineDashedMaterial:()=>Tm,LineLoop:()=>Xg,LineSegments:()=>Yr,LinearFilter:()=>li,LinearInterpolant:()=>Gh,LinearMipMapLinearFilter:()=>ZB,LinearMipMapNearestFilter:()=>XB,LinearMipmapLinearFilter:()=>jo,LinearMipmapNearestFilter:()=>Qh,LinearSRGBColorSpace:()=>Ea,LinearToneMapping:()=>BT,LinearTransfer:()=>yh,Loader:()=>Rr,LoaderUtils:()=>$h,LoadingManager:()=>jh,LoopOnce:()=>jT,LoopPingPong:()=>qT,LoopRepeat:()=>$T,MOUSE:()=>jB,Material:()=>bi,MaterialLoader:()=>Um,MathUtils:()=>oA,Matrix2:()=>s_,Matrix3:()=>Pt,Matrix4:()=>pt,MaxEquation:()=>_T,Mesh:()=>zn,MeshBasicMaterial:()=>Ho,MeshDepthMaterial:()=>zh,MeshDistanceMaterial:()=>Uh,MeshLambertMaterial:()=>Rm,MeshMatcapMaterial:()=>Dm,MeshNormalMaterial:()=>Mm,MeshPhongMaterial:()=>xm,MeshPhysicalMaterial:()=>Sm,MeshStandardMaterial:()=>Hh,MeshToonMaterial:()=>Em,MinEquation:()=>wT,MirroredRepeatWrapping:()=>gh,MixOperation:()=>LT,MultiplyBlending:()=>T_,MultiplyOperation:()=>Yh,NearestFilter:()=>Ai,NearestMipMapLinearFilter:()=>YB,NearestMipMapNearestFilter:()=>KB,NearestMipmapLinearFilter:()=>vd,NearestMipmapNearestFilter:()=>I_,NeutralToneMapping:()=>GT,NeverCompare:()=>ZT,NeverDepth:()=>Qm,NeverStencilFunc:()=>uV,NoBlending:()=>_s,NoColorSpace:()=>Es,NoToneMapping:()=>Wo,NormalAnimationBlendMode:()=>Nv,NormalBlending:()=>El,NotEqualCompare:()=>tA,NotEqualDepth:()=>rv,NotEqualStencilFunc:()=>mV,NumberKeyframeTrack:()=>Il,Object3D:()=>xn,ObjectLoader:()=>Ww,ObjectSpaceNormalMap:()=>XT,OctahedronGeometry:()=>Bh,OneFactor:()=>xT,OneMinusConstantAlphaFactor:()=>OT,OneMinusConstantColorFactor:()=>PT,OneMinusDstAlphaFactor:()=>DT,OneMinusDstColorFactor:()=>AT,OneMinusSrcAlphaFactor:()=>Og,OneMinusSrcColorFactor:()=>MT,OrthographicCamera:()=>Ll,PCFShadowMap:()=>Zm,PCFSoftShadowMap:()=>M_,PMREMGenerator:()=>Vv,Path:()=>fd,PerspectiveCamera:()=>ii,Plane:()=>Oo,PlaneGeometry:()=>gd,PlaneHelper:()=>C_,PointLight:()=>Lm,PointLightHelper:()=>u_,Points:()=>Zg,PointsMaterial:()=>Dh,PolarGridHelper:()=>p_,PolyhedronGeometry:()=>Ta,PositionalAudio:()=>Yw,PropertyBinding:()=>Sn,PropertyMixer:()=>qm,QuadraticBezierCurve:()=>kh,QuadraticBezierCurve3:()=>Oh,Quaternion:()=>Hi,QuaternionKeyframeTrack:()=>Fl,QuaternionLinearInterpolant:()=>Fm,RED_GREEN_RGTC2_Format:()=>Ov,RED_RGTC1_Format:()=>B_,REVISION:()=>Xm,RGBADepthPacking:()=>YT,RGBAFormat:()=>Ii,RGBAIntegerFormat:()=>dv,RGBA_ASTC_10x10_Format:()=>Tv,RGBA_ASTC_10x5_Format:()=>Mv,RGBA_ASTC_10x6_Format:()=>Rv,RGBA_ASTC_10x8_Format:()=>Dv,RGBA_ASTC_12x10_Format:()=>Av,RGBA_ASTC_12x12_Format:()=>Iv,RGBA_ASTC_4x4_Format:()=>yv,RGBA_ASTC_5x4_Format:()=>Cv,RGBA_ASTC_5x5_Format:()=>bv,RGBA_ASTC_6x5_Format:()=>wv,RGBA_ASTC_6x6_Format:()=>_v,RGBA_ASTC_8x5_Format:()=>Sv,RGBA_ASTC_8x6_Format:()=>xv,RGBA_ASTC_8x8_Format:()=>Ev,RGBA_BPTC_Format:()=>of,RGBA_ETC2_EAC_Format:()=>vv,RGBA_PVRTC_2BPPV1_Format:()=>pv,RGBA_PVRTC_4BPPV1_Format:()=>fv,RGBA_S3TC_DXT1_Format:()=>tf,RGBA_S3TC_DXT3_Format:()=>nf,RGBA_S3TC_DXT5_Format:()=>rf,RGBDepthPacking:()=>nV,RGBFormat:()=>L_,RGBIntegerFormat:()=>QB,RGB_BPTC_SIGNED_Format:()=>Fv,RGB_BPTC_UNSIGNED_Format:()=>Pv,RGB_ETC1_Format:()=>gv,RGB_ETC2_Format:()=>mv,RGB_PVRTC_2BPPV1_Format:()=>hv,RGB_PVRTC_4BPPV1_Format:()=>uv,RGB_S3TC_DXT1_Format:()=>ef,RGDepthPacking:()=>iV,RGFormat:()=>N_,RGIntegerFormat:()=>cv,RawShaderMaterial:()=>_m,Ray:()=>Ma,Raycaster:()=>Ym,RectAreaLight:()=>Vm,RedFormat:()=>lv,RedIntegerFormat:()=>Jh,ReinhardToneMapping:()=>VT,RenderTarget:()=>_h,RenderTarget3D:()=>Jw,RepeatWrapping:()=>ph,ReplaceStencilOp:()=>oV,ReverseSubtractEquation:()=>bT,RingGeometry:()=>pm,SIGNED_RED_GREEN_RGTC2_Format:()=>Lv,SIGNED_RED_RGTC1_Format:()=>kv,SRGBColorSpace:()=>Vi,SRGBTransfer:()=>cn,Scene:()=>Eh,ShaderChunk:()=>Wt,ShaderLib:()=>$o,ShaderMaterial:()=>xr,ShadowMaterial:()=>wm,Shape:()=>vs,ShapeGeometry:()=>gm,ShapePath:()=>__,ShapeUtils:()=>co,ShortType:()=>P_,Skeleton:()=>$g,SkeletonHelper:()=>d_,SkinnedMesh:()=>jg,Source:()=>No,Sphere:()=>ci,SphereGeometry:()=>Vh,Spherical:()=>r_,SphericalHarmonics3:()=>Hm,SplineCurve:()=>Lh,SpotLight:()=>Om,SpotLightHelper:()=>c_,Sprite:()=>Gg,SpriteMaterial:()=>Mh,SrcAlphaFactor:()=>kg,SrcAlphaSaturateFactor:()=>IT,SrcColorFactor:()=>ET,StaticCopyUsage:()=>SV,StaticDrawUsage:()=>Ch,StaticReadUsage:()=>bV,StereoCamera:()=>qw,StreamCopyUsage:()=>EV,StreamDrawUsage:()=>CV,StreamReadUsage:()=>_V,StringKeyframeTrack:()=>ws,SubtractEquation:()=>CT,SubtractiveBlending:()=>D_,TOUCH:()=>$B,TangentSpaceNormalMap:()=>Ia,TetrahedronGeometry:()=>mm,Texture:()=>Zi,TextureLoader:()=>Gw,TextureUtils:()=>x_,TimestampQuery:()=>RV,TorusGeometry:()=>vm,TorusKnotGeometry:()=>ym,Triangle:()=>Lo,TriangleFanDrawMode:()=>tV,TriangleStripDrawMode:()=>eV,TrianglesDrawMode:()=>JB,TubeGeometry:()=>Cm,UVMapping:()=>Lg,Uint16BufferAttribute:()=>Sh,Uint32BufferAttribute:()=>xh,Uint8BufferAttribute:()=>Ew,Uint8ClampedBufferAttribute:()=>Mw,Uniform:()=>e_,UniformsGroup:()=>t_,UniformsLib:()=>Te,UniformsUtils:()=>cA,UnsignedByteType:()=>Mr,UnsignedInt248Type:()=>bd,UnsignedInt5999Type:()=>k_,UnsignedIntType:()=>xs,UnsignedShort4444Type:()=>sv,UnsignedShort5551Type:()=>av,UnsignedShortType:()=>yd,VSMShadowMap:()=>ho,Vector2:()=>ce,Vector3:()=>P,Vector4:()=>Qt,VectorKeyframeTrack:()=>Pl,VideoFrameTexture:()=>Fw,VideoTexture:()=>Qg,WebGL3DRenderTarget:()=>_w,WebGLArrayRenderTarget:()=>ww,WebGLCoordinateSystem:()=>jr,WebGLCubeRenderTarget:()=>Hg,WebGLRenderTarget:()=>Kr,WebGLRenderer:()=>$_,WebGLUtils:()=>m4,WebGPUCoordinateSystem:()=>bh,WebXRController:()=>cd,WireframeGeometry:()=>bm,WrapAroundEnding:()=>vh,ZeroCurvatureEnding:()=>Sl,ZeroFactor:()=>ST,ZeroSlopeEnding:()=>xl,ZeroStencilOp:()=>rV,createCanvasElement:()=>aA});var Xm="178",jB={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$B={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},gT=0,E_=1,mT=2,qB=3,vT=0,Zm=1,M_=2,ho=3,ys=0,Xi=1,Go=2,_s=0,El=1,R_=2,D_=3,T_=4,yT=5,xa=100,CT=101,bT=102,wT=103,_T=104,ST=200,xT=201,ET=202,MT=203,kg=204,Og=205,RT=206,DT=207,TT=208,AT=209,IT=210,FT=211,PT=212,kT=213,OT=214,Qm=0,Jm=1,ev=2,Ml=3,tv=4,nv=5,iv=6,rv=7,Yh=0,LT=1,NT=2,Wo=0,BT=1,VT=2,HT=3,A_=4,zT=5,UT=6,GT=7,Cw="attached",WT="detached",Lg=300,Ss=301,Aa=302,Xh=303,Zh=304,md=306,ph=1e3,Wr=1001,gh=1002,Ai=1003,I_=1004,KB=1004,vd=1005,YB=1005,li=1006,Qh=1007,XB=1007,jo=1008,ZB=1008,Mr=1009,F_=1010,P_=1011,yd=1012,ov=1013,xs=1014,hr=1015,Cd=1016,sv=1017,av=1018,bd=1020,k_=35902,O_=1021,L_=1022,Ii=1023,id=1026,wd=1027,lv=1028,Jh=1029,N_=1030,cv=1031,QB=1032,dv=1033,ef=33776,tf=33777,nf=33778,rf=33779,uv=35840,hv=35841,fv=35842,pv=35843,gv=36196,mv=37492,vv=37496,yv=37808,Cv=37809,bv=37810,wv=37811,_v=37812,Sv=37813,xv=37814,Ev=37815,Mv=37816,Rv=37817,Dv=37818,Tv=37819,Av=37820,Iv=37821,of=36492,Fv=36494,Pv=36495,B_=36283,kv=36284,Ov=36285,Lv=36286,jT=2200,$T=2201,qT=2202,mh=2300,Ng=2301,Ag=2302,Sl=2400,xl=2401,vh=2402,Nv=2500,V_=2501,JB=0,eV=1,tV=2,KT=3200,YT=3201,nV=3202,iV=3203,Ia=0,XT=1,Es="",Vi="srgb",Ea="srgb-linear",yh="linear",cn="srgb",rV=0,_l=7680,oV=7681,sV=7682,aV=7683,lV=34055,cV=34056,dV=5386,uV=512,hV=513,fV=514,pV=515,gV=516,mV=517,vV=518,bw=519,ZT=512,QT=513,JT=514,H_=515,eA=516,tA=517,nA=518,iA=519,Ch=35044,yV=35048,CV=35040,bV=35045,wV=35049,_V=35041,SV=35046,xV=35050,EV=35042,MV="100",z_="300 es",jr=2e3,bh=2001,RV={COMPUTE:"compute",RENDER:"render"},DV={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},TV={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"},fr=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let n=this._listeners;if(n===void 0)return;let i=n[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],BN=1234567,nd=Math.PI/180,rd=180/Math.PI;function $r(){let t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qi[t&255]+qi[t>>8&255]+qi[t>>16&255]+qi[t>>24&255]+"-"+qi[e&255]+qi[e>>8&255]+"-"+qi[e>>16&15|64]+qi[e>>24&255]+"-"+qi[n&63|128]+qi[n>>8&255]+"-"+qi[n>>16&255]+qi[n>>24&255]+qi[i&255]+qi[i>>8&255]+qi[i>>16&255]+qi[i>>24&255]).toLowerCase()}function Ft(t,e,n){return Math.max(e,Math.min(n,t))}function rA(t,e){return(t%e+e)%e}function GY(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function WY(t,e,n){return t!==e?(n-t)/(e-t):0}function Ig(t,e,n){return(1-n)*t+n*e}function jY(t,e,n,i){return Ig(t,e,1-Math.exp(-n*i))}function $Y(t,e=1){return e-Math.abs(rA(t,e*2)-e)}function qY(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function KY(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function YY(t,e){return t+Math.floor(Math.random()*(e-t+1))}function XY(t,e){return t+Math.random()*(e-t)}function ZY(t){return t*(.5-Math.random())}function QY(t){t!==void 0&&(BN=t);let e=BN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function JY(t){return t*nd}function eX(t){return t*rd}function tX(t){return(t&t-1)===0&&t!==0}function nX(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function iX(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function rX(t,e,n,i,r){let o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((e+i)/2),d=s((e+i)/2),u=o((e-i)/2),h=s((e-i)/2),f=o((i-e)/2),p=s((i-e)/2);switch(r){case"XYX":t.set(a*d,l*u,l*h,a*c);break;case"YZY":t.set(l*h,a*d,l*u,a*c);break;case"ZXZ":t.set(l*u,l*h,a*d,a*c);break;case"XZX":t.set(a*d,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*d,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ur(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function zt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var oA={DEG2RAD:nd,RAD2DEG:rd,generateUUID:$r,clamp:Ft,euclideanModulo:rA,mapLinear:GY,inverseLerp:WY,lerp:Ig,damp:jY,pingpong:$Y,smoothstep:qY,smootherstep:KY,randInt:YY,randFloat:XY,randFloatSpread:ZY,seededRandom:QY,degToRad:JY,radToDeg:eX,isPowerOfTwo:tX,ceilPowerOfTwo:nX,floorPowerOfTwo:iX,setQuaternionFromProperEuler:rX,normalize:zt,denormalize:ur},ce=class t{constructor(e=0,n=0){t.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Ft(this.x,e.x,n.x),this.y=Ft(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Ft(this.x,e,n),this.y=Ft(this.y,e,n),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ft(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;let i=this.dot(e)/n;return Math.acos(Ft(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){let i=Math.cos(n),r=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Hi=class{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,o,s,a){let l=i[r+0],c=i[r+1],d=i[r+2],u=i[r+3],h=o[s+0],f=o[s+1],p=o[s+2],v=o[s+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=d,e[n+3]=u;return}if(a===1){e[n+0]=h,e[n+1]=f,e[n+2]=p,e[n+3]=v;return}if(u!==v||l!==h||c!==f||d!==p){let m=1-a,g=l*h+c*f+d*p+u*v,C=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let R=Math.sqrt(y),b=Math.atan2(R,g*C);m=Math.sin(m*b)/R,a=Math.sin(a*b)/R}let w=a*C;if(l=l*m+h*w,c=c*m+f*w,d=d*m+p*w,u=u*m+v*w,m===1-a){let R=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=R,c*=R,d*=R,u*=R}}e[n]=l,e[n+1]=c,e[n+2]=d,e[n+3]=u}static multiplyQuaternionsFlat(e,n,i,r,o,s){let a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],u=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[n]=a*p+d*u+l*f-c*h,e[n+1]=l*p+d*h+c*u-a*f,e[n+2]=c*p+d*f+a*h-l*u,e[n+3]=d*p-a*u-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),u=a(o/2),h=l(i/2),f=l(r/2),p=l(o/2);switch(s){case"XYZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"YXZ":this._x=h*d*u+c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"ZXY":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u-h*f*p;break;case"ZYX":this._x=h*d*u-c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u+h*f*p;break;case"YZX":this._x=h*d*u+c*f*p,this._y=c*f*u+h*d*p,this._z=c*d*p-h*f*u,this._w=c*d*u-h*f*p;break;case"XZY":this._x=h*d*u-c*f*p,this._y=c*f*u-h*d*p,this._z=c*d*p+h*f*u,this._w=c*d*u+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){let i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let n=e.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],l=n[9],c=n[2],d=n[6],u=n[10],h=i+a+u;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(d-l)*f,this._y=(o-c)*f,this._z=(s-r)*f}else if(i>a&&i>u){let f=2*Math.sqrt(1+i-a-u);this._w=(d-l)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+c)/f}else if(a>u){let f=2*Math.sqrt(1+a-i-u);this._w=(o-c)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(l+d)/f}else{let f=2*Math.sqrt(1+u-i-a);this._w=(s-r)/f,this._x=(o+c)/f,this._y=(l+d)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ft(this.dot(e),-1,1)))}rotateTowards(e,n){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){let i=e._x,r=e._y,o=e._z,s=e._w,a=n._x,l=n._y,c=n._z,d=n._w;return this._x=i*d+s*a+r*c-o*l,this._y=r*d+s*l+o*a-i*c,this._z=o*d+s*c+i*l-r*a,this._w=s*d-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let f=1-n;return this._w=f*s+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*o+n*this._z,this.normalize(),this}let c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-n)*d)/c,h=Math.sin(n*d)/c;return this._w=s*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=o*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){let e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},P=class t{constructor(e=0,n=0,i=0){t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(VN.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(VN.setFromAxisAngle(e,n))}applyMatrix3(e){let n=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*n+o[3]*i+o[6]*r,this.y=o[1]*n+o[4]*i+o[7]*r,this.z=o[2]*n+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let n=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*n+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*n+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*n+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*n+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let n=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=2*(s*r-a*i),d=2*(a*n-o*r),u=2*(o*i-s*n);return this.x=n+l*c+s*u-a*d,this.y=i+l*d+a*c-o*u,this.z=r+l*u+o*d-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let n=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r,this.y=o[1]*n+o[5]*i+o[9]*r,this.z=o[2]*n+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Ft(this.x,e.x,n.x),this.y=Ft(this.y,e.y,n.y),this.z=Ft(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Ft(this.x,e,n),this.y=Ft(this.y,e,n),this.z=Ft(this.z,e,n),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ft(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){let i=e.x,r=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){let n=e.lengthSq();if(n===0)return this.set(0,0,0);let i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return bD.copy(this).projectOnVector(e),this.sub(bD)}reflect(e){return this.sub(bD.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;let i=this.dot(e)/n;return Math.acos(Ft(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){let r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){let n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){let n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},bD=new P,VN=new Hi,Pt=class t{constructor(e,n,i,r,o,s,a,l,c){t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,o,s,a,l,c)}set(e,n,i,r,o,s,a,l,c){let d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=n,d[4]=o,d[5]=l,d[6]=i,d[7]=s,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){let i=e.elements,r=n.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],h=i[2],f=i[5],p=i[8],v=r[0],m=r[3],g=r[6],C=r[1],y=r[4],w=r[7],R=r[2],b=r[5],_=r[8];return o[0]=s*v+a*C+l*R,o[3]=s*m+a*y+l*b,o[6]=s*g+a*w+l*_,o[1]=c*v+d*C+u*R,o[4]=c*m+d*y+u*b,o[7]=c*g+d*w+u*_,o[2]=h*v+f*C+p*R,o[5]=h*m+f*y+p*b,o[8]=h*g+f*w+p*_,this}multiplyScalar(e){let n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){let e=this.elements,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return n*s*d-n*a*c-i*o*d+i*a*l+r*o*c-r*s*l}invert(){let e=this.elements,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*s-a*c,h=a*l-d*o,f=c*o-s*l,p=n*u+i*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/p;return e[0]=u*v,e[1]=(r*c-d*i)*v,e[2]=(a*i-r*s)*v,e[3]=h*v,e[4]=(d*n-r*l)*v,e[5]=(r*o-a*n)*v,e[6]=f*v,e[7]=(i*l-c*n)*v,e[8]=(s*n-i*o)*v,this}transpose(){let e,n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,o,s,a){let l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(wD.makeScale(e,n)),this}rotate(e){return this.premultiply(wD.makeRotation(-e)),this}translate(e,n){return this.premultiply(wD.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){let n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){let n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){let i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},wD=new Pt;function sA(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}var oX={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hh(t,e){return new oX[t](e)}function wh(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function aA(){let t=wh("canvas");return t.style.display="block",t}var HN={};function od(t){t in HN||(HN[t]=!0,console.warn(t))}function AV(t,e,n){return new Promise(function(i,r){function o(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:i()}}setTimeout(o,n)})}function IV(t){let e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function FV(t){let e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var zN=new Pt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),UN=new Pt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function sX(){let t={enabled:!0,workingColorSpace:Ea,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===cn&&(r.r=Sa(r.r),r.g=Sa(r.g),r.b=Sa(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===cn&&(r.r=fh(r.r),r.g=fh(r.g),r.b=fh(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Es?yh:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return od("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return od("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,o)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[Ea]:{primaries:e,whitePoint:i,transfer:yh,toXYZ:zN,fromXYZ:UN,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Vi},outputColorSpaceConfig:{drawingBufferColorSpace:Vi}},[Vi]:{primaries:e,whitePoint:i,transfer:cn,toXYZ:zN,fromXYZ:UN,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Vi}}}),t}var Zt=sX();function Sa(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function fh(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}var Ku,Bg=class{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Ku===void 0&&(Ku=wh("canvas")),Ku.width=e.width,Ku.height=e.height;let r=Ku.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Ku}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let n=wh("canvas");n.width=e.width,n.height=e.height;let i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Sa(o[s]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){let n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Sa(n[i]/255)*255):n[i]=Sa(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},aX=0,No=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:aX++}),this.uuid=$r(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let n=this.data;return n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(_D(r[s].image)):o.push(_D(r[s]))}else o=_D(r);i.url=o}return n||(e.images[this.uuid]=i),i}};function _D(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Bg.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var lX=0,SD=new P,Zi=(()=>{class t extends fr{constructor(n=t.DEFAULT_IMAGE,i=t.DEFAULT_MAPPING,r=Wr,o=Wr,s=li,a=jo,l=Ii,c=Mr,d=t.DEFAULT_ANISOTROPY,u=Es){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lX++}),this.uuid=$r(),this.name="",this.source=new No(n),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ce(0,0),this.repeat=new ce(1,1),this.center=new ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(n&&n.depth&&n.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(SD).x}get height(){return this.source.getSize(SD).y}get depth(){return this.source.getSize(SD).z}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(n,i){this.updateRanges.push({start:n,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.renderTarget=n.renderTarget,this.isRenderTargetTexture=n.isRenderTargetTexture,this.isArrayTexture=n.isArrayTexture,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}setValues(n){for(let i in n){let r=n[i];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let o=this[i];if(o===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[i]=r}}toJSON(n){let i=n===void 0||typeof n=="string";if(!i&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(n.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==Lg)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case ph:n.x=n.x-Math.floor(n.x);break;case Wr:n.x=n.x<0?0:1;break;case gh:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case ph:n.y=n.y-Math.floor(n.y);break;case Wr:n.y=n.y<0?0:1;break;case gh:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}return t.DEFAULT_IMAGE=null,t.DEFAULT_MAPPING=Lg,t.DEFAULT_ANISOTROPY=1,t})(),Qt=class t{constructor(e=0,n=0,i=0,r=1){t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let n=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*n+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*n+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*n+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,o,l=e.elements,c=l[0],d=l[4],u=l[8],h=l[1],f=l[5],p=l[9],v=l[2],m=l[6],g=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-v)<.01&&Math.abs(p-m)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+v)<.1&&Math.abs(p+m)<.1&&Math.abs(c+f+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;let y=(c+1)/2,w=(f+1)/2,R=(g+1)/2,b=(d+h)/4,_=(u+v)/4,M=(p+m)/4;return y>w&&y>R?y<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(y),r=b/i,o=_/i):w>R?w<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(w),i=b/r,o=M/r):R<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(R),i=_/o,r=M/o),this.set(i,r,o,n),this}let C=Math.sqrt((m-p)*(m-p)+(u-v)*(u-v)+(h-d)*(h-d));return Math.abs(C)<.001&&(C=1),this.x=(m-p)/C,this.y=(u-v)/C,this.z=(h-d)/C,this.w=Math.acos((c+f+g-1)/2),this}setFromMatrixPosition(e){let n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Ft(this.x,e.x,n.x),this.y=Ft(this.y,e.y,n.y),this.z=Ft(this.z,e.z,n.z),this.w=Ft(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Ft(this.x,e,n),this.y=Ft(this.y,e,n),this.z=Ft(this.z,e,n),this.w=Ft(this.w,e,n),this}clampLength(e,n){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Ft(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},_h=class extends fr{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:li,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new Qt(0,0,e,n),this.scissorTest=!1,this.viewport=new Qt(0,0,e,n);let r={width:e,height:n,depth:i.depth},o=new Zi(r);this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let n={minFilter:li,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;let r=Object.assign({},e.textures[n].image);this.textures[n].source=new No(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Kr=class extends _h{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}},sd=class extends Zi{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Ai,this.minFilter=Ai,this.wrapR=Wr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},ww=class extends Kr{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new sd(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}},ad=class extends Zi{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Ai,this.minFilter=Ai,this.wrapR=Wr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},_w=class extends Kr{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new ad(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}},Ci=class{constructor(e=new P(1/0,1/0,1/0),n=new P(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Fo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Fo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){let i=Fo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Fo):Fo.fromBufferAttribute(o,s),Fo.applyMatrix4(e.matrixWorld),this.expandByPoint(Fo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),I0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),I0.copy(i.boundingBox)),I0.applyMatrix4(e.matrixWorld),this.union(I0)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Fo),Fo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(mg),F0.subVectors(this.max,mg),Yu.subVectors(e.a,mg),Xu.subVectors(e.b,mg),Zu.subVectors(e.c,mg),gl.subVectors(Xu,Yu),ml.subVectors(Zu,Xu),Gc.subVectors(Yu,Zu);let n=[0,-gl.z,gl.y,0,-ml.z,ml.y,0,-Gc.z,Gc.y,gl.z,0,-gl.x,ml.z,0,-ml.x,Gc.z,0,-Gc.x,-gl.y,gl.x,0,-ml.y,ml.x,0,-Gc.y,Gc.x,0];return!xD(n,Yu,Xu,Zu,F0)||(n=[1,0,0,0,1,0,0,0,1],!xD(n,Yu,Xu,Zu,F0))?!1:(P0.crossVectors(gl,ml),n=[P0.x,P0.y,P0.z],xD(n,Yu,Xu,Zu,F0))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Fo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Fo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ga[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ga[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ga[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ga[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ga[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ga[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ga[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ga[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ga),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},ga=[new P,new P,new P,new P,new P,new P,new P,new P],Fo=new P,I0=new Ci,Yu=new P,Xu=new P,Zu=new P,gl=new P,ml=new P,Gc=new P,mg=new P,F0=new P,P0=new P,Wc=new P;function xD(t,e,n,i,r){for(let o=0,s=t.length-3;o<=s;o+=3){Wc.fromArray(t,o);let a=r.x*Math.abs(Wc.x)+r.y*Math.abs(Wc.y)+r.z*Math.abs(Wc.z),l=e.dot(Wc),c=n.dot(Wc),d=i.dot(Wc);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}var cX=new Ci,vg=new P,ED=new P,ci=class{constructor(e=new P,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){let i=this.center;n!==void 0?i.copy(n):cX.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){let i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;vg.subVectors(e,this.center);let n=vg.lengthSq();if(n>this.radius*this.radius){let i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(vg,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ED.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(vg.copy(e.center).add(ED)),this.expandByPoint(vg.copy(e.center).sub(ED))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},ma=new P,MD=new P,k0=new P,vl=new P,RD=new P,O0=new P,DD=new P,Ma=class{constructor(e=new P,n=new P(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ma)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);let i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let n=ma.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ma.copy(this.origin).addScaledVector(this.direction,n),ma.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){MD.copy(e).add(n).multiplyScalar(.5),k0.copy(n).sub(e).normalize(),vl.copy(this.origin).sub(MD);let o=e.distanceTo(n)*.5,s=-this.direction.dot(k0),a=vl.dot(this.direction),l=-vl.dot(k0),c=vl.lengthSq(),d=Math.abs(1-s*s),u,h,f,p;if(d>0)if(u=s*l-a,h=s*a-l,p=o*d,u>=0)if(h>=-p)if(h<=p){let v=1/d;u*=v,h*=v,f=u*(u+s*h+2*a)+h*(s*u+h+2*l)+c}else h=o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h=-o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;else h<=-p?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c):h<=p?(u=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-l),o),f=-u*u+h*(h+2*l)+c);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),f=-u*u+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(MD).addScaledVector(k0,h),f}intersectSphere(e,n){ma.subVectors(e.center,this.origin);let i=ma.dot(this.direction),r=ma.dot(ma)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){let i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){let n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,o,s,a,l,c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,ma)!==null}intersectTriangle(e,n,i,r,o){RD.subVectors(n,e),O0.subVectors(i,e),DD.crossVectors(RD,O0);let s=this.direction.dot(DD),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;vl.subVectors(this.origin,e);let l=a*this.direction.dot(O0.crossVectors(vl,O0));if(l<0)return null;let c=a*this.direction.dot(RD.cross(vl));if(c<0||l+c>s)return null;let d=-a*vl.dot(DD);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},pt=class t{constructor(e,n,i,r,o,s,a,l,c,d,u,h,f,p,v,m){t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,o,s,a,l,c,d,u,h,f,p,v,m)}set(e,n,i,r,o,s,a,l,c,d,u,h,f,p,v,m){let g=this.elements;return g[0]=e,g[4]=n,g[8]=i,g[12]=r,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=u,g[14]=h,g[3]=f,g[7]=p,g[11]=v,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new t().fromArray(this.elements)}copy(e){let n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){let n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){let n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){let n=this.elements,i=e.elements,r=1/Qu.setFromMatrixColumn(e,0).length(),o=1/Qu.setFromMatrixColumn(e,1).length(),s=1/Qu.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){let n=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(e.order==="XYZ"){let h=s*d,f=s*u,p=a*d,v=a*u;n[0]=l*d,n[4]=-l*u,n[8]=c,n[1]=f+p*c,n[5]=h-v*c,n[9]=-a*l,n[2]=v-h*c,n[6]=p+f*c,n[10]=s*l}else if(e.order==="YXZ"){let h=l*d,f=l*u,p=c*d,v=c*u;n[0]=h+v*a,n[4]=p*a-f,n[8]=s*c,n[1]=s*u,n[5]=s*d,n[9]=-a,n[2]=f*a-p,n[6]=v+h*a,n[10]=s*l}else if(e.order==="ZXY"){let h=l*d,f=l*u,p=c*d,v=c*u;n[0]=h-v*a,n[4]=-s*u,n[8]=p+f*a,n[1]=f+p*a,n[5]=s*d,n[9]=v-h*a,n[2]=-s*c,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){let h=s*d,f=s*u,p=a*d,v=a*u;n[0]=l*d,n[4]=p*c-f,n[8]=h*c+v,n[1]=l*u,n[5]=v*c+h,n[9]=f*c-p,n[2]=-c,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){let h=s*l,f=s*c,p=a*l,v=a*c;n[0]=l*d,n[4]=v-h*u,n[8]=p*u+f,n[1]=u,n[5]=s*d,n[9]=-a*d,n[2]=-c*d,n[6]=f*u+p,n[10]=h-v*u}else if(e.order==="XZY"){let h=s*l,f=s*c,p=a*l,v=a*c;n[0]=l*d,n[4]=-u,n[8]=c*d,n[1]=h*u+v,n[5]=s*d,n[9]=f*u-p,n[2]=p*u-f,n[6]=a*d,n[10]=v*u+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dX,e,uX)}lookAt(e,n,i){let r=this.elements;return Ur.subVectors(e,n),Ur.lengthSq()===0&&(Ur.z=1),Ur.normalize(),yl.crossVectors(i,Ur),yl.lengthSq()===0&&(Math.abs(i.z)===1?Ur.x+=1e-4:Ur.z+=1e-4,Ur.normalize(),yl.crossVectors(i,Ur)),yl.normalize(),L0.crossVectors(Ur,yl),r[0]=yl.x,r[4]=L0.x,r[8]=Ur.x,r[1]=yl.y,r[5]=L0.y,r[9]=Ur.y,r[2]=yl.z,r[6]=L0.z,r[10]=Ur.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){let i=e.elements,r=n.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],h=i[9],f=i[13],p=i[2],v=i[6],m=i[10],g=i[14],C=i[3],y=i[7],w=i[11],R=i[15],b=r[0],_=r[4],M=r[8],x=r[12],S=r[1],I=r[5],N=r[9],B=r[13],W=r[2],U=r[6],j=r[10],Y=r[14],$=r[3],re=r[7],oe=r[11],ie=r[15];return o[0]=s*b+a*S+l*W+c*$,o[4]=s*_+a*I+l*U+c*re,o[8]=s*M+a*N+l*j+c*oe,o[12]=s*x+a*B+l*Y+c*ie,o[1]=d*b+u*S+h*W+f*$,o[5]=d*_+u*I+h*U+f*re,o[9]=d*M+u*N+h*j+f*oe,o[13]=d*x+u*B+h*Y+f*ie,o[2]=p*b+v*S+m*W+g*$,o[6]=p*_+v*I+m*U+g*re,o[10]=p*M+v*N+m*j+g*oe,o[14]=p*x+v*B+m*Y+g*ie,o[3]=C*b+y*S+w*W+R*$,o[7]=C*_+y*I+w*U+R*re,o[11]=C*M+y*N+w*j+R*oe,o[15]=C*x+y*B+w*Y+R*ie,this}multiplyScalar(e){let n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){let e=this.elements,n=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],h=e[10],f=e[14],p=e[3],v=e[7],m=e[11],g=e[15];return p*(+o*l*u-r*c*u-o*a*h+i*c*h+r*a*f-i*l*f)+v*(+n*l*f-n*c*h+o*s*h-r*s*f+r*c*d-o*l*d)+m*(+n*c*u-n*a*f-o*s*u+i*s*f+o*a*d-i*c*d)+g*(-r*a*d-n*l*u+n*a*h+r*s*u-i*s*h+i*l*d)}transpose(){let e=this.elements,n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){let e=this.elements,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],h=e[10],f=e[11],p=e[12],v=e[13],m=e[14],g=e[15],C=u*m*c-v*h*c+v*l*f-a*m*f-u*l*g+a*h*g,y=p*h*c-d*m*c-p*l*f+s*m*f+d*l*g-s*h*g,w=d*v*c-p*u*c+p*a*f-s*v*f-d*a*g+s*u*g,R=p*u*l-d*v*l-p*a*h+s*v*h+d*a*m-s*u*m,b=n*C+i*y+r*w+o*R;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let _=1/b;return e[0]=C*_,e[1]=(v*h*o-u*m*o-v*r*f+i*m*f+u*r*g-i*h*g)*_,e[2]=(a*m*o-v*l*o+v*r*c-i*m*c-a*r*g+i*l*g)*_,e[3]=(u*l*o-a*h*o-u*r*c+i*h*c+a*r*f-i*l*f)*_,e[4]=y*_,e[5]=(d*m*o-p*h*o+p*r*f-n*m*f-d*r*g+n*h*g)*_,e[6]=(p*l*o-s*m*o-p*r*c+n*m*c+s*r*g-n*l*g)*_,e[7]=(s*h*o-d*l*o+d*r*c-n*h*c-s*r*f+n*l*f)*_,e[8]=w*_,e[9]=(p*u*o-d*v*o-p*i*f+n*v*f+d*i*g-n*u*g)*_,e[10]=(s*v*o-p*a*o+p*i*c-n*v*c-s*i*g+n*a*g)*_,e[11]=(d*a*o-s*u*o-d*i*c+n*u*c+s*i*f-n*a*f)*_,e[12]=R*_,e[13]=(d*v*r-p*u*r+p*i*h-n*v*h-d*i*m+n*u*m)*_,e[14]=(p*a*r-s*v*r-p*i*l+n*v*l+s*i*m-n*a*m)*_,e[15]=(s*u*r-d*a*r+d*i*l-n*u*l-s*i*h+n*a*h)*_,this}scale(e){let n=this.elements,i=e.x,r=e.y,o=e.z;return n[0]*=i,n[4]*=r,n[8]*=o,n[1]*=i,n[5]*=r,n[9]*=o,n[2]*=i,n[6]*=r,n[10]*=o,n[3]*=i,n[7]*=r,n[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){let n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){let n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){let n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){let i=Math.cos(n),r=Math.sin(n),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,d=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*s,0,c*l-r*a,d*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){let r=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,c=o+o,d=s+s,u=a+a,h=o*c,f=o*d,p=o*u,v=s*d,m=s*u,g=a*u,C=l*c,y=l*d,w=l*u,R=i.x,b=i.y,_=i.z;return r[0]=(1-(v+g))*R,r[1]=(f+w)*R,r[2]=(p-y)*R,r[3]=0,r[4]=(f-w)*b,r[5]=(1-(h+g))*b,r[6]=(m+C)*b,r[7]=0,r[8]=(p+y)*_,r[9]=(m-C)*_,r[10]=(1-(h+v))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){let r=this.elements,o=Qu.set(r[0],r[1],r[2]).length(),s=Qu.set(r[4],r[5],r[6]).length(),a=Qu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Po.copy(this);let c=1/o,d=1/s,u=1/a;return Po.elements[0]*=c,Po.elements[1]*=c,Po.elements[2]*=c,Po.elements[4]*=d,Po.elements[5]*=d,Po.elements[6]*=d,Po.elements[8]*=u,Po.elements[9]*=u,Po.elements[10]*=u,n.setFromRotationMatrix(Po),i.x=o,i.y=s,i.z=a,this}makePerspective(e,n,i,r,o,s,a=jr){let l=this.elements,c=2*o/(n-e),d=2*o/(i-r),u=(n+e)/(n-e),h=(i+r)/(i-r),f,p;if(a===jr)f=-(s+o)/(s-o),p=-2*s*o/(s-o);else if(a===bh)f=-s/(s-o),p=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,i,r,o,s,a=jr){let l=this.elements,c=1/(n-e),d=1/(i-r),u=1/(s-o),h=(n+e)*c,f=(i+r)*d,p,v;if(a===jr)p=(s+o)*u,v=-2*u;else if(a===bh)p=o*u,v=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){let i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}},Qu=new P,Po=new pt,dX=new P(0,0,0),uX=new P(1,1,1),yl=new P,L0=new P,Ur=new P,GN=new pt,WN=new Hi,Vo=(()=>{class t{constructor(n=0,i=0,r=0,o=t.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,i,r,o=this._order){return this._x=n,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,i=this._order,r=!0){let o=n.elements,s=o[0],a=o[4],l=o[8],c=o[1],d=o[5],u=o[9],h=o[2],f=o[6],p=o[10];switch(i){case"XYZ":this._y=Math.asin(Ft(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Ft(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ft(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Ft(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Ft(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Ft(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(n,i,r){return GN.makeRotationFromQuaternion(n),this.setFromRotationMatrix(GN,i,r)}setFromVector3(n,i=this._order){return this.set(n.x,n.y,n.z,i)}reorder(n){return WN.setFromEuler(this),this.setFromQuaternion(WN,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],i=0){return n[i]=this._x,n[i+1]=this._y,n[i+2]=this._z,n[i+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return t.DEFAULT_ORDER="XYZ",t})(),Cs=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},hX=0,jN=new P,Ju=new Hi,va=new pt,N0=new P,yg=new P,fX=new P,pX=new Hi,$N=new P(1,0,0),qN=new P(0,1,0),KN=new P(0,0,1),YN={type:"added"},gX={type:"removed"},eh={type:"childadded",child:null},TD={type:"childremoved",child:null},xn=(()=>{class t extends fr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hX++}),this.uuid=$r(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=t.DEFAULT_UP.clone();let n=new P,i=new Vo,r=new Hi,o=new P(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new pt},normalMatrix:{value:new Pt}}),this.matrix=new pt,this.matrixWorld=new pt,this.matrixAutoUpdate=t.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Cs,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,i){this.quaternion.setFromAxisAngle(n,i)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,i){return Ju.setFromAxisAngle(n,i),this.quaternion.multiply(Ju),this}rotateOnWorldAxis(n,i){return Ju.setFromAxisAngle(n,i),this.quaternion.premultiply(Ju),this}rotateX(n){return this.rotateOnAxis($N,n)}rotateY(n){return this.rotateOnAxis(qN,n)}rotateZ(n){return this.rotateOnAxis(KN,n)}translateOnAxis(n,i){return jN.copy(n).applyQuaternion(this.quaternion),this.position.add(jN.multiplyScalar(i)),this}translateX(n){return this.translateOnAxis($N,n)}translateY(n){return this.translateOnAxis(qN,n)}translateZ(n){return this.translateOnAxis(KN,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(va.copy(this.matrixWorld).invert())}lookAt(n,i,r){n.isVector3?N0.copy(n):N0.set(n,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),yg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?va.lookAt(yg,N0,this.up):va.lookAt(N0,yg,this.up),this.quaternion.setFromRotationMatrix(va),o&&(va.extractRotation(o.matrixWorld),Ju.setFromRotationMatrix(va),this.quaternion.premultiply(Ju.invert()))}add(n){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(YN),eh.child=n,this.dispatchEvent(eh),eh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(n);return i!==-1&&(n.parent=null,this.children.splice(i,1),n.dispatchEvent(gX),TD.child=n,this.dispatchEvent(TD),TD.child=null),this}removeFromParent(){let n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),va.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),va.multiply(n.parent.matrixWorld)),n.applyMatrix4(va),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(YN),eh.child=n,this.dispatchEvent(eh),eh.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,i){if(this[n]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(n,i);if(a!==void 0)return a}}getObjectsByProperty(n,i,r=[]){this[n]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(n,i,r);return r}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yg,n,fX),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yg,pX,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return n.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(n){n(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(n)}traverseAncestors(n){let i=this.parent;i!==null&&(n(i),i.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(n)}updateWorldMatrix(n,i){let r=this.parent;if(n===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(n){let i=n===void 0||typeof n=="string",r={};i&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(l=>ae(k({},l),{boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(l=>k({},l)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(n),o.indirectTexture=this._indirectTexture.toJSON(n),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(n)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(n)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(n.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let c=l.shapes;if(Array.isArray(c))for(let d=0,u=c.length;d<u;d++){let h=c[d];s(n.shapes,h)}else s(n.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(n.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(n.materials,this.material[c]));o.material=l}else o.material=s(n.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(n).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let c=this.animations[l];o.animations.push(s(n.animations,c))}}if(i){let l=a(n.geometries),c=a(n.materials),d=a(n.textures),u=a(n.images),h=a(n.shapes),f=a(n.skeletons),p=a(n.animations),v=a(n.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),v.length>0&&(r.nodes=v)}return r.object=o,r;function a(l){let c=[];for(let d in l){let u=l[d];delete u.metadata,c.push(u)}return c}}clone(n){return new this.constructor().copy(this,n)}copy(n,i=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),i===!0)for(let r=0;r<n.children.length;r++){let o=n.children[r];this.add(o.clone())}return this}}return t.DEFAULT_UP=new P(0,1,0),t.DEFAULT_MATRIX_AUTO_UPDATE=!0,t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,t})(),ko=new P,ya=new P,AD=new P,Ca=new P,th=new P,nh=new P,XN=new P,ID=new P,FD=new P,PD=new P,kD=new Qt,OD=new Qt,LD=new Qt,Lo=class t{constructor(e=new P,n=new P,i=new P){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),ko.subVectors(e,n),r.cross(ko);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,n,i,r,o){ko.subVectors(r,n),ya.subVectors(i,n),AD.subVectors(e,n);let s=ko.dot(ko),a=ko.dot(ya),l=ko.dot(AD),c=ya.dot(ya),d=ya.dot(AD),u=s*c-a*a;if(u===0)return o.set(0,0,0),null;let h=1/u,f=(c*l-a*d)*h,p=(s*d-a*l)*h;return o.set(1-f-p,p,f)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,Ca)===null?!1:Ca.x>=0&&Ca.y>=0&&Ca.x+Ca.y<=1}static getInterpolation(e,n,i,r,o,s,a,l){return this.getBarycoord(e,n,i,r,Ca)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Ca.x),l.addScaledVector(s,Ca.y),l.addScaledVector(a,Ca.z),l)}static getInterpolatedAttribute(e,n,i,r,o,s){return kD.setScalar(0),OD.setScalar(0),LD.setScalar(0),kD.fromBufferAttribute(e,n),OD.fromBufferAttribute(e,i),LD.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(kD,o.x),s.addScaledVector(OD,o.y),s.addScaledVector(LD,o.z),s}static isFrontFacing(e,n,i,r){return ko.subVectors(i,n),ya.subVectors(e,n),ko.cross(ya).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ko.subVectors(this.c,this.b),ya.subVectors(this.a,this.b),ko.cross(ya).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return t.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,o){return t.getInterpolation(e,this.a,this.b,this.c,n,i,r,o)}containsPoint(e){return t.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return t.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){let i=this.a,r=this.b,o=this.c,s,a;th.subVectors(r,i),nh.subVectors(o,i),ID.subVectors(e,i);let l=th.dot(ID),c=nh.dot(ID);if(l<=0&&c<=0)return n.copy(i);FD.subVectors(e,r);let d=th.dot(FD),u=nh.dot(FD);if(d>=0&&u<=d)return n.copy(r);let h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return s=l/(l-d),n.copy(i).addScaledVector(th,s);PD.subVectors(e,o);let f=th.dot(PD),p=nh.dot(PD);if(p>=0&&f<=p)return n.copy(o);let v=f*c-l*p;if(v<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(nh,a);let m=d*p-f*u;if(m<=0&&u-d>=0&&f-p>=0)return XN.subVectors(o,r),a=(u-d)/(u-d+(f-p)),n.copy(r).addScaledVector(XN,a);let g=1/(m+v+h);return s=v*g,a=h*g,n.copy(i).addScaledVector(th,s).addScaledVector(nh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},PV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cl={h:0,s:0,l:0},B0={h:0,s:0,l:0};function ND(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}var Le=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Vi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Zt.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=Zt.workingColorSpace){return this.r=e,this.g=n,this.b=i,Zt.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=Zt.workingColorSpace){if(e=rA(e,1),n=Ft(n,0,1),i=Ft(i,0,1),n===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;this.r=ND(s,o,e+1/3),this.g=ND(s,o,e),this.b=ND(s,o,e-1/3)}return Zt.colorSpaceToWorking(this,r),this}setStyle(e,n=Vi){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Vi){let i=PV[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sa(e.r),this.g=Sa(e.g),this.b=Sa(e.b),this}copyLinearToSRGB(e){return this.r=fh(e.r),this.g=fh(e.g),this.b=fh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vi){return Zt.workingToColorSpace(Ki.copy(this),e),Math.round(Ft(Ki.r*255,0,255))*65536+Math.round(Ft(Ki.g*255,0,255))*256+Math.round(Ft(Ki.b*255,0,255))}getHexString(e=Vi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Zt.workingColorSpace){Zt.workingToColorSpace(Ki.copy(this),n);let i=Ki.r,r=Ki.g,o=Ki.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,c,d=(a+s)/2;if(a===s)l=0,c=0;else{let u=s-a;switch(c=d<=.5?u/(s+a):u/(2-s-a),s){case i:l=(r-o)/u+(r<o?6:0);break;case r:l=(o-i)/u+2;break;case o:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,n=Zt.workingColorSpace){return Zt.workingToColorSpace(Ki.copy(this),n),e.r=Ki.r,e.g=Ki.g,e.b=Ki.b,e}getStyle(e=Vi){Zt.workingToColorSpace(Ki.copy(this),e);let n=Ki.r,i=Ki.g,r=Ki.b;return e!==Vi?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Cl),this.setHSL(Cl.h+e,Cl.s+n,Cl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Cl),e.getHSL(B0);let i=Ig(Cl.h,B0.h,n),r=Ig(Cl.s,B0.s,n),o=Ig(Cl.l,B0.l,n);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let n=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*n+o[3]*i+o[6]*r,this.g=o[1]*n+o[4]*i+o[7]*r,this.b=o[2]*n+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Ki=new Le;Le.NAMES=PV;var mX=0,bi=class extends fr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mX++}),this.uuid=$r(),this.name="",this.type="Material",this.blending=El,this.side=ys,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=kg,this.blendDst=Og,this.blendEquation=xa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Le(0,0,0),this.blendAlpha=0,this.depthFunc=Ml,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_l,this.stencilZFail=_l,this.stencilZPass=_l,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let n in e){let i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}let r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){let n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==El&&(i.blending=this.blending),this.side!==ys&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==kg&&(i.blendSrc=this.blendSrc),this.blendDst!==Og&&(i.blendDst=this.blendDst),this.blendEquation!==xa&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ml&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bw&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_l&&(i.stencilFail=this.stencilFail),this.stencilZFail!==_l&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==_l&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(n){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let n=e.clippingPlanes,i=null;if(n!==null){let r=n.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=n[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Ho=class extends bi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Yh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},wa=vX();function vX(){let t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){let c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}let o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;(c&8388608)===0;)c<<=1,d-=8388608;c&=-8388609,d+=947912704,o[l]=c|d}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function Sr(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ft(t,-65504,65504),wa.floatView[0]=t;let e=wa.uint32View[0],n=e>>23&511;return wa.baseTable[n]+((e&8388607)>>wa.shiftTable[n])}function Dg(t){let e=t>>10;return wa.uint32View[0]=wa.mantissaTable[wa.offsetTable[e]+(t&1023)]+wa.exponentTable[e],wa.floatView[0]}var Sw=class{static toHalfFloat(e){return Sr(e)}static fromHalfFloat(e){return Dg(e)}},ai=new P,V0=new ce,yX=0,an=class{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:yX++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=Ch,this.updateRanges=[],this.gpuType=hr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)V0.fromBufferAttribute(this,n),V0.applyMatrix3(e),this.setXY(n,V0.x,V0.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)ai.fromBufferAttribute(this,n),ai.applyMatrix3(e),this.setXYZ(n,ai.x,ai.y,ai.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)ai.fromBufferAttribute(this,n),ai.applyMatrix4(e),this.setXYZ(n,ai.x,ai.y,ai.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)ai.fromBufferAttribute(this,n),ai.applyNormalMatrix(e),this.setXYZ(n,ai.x,ai.y,ai.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)ai.fromBufferAttribute(this,n),ai.transformDirection(e),this.setXYZ(n,ai.x,ai.y,ai.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=ur(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=zt(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ur(n,this.array)),n}setX(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ur(n,this.array)),n}setY(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ur(n,this.array)),n}setZ(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ur(n,this.array)),n}setW(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array),r=zt(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,o){return e*=this.itemSize,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array),r=zt(r,this.array),o=zt(o,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ch&&(e.usage=this.usage),e}},xw=class extends an{constructor(e,n,i){super(new Int8Array(e),n,i)}},Ew=class extends an{constructor(e,n,i){super(new Uint8Array(e),n,i)}},Mw=class extends an{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}},Rw=class extends an{constructor(e,n,i){super(new Int16Array(e),n,i)}},Sh=class extends an{constructor(e,n,i){super(new Uint16Array(e),n,i)}},Dw=class extends an{constructor(e,n,i){super(new Int32Array(e),n,i)}},xh=class extends an{constructor(e,n,i){super(new Uint32Array(e),n,i)}},Tw=class extends an{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Dg(this.array[e*this.itemSize]);return this.normalized&&(n=ur(n,this.array)),n}setX(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize]=Sr(n),this}getY(e){let n=Dg(this.array[e*this.itemSize+1]);return this.normalized&&(n=ur(n,this.array)),n}setY(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+1]=Sr(n),this}getZ(e){let n=Dg(this.array[e*this.itemSize+2]);return this.normalized&&(n=ur(n,this.array)),n}setZ(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+2]=Sr(n),this}getW(e){let n=Dg(this.array[e*this.itemSize+3]);return this.normalized&&(n=ur(n,this.array)),n}setW(e,n){return this.normalized&&(n=zt(n,this.array)),this.array[e*this.itemSize+3]=Sr(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array)),this.array[e+0]=Sr(n),this.array[e+1]=Sr(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array),r=zt(r,this.array)),this.array[e+0]=Sr(n),this.array[e+1]=Sr(i),this.array[e+2]=Sr(r),this}setXYZW(e,n,i,r,o){return e*=this.itemSize,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array),r=zt(r,this.array),o=zt(o,this.array)),this.array[e+0]=Sr(n),this.array[e+1]=Sr(i),this.array[e+2]=Sr(r),this.array[e+3]=Sr(o),this}},Ue=class extends an{constructor(e,n,i){super(new Float32Array(e),n,i)}},CX=0,lo=new pt,BD=new xn,ih=new P,Gr=new Ci,Cg=new Ci,Ti=new P,Bt=class t extends fr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CX++}),this.uuid=$r(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sA(e)?xh:Sh)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){let n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Pt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return lo.makeRotationFromQuaternion(e),this.applyMatrix4(lo),this}rotateX(e){return lo.makeRotationX(e),this.applyMatrix4(lo),this}rotateY(e){return lo.makeRotationY(e),this.applyMatrix4(lo),this}rotateZ(e){return lo.makeRotationZ(e),this.applyMatrix4(lo),this}translate(e,n,i){return lo.makeTranslation(e,n,i),this.applyMatrix4(lo),this}scale(e,n,i){return lo.makeScale(e,n,i),this.applyMatrix4(lo),this}lookAt(e){return BD.lookAt(e),BD.updateMatrix(),this.applyMatrix4(BD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ih).negate(),this.translate(ih.x,ih.y,ih.z),this}setFromPoints(e){let n=this.getAttribute("position");if(n===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Ue(i,3))}else{let i=Math.min(e.length,n.count);for(let r=0;r<i;r++){let o=e[r];n.setXYZ(r,o.x,o.y,o.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ci);let e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new P(-1/0,-1/0,-1/0),new P(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){let o=n[i];Gr.setFromBufferAttribute(o),this.morphTargetsRelative?(Ti.addVectors(this.boundingBox.min,Gr.min),this.boundingBox.expandByPoint(Ti),Ti.addVectors(this.boundingBox.max,Gr.max),this.boundingBox.expandByPoint(Ti)):(this.boundingBox.expandByPoint(Gr.min),this.boundingBox.expandByPoint(Gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ci);let e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new P,1/0);return}if(e){let i=this.boundingSphere.center;if(Gr.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){let a=n[o];Cg.setFromBufferAttribute(a),this.morphTargetsRelative?(Ti.addVectors(Gr.min,Cg.min),Gr.expandByPoint(Ti),Ti.addVectors(Gr.max,Cg.max),Gr.expandByPoint(Ti)):(Gr.expandByPoint(Cg.min),Gr.expandByPoint(Cg.max))}Gr.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)Ti.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Ti));if(n)for(let o=0,s=n.length;o<s;o++){let a=n[o],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Ti.fromBufferAttribute(a,c),l&&(ih.fromBufferAttribute(e,c),Ti.add(ih)),r=Math.max(r,i.distanceToSquared(Ti))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=n.position,r=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new an(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<i.count;M++)a[M]=new P,l[M]=new P;let c=new P,d=new P,u=new P,h=new ce,f=new ce,p=new ce,v=new P,m=new P;function g(M,x,S){c.fromBufferAttribute(i,M),d.fromBufferAttribute(i,x),u.fromBufferAttribute(i,S),h.fromBufferAttribute(o,M),f.fromBufferAttribute(o,x),p.fromBufferAttribute(o,S),d.sub(c),u.sub(c),f.sub(h),p.sub(h);let I=1/(f.x*p.y-p.x*f.y);isFinite(I)&&(v.copy(d).multiplyScalar(p.y).addScaledVector(u,-f.y).multiplyScalar(I),m.copy(u).multiplyScalar(f.x).addScaledVector(d,-p.x).multiplyScalar(I),a[M].add(v),a[x].add(v),a[S].add(v),l[M].add(m),l[x].add(m),l[S].add(m))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let M=0,x=C.length;M<x;++M){let S=C[M],I=S.start,N=S.count;for(let B=I,W=I+N;B<W;B+=3)g(e.getX(B+0),e.getX(B+1),e.getX(B+2))}let y=new P,w=new P,R=new P,b=new P;function _(M){R.fromBufferAttribute(r,M),b.copy(R);let x=a[M];y.copy(x),y.sub(R.multiplyScalar(R.dot(x))).normalize(),w.crossVectors(b,x);let I=w.dot(l[M])<0?-1:1;s.setXYZW(M,y.x,y.y,y.z,I)}for(let M=0,x=C.length;M<x;++M){let S=C[M],I=S.start,N=S.count;for(let B=I,W=I+N;B<W;B+=3)_(e.getX(B+0)),_(e.getX(B+1)),_(e.getX(B+2))}}computeVertexNormals(){let e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new an(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new P,o=new P,s=new P,a=new P,l=new P,c=new P,d=new P,u=new P;if(e)for(let h=0,f=e.count;h<f;h+=3){let p=e.getX(h+0),v=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(n,p),o.fromBufferAttribute(n,v),s.fromBufferAttribute(n,m),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,m),a.add(d),l.add(d),c.add(d),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,f=n.count;h<f;h+=3)r.fromBufferAttribute(n,h+0),o.fromBufferAttribute(n,h+1),s.fromBufferAttribute(n,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Ti.fromBufferAttribute(e,n),Ti.normalize(),e.setXYZ(n,Ti.x,Ti.y,Ti.z)}toNonIndexed(){function e(a,l){let c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d),f=0,p=0;for(let v=0,m=l.length;v<m;v++){a.isInterleavedBufferAttribute?f=l[v]*a.data.stride+a.offset:f=l[v]*d;for(let g=0;g<d;g++)h[p++]=c[f++]}return new an(h,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let n=new t,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],c=e(l,i);n.setAttribute(a,c)}let o=this.morphAttributes;for(let a in o){let l=[],c=o[a];for(let d=0,u=c.length;d<u;d++){let h=c[d],f=e(h,i);l.push(f)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let c=s[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});let i=this.attributes;for(let l in i){let c=i[l];e.data.attributes[l]=c.toJSON(e.data)}let r={},o=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++){let f=c[u];d.push(f.toJSON(e.data))}d.length>0&&(r[l]=d,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let n={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let c in r){let d=r[c];this.setAttribute(c,d.clone(n))}let o=e.morphAttributes;for(let c in o){let d=[],u=o[c];for(let h=0,f=u.length;h<f;h++)d.push(u[h].clone(n));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let c=0,d=s.length;c<d;c++){let u=s[c];this.addGroup(u.start,u.count,u.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},ZN=new pt,jc=new Ma,H0=new ci,QN=new P,z0=new P,U0=new P,G0=new P,VD=new P,W0=new P,JN=new P,j0=new P,zn=class extends xn{constructor(e=new Bt,n=new Ho){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){let r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;n.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){W0.set(0,0,0);for(let l=0,c=o.length;l<c;l++){let d=a[l],u=o[l];d!==0&&(VD.fromBufferAttribute(u,e),s?W0.addScaledVector(VD,d):W0.addScaledVector(VD.sub(n),d))}n.add(W0)}return n}raycast(e,n){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),H0.copy(i.boundingSphere),H0.applyMatrix4(o),jc.copy(e.ray).recast(e.near),!(H0.containsPoint(jc.origin)===!1&&(jc.intersectSphere(H0,QN)===null||jc.origin.distanceToSquared(QN)>(e.far-e.near)**2))&&(ZN.copy(o).invert(),jc.copy(e.ray).applyMatrix4(ZN),!(i.boundingBox!==null&&jc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,jc)))}_computeIntersections(e,n,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,c=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let p=0,v=h.length;p<v;p++){let m=h[p],g=s[m.materialIndex],C=Math.max(m.start,f.start),y=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));for(let w=C,R=y;w<R;w+=3){let b=a.getX(w),_=a.getX(w+1),M=a.getX(w+2);r=$0(this,g,e,i,c,d,u,b,_,M),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=m.materialIndex,n.push(r))}}else{let p=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let m=p,g=v;m<g;m+=3){let C=a.getX(m),y=a.getX(m+1),w=a.getX(m+2);r=$0(this,s,e,i,c,d,u,C,y,w),r&&(r.faceIndex=Math.floor(m/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let p=0,v=h.length;p<v;p++){let m=h[p],g=s[m.materialIndex],C=Math.max(m.start,f.start),y=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));for(let w=C,R=y;w<R;w+=3){let b=w,_=w+1,M=w+2;r=$0(this,g,e,i,c,d,u,b,_,M),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=m.materialIndex,n.push(r))}}else{let p=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let m=p,g=v;m<g;m+=3){let C=m,y=m+1,w=m+2;r=$0(this,s,e,i,c,d,u,C,y,w),r&&(r.faceIndex=Math.floor(m/3),n.push(r))}}}};function bX(t,e,n,i,r,o,s,a){let l;if(e.side===Xi?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,e.side===ys,a),l===null)return null;j0.copy(a),j0.applyMatrix4(t.matrixWorld);let c=n.ray.origin.distanceTo(j0);return c<n.near||c>n.far?null:{distance:c,point:j0.clone(),object:t}}function $0(t,e,n,i,r,o,s,a,l,c){t.getVertexPosition(a,z0),t.getVertexPosition(l,U0),t.getVertexPosition(c,G0);let d=bX(t,e,n,i,z0,U0,G0,JN);if(d){let u=new P;Lo.getBarycoord(JN,z0,U0,G0,u),r&&(d.uv=Lo.getInterpolatedAttribute(r,a,l,c,u,new ce)),o&&(d.uv1=Lo.getInterpolatedAttribute(o,a,l,c,u,new ce)),s&&(d.normal=Lo.getInterpolatedAttribute(s,a,l,c,u,new P),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));let h={a,b:l,c,normal:new P,materialIndex:0};Lo.getNormal(z0,U0,G0,h.normal),d.face=h,d.barycoord=u}return d}var Rl=class t extends Bt{constructor(e=1,n=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],c=[],d=[],u=[],h=0,f=0;p("z","y","x",-1,-1,i,n,e,s,o,0),p("z","y","x",1,-1,i,n,-e,s,o,1),p("x","z","y",1,1,e,i,n,r,s,2),p("x","z","y",1,-1,e,i,-n,r,s,3),p("x","y","z",1,-1,e,n,i,r,o,4),p("x","y","z",-1,-1,e,n,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new Ue(c,3)),this.setAttribute("normal",new Ue(d,3)),this.setAttribute("uv",new Ue(u,2));function p(v,m,g,C,y,w,R,b,_,M,x){let S=w/_,I=R/M,N=w/2,B=R/2,W=b/2,U=_+1,j=M+1,Y=0,$=0,re=new P;for(let oe=0;oe<j;oe++){let ie=oe*I-B;for(let Ge=0;Ge<U;Ge++){let Xe=Ge*S-N;re[v]=Xe*C,re[m]=ie*y,re[g]=W,c.push(re.x,re.y,re.z),re[v]=0,re[m]=0,re[g]=b>0?1:-1,d.push(re.x,re.y,re.z),u.push(Ge/_),u.push(1-oe/M),Y+=1}}for(let oe=0;oe<M;oe++)for(let ie=0;ie<_;ie++){let Ge=h+ie+U*oe,Xe=h+ie+U*(oe+1),Z=h+(ie+1)+U*(oe+1),ye=h+(ie+1)+U*oe;l.push(Ge,Xe,ye),l.push(Xe,Z,ye),$+=6}a.addGroup(f,$,x),f+=$,h+=Y}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function _d(t){let e={};for(let n in t){e[n]={};for(let i in t[n]){let r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Qi(t){let e={};for(let n=0;n<t.length;n++){let i=_d(t[n]);for(let r in i)e[r]=i[r]}return e}function wX(t){let e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function lA(t){let e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Zt.workingColorSpace}var cA={clone:_d,merge:Qi},_X=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,SX=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,xr=class extends bi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_X,this.fragmentShader=SX,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_d(e.uniforms),this.uniformsGroups=wX(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?n.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[r]={type:"m4",value:s.toArray()}:n.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}},ld=class extends xn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new pt,this.projectionMatrix=new pt,this.projectionMatrixInverse=new pt,this.coordinateSystem=jr}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},bl=new P,eB=new ce,tB=new ce,ii=class extends ld{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let n=.5*this.getFilmHeight()/e;this.fov=rd*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(nd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return rd*2*Math.atan(Math.tan(nd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){bl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bl.x,bl.y).multiplyScalar(-e/bl.z),bl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(bl.x,bl.y).multiplyScalar(-e/bl.z)}getViewSize(e,n){return this.getViewBounds(e,eB,tB),n.subVectors(tB,eB)}setViewOffset(e,n,i,r,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,n=e*Math.tan(nd*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/l,n-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}},rh=-90,oh=1,Vg=class extends xn{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new ii(rh,oh,e,n);r.layers=this.layers,this.add(r);let o=new ii(rh,oh,e,n);o.layers=this.layers,this.add(o);let s=new ii(rh,oh,e,n);s.layers=this.layers,this.add(s);let a=new ii(rh,oh,e,n);a.layers=this.layers,this.add(a);let l=new ii(rh,oh,e,n);l.layers=this.layers,this.add(l);let c=new ii(rh,oh,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){let e=this.coordinateSystem,n=this.children.concat(),[i,r,o,s,a,l]=n;for(let c of n)this.remove(c);if(e===jr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===bh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,c,d]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,o),e.setRenderTarget(i,1,r),e.render(n,s),e.setRenderTarget(i,2,r),e.render(n,a),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(n,d),e.setRenderTarget(u,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}},Dl=class extends Zi{constructor(e=[],n=Ss,i,r,o,s,a,l,c,d){super(e,n,i,r,o,s,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Hg=class extends Kr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Dl(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Rl(5,5,5),o=new xr({name:"CubemapFromEquirect",uniforms:_d(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xi,blending:_s});o.uniforms.tEquirect.value=n;let s=new zn(r,o),a=n.minFilter;return n.minFilter===jo&&(n.minFilter=li),new Vg(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,i,r);e.setRenderTarget(o)}},_a=class extends xn{constructor(){super(),this.isGroup=!0,this.type="Group"}},xX={type:"move"},cd=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _a,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _a,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new P),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _a,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new P),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let n=this._hand;if(n)for(let i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(let v of e.hand.values()){let m=n.getJointPose(v,i),g=this._getHandJoint(c,v);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=m!==null}let d=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],h=d.position.distanceTo(u.position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(xX)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){let i=new _a;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}},zg=class t{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Le(e),this.density=n}clone(){return new t(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}},Ug=class t{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Le(e),this.near=n,this.far=i}clone(){return new t(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Eh=class extends xn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Vo,this.environmentIntensity=1,this.environmentRotation=new Vo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}},dd=class{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Ch,this.updateRanges=[],this.version=0,this.uuid=$r()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$r()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$r()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},dr=new P,Tl=class t{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyMatrix4(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.applyNormalMatrix(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)dr.fromBufferAttribute(this,n),dr.transformDirection(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=ur(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=zt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=zt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=zt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=zt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ur(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ur(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ur(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ur(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array),r=zt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=zt(n,this.array),i=zt(i,this.array),r=zt(r,this.array),o=zt(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let n=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[r+o])}return new an(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let n=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Mh=class extends bi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},sh,bg=new P,ah=new P,lh=new P,ch=new ce,wg=new ce,kV=new pt,q0=new P,_g=new P,K0=new P,nB=new ce,HD=new ce,iB=new ce,Gg=class extends xn{constructor(e=new Mh){if(super(),this.isSprite=!0,this.type="Sprite",sh===void 0){sh=new Bt;let n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new dd(n,5);sh.setIndex([0,1,2,0,2,3]),sh.setAttribute("position",new Tl(i,3,0,!1)),sh.setAttribute("uv",new Tl(i,2,3,!1))}this.geometry=sh,this.material=e,this.center=new ce(.5,.5),this.count=1}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ah.setFromMatrixScale(this.matrixWorld),kV.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),lh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ah.multiplyScalar(-lh.z);let i=this.material.rotation,r,o;i!==0&&(o=Math.cos(i),r=Math.sin(i));let s=this.center;Y0(q0.set(-.5,-.5,0),lh,s,ah,r,o),Y0(_g.set(.5,-.5,0),lh,s,ah,r,o),Y0(K0.set(.5,.5,0),lh,s,ah,r,o),nB.set(0,0),HD.set(1,0),iB.set(1,1);let a=e.ray.intersectTriangle(q0,_g,K0,!1,bg);if(a===null&&(Y0(_g.set(-.5,.5,0),lh,s,ah,r,o),HD.set(0,1),a=e.ray.intersectTriangle(q0,K0,_g,!1,bg),a===null))return;let l=e.ray.origin.distanceTo(bg);l<e.near||l>e.far||n.push({distance:l,point:bg.clone(),uv:Lo.getInterpolation(bg,q0,_g,K0,nB,HD,iB,new ce),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}};function Y0(t,e,n,i,r,o){ch.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(wg.x=o*ch.x-r*ch.y,wg.y=r*ch.x+o*ch.y):wg.copy(ch),t.copy(e),t.x+=wg.x,t.y+=wg.y,t.applyMatrix4(kV)}var X0=new P,rB=new P,Wg=class extends xn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let n=e.levels;for(let i=0,r=n.length;i<r;i++){let o=n[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);let r=this.levels,o;for(o=0;o<r.length&&!(n<r[o].distance);o++);return r.splice(o,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){let n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){let r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),e<o)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){X0.setFromMatrixPosition(this.matrixWorld);let r=e.ray.origin.distanceTo(X0);this.getObjectForDistance(r).raycast(e,n)}}update(e){let n=this.levels;if(n.length>1){X0.setFromMatrixPosition(e.matrixWorld),rB.setFromMatrixPosition(this.matrixWorld);let i=X0.distanceTo(rB)/e.zoom;n[0].object.visible=!0;let r,o;for(r=1,o=n.length;r<o;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),i>=s)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<o;r++)n[r].object.visible=!1}}toJSON(e){let n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];let i=this.levels;for(let r=0,o=i.length;r<o;r++){let s=i[r];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}},oB=new P,sB=new Qt,aB=new Qt,EX=new P,lB=new pt,Z0=new P,zD=new ci,cB=new pt,UD=new Ma,jg=class extends zn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Cw,this.bindMatrix=new pt,this.bindMatrixInverse=new pt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ci),this.boundingBox.makeEmpty();let n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Z0),this.boundingBox.expandByPoint(Z0)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ci),this.boundingSphere.makeEmpty();let n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Z0),this.boundingSphere.expandByPoint(Z0)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zD.copy(this.boundingSphere),zD.applyMatrix4(r),e.ray.intersectsSphere(zD)!==!1&&(cB.copy(r).invert(),UD.copy(e.ray).applyMatrix4(cB),!(this.boundingBox!==null&&UD.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,UD)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new Qt,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Cw?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===WT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){let i=this.skeleton,r=this.geometry;sB.fromBufferAttribute(r.attributes.skinIndex,e),aB.fromBufferAttribute(r.attributes.skinWeight,e),oB.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){let s=aB.getComponent(o);if(s!==0){let a=sB.getComponent(o);lB.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),n.addScaledVector(EX.copy(oB).applyMatrix4(lB),s)}}return n.applyMatrix4(this.bindMatrixInverse)}},Rh=class extends xn{constructor(){super(),this.isBone=!0,this.type="Bone"}},qr=class extends Zi{constructor(e=null,n=1,i=1,r,o,s,a,l,c=Ai,d=Ai,u,h){super(null,s,a,l,c,d,r,o,u,h),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},dB=new pt,MX=new pt,$g=class t{constructor(e=[],n=[]){this.uuid=$r(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){let i=new pt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:MX;dB.multiplyMatrices(a,n[o]),dB.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new t(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let n=new Float32Array(e*e*4);n.set(this.boneMatrices);let i=new qr(n,e,e,Ii,hr);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){let r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=n[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Rh),this.bones.push(s),this.boneInverses.push(new pt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let n=this.bones,i=this.boneInverses;for(let r=0,o=n.length;r<o;r++){let s=n[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},Ra=class extends an{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},dh=new pt,uB=new pt,Q0=[],hB=new Ci,RX=new pt,Sg=new zn,xg=new ci,qg=class extends zn{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Ra(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,RX)}computeBoundingBox(){let e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ci),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,dh),hB.copy(e.boundingBox).applyMatrix4(dh),this.boundingBox.union(hB)}computeBoundingSphere(){let e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new ci),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,dh),xg.copy(e.boundingSphere).applyMatrix4(dh),this.boundingSphere.union(xg)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){let i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,n){let i=this.matrixWorld,r=this.count;if(Sg.geometry=this.geometry,Sg.material=this.material,Sg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xg.copy(this.boundingSphere),xg.applyMatrix4(i),e.ray.intersectsSphere(xg)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,dh),uB.multiplyMatrices(i,dh),Sg.matrixWorld=uB,Sg.raycast(e,Q0);for(let s=0,a=Q0.length;s<a;s++){let l=Q0[s];l.instanceId=o,l.object=this,n.push(l)}Q0.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Ra(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){let i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new qr(new Float32Array(r*this.count),r,this.count,lv,hr));let o=this.morphTexture.source.data.data,s=0;for(let c=0;c<i.length;c++)s+=i[c];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*e;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},GD=new P,DX=new P,TX=new Pt,Oo=class{constructor(e=new P(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){let r=GD.subVectors(i,n).cross(DX.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){let i=e.delta(GD),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:n.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){let i=n||TX.getNormalMatrix(e),r=this.coplanarPoint(GD).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},$c=new ci,AX=new ce(.5,.5),J0=new P,Da=class{constructor(e=new Oo,n=new Oo,i=new Oo,r=new Oo,o=new Oo,s=new Oo){this.planes=[e,n,i,r,o,s]}set(e,n,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=jr){let i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],h=r[7],f=r[8],p=r[9],v=r[10],m=r[11],g=r[12],C=r[13],y=r[14],w=r[15];if(i[0].setComponents(l-o,h-c,m-f,w-g).normalize(),i[1].setComponents(l+o,h+c,m+f,w+g).normalize(),i[2].setComponents(l+s,h+d,m+p,w+C).normalize(),i[3].setComponents(l-s,h-d,m-p,w-C).normalize(),i[4].setComponents(l-a,h-u,m-v,w-y).normalize(),n===jr)i[5].setComponents(l+a,h+u,m+v,w+y).normalize();else if(n===bh)i[5].setComponents(a,u,v,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),$c.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),$c.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($c)}intersectsSprite(e){$c.center.set(0,0,0);let n=AX.distanceTo(e.center);return $c.radius=.7071067811865476+n,$c.applyMatrix4(e.matrixWorld),this.intersectsSphere($c)}intersectsSphere(e){let n=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let n=this.planes;for(let i=0;i<6;i++){let r=n[i];if(J0.x=r.normal.x>0?e.max.x:e.min.x,J0.y=r.normal.y>0?e.max.y:e.min.y,J0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(J0)<0)return!1}return!0}containsPoint(e){let n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}},gs=new pt,ms=new Da,Kg=class t{constructor(){this.coordinateSystem=jr}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){let r=n.cameras[i];if(gs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ms.setFromProjectionMatrix(gs,this.coordinateSystem),ms.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){let r=n.cameras[i];if(gs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ms.setFromProjectionMatrix(gs,this.coordinateSystem),ms.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){let r=n.cameras[i];if(gs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ms.setFromProjectionMatrix(gs,this.coordinateSystem),ms.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){let r=n.cameras[i];if(gs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ms.setFromProjectionMatrix(gs,this.coordinateSystem),ms.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){let r=n.cameras[i];if(gs.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ms.setFromProjectionMatrix(gs,this.coordinateSystem),ms.containsPoint(e))return!0}return!1}clone(){return new t}};function WD(t,e){return t-e}function IX(t,e){return t.z-e.z}function FX(t,e){return e.z-t.z}var iT=class{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){let o=this.pool,s=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});let a=o[this.index];s.push(a),this.index++,a.start=e,a.count=n,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}},_r=new pt,PX=new Le(1,1,1),fB=new Da,kX=new Kg,ew=new Ci,qc=new ci,Eg=new P,pB=new P,OX=new P,jD=new iT,Yi=new zn,tw=[];function LX(t,e,n=0){let i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){let r=t.count;for(let o=0;o<r;o++)for(let s=0;s<i;s++)e.setComponent(o+n,s,t.getComponent(o,s))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function Kc(t,e){if(t.constructor!==e.constructor){let n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{let n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}var Yg=class extends zn{constructor(e,n,i=n*2,r){super(new Bt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let n=new Float32Array(e*e*4),i=new qr(n,e,e,Ii,hr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);let n=new Uint32Array(e*e),i=new qr(n,e,e,Jh,xs);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);let n=new Float32Array(e*e*4).fill(1),i=new qr(n,e,e,Ii,hr);i.colorSpace=Zt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){let n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(let o in e.attributes){let s=e.getAttribute(o),{array:a,itemSize:l,normalized:c}=s,d=new a.constructor(i*l),u=new an(d,l,c);n.setAttribute(o,u)}if(e.getIndex()!==null){let o=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new an(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){let n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(let i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);let r=e.getAttribute(i),o=n.getAttribute(i);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){let n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){let n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ci);let e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;let o=n[i].geometryIndex;this.getMatrixAt(i,_r),this.getBoundingBoxAt(o,ew).applyMatrix4(_r),e.union(ew)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ci);let e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;let o=n[i].geometryIndex;this.getMatrixAt(i,_r),this.getBoundingSphereAt(o,qc).applyMatrix4(_r),e.union(qc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");let i={visible:!0,active:!0,geometryIndex:e},r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(WD),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));let o=this._matricesTexture;_r.identity().toArray(o.image.data,r*16),o.needsUpdate=!0;let s=this._colorsTexture;return s&&(PX.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);let r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;let s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(WD),l=this._availableGeometryIds.shift(),o[l]=r):(l=this._geometryCount,this._geometryCount++,o.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);let i=this.geometry,r=i.getIndex()!==null,o=i.getIndex(),s=n.getIndex(),a=this._geometryInfo[e];if(r&&s.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");let l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(let d in i.attributes){let u=n.getAttribute(d),h=i.getAttribute(d);LX(u,h,l);let f=u.itemSize;for(let p=u.count,v=c;p<v;p++){let m=l+p;for(let g=0;g<f;g++)h.setComponent(m,g,0)}h.needsUpdate=!0,h.addUpdateRange(l*f,c*f)}if(r){let d=a.indexStart,u=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let h=0;h<s.count;h++)o.setX(d+h,l+s.getX(h));for(let h=s.count,f=u;h<f;h++)o.setX(d+h,l);o.needsUpdate=!0,o.addUpdateRange(d,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){let n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;let i=this._instanceInfo;for(let r=0,o=i.length;r<o;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0,i=this._geometryInfo,r=i.map((s,a)=>a).sort((s,a)=>i[s].vertexStart-i[a].vertexStart),o=this.geometry;for(let s=0,a=i.length;s<a;s++){let l=r[s],c=i[l];if(c.active!==!1){if(o.index!==null){if(c.indexStart!==n){let{indexStart:d,vertexStart:u,reservedIndexCount:h}=c,f=o.index,p=f.array,v=e-u;for(let m=d;m<d+h;m++)p[m]=p[m]+v;f.array.copyWithin(n,d,d+h),f.addUpdateRange(n,h),c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){let{vertexStart:d,reservedVertexCount:u}=c,h=o.attributes;for(let f in h){let p=h[f],{array:v,itemSize:m}=p;v.copyWithin(e*m,d*m,(d+u)*m),p.addUpdateRange(e*m,u*m)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=o.index?c.indexStart:c.vertexStart,this._nextIndexStart=o.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;let i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){let o=new Ci,s=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let d=l;s&&(d=s.getX(d)),o.expandByPoint(Eg.fromBufferAttribute(a,d))}r.boundingBox=o}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;let i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){let o=new ci;this.getBoundingBoxAt(e,ew),ew.getCenter(o.center);let s=i.index,a=i.attributes.position,l=0;for(let c=r.start,d=r.start+r.count;c<d;c++){let u=c;s&&(u=s.getX(u)),Eg.fromBufferAttribute(a,u),l=Math.max(l,o.center.distanceToSquared(Eg))}o.radius=Math.sqrt(l),r.boundingSphere=o}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);let i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);let i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){let n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(WD);n[n.length-1]===i.length;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);let r=new Int32Array(e),o=new Int32Array(e);Kc(this._multiDrawCounts,r),Kc(this._multiDrawStarts,o),this._multiDrawCounts=r,this._multiDrawStarts=o,this._maxInstanceCount=e;let s=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Kc(s.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Kc(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Kc(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){let i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);let o=this.geometry;o.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Bt,this._initializeGeometry(o));let s=this.geometry;o.index&&Kc(o.index.array,s.index.array);for(let a in o.attributes)Kc(o.attributes[a].array,s.attributes[a].array)}raycast(e,n){let i=this._instanceInfo,r=this._geometryInfo,o=this.matrixWorld,s=this.geometry;Yi.material=this.material,Yi.geometry.index=s.index,Yi.geometry.attributes=s.attributes,Yi.geometry.boundingBox===null&&(Yi.geometry.boundingBox=new Ci),Yi.geometry.boundingSphere===null&&(Yi.geometry.boundingSphere=new ci);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;let c=i[a].geometryIndex,d=r[c];Yi.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(a,Yi.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,Yi.geometry.boundingBox),this.getBoundingSphereAt(c,Yi.geometry.boundingSphere),Yi.raycast(e,tw);for(let u=0,h=tw.length;u<h;u++){let f=tw[u];f.object=this,f.batchId=a,n.push(f)}tw.length=0}Yi.material=null,Yi.geometry.index=null,Yi.geometry.attributes={},Yi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>ae(k({},n),{boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>k({},n)),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let s=r.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,d=this._multiDrawCounts,u=this._geometryInfo,h=this.perObjectFrustumCulled,f=this._indirectTexture,p=f.image.data,v=i.isArrayCamera?kX:fB;h&&!i.isArrayCamera&&(_r.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),fB.setFromProjectionMatrix(_r,e.coordinateSystem));let m=0;if(this.sortObjects){_r.copy(this.matrixWorld).invert(),Eg.setFromMatrixPosition(i.matrixWorld).applyMatrix4(_r),pB.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(_r);for(let y=0,w=l.length;y<w;y++)if(l[y].visible&&l[y].active){let R=l[y].geometryIndex;this.getMatrixAt(y,_r),this.getBoundingSphereAt(R,qc).applyMatrix4(_r);let b=!1;if(h&&(b=!v.intersectsSphere(qc,i)),!b){let _=u[R],M=OX.subVectors(qc.center,Eg).dot(pB);jD.push(_.start,_.count,M,y)}}let g=jD.list,C=this.customSort;C===null?g.sort(o.transparent?FX:IX):C.call(this,g,i);for(let y=0,w=g.length;y<w;y++){let R=g[y];c[m]=R.start*a,d[m]=R.count,p[m]=R.index,m++}jD.reset()}else for(let g=0,C=l.length;g<C;g++)if(l[g].visible&&l[g].active){let y=l[g].geometryIndex,w=!1;if(h&&(this.getMatrixAt(g,_r),this.getBoundingSphereAt(y,qc).applyMatrix4(_r),w=!v.intersectsSphere(qc,i)),!w){let R=u[y];c[m]=R.start*a,d[m]=R.count,p[m]=g,m++}}f.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,o,s){this.onBeforeRender(e,null,r,o,s)}},Fi=class extends bi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Le(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Aw=new P,Iw=new P,gB=new pt,Mg=new Ma,nw=new ci,$D=new P,mB=new P,zo=class extends xn{constructor(e=new Bt,n=new Fi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let n=e.attributes.position,i=[0];for(let r=1,o=n.count;r<o;r++)Aw.fromBufferAttribute(n,r-1),Iw.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=Aw.distanceTo(Iw);e.setAttribute("lineDistance",new Ue(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),nw.copy(i.boundingSphere),nw.applyMatrix4(r),nw.radius+=o,e.ray.intersectsSphere(nw)===!1)return;gB.copy(r).invert(),Mg.copy(e.ray).applyMatrix4(gB);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){let f=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let v=f,m=p-1;v<m;v+=c){let g=d.getX(v),C=d.getX(v+1),y=iw(this,e,Mg,l,g,C,v);y&&n.push(y)}if(this.isLineLoop){let v=d.getX(p-1),m=d.getX(f),g=iw(this,e,Mg,l,v,m,p-1);g&&n.push(g)}}else{let f=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let v=f,m=p-1;v<m;v+=c){let g=iw(this,e,Mg,l,v,v+1,v);g&&n.push(g)}if(this.isLineLoop){let v=iw(this,e,Mg,l,p-1,f,p-1);v&&n.push(v)}}}updateMorphTargets(){let n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){let r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function iw(t,e,n,i,r,o,s){let a=t.geometry.attributes.position;if(Aw.fromBufferAttribute(a,r),Iw.fromBufferAttribute(a,o),n.distanceSqToSegment(Aw,Iw,$D,mB)>i)return;$D.applyMatrix4(t.matrixWorld);let c=e.ray.origin.distanceTo($D);if(!(c<e.near||c>e.far))return{distance:c,point:mB.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}var vB=new P,yB=new P,Yr=class extends zo{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let n=e.attributes.position,i=[];for(let r=0,o=n.count;r<o;r+=2)vB.fromBufferAttribute(n,r),yB.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+vB.distanceTo(yB);e.setAttribute("lineDistance",new Ue(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Xg=class extends zo{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}},Dh=class extends bi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},CB=new pt,rT=new Ma,rw=new ci,ow=new P,Zg=class extends xn{constructor(e=new Bt,n=new Dh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rw.copy(i.boundingSphere),rw.applyMatrix4(r),rw.radius+=o,e.ray.intersectsSphere(rw)===!1)return;CB.copy(r).invert(),rT.copy(e.ray).applyMatrix4(CB);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){let h=Math.max(0,s.start),f=Math.min(c.count,s.start+s.count);for(let p=h,v=f;p<v;p++){let m=c.getX(p);ow.fromBufferAttribute(u,m),bB(ow,m,l,r,e,n,this)}}else{let h=Math.max(0,s.start),f=Math.min(u.count,s.start+s.count);for(let p=h,v=f;p<v;p++)ow.fromBufferAttribute(u,p),bB(ow,p,l,r,e,n,this)}}updateMorphTargets(){let n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){let r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function bB(t,e,n,i,r,o,s){let a=rT.distanceSqToPoint(t);if(a<n){let l=new P;rT.closestPointToPoint(t,l),l.applyMatrix4(i);let c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var Qg=class extends Zi{constructor(e,n,i,r,o=li,s=li,a,l,c){super(e,n,i,r,o,s,a,l,c),this.isVideoTexture=!0,this.generateMipmaps=!1;let d=this;function u(){d.needsUpdate=!0,e.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(u)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},Fw=class extends Qg{constructor(e,n,i,r,o,s,a,l){super({},e,n,i,r,o,s,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}},Pw=class extends Zi{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Ai,this.minFilter=Ai,this.generateMipmaps=!1,this.needsUpdate=!0}},ud=class extends Zi{constructor(e,n,i,r,o,s,a,l,c,d,u,h){super(null,s,a,l,c,d,r,o,u,h),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},kw=class extends ud{constructor(e,n,i,r,o,s){super(e,n,i,o,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Wr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},Ow=class extends ud{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,Ss),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},Lw=class extends Zi{constructor(e,n,i,r,o,s,a,l,c){super(e,n,i,r,o,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}},Th=class extends Zi{constructor(e,n,i=xs,r,o,s,a=Ai,l=Ai,c,d=id,u=1){if(d!==id&&d!==wd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:e,height:n,depth:u};super(h,r,o,s,a,l,d,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new No(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}},Jg=class t extends Bt{constructor(e=1,n=1,i=4,r=8,o=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:o},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),o=Math.max(1,Math.floor(o));let s=[],a=[],l=[],c=[],d=n/2,u=Math.PI/2*e,h=n,f=2*u+h,p=i*2+o,v=r+1,m=new P,g=new P;for(let C=0;C<=p;C++){let y=0,w=0,R=0,b=0;if(C<=i){let x=C/i,S=x*Math.PI/2;w=-d-e*Math.cos(S),R=e*Math.sin(S),b=-e*Math.cos(S),y=x*u}else if(C<=i+o){let x=(C-i)/o;w=-d+x*n,R=e,b=0,y=u+x*h}else{let x=(C-i-o)/i,S=x*Math.PI/2;w=d+e*Math.sin(S),R=e*Math.cos(S),b=e*Math.sin(S),y=u+h+x*u}let _=Math.max(0,Math.min(1,y/f)),M=0;C===0?M=.5/r:C===p&&(M=-.5/r);for(let x=0;x<=r;x++){let S=x/r,I=S*Math.PI*2,N=Math.sin(I),B=Math.cos(I);g.x=-R*B,g.y=w,g.z=R*N,a.push(g.x,g.y,g.z),m.set(-R*B,b,R*N),m.normalize(),l.push(m.x,m.y,m.z),c.push(S+M,_)}if(C>0){let x=(C-1)*v;for(let S=0;S<r;S++){let I=x+S,N=x+S+1,B=C*v+S,W=C*v+S+1;s.push(I,N,B),s.push(N,W,B)}}}this.setIndex(s),this.setAttribute("position",new Ue(a,3)),this.setAttribute("normal",new Ue(l,3)),this.setAttribute("uv",new Ue(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}},em=class t extends Bt{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);let o=[],s=[],a=[],l=[],c=new P,d=new ce;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let u=0,h=3;u<=n;u++,h+=3){let f=i+u/n*r;c.x=e*Math.cos(f),c.y=e*Math.sin(f),s.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(s[h]/e+1)/2,d.y=(s[h+1]/e+1)/2,l.push(d.x,d.y)}for(let u=1;u<=n;u++)o.push(u,u+1,0);this.setIndex(o),this.setAttribute("position",new Ue(s,3)),this.setAttribute("normal",new Ue(a,3)),this.setAttribute("uv",new Ue(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.radius,e.segments,e.thetaStart,e.thetaLength)}},Ah=class t extends Bt{constructor(e=1,n=1,i=1,r=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};let c=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],f=[],p=0,v=[],m=i/2,g=0;C(),s===!1&&(e>0&&y(!0),n>0&&y(!1)),this.setIndex(d),this.setAttribute("position",new Ue(u,3)),this.setAttribute("normal",new Ue(h,3)),this.setAttribute("uv",new Ue(f,2));function C(){let w=new P,R=new P,b=0,_=(n-e)/i;for(let M=0;M<=o;M++){let x=[],S=M/o,I=S*(n-e)+e;for(let N=0;N<=r;N++){let B=N/r,W=B*l+a,U=Math.sin(W),j=Math.cos(W);R.x=I*U,R.y=-S*i+m,R.z=I*j,u.push(R.x,R.y,R.z),w.set(U,_,j).normalize(),h.push(w.x,w.y,w.z),f.push(B,1-S),x.push(p++)}v.push(x)}for(let M=0;M<r;M++)for(let x=0;x<o;x++){let S=v[x][M],I=v[x+1][M],N=v[x+1][M+1],B=v[x][M+1];(e>0||x!==0)&&(d.push(S,I,B),b+=3),(n>0||x!==o-1)&&(d.push(I,N,B),b+=3)}c.addGroup(g,b,0),g+=b}function y(w){let R=p,b=new ce,_=new P,M=0,x=w===!0?e:n,S=w===!0?1:-1;for(let N=1;N<=r;N++)u.push(0,m*S,0),h.push(0,S,0),f.push(.5,.5),p++;let I=p;for(let N=0;N<=r;N++){let W=N/r*l+a,U=Math.cos(W),j=Math.sin(W);_.x=x*j,_.y=m*S,_.z=x*U,u.push(_.x,_.y,_.z),h.push(0,S,0),b.x=U*.5+.5,b.y=j*.5*S+.5,f.push(b.x,b.y),p++}for(let N=0;N<r;N++){let B=R+N,W=I+N;w===!0?d.push(W,W+1,B):d.push(W+1,W,B),M+=3}c.addGroup(g,M,w===!0?1:2),g+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Ih=class t extends Ah{constructor(e=1,n=1,i=32,r=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new t(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Ta=class t extends Bt{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};let o=[],s=[];a(r),c(i),d(),this.setAttribute("position",new Ue(o,3)),this.setAttribute("normal",new Ue(o.slice(),3)),this.setAttribute("uv",new Ue(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(C){let y=new P,w=new P,R=new P;for(let b=0;b<n.length;b+=3)f(n[b+0],y),f(n[b+1],w),f(n[b+2],R),l(y,w,R,C)}function l(C,y,w,R){let b=R+1,_=[];for(let M=0;M<=b;M++){_[M]=[];let x=C.clone().lerp(w,M/b),S=y.clone().lerp(w,M/b),I=b-M;for(let N=0;N<=I;N++)N===0&&M===b?_[M][N]=x:_[M][N]=x.clone().lerp(S,N/I)}for(let M=0;M<b;M++)for(let x=0;x<2*(b-M)-1;x++){let S=Math.floor(x/2);x%2===0?(h(_[M][S+1]),h(_[M+1][S]),h(_[M][S])):(h(_[M][S+1]),h(_[M+1][S+1]),h(_[M+1][S]))}}function c(C){let y=new P;for(let w=0;w<o.length;w+=3)y.x=o[w+0],y.y=o[w+1],y.z=o[w+2],y.normalize().multiplyScalar(C),o[w+0]=y.x,o[w+1]=y.y,o[w+2]=y.z}function d(){let C=new P;for(let y=0;y<o.length;y+=3){C.x=o[y+0],C.y=o[y+1],C.z=o[y+2];let w=m(C)/2/Math.PI+.5,R=g(C)/Math.PI+.5;s.push(w,1-R)}p(),u()}function u(){for(let C=0;C<s.length;C+=6){let y=s[C+0],w=s[C+2],R=s[C+4],b=Math.max(y,w,R),_=Math.min(y,w,R);b>.9&&_<.1&&(y<.2&&(s[C+0]+=1),w<.2&&(s[C+2]+=1),R<.2&&(s[C+4]+=1))}}function h(C){o.push(C.x,C.y,C.z)}function f(C,y){let w=C*3;y.x=e[w+0],y.y=e[w+1],y.z=e[w+2]}function p(){let C=new P,y=new P,w=new P,R=new P,b=new ce,_=new ce,M=new ce;for(let x=0,S=0;x<o.length;x+=9,S+=6){C.set(o[x+0],o[x+1],o[x+2]),y.set(o[x+3],o[x+4],o[x+5]),w.set(o[x+6],o[x+7],o[x+8]),b.set(s[S+0],s[S+1]),_.set(s[S+2],s[S+3]),M.set(s[S+4],s[S+5]),R.copy(C).add(y).add(w).divideScalar(3);let I=m(R);v(b,S+0,C,I),v(_,S+2,y,I),v(M,S+4,w,I)}}function v(C,y,w,R){R<0&&C.x===1&&(s[y]=C.x-1),w.x===0&&w.z===0&&(s[y]=R/2/Math.PI+.5)}function m(C){return Math.atan2(C.z,-C.x)}function g(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.vertices,e.indices,e.radius,e.details)}},tm=class t extends Ta{constructor(e=1,n=0){let i=(1+Math.sqrt(5))/2,r=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new t(e.radius,e.detail)}},sw=new P,aw=new P,qD=new P,lw=new Lo,nm=class extends Bt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){let r=Math.pow(10,4),o=Math.cos(nd*n),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},f=[];for(let p=0;p<l;p+=3){s?(c[0]=s.getX(p),c[1]=s.getX(p+1),c[2]=s.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);let{a:v,b:m,c:g}=lw;if(v.fromBufferAttribute(a,c[0]),m.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),lw.getNormal(qD),u[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,u[1]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,u[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let C=0;C<3;C++){let y=(C+1)%3,w=u[C],R=u[y],b=lw[d[C]],_=lw[d[y]],M=`${w}_${R}`,x=`${R}_${w}`;x in h&&h[x]?(qD.dot(h[x].normal)<=o&&(f.push(b.x,b.y,b.z),f.push(_.x,_.y,_.z)),h[x]=null):M in h||(h[M]={index0:c[C],index1:c[y],normal:qD.clone()})}}for(let p in h)if(h[p]){let{index0:v,index1:m}=h[p];sw.fromBufferAttribute(a,v),aw.fromBufferAttribute(a,m),f.push(sw.x,sw.y,sw.z),f.push(aw.x,aw.y,aw.z)}this.setAttribute("position",new Ue(f,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},Er=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,n){let i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){let n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){let n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let n=[],i,r=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),n.push(o),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){let i=this.getLengths(),r=0,o=i.length,s;n?s=n:s=e*i[o-1];let a=0,l=o-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-s,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(o-1);let d=i[r],h=i[r+1]-d,f=(s-d)/h;return(r+f)/(o-1)}getTangent(e,n){let r=e-1e-4,o=e+1e-4;r<0&&(r=0),o>1&&(o=1);let s=this.getPoint(r),a=this.getPoint(o),l=n||(s.isVector2?new ce:new P);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){let i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){let i=new P,r=[],o=[],s=[],a=new P,l=new pt;for(let f=0;f<=e;f++){let p=f/e;r[f]=this.getTangentAt(p,new P)}o[0]=new P,s[0]=new P;let c=Number.MAX_VALUE,d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),u<=c&&(c=u,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();let p=Math.acos(Ft(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(a,p))}s[f].crossVectors(r[f],o[f])}if(n===!0){let f=Math.acos(Ft(o[0].dot(o[e]),-1,1));f/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let p=1;p<=e;p++)o[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),s[p].crossVectors(r[p],o[p])}return{tangents:r,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},hd=class extends Er{constructor(e=0,n=0,i=1,r=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new ce){let i=n,r=Math.PI*2,o=this.aEndAngle-this.aStartAngle,s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(s?o=0:o=r),this.aClockwise===!0&&!s&&(o===r?o=-r:o=o-r);let a=this.aStartAngle+e*o,l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*d-f*u+this.aX,c=h*u+f*d+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},im=class extends hd{constructor(e,n,i,r,o,s){super(e,n,i,i,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}};function dA(){let t=0,e=0,n=0,i=0;function r(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,d,u){let h=(s-o)/c-(a-o)/(c+d)+(a-s)/d,f=(a-s)/d-(l-s)/(d+u)+(l-a)/u;h*=d,f*=d,r(s,a,h,f)},calc:function(o){let s=o*o,a=s*o;return t+e*o+n*s+i*a}}}var cw=new P,KD=new dA,YD=new dA,XD=new dA,rm=class extends Er{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new P){let i=n,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let c,d;this.closed||a>0?c=r[(a-1)%o]:(cw.subVectors(r[0],r[1]).add(r[0]),c=cw);let u=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?d=r[(a+2)%o]:(cw.subVectors(r[o-1],r[o-2]).add(r[o-1]),d=cw),this.curveType==="centripetal"||this.curveType==="chordal"){let f=this.curveType==="chordal"?.5:.25,p=Math.pow(c.distanceToSquared(u),f),v=Math.pow(u.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(d),f);v<1e-4&&(v=1),p<1e-4&&(p=v),m<1e-4&&(m=v),KD.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,p,v,m),YD.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,p,v,m),XD.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,p,v,m)}else this.curveType==="catmullrom"&&(KD.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),YD.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),XD.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return i.set(KD.calc(l),YD.calc(l),XD.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){let r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){let r=e.points[n];this.points.push(new P().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function wB(t,e,n,i,r){let o=(i-e)*.5,s=(r-n)*.5,a=t*t,l=t*a;return(2*n-2*i+o+s)*l+(-3*n+3*i-2*o-s)*a+o*t+n}function NX(t,e){let n=1-t;return n*n*e}function BX(t,e){return 2*(1-t)*t*e}function VX(t,e){return t*t*e}function Fg(t,e,n,i){return NX(t,e)+BX(t,n)+VX(t,i)}function HX(t,e){let n=1-t;return n*n*n*e}function zX(t,e){let n=1-t;return 3*n*n*t*e}function UX(t,e){return 3*(1-t)*t*t*e}function GX(t,e){return t*t*t*e}function Pg(t,e,n,i,r){return HX(t,e)+zX(t,n)+UX(t,i)+GX(t,r)}var Fh=class extends Er{constructor(e=new ce,n=new ce,i=new ce,r=new ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new ce){let i=n,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Pg(e,r.x,o.x,s.x,a.x),Pg(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},om=class extends Er{constructor(e=new P,n=new P,i=new P,r=new P){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new P){let i=n,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Pg(e,r.x,o.x,s.x,a.x),Pg(e,r.y,o.y,s.y,a.y),Pg(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ph=class extends Er{constructor(e=new ce,n=new ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ce){let i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ce){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},sm=class extends Er{constructor(e=new P,n=new P){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new P){let i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new P){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},kh=class extends Er{constructor(e=new ce,n=new ce,i=new ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new ce){let i=n,r=this.v0,o=this.v1,s=this.v2;return i.set(Fg(e,r.x,o.x,s.x),Fg(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Oh=class extends Er{constructor(e=new P,n=new P,i=new P){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new P){let i=n,r=this.v0,o=this.v1,s=this.v2;return i.set(Fg(e,r.x,o.x,s.x),Fg(e,r.y,o.y,s.y),Fg(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Lh=class extends Er{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ce){let i=n,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[s===0?s:s-1],c=r[s],d=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return i.set(wB(a,l.x,c.x,d.x,u.x),wB(a,l.y,c.y,d.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){let r=e.points[n];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){let r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){let r=e.points[n];this.points.push(new ce().fromArray(r))}return this}},Nw=Object.freeze({__proto__:null,ArcCurve:im,CatmullRomCurve3:rm,CubicBezierCurve:Fh,CubicBezierCurve3:om,EllipseCurve:hd,LineCurve:Ph,LineCurve3:sm,QuadraticBezierCurve:kh,QuadraticBezierCurve3:Oh,SplineCurve:Lh}),am=class extends Er{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){let i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Nw[i](n,e))}return this}getPoint(e,n){let i=e*this.getLength(),r=this.getCurveLengths(),o=0;for(;o<r.length;){if(r[o]>=i){let s=r[o]-i,a=this.curves[o],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,n)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){let n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){let n=[],i;for(let r=0,o=this.curves;r<o.length;r++){let s=o[r],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){let d=l[c];i&&i.equals(d)||(n.push(d),i=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){let r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){let r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){let r=e.curves[n];this.curves.push(new Nw[r.type]().fromJSON(r))}return this}},fd=class extends am{constructor(e){super(),this.type="Path",this.currentPoint=new ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){let i=new Ph(this.currentPoint.clone(),new ce(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){let o=new kh(this.currentPoint.clone(),new ce(e,n),new ce(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,o,s){let a=new Fh(this.currentPoint.clone(),new ce(e,n),new ce(i,r),new ce(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){let n=[this.currentPoint.clone()].concat(e),i=new Lh(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,o,s){let a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,i,r,o,s),this}absarc(e,n,i,r,o,s){return this.absellipse(e,n,i,i,r,o,s),this}ellipse(e,n,i,r,o,s,a,l){let c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,n+d,i,r,o,s,a,l),this}absellipse(e,n,i,r,o,s,a,l){let c=new hd(e,n,i,r,o,s,a,l);if(this.curves.length>0){let u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);let d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},vs=class extends fd{constructor(e){super(e),this.uuid=$r(),this.type="Shape",this.holes=[]}getPointsHoles(e){let n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){let r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){let r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){let r=e.holes[n];this.holes.push(new fd().fromJSON(r))}return this}};function WX(t,e,n=2){let i=e&&e.length,r=i?e[0]*n:t.length,o=OV(t,0,r,n,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(i&&(o=YX(t,e,o,n)),t.length>80*n){a=1/0,l=1/0;let d=-1/0,u=-1/0;for(let h=n;h<r;h+=n){let f=t[h],p=t[h+1];f<a&&(a=f),p<l&&(l=p),f>d&&(d=f),p>u&&(u=p)}c=Math.max(d-a,u-l),c=c!==0?32767/c:0}return lm(o,s,n,a,l,c,0),s}function OV(t,e,n,i,r){let o;if(r===sZ(t,e,n,i)>0)for(let s=e;s<n;s+=i)o=_B(s/i|0,t[s],t[s+1],o);else for(let s=n-i;s>=e;s-=i)o=_B(s/i|0,t[s],t[s+1],o);return o&&Nh(o,o.next)&&(dm(o),o=o.next),o}function pd(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Nh(n,n.next)||Hn(n.prev,n,n.next)===0)){if(dm(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function lm(t,e,n,i,r,o,s){if(!t)return;!s&&o&&eZ(t,i,r,o);let a=t;for(;t.prev!==t.next;){let l=t.prev,c=t.next;if(o?$X(t,i,r,o):jX(t)){e.push(l.i,t.i,c.i),dm(t),t=c.next,a=c.next;continue}if(t=c,t===a){s?s===1?(t=qX(pd(t),e),lm(t,e,n,i,r,o,2)):s===2&&KX(t,e,n,i,r,o):lm(pd(t),e,n,i,r,o,1);break}}}function jX(t){let e=t.prev,n=t,i=t.next;if(Hn(e,n,i)>=0)return!1;let r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,c=i.y,d=Math.min(r,o,s),u=Math.min(a,l,c),h=Math.max(r,o,s),f=Math.max(a,l,c),p=i.next;for(;p!==e;){if(p.x>=d&&p.x<=h&&p.y>=u&&p.y<=f&&Tg(r,a,o,l,s,c,p.x,p.y)&&Hn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function $X(t,e,n,i){let r=t.prev,o=t,s=t.next;if(Hn(r,o,s)>=0)return!1;let a=r.x,l=o.x,c=s.x,d=r.y,u=o.y,h=s.y,f=Math.min(a,l,c),p=Math.min(d,u,h),v=Math.max(a,l,c),m=Math.max(d,u,h),g=oT(f,p,e,n,i),C=oT(v,m,e,n,i),y=t.prevZ,w=t.nextZ;for(;y&&y.z>=g&&w&&w.z<=C;){if(y.x>=f&&y.x<=v&&y.y>=p&&y.y<=m&&y!==r&&y!==s&&Tg(a,d,l,u,c,h,y.x,y.y)&&Hn(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=f&&w.x<=v&&w.y>=p&&w.y<=m&&w!==r&&w!==s&&Tg(a,d,l,u,c,h,w.x,w.y)&&Hn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=g;){if(y.x>=f&&y.x<=v&&y.y>=p&&y.y<=m&&y!==r&&y!==s&&Tg(a,d,l,u,c,h,y.x,y.y)&&Hn(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=C;){if(w.x>=f&&w.x<=v&&w.y>=p&&w.y<=m&&w!==r&&w!==s&&Tg(a,d,l,u,c,h,w.x,w.y)&&Hn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function qX(t,e){let n=t;do{let i=n.prev,r=n.next.next;!Nh(i,r)&&NV(i,n,n.next,r)&&cm(i,r)&&cm(r,i)&&(e.push(i.i,n.i,r.i),dm(n),dm(n.next),n=t=r),n=n.next}while(n!==t);return pd(n)}function KX(t,e,n,i,r,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&iZ(s,a)){let l=BV(s,a);s=pd(s,s.next),l=pd(l,l.next),lm(s,e,n,i,r,o,0),lm(l,e,n,i,r,o,0);return}a=a.next}s=s.next}while(s!==t)}function YX(t,e,n,i){let r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o]*i,l=o<s-1?e[o+1]*i:t.length,c=OV(t,a,l,i,!1);c===c.next&&(c.steiner=!0),r.push(nZ(c))}r.sort(XX);for(let o=0;o<r.length;o++)n=ZX(r[o],n);return n}function XX(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){let i=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function ZX(t,e){let n=QX(t,e);if(!n)return e;let i=BV(n,t);return pd(i,i.next),pd(n,n.next)}function QX(t,e){let n=e,i=t.x,r=t.y,o=-1/0,s;if(Nh(t,n))return n;do{if(Nh(t,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){let u=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=i&&u>o&&(o=u,s=n.x<n.next.x?n:n.next,u===i))return s}n=n.next}while(n!==e);if(!s)return null;let a=s,l=s.x,c=s.y,d=1/0;n=s;do{if(i>=n.x&&n.x>=l&&i!==n.x&&LV(r<c?i:o,r,l,c,r<c?o:i,r,n.x,n.y)){let u=Math.abs(r-n.y)/(i-n.x);cm(n,t)&&(u<d||u===d&&(n.x>s.x||n.x===s.x&&JX(s,n)))&&(s=n,d=u)}n=n.next}while(n!==a);return s}function JX(t,e){return Hn(t.prev,t,e.prev)<0&&Hn(e.next,t,t.next)<0}function eZ(t,e,n,i){let r=t;do r.z===0&&(r.z=oT(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,tZ(r)}function tZ(t){let e,n=1;do{let i=t,r;t=null;let o=null;for(e=0;i;){e++;let s=i,a=0;for(let c=0;c<n&&(a++,s=s.nextZ,!!s);c++);let l=n;for(;a>0||l>0&&s;)a!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=s}o.nextZ=null,n*=2}while(e>1);return t}function oT(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function nZ(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function LV(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function Tg(t,e,n,i,r,o,s,a){return!(t===s&&e===a)&&LV(t,e,n,i,r,o,s,a)}function iZ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!rZ(t,e)&&(cm(t,e)&&cm(e,t)&&oZ(t,e)&&(Hn(t.prev,t,e.prev)||Hn(t,e.prev,e))||Nh(t,e)&&Hn(t.prev,t,t.next)>0&&Hn(e.prev,e,e.next)>0)}function Hn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Nh(t,e){return t.x===e.x&&t.y===e.y}function NV(t,e,n,i){let r=uw(Hn(t,e,n)),o=uw(Hn(t,e,i)),s=uw(Hn(n,i,t)),a=uw(Hn(n,i,e));return!!(r!==o&&s!==a||r===0&&dw(t,n,e)||o===0&&dw(t,i,e)||s===0&&dw(n,t,i)||a===0&&dw(n,e,i))}function dw(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function uw(t){return t>0?1:t<0?-1:0}function rZ(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&NV(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function cm(t,e){return Hn(t.prev,t,t.next)<0?Hn(t,e,t.next)>=0&&Hn(t,t.prev,e)>=0:Hn(t,e,t.prev)<0||Hn(t,t.next,e)<0}function oZ(t,e){let n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function BV(t,e){let n=sT(t.i,t.x,t.y),i=sT(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function _B(t,e,n,i){let r=sT(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function dm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function sT(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sZ(t,e,n,i){let r=0;for(let o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}var aT=class{static triangulate(e,n,i=2){return WX(e,n,i)}},co=class t{static area(e){let n=e.length,i=0;for(let r=n-1,o=0;o<n;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return i*.5}static isClockWise(e){return t.area(e)<0}static triangulateShape(e,n){let i=[],r=[],o=[];SB(e),xB(i,e);let s=e.length;n.forEach(SB);for(let l=0;l<n.length;l++)r.push(s),s+=n[l].length,xB(i,n[l]);let a=aT.triangulate(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}};function SB(t){let e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function xB(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var um=class t extends Bt{constructor(e=new vs([new ce(.5,.5),new ce(-.5,.5),new ce(-.5,-.5),new ce(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];let i=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++){let c=e[a];s(c)}this.setAttribute("position",new Ue(r,3)),this.setAttribute("uv",new Ue(o,2)),this.computeVertexNormals();function s(a){let l=[],c=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,u=n.depth!==void 0?n.depth:1,h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:f-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3,g=n.extrudePath,C=n.UVGenerator!==void 0?n.UVGenerator:aZ,y,w=!1,R,b,_,M;g&&(y=g.getSpacedPoints(d),w=!0,h=!1,R=g.computeFrenetFrames(d,!1),b=new P,_=new P,M=new P),h||(m=0,f=0,p=0,v=0);let x=a.extractPoints(c),S=x.shape,I=x.holes;if(!co.isClockWise(S)){S=S.reverse();for(let T=0,ve=I.length;T<ve;T++){let ee=I[T];co.isClockWise(ee)&&(I[T]=ee.reverse())}}function B(T){let ee=10000000000000001e-36,fe=T[0];for(let J=1;J<=T.length;J++){let Pe=J%T.length,ge=T[Pe],Ne=ge.x-fe.x,it=ge.y-fe.y,F=Ne*Ne+it*it,E=Math.max(Math.abs(ge.x),Math.abs(ge.y),Math.abs(fe.x),Math.abs(fe.y)),H=ee*E*E;if(F<=H){T.splice(Pe,1),J--;continue}fe=ge}}B(S),I.forEach(B);let W=I.length,U=S;for(let T=0;T<W;T++){let ve=I[T];S=S.concat(ve)}function j(T,ve,ee){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),T.clone().addScaledVector(ve,ee)}let Y=S.length;function $(T,ve,ee){let fe,J,Pe,ge=T.x-ve.x,Ne=T.y-ve.y,it=ee.x-T.x,F=ee.y-T.y,E=ge*ge+Ne*Ne,H=ge*F-Ne*it;if(Math.abs(H)>Number.EPSILON){let Q=Math.sqrt(E),de=Math.sqrt(it*it+F*F),te=ve.x-Ne/Q,We=ve.y+ge/Q,G=ee.x-F/de,He=ee.y+it/de,et=((G-te)*F-(He-We)*it)/(ge*F-Ne*it);fe=te+ge*et-T.x,J=We+Ne*et-T.y;let me=fe*fe+J*J;if(me<=2)return new ce(fe,J);Pe=Math.sqrt(me/2)}else{let Q=!1;ge>Number.EPSILON?it>Number.EPSILON&&(Q=!0):ge<-Number.EPSILON?it<-Number.EPSILON&&(Q=!0):Math.sign(Ne)===Math.sign(F)&&(Q=!0),Q?(fe=-Ne,J=ge,Pe=Math.sqrt(E)):(fe=ge,J=Ne,Pe=Math.sqrt(E/2))}return new ce(fe/Pe,J/Pe)}let re=[];for(let T=0,ve=U.length,ee=ve-1,fe=T+1;T<ve;T++,ee++,fe++)ee===ve&&(ee=0),fe===ve&&(fe=0),re[T]=$(U[T],U[ee],U[fe]);let oe=[],ie,Ge=re.concat();for(let T=0,ve=W;T<ve;T++){let ee=I[T];ie=[];for(let fe=0,J=ee.length,Pe=J-1,ge=fe+1;fe<J;fe++,Pe++,ge++)Pe===J&&(Pe=0),ge===J&&(ge=0),ie[fe]=$(ee[fe],ee[Pe],ee[ge]);oe.push(ie),Ge=Ge.concat(ie)}let Xe;if(m===0)Xe=co.triangulateShape(U,I);else{let T=[],ve=[];for(let ee=0;ee<m;ee++){let fe=ee/m,J=f*Math.cos(fe*Math.PI/2),Pe=p*Math.sin(fe*Math.PI/2)+v;for(let ge=0,Ne=U.length;ge<Ne;ge++){let it=j(U[ge],re[ge],Pe);Re(it.x,it.y,-J),fe===0&&T.push(it)}for(let ge=0,Ne=W;ge<Ne;ge++){let it=I[ge];ie=oe[ge];let F=[];for(let E=0,H=it.length;E<H;E++){let Q=j(it[E],ie[E],Pe);Re(Q.x,Q.y,-J),fe===0&&F.push(Q)}fe===0&&ve.push(F)}}Xe=co.triangulateShape(T,ve)}let Z=Xe.length,ye=p+v;for(let T=0;T<Y;T++){let ve=h?j(S[T],Ge[T],ye):S[T];w?(_.copy(R.normals[0]).multiplyScalar(ve.x),b.copy(R.binormals[0]).multiplyScalar(ve.y),M.copy(y[0]).add(_).add(b),Re(M.x,M.y,M.z)):Re(ve.x,ve.y,0)}for(let T=1;T<=d;T++)for(let ve=0;ve<Y;ve++){let ee=h?j(S[ve],Ge[ve],ye):S[ve];w?(_.copy(R.normals[T]).multiplyScalar(ee.x),b.copy(R.binormals[T]).multiplyScalar(ee.y),M.copy(y[T]).add(_).add(b),Re(M.x,M.y,M.z)):Re(ee.x,ee.y,u/d*T)}for(let T=m-1;T>=0;T--){let ve=T/m,ee=f*Math.cos(ve*Math.PI/2),fe=p*Math.sin(ve*Math.PI/2)+v;for(let J=0,Pe=U.length;J<Pe;J++){let ge=j(U[J],re[J],fe);Re(ge.x,ge.y,u+ee)}for(let J=0,Pe=I.length;J<Pe;J++){let ge=I[J];ie=oe[J];for(let Ne=0,it=ge.length;Ne<it;Ne++){let F=j(ge[Ne],ie[Ne],fe);w?Re(F.x,F.y+y[d-1].y,y[d-1].x+ee):Re(F.x,F.y,u+ee)}}}we(),pe();function we(){let T=r.length/3;if(h){let ve=0,ee=Y*ve;for(let fe=0;fe<Z;fe++){let J=Xe[fe];De(J[2]+ee,J[1]+ee,J[0]+ee)}ve=d+m*2,ee=Y*ve;for(let fe=0;fe<Z;fe++){let J=Xe[fe];De(J[0]+ee,J[1]+ee,J[2]+ee)}}else{for(let ve=0;ve<Z;ve++){let ee=Xe[ve];De(ee[2],ee[1],ee[0])}for(let ve=0;ve<Z;ve++){let ee=Xe[ve];De(ee[0]+Y*d,ee[1]+Y*d,ee[2]+Y*d)}}i.addGroup(T,r.length/3-T,0)}function pe(){let T=r.length/3,ve=0;Me(U,ve),ve+=U.length;for(let ee=0,fe=I.length;ee<fe;ee++){let J=I[ee];Me(J,ve),ve+=J.length}i.addGroup(T,r.length/3-T,1)}function Me(T,ve){let ee=T.length;for(;--ee>=0;){let fe=ee,J=ee-1;J<0&&(J=T.length-1);for(let Pe=0,ge=d+m*2;Pe<ge;Pe++){let Ne=Y*Pe,it=Y*(Pe+1),F=ve+fe+Ne,E=ve+J+Ne,H=ve+J+it,Q=ve+fe+it;Dt(F,E,H,Q)}}}function Re(T,ve,ee){l.push(T),l.push(ve),l.push(ee)}function De(T,ve,ee){rt(T),rt(ve),rt(ee);let fe=r.length/3,J=C.generateTopUV(i,r,fe-3,fe-2,fe-1);Be(J[0]),Be(J[1]),Be(J[2])}function Dt(T,ve,ee,fe){rt(T),rt(ve),rt(fe),rt(ve),rt(ee),rt(fe);let J=r.length/3,Pe=C.generateSideWallUV(i,r,J-6,J-3,J-2,J-1);Be(Pe[0]),Be(Pe[1]),Be(Pe[3]),Be(Pe[1]),Be(Pe[2]),Be(Pe[3])}function rt(T){r.push(l[T*3+0]),r.push(l[T*3+1]),r.push(l[T*3+2])}function Be(T){o.push(T.x),o.push(T.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return lZ(n,i,e)}static fromJSON(e,n){let i=[];for(let o=0,s=e.shapes.length;o<s;o++){let a=n[e.shapes[o]];i.push(a)}let r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Nw[r.type]().fromJSON(r)),new t(i,e.options)}},aZ={generateTopUV:function(t,e,n,i,r){let o=e[n*3],s=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new ce(o,s),new ce(a,l),new ce(c,d)]},generateSideWallUV:function(t,e,n,i,r,o){let s=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],d=e[i*3+1],u=e[i*3+2],h=e[r*3],f=e[r*3+1],p=e[r*3+2],v=e[o*3],m=e[o*3+1],g=e[o*3+2];return Math.abs(a-d)<Math.abs(s-c)?[new ce(s,1-l),new ce(c,1-u),new ce(h,1-p),new ce(v,1-g)]:[new ce(a,1-l),new ce(d,1-u),new ce(f,1-p),new ce(m,1-g)]}};function lZ(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){let o=t[i];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}var hm=class t extends Ta{constructor(e=1,n=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new t(e.radius,e.detail)}},fm=class t extends Bt{constructor(e=[new ce(0,-.5),new ce(.5,0),new ce(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Ft(r,0,Math.PI*2);let o=[],s=[],a=[],l=[],c=[],d=1/n,u=new P,h=new ce,f=new P,p=new P,v=new P,m=0,g=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:m=e[C+1].x-e[C].x,g=e[C+1].y-e[C].y,f.x=g*1,f.y=-m,f.z=g*0,v.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:m=e[C+1].x-e[C].x,g=e[C+1].y-e[C].y,f.x=g*1,f.y=-m,f.z=g*0,p.copy(f),f.x+=v.x,f.y+=v.y,f.z+=v.z,f.normalize(),l.push(f.x,f.y,f.z),v.copy(p)}for(let C=0;C<=n;C++){let y=i+C*d*r,w=Math.sin(y),R=Math.cos(y);for(let b=0;b<=e.length-1;b++){u.x=e[b].x*w,u.y=e[b].y,u.z=e[b].x*R,s.push(u.x,u.y,u.z),h.x=C/n,h.y=b/(e.length-1),a.push(h.x,h.y);let _=l[3*b+0]*w,M=l[3*b+1],x=l[3*b+0]*R;c.push(_,M,x)}}for(let C=0;C<n;C++)for(let y=0;y<e.length-1;y++){let w=y+C*e.length,R=w,b=w+e.length,_=w+e.length+1,M=w+1;o.push(R,b,M),o.push(_,M,b)}this.setIndex(o),this.setAttribute("position",new Ue(s,3)),this.setAttribute("uv",new Ue(a,2)),this.setAttribute("normal",new Ue(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.points,e.segments,e.phiStart,e.phiLength)}},Bh=class t extends Ta{constructor(e=1,n=0){let i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new t(e.radius,e.detail)}},gd=class t extends Bt{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};let o=e/2,s=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,u=e/a,h=n/l,f=[],p=[],v=[],m=[];for(let g=0;g<d;g++){let C=g*h-s;for(let y=0;y<c;y++){let w=y*u-o;p.push(w,-C,0),v.push(0,0,1),m.push(y/a),m.push(1-g/l)}}for(let g=0;g<l;g++)for(let C=0;C<a;C++){let y=C+c*g,w=C+c*(g+1),R=C+1+c*(g+1),b=C+1+c*g;f.push(y,w,b),f.push(w,R,b)}this.setIndex(f),this.setAttribute("position",new Ue(p,3)),this.setAttribute("normal",new Ue(v,3)),this.setAttribute("uv",new Ue(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.width,e.height,e.widthSegments,e.heightSegments)}},pm=class t extends Bt{constructor(e=.5,n=1,i=32,r=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);let a=[],l=[],c=[],d=[],u=e,h=(n-e)/r,f=new P,p=new ce;for(let v=0;v<=r;v++){for(let m=0;m<=i;m++){let g=o+m/i*s;f.x=u*Math.cos(g),f.y=u*Math.sin(g),l.push(f.x,f.y,f.z),c.push(0,0,1),p.x=(f.x/n+1)/2,p.y=(f.y/n+1)/2,d.push(p.x,p.y)}u+=h}for(let v=0;v<r;v++){let m=v*(i+1);for(let g=0;g<i;g++){let C=g+m,y=C,w=C+i+1,R=C+i+2,b=C+1;a.push(y,w,b),a.push(w,R,b)}}this.setIndex(a),this.setAttribute("position",new Ue(l,3)),this.setAttribute("normal",new Ue(c,3)),this.setAttribute("uv",new Ue(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},gm=class t extends Bt{constructor(e=new vs([new ce(0,.5),new ce(-.5,-.5),new ce(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};let i=[],r=[],o=[],s=[],a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ue(r,3)),this.setAttribute("normal",new Ue(o,3)),this.setAttribute("uv",new Ue(s,2));function c(d){let u=r.length/3,h=d.extractPoints(n),f=h.shape,p=h.holes;co.isClockWise(f)===!1&&(f=f.reverse());for(let m=0,g=p.length;m<g;m++){let C=p[m];co.isClockWise(C)===!0&&(p[m]=C.reverse())}let v=co.triangulateShape(f,p);for(let m=0,g=p.length;m<g;m++){let C=p[m];f=f.concat(C)}for(let m=0,g=f.length;m<g;m++){let C=f[m];r.push(C.x,C.y,0),o.push(0,0,1),s.push(C.x,C.y)}for(let m=0,g=v.length;m<g;m++){let C=v[m],y=C[0]+u,w=C[1]+u,R=C[2]+u;i.push(y,w,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),n=this.parameters.shapes;return cZ(n,e)}static fromJSON(e,n){let i=[];for(let r=0,o=e.shapes.length;r<o;r++){let s=n[e.shapes[r]];i.push(s)}return new t(i,e.curveSegments)}};function cZ(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){let r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}var Vh=class t extends Bt{constructor(e=1,n=32,i=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));let l=Math.min(s+a,Math.PI),c=0,d=[],u=new P,h=new P,f=[],p=[],v=[],m=[];for(let g=0;g<=i;g++){let C=[],y=g/i,w=0;g===0&&s===0?w=.5/n:g===i&&l===Math.PI&&(w=-.5/n);for(let R=0;R<=n;R++){let b=R/n;u.x=-e*Math.cos(r+b*o)*Math.sin(s+y*a),u.y=e*Math.cos(s+y*a),u.z=e*Math.sin(r+b*o)*Math.sin(s+y*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),v.push(h.x,h.y,h.z),m.push(b+w,1-y),C.push(c++)}d.push(C)}for(let g=0;g<i;g++)for(let C=0;C<n;C++){let y=d[g][C+1],w=d[g][C],R=d[g+1][C],b=d[g+1][C+1];(g!==0||s>0)&&f.push(y,w,b),(g!==i-1||l<Math.PI)&&f.push(w,R,b)}this.setIndex(f),this.setAttribute("position",new Ue(p,3)),this.setAttribute("normal",new Ue(v,3)),this.setAttribute("uv",new Ue(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},mm=class t extends Ta{constructor(e=1,n=0){let i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new t(e.radius,e.detail)}},vm=class t extends Bt{constructor(e=1,n=.4,i=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);let s=[],a=[],l=[],c=[],d=new P,u=new P,h=new P;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){let v=p/r*o,m=f/i*Math.PI*2;u.x=(e+n*Math.cos(m))*Math.cos(v),u.y=(e+n*Math.cos(m))*Math.sin(v),u.z=n*Math.sin(m),a.push(u.x,u.y,u.z),d.x=e*Math.cos(v),d.y=e*Math.sin(v),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(p/r),c.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){let v=(r+1)*f+p-1,m=(r+1)*(f-1)+p-1,g=(r+1)*(f-1)+p,C=(r+1)*f+p;s.push(v,m,C),s.push(m,g,C)}this.setIndex(s),this.setAttribute("position",new Ue(a,3)),this.setAttribute("normal",new Ue(l,3)),this.setAttribute("uv",new Ue(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},ym=class t extends Bt{constructor(e=1,n=.4,i=64,r=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:o,q:s},i=Math.floor(i),r=Math.floor(r);let a=[],l=[],c=[],d=[],u=new P,h=new P,f=new P,p=new P,v=new P,m=new P,g=new P;for(let y=0;y<=i;++y){let w=y/i*o*Math.PI*2;C(w,o,s,e,f),C(w+.01,o,s,e,p),m.subVectors(p,f),g.addVectors(p,f),v.crossVectors(m,g),g.crossVectors(v,m),v.normalize(),g.normalize();for(let R=0;R<=r;++R){let b=R/r*Math.PI*2,_=-n*Math.cos(b),M=n*Math.sin(b);u.x=f.x+(_*g.x+M*v.x),u.y=f.y+(_*g.y+M*v.y),u.z=f.z+(_*g.z+M*v.z),l.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),c.push(h.x,h.y,h.z),d.push(y/i),d.push(R/r)}}for(let y=1;y<=i;y++)for(let w=1;w<=r;w++){let R=(r+1)*(y-1)+(w-1),b=(r+1)*y+(w-1),_=(r+1)*y+w,M=(r+1)*(y-1)+w;a.push(R,b,M),a.push(b,_,M)}this.setIndex(a),this.setAttribute("position",new Ue(l,3)),this.setAttribute("normal",new Ue(c,3)),this.setAttribute("uv",new Ue(d,2));function C(y,w,R,b,_){let M=Math.cos(y),x=Math.sin(y),S=R/w*y,I=Math.cos(S);_.x=b*(2+I)*.5*M,_.y=b*(2+I)*x*.5,_.z=b*Math.sin(S)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},Cm=class t extends Bt{constructor(e=new Oh(new P(-1,-1,0),new P(-1,1,0),new P(1,1,0)),n=64,i=1,r=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:o};let s=e.computeFrenetFrames(n,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new P,l=new P,c=new ce,d=new P,u=[],h=[],f=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Ue(u,3)),this.setAttribute("normal",new Ue(h,3)),this.setAttribute("uv",new Ue(f,2));function v(){for(let y=0;y<n;y++)m(y);m(o===!1?n:0),C(),g()}function m(y){d=e.getPointAt(y/n,d);let w=s.normals[y],R=s.binormals[y];for(let b=0;b<=r;b++){let _=b/r*Math.PI*2,M=Math.sin(_),x=-Math.cos(_);l.x=x*w.x+M*R.x,l.y=x*w.y+M*R.y,l.z=x*w.z+M*R.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,u.push(a.x,a.y,a.z)}}function g(){for(let y=1;y<=n;y++)for(let w=1;w<=r;w++){let R=(r+1)*(y-1)+(w-1),b=(r+1)*y+(w-1),_=(r+1)*y+w,M=(r+1)*(y-1)+w;p.push(R,b,M),p.push(b,_,M)}}function C(){for(let y=0;y<=n;y++)for(let w=0;w<=r;w++)c.x=y/n,c.y=w/r,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new t(new Nw[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},bm=class extends Bt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){let n=[],i=new Set,r=new P,o=new P;if(e.index!==null){let s=e.attributes.position,a=e.index,l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){let u=l[c],h=u.start,f=u.count;for(let p=h,v=h+f;p<v;p+=3)for(let m=0;m<3;m++){let g=a.getX(p+m),C=a.getX(p+(m+1)%3);r.fromBufferAttribute(s,g),o.fromBufferAttribute(s,C),EB(r,o,i)===!0&&(n.push(r.x,r.y,r.z),n.push(o.x,o.y,o.z))}}}else{let s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let c=0;c<3;c++){let d=3*a+c,u=3*a+(c+1)%3;r.fromBufferAttribute(s,d),o.fromBufferAttribute(s,u),EB(r,o,i)===!0&&(n.push(r.x,r.y,r.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new Ue(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}};function EB(t,e,n){let i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var MB=Object.freeze({__proto__:null,BoxGeometry:Rl,CapsuleGeometry:Jg,CircleGeometry:em,ConeGeometry:Ih,CylinderGeometry:Ah,DodecahedronGeometry:tm,EdgesGeometry:nm,ExtrudeGeometry:um,IcosahedronGeometry:hm,LatheGeometry:fm,OctahedronGeometry:Bh,PlaneGeometry:gd,PolyhedronGeometry:Ta,RingGeometry:pm,ShapeGeometry:gm,SphereGeometry:Vh,TetrahedronGeometry:mm,TorusGeometry:vm,TorusKnotGeometry:ym,TubeGeometry:Cm,WireframeGeometry:bm}),wm=class extends bi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Le(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}},_m=class extends xr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},Hh=class extends bi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Le(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ia,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Sm=class extends Hh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ft(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Le(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Le(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Le(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},xm=class extends bi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Le(16777215),this.specular=new Le(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ia,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Yh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Em=class extends bi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Le(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ia,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Mm=class extends bi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ia,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}},Rm=class extends bi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ia,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Vo,this.combine=Yh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},zh=class extends bi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=KT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Uh=class extends bi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Dm=class extends bi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Le(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ia,this.normalScale=new ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}},Tm=class extends Fi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};function td(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function VV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function HV(t){function e(r,o){return t[r]-t[o]}let n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function lT(t,e,n){let i=t.length,r=new t.constructor(i);for(let o=0,s=0;s!==i;++o){let a=n[o]*e;for(let l=0;l!==e;++l)r[s++]=t[a+l]}return r}function uA(t,e,n,i){let r=1,o=t[0];for(;o!==void 0&&o[i]===void 0;)o=t[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),n.push(...s)),o=t[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(n,n.length)),o=t[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),n.push(s)),o=t[r++];while(o!==void 0)}function dZ(t,e,n,i,r=30){let o=t.clone();o.name=e;let s=[];for(let l=0;l<o.tracks.length;++l){let c=o.tracks[l],d=c.getValueSize(),u=[],h=[];for(let f=0;f<c.times.length;++f){let p=c.times[f]*r;if(!(p<n||p>=i)){u.push(c.times[f]);for(let v=0;v<d;++v)h.push(c.values[f*d+v])}}u.length!==0&&(c.times=td(u,c.times.constructor),c.values=td(h,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function uZ(t,e=0,n=t,i=30){i<=0&&(i=30);let r=n.tracks.length,o=e/i;for(let s=0;s<r;++s){let a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;let c=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=u/3);let h=0,f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);let p=a.times.length-1,v;if(o<=a.times[0]){let g=d,C=u-d;v=a.values.slice(g,C)}else if(o>=a.times[p]){let g=p*u+d,C=g+u-d;v=a.values.slice(g,C)}else{let g=a.createInterpolant(),C=d,y=u-d;g.evaluate(o),v=g.resultBuffer.slice(C,y)}l==="quaternion"&&new Hi().fromArray(v).normalize().conjugate().toArray(v);let m=c.times.length;for(let g=0;g<m;++g){let C=g*f+h;if(l==="quaternion")Hi.multiplyQuaternionsFlat(c.values,C,v,0,c.values,C);else{let y=f-h*2;for(let w=0;w<y;++w)c.values[C+w]-=v[w]}}}return t.blendMode=V_,t}var Bw=class{static convertArray(e,n){return td(e,n)}static isTypedArray(e){return VV(e)}static getKeyframeOrder(e){return HV(e)}static sortedArray(e,n,i){return lT(e,n,i)}static flattenJSON(e,n,i,r){uA(e,n,i,r)}static subclip(e,n,i,r,o=30){return dZ(e,n,i,r,o)}static makeClipAdditive(e,n=0,i=e,r=30){return uZ(e,n,i,r)}},Al=class{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let n=this.parameterPositions,i=this._cachedIndex,r=n[i],o=n[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=n[++i],e<r)break t}s=n.length;break n}if(!(e>=o)){let a=n[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=n[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<n[a]?s=a:i=a+1}if(r=n[i],o=n[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)n[s]=i[o+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Am=class extends Al{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Sl,endingEnd:Sl}}intervalChanged_(e,n,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case xl:o=e,a=2*n-i;break;case vh:o=r.length-2,a=n+r[o]-r[o+1];break;default:o=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case xl:s=e,l=2*i-n;break;case vh:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=n}let c=(i-n)*.5,d=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-i),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(e,n,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-n)/(r-n),v=p*p,m=v*p,g=-h*m+2*h*v-h*p,C=(1+h)*m+(-1.5-2*h)*v+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*v+.5*p,w=f*m-f*v;for(let R=0;R!==a;++R)o[R]=g*s[d+R]+C*s[c+R]+y*s[l+R]+w*s[u+R];return o}},Gh=class extends Al{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-n)/(r-n),u=1-d;for(let h=0;h!==a;++h)o[h]=s[c+h]*u+s[l+h]*d;return o}},Im=class extends Al{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},pr=class{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=td(n,this.TimeBufferType),this.values=td(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let n=e.constructor,i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:td(e.times,Array),values:td(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Im(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Gh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Am(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case mh:n=this.InterpolantFactoryMethodDiscrete;break;case Ng:n=this.InterpolantFactoryMethodLinear;break;case Ag:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mh;case this.InterpolantFactoryMethodLinear:return Ng;case this.InterpolantFactoryMethodSmooth:return Ag}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){let n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>n;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(r!==void 0&&VV(r))for(let a=0,l=r.length;a!==l;++a){let c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){let e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Ag,o=e.length-1,s=1;for(let a=1;a<o;++a){let l=!1,c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(r)l=!0;else{let u=a*i,h=u-i,f=u+i;for(let p=0;p!==i;++p){let v=n[u+p];if(v!==n[h+p]||v!==n[f+p]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];let u=a*i,h=s*i;for(let f=0;f!==i;++f)n[h+f]=n[u+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,c=0;c!==i;++c)n[l+c]=n[a+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*i)):(this.times=e,this.values=n),this}clone(){let e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}};pr.prototype.ValueTypeName="";pr.prototype.TimeBufferType=Float32Array;pr.prototype.ValueBufferType=Float32Array;pr.prototype.DefaultInterpolation=Ng;var bs=class extends pr{constructor(e,n,i){super(e,n,i)}};bs.prototype.ValueTypeName="bool";bs.prototype.ValueBufferType=Array;bs.prototype.DefaultInterpolation=mh;bs.prototype.InterpolantFactoryMethodLinear=void 0;bs.prototype.InterpolantFactoryMethodSmooth=void 0;var Wh=class extends pr{constructor(e,n,i,r){super(e,n,i,r)}};Wh.prototype.ValueTypeName="color";var Il=class extends pr{constructor(e,n,i,r){super(e,n,i,r)}};Il.prototype.ValueTypeName="number";var Fm=class extends Al{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-n)/(r-n),c=e*a;for(let d=c+a;c!==d;c+=4)Hi.slerpFlat(o,0,s,c-a,s,c,l);return o}},Fl=class extends pr{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new Fm(this.times,this.values,this.getValueSize(),e)}};Fl.prototype.ValueTypeName="quaternion";Fl.prototype.InterpolantFactoryMethodSmooth=void 0;var ws=class extends pr{constructor(e,n,i){super(e,n,i)}};ws.prototype.ValueTypeName="string";ws.prototype.ValueBufferType=Array;ws.prototype.DefaultInterpolation=mh;ws.prototype.InterpolantFactoryMethodLinear=void 0;ws.prototype.InterpolantFactoryMethodSmooth=void 0;var Pl=class extends pr{constructor(e,n,i,r){super(e,n,i,r)}};Pl.prototype.ValueTypeName="vector";var kl=class{constructor(e="",n=-1,i=[],r=Nv){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=$r(),this.duration<0&&this.resetDuration()}static parse(e){let n=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)n.push(fZ(i[s]).scale(r));let o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)n.push(pr.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,n,i,r){let o=n.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);let d=HV(l);l=lT(l,1,d),c=lT(c,1,d),!r&&l[0]===0&&(l.push(o),c.push(c[0])),s.push(new Il(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,n){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let c=e[a],d=c.name.match(o);if(d&&d.length>1){let u=d[1],h=r[u];h||(r[u]=h=[]),h.push(c)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],n,i));return s}static parseAnimation(e,n){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(u,h,f,p,v){if(f.length!==0){let m=[],g=[];uA(f,m,g,p),m.length!==0&&v.push(new u(h,m,g))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,l=e.length||-1,c=e.hierarchy||[];for(let u=0;u<c.length;u++){let h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let v=0;v<h[p].morphTargets.length;v++)f[h[p].morphTargets[v]]=-1;for(let v in f){let m=[],g=[];for(let C=0;C!==h[p].morphTargets.length;++C){let y=h[p];m.push(y.time),g.push(y.morphTarget===v?1:0)}r.push(new Il(".morphTargetInfluence["+v+"]",m,g))}l=f.length*s}else{let f=".bones["+n[u].name+"]";i(Pl,f+".position",h,"pos",r),i(Fl,f+".quaternion",h,"rot",r),i(Pl,f+".scale",h,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let e=this.tracks,n=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function hZ(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Il;case"vector":case"vector2":case"vector3":case"vector4":return Pl;case"color":return Wh;case"quaternion":return Fl;case"bool":case"boolean":return bs;case"string":return ws}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function fZ(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=hZ(t.type);if(t.times===void 0){let n=[],i=[];uA(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Bo={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},jh=class{constructor(e,n,i){let r=this,o=!1,s=0,a=0,l,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(d){a++,o===!1&&r.onStart!==void 0&&r.onStart(d,s,a),o=!0},this.itemEnd=function(d){s++,r.onProgress!==void 0&&r.onProgress(d,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){let u=c.indexOf(d);return u!==-1&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){let f=c[u],p=c[u+1];if(f.global&&(f.lastIndex=0),f.test(d))return p}return null}}},hA=new jh,Rr=(()=>{class t{constructor(n){this.manager=n!==void 0?n:hA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,i){let r=this;return new Promise(function(o,s){r.load(n,o,i,s)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}}return t.DEFAULT_MATERIAL_NAME="__DEFAULT",t})(),ba={},cT=class extends Error{constructor(e,n){super(e),this.response=n}},uo=class extends Rr{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Bo.get(`file:${e}`);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(ba[e]!==void 0){ba[e].push({onLoad:n,onProgress:i,onError:r});return}ba[e]=[],ba[e].push({onLoad:n,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;let d=ba[e],u=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0,v=0,m=new ReadableStream({start(g){C();function C(){u.read().then(({done:y,value:w})=>{if(y)g.close();else{v+=w.byteLength;let R=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:f});for(let b=0,_=d.length;b<_;b++){let M=d[b];M.onProgress&&M.onProgress(R)}g.enqueue(w),C()}},y=>{g.error(y)})}}});return new Response(m)}else throw new cT(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a==="")return c.text();{let u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Bo.add(`file:${e}`,c);let d=ba[e];delete ba[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{let d=ba[e];if(d===void 0)throw this.manager.itemError(e),c;delete ba[e];for(let u=0,h=d.length;u<h;u++){let f=d[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Vw=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=this,s=new uo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}parse(e){let n=[];for(let i=0;i<e.length;i++){let r=kl.parse(e[i]);n.push(r)}return n}},Hw=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=this,s=[],a=new ud,l=new uo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let c=0;function d(u){l.load(e[u],function(h){let f=o.parse(h,!0);s[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(a.minFilter=li),a.image=s,a.format=f.format,a.needsUpdate=!0,n&&n(a))},i,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)d(u);else l.load(e,function(u){let h=o.parse(u,!0);if(h.isCubemap){let f=h.mipmaps.length/h.mipmapCount;for(let p=0;p<f;p++){s[p]={mipmaps:[]};for(let v=0;v<h.mipmapCount;v++)s[p].mipmaps.push(h.mipmaps[p*h.mipmapCount+v]),s[p].format=h.format,s[p].width=h.width,s[p].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=li),a.format=h.format,a.needsUpdate=!0,n&&n(a)},i,r);return a}},uh=new WeakMap,Ol=class extends Rr{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Bo.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0);else{let u=uh.get(s);u===void 0&&(u=[],uh.set(s,u)),u.push({onLoad:n,onError:r})}return s}let a=wh("img");function l(){d(),n&&n(this);let u=uh.get(this)||[];for(let h=0;h<u.length;h++){let f=u[h];f.onLoad&&f.onLoad(this)}uh.delete(this),o.manager.itemEnd(e)}function c(u){d(),r&&r(u),Bo.remove(`image:${e}`);let h=uh.get(this)||[];for(let f=0;f<h.length;f++){let p=h[f];p.onError&&p.onError(u)}uh.delete(this),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),Bo.add(`image:${e}`,a),o.manager.itemStart(e),a.src=e,a}},zw=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=new Dl;o.colorSpace=Vi;let s=new Ol(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(d){o.images[c]=d,a++,a===6&&(o.needsUpdate=!0,n&&n(o))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return o}},Uw=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=this,s=new qr,a=new uo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let c;try{c=o.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:Wr,s.wrapT=c.wrapT!==void 0?c.wrapT:Wr,s.magFilter=c.magFilter!==void 0?c.magFilter:li,s.minFilter=c.minFilter!==void 0?c.minFilter:li,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(s.colorSpace=c.colorSpace),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=jo),c.mipmapCount===1&&(s.minFilter=li),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,n&&n(s,c)},i,r),s}},Gw=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=new Zi,s=new Ol(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,n!==void 0&&n(o)},i,r),o}},Uo=class extends xn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Le(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}},Pm=class extends Uo{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Le(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}},ZD=new pt,RB=new P,DB=new P,km=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ce(512,512),this.mapType=Mr,this.map=null,this.mapPass=null,this.matrix=new pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Da,this._frameExtents=new ce(1,1),this._viewportCount=1,this._viewports=[new Qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let n=this.camera,i=this.matrix;RB.setFromMatrixPosition(e.matrixWorld),n.position.copy(RB),DB.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(DB),n.updateMatrixWorld(),ZD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ZD),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(ZD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},dT=class extends km{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){let n=this.camera,i=rd*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,o=e.distance||n.far;(i!==n.fov||r!==n.aspect||o!==n.far)&&(n.fov=i,n.aspect=r,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Om=class extends Uo{constructor(e,n,i=0,r=Math.PI/3,o=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.target=new xn,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new dT}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},TB=new pt,Rg=new P,QD=new P,uT=class extends km{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ce(4,2),this._viewportCount=6,this._viewports=[new Qt(2,1,1,1),new Qt(0,1,1,1),new Qt(3,1,1,1),new Qt(1,1,1,1),new Qt(3,0,1,1),new Qt(1,0,1,1)],this._cubeDirections=[new P(1,0,0),new P(-1,0,0),new P(0,0,1),new P(0,0,-1),new P(0,1,0),new P(0,-1,0)],this._cubeUps=[new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,1,0),new P(0,0,1),new P(0,0,-1)]}updateMatrices(e,n=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Rg.setFromMatrixPosition(e.matrixWorld),i.position.copy(Rg),QD.copy(i.position),QD.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(QD),i.updateMatrixWorld(),r.makeTranslation(-Rg.x,-Rg.y,-Rg.z),TB.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TB)}},Lm=class extends Uo{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new uT}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Ll=class extends ld{constructor(e=-1,n=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}},hT=class extends km{constructor(){super(new Ll(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Nm=class extends Uo{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xn.DEFAULT_UP),this.updateMatrix(),this.target=new xn,this.shadow=new hT}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Bm=class extends Uo{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}},Vm=class extends Uo{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}},Hm=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new P)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){let i=e.x,r=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*r),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*i),n.addScaledVector(s[4],1.092548*(i*r)),n.addScaledVector(s[5],1.092548*(r*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(i*o)),n.addScaledVector(s[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){let i=e.x,r=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*r),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*i),n.addScaledVector(s[4],2*.429043*i*r),n.addScaledVector(s[5],2*.429043*r*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*i*o),n.addScaledVector(s[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){let i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){let i=e.x,r=e.y,o=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*o,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*i*o,n[8]=.546274*(i*i-r*r)}},zm=class extends Uo{constructor(e=new Hm,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}},Um=class t extends Rr{constructor(e){super(e),this.textures={}}load(e,n,i,r){let o=this,s=new uo(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}parse(e){let n=this.textures;function i(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}let r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Le().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(let o in e.uniforms){let s=e.uniforms[o];switch(r.uniforms[o]={},s.type){case"t":r.uniforms[o].value=i(s.value);break;case"c":r.uniforms[o].value=new Le().setHex(s.value);break;case"v2":r.uniforms[o].value=new ce().fromArray(s.value);break;case"v3":r.uniforms[o].value=new P().fromArray(s.value);break;case"v4":r.uniforms[o].value=new Qt().fromArray(s.value);break;case"m3":r.uniforms[o].value=new Pt().fromArray(s.value);break;case"m4":r.uniforms[o].value=new pt().fromArray(s.value);break;default:r.uniforms[o].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(let o in e.extensions)r.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),r.normalScale=new ce().fromArray(o)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ce().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return t.createMaterialFromType(e)}static createMaterialFromType(e){let n={ShadowMaterial:wm,SpriteMaterial:Mh,RawShaderMaterial:_m,ShaderMaterial:xr,PointsMaterial:Dh,MeshPhysicalMaterial:Sm,MeshStandardMaterial:Hh,MeshPhongMaterial:xm,MeshToonMaterial:Em,MeshNormalMaterial:Mm,MeshLambertMaterial:Rm,MeshDepthMaterial:zh,MeshDistanceMaterial:Uh,MeshBasicMaterial:Ho,MeshMatcapMaterial:Dm,LineDashedMaterial:Tm,LineBasicMaterial:Fi,Material:bi};return new n[e]}},$h=class{static extractUrlBase(e){let n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}},Gm=class extends Bt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},Wm=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=this,s=new uo(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}parse(e){let n={},i={};function r(f,p){if(n[p]!==void 0)return n[p];let m=f.interleavedBuffers[p],g=o(f,m.buffer),C=hh(m.type,g),y=new dd(C,m.stride);return y.uuid=m.uuid,n[p]=y,y}function o(f,p){if(i[p]!==void 0)return i[p];let m=f.arrayBuffers[p],g=new Uint32Array(m).buffer;return i[p]=g,g}let s=e.isInstancedBufferGeometry?new Gm:new Bt,a=e.data.index;if(a!==void 0){let f=hh(a.type,a.array);s.setIndex(new an(f,1))}let l=e.data.attributes;for(let f in l){let p=l[f],v;if(p.isInterleavedBufferAttribute){let m=r(e.data,p.data);v=new Tl(m,p.itemSize,p.offset,p.normalized)}else{let m=hh(p.type,p.array),g=p.isInstancedBufferAttribute?Ra:an;v=new g(m,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),p.usage!==void 0&&v.setUsage(p.usage),s.setAttribute(f,v)}let c=e.data.morphAttributes;if(c)for(let f in c){let p=c[f],v=[];for(let m=0,g=p.length;m<g;m++){let C=p[m],y;if(C.isInterleavedBufferAttribute){let w=r(e.data,C.data);y=new Tl(w,C.itemSize,C.offset,C.normalized)}else{let w=hh(C.type,C.array);y=new an(w,C.itemSize,C.normalized)}C.name!==void 0&&(y.name=C.name),v.push(y)}s.morphAttributes[f]=v}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,p=u.length;f!==p;++f){let v=u[f];s.addGroup(v.start,v.count,v.materialIndex)}let h=e.data.boundingSphere;return h!==void 0&&(s.boundingSphere=new ci().fromJSON(h)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},Ww=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=this,s=this.path===""?$h.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;let a=new uo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}let d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(c,n)},i,r)}loadAsync(e,n){return oi(this,null,function*(){let i=this,r=this.path===""?$h.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;let o=new uo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);let s=yield o.loadAsync(e,n),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield i.parseAsync(a)})}parse(e,n){let i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,o,l,a,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),this.bindLightTargets(c),n!==void 0){let u=!1;for(let h in s)if(s[h].data instanceof HTMLImageElement){u=!0;break}u===!1&&n(c)}return c}parseAsync(e){return oi(this,null,function*(){let n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=yield this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l})}parseShapes(e){let n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){let o=new vs().fromJSON(e[i]);n[o.uuid]=o}return n}parseSkeletons(e,n){let i={},r={};if(n.traverse(function(o){o.isBone&&(r[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=new $g().fromJSON(e[o],r);i[a.uuid]=a}return i}parseGeometries(e,n){let i={};if(e!==void 0){let r=new Wm;for(let o=0,s=e.length;o<s;o++){let a,l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in MB?a=MB[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,n){let i={},r={};if(e!==void 0){let o=new Um;o.setTextures(n);for(let s=0,a=e.length;s<a;s++){let l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=o.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){let n={};if(e!==void 0)for(let i=0;i<e.length;i++){let r=e[i],o=kl.parse(r);n[o.uuid]=o}return n}parseImages(e,n){let i=this,r={},o;function s(l){return i.manager.itemStart(l),o.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){let c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return s(d)}else return l.data?{data:hh(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){let l=new jh(n);o=new Ol(l),o.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){let u=e[c],h=u.url;if(Array.isArray(h)){let f=[];for(let p=0,v=h.length;p<v;p++){let m=h[p],g=a(m);g!==null&&(g instanceof HTMLImageElement?f.push(g):f.push(new qr(g.data,g.width,g.height)))}r[u.uuid]=new No(f)}else{let f=a(u.url);r[u.uuid]=new No(f)}}}return r}parseImagesAsync(e){return oi(this,null,function*(){let n=this,i={},r;function o(s){return oi(this,null,function*(){if(typeof s=="string"){let a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return yield r.loadAsync(l)}else return s.data?{data:hh(s.type,s.data),width:s.width,height:s.height}:null})}if(e!==void 0&&e.length>0){r=new Ol(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){let l=e[s],c=l.url;if(Array.isArray(c)){let d=[];for(let u=0,h=c.length;u<h;u++){let f=c[u],p=yield o(f);p!==null&&(p instanceof HTMLImageElement?d.push(p):d.push(new qr(p.data,p.width,p.height)))}i[l.uuid]=new No(d)}else{let d=yield o(l.url);i[l.uuid]=new No(d)}}}return i})}parseTextures(e,n){function i(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}let r={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){let a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let l=n[a.image],c=l.data,d;Array.isArray(c)?(d=new Dl,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new qr:d=new Zi,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,pZ)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],AB),d.wrapT=i(a.wrap[1],AB)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,IB)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,IB)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,n,i,r,o){let s;function a(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){let f=[];for(let p=0,v=h.length;p<v;p++){let m=h[p];i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),f.push(i[m])}return f}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let d,u;switch(e.type){case"Scene":s=new Eh,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Le(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Ug(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new zg(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new ii(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Ll(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Bm(e.color,e.intensity);break;case"DirectionalLight":s=new Nm(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new Lm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Vm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Om(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new Pm(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new zm().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),u=l(e.material),s=new jg(d,u),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),u=l(e.material),s=new zn(d,u);break;case"InstancedMesh":d=a(e.geometry),u=l(e.material);let h=e.count,f=e.instanceMatrix,p=e.instanceColor;s=new qg(d,u,h),s.instanceMatrix=new Ra(new Float32Array(f.array),16),p!==void 0&&(s.instanceColor=new Ra(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":d=a(e.geometry),u=l(e.material),s=new Yg(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,u),s.geometry=d,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(v=>{let m=null,g=null;return v.boundingBox!==void 0&&(m=new Ci().fromJSON(v.boundingBox)),v.boundingSphere!==void 0&&(g=new ci().fromJSON(v.boundingSphere)),ae(k({},v),{boundingBox:m,boundingSphere:g})}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=c(e.matricesTexture.uuid),s._indirectTexture=c(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=c(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new ci().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new Ci().fromJSON(e.boundingBox));break;case"LOD":s=new Wg;break;case"Line":s=new zo(a(e.geometry),l(e.material));break;case"LineLoop":s=new Xg(a(e.geometry),l(e.material));break;case"LineSegments":s=new Yr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new Zg(a(e.geometry),l(e.material));break;case"Sprite":s=new Gg(l(e.material));break;case"Group":s=new _a;break;case"Bone":s=new Rh;break;default:s=new xn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){let h=e.children;for(let f=0;f<h.length;f++)s.add(this.parseObject(h[f],n,i,r,o))}if(e.animations!==void 0){let h=e.animations;for(let f=0;f<h.length;f++){let p=h[f];s.animations.push(o[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);let h=e.levels;for(let f=0;f<h.length;f++){let p=h[f],v=s.getObjectByProperty("uuid",p.object);v!==void 0&&s.addLevel(v,p.distance,p.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){let r=n[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){let i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new xn}})}},pZ={UVMapping:Lg,CubeReflectionMapping:Ss,CubeRefractionMapping:Aa,EquirectangularReflectionMapping:Xh,EquirectangularRefractionMapping:Zh,CubeUVReflectionMapping:md},AB={RepeatWrapping:ph,ClampToEdgeWrapping:Wr,MirroredRepeatWrapping:gh},IB={NearestFilter:Ai,NearestMipmapNearestFilter:I_,NearestMipmapLinearFilter:vd,LinearFilter:li,LinearMipmapNearestFilter:Qh,LinearMipmapLinearFilter:jo},JD=new WeakMap,jw=class extends Rr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=Bo.get(`image-bitmap:${e}`);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(c=>{if(JD.has(s)===!0)r&&r(JD.get(s)),o.manager.itemError(e),o.manager.itemEnd(e);else return n&&n(c),o.manager.itemEnd(e),c});return}return setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){return Bo.add(`image-bitmap:${e}`,c),n&&n(c),o.manager.itemEnd(e),c}).catch(function(c){r&&r(c),JD.set(l,c),Bo.remove(`image-bitmap:${e}`),o.manager.itemError(e),o.manager.itemEnd(e)});Bo.add(`image-bitmap:${e}`,l),o.manager.itemStart(e)}},hw,qh=class{static getContext(){return hw===void 0&&(hw=new(window.AudioContext||window.webkitAudioContext)),hw}static setContext(e){hw=e}},$w=class extends Rr{constructor(e){super(e)}load(e,n,i,r){let o=this,s=new uo(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{let c=l.slice(0);qh.getContext().decodeAudioData(c,function(u){n(u)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),o.manager.itemError(e)}}},FB=new pt,PB=new pt,Yc=new pt,qw=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ii,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ii,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Yc.copy(e.projectionMatrix);let r=n.eyeSep/2,o=r*n.near/n.focus,s=n.near*Math.tan(nd*n.fov*.5)/n.zoom,a,l;PB.elements[12]=-r,FB.elements[12]=r,a=-s*n.aspect+o,l=s*n.aspect+o,Yc.elements[0]=2*n.near/(l-a),Yc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Yc),a=-s*n.aspect-o,l=s*n.aspect-o,Yc.elements[0]=2*n.near/(l-a),Yc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Yc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(PB),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(FB)}},jm=class extends ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}},Kh=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}},Xc=new P,eT=new Hi,gZ=new P,Zc=new P,Qc=new P,Kw=class extends xn{constructor(){super(),this.type="AudioListener",this.context=qh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Kh}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xc,eT,gZ),Zc.set(0,0,-1).applyQuaternion(eT),Qc.set(0,1,0).applyQuaternion(eT),n.positionX){let i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Xc.x,i),n.positionY.linearRampToValueAtTime(Xc.y,i),n.positionZ.linearRampToValueAtTime(Xc.z,i),n.forwardX.linearRampToValueAtTime(Zc.x,i),n.forwardY.linearRampToValueAtTime(Zc.y,i),n.forwardZ.linearRampToValueAtTime(Zc.z,i),n.upX.linearRampToValueAtTime(Qc.x,i),n.upY.linearRampToValueAtTime(Qc.y,i),n.upZ.linearRampToValueAtTime(Qc.z,i)}else n.setPosition(Xc.x,Xc.y,Xc.z),n.setOrientation(Zc.x,Zc.y,Zc.z,Qc.x,Qc.y,Qc.z)}},$m=class extends xn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}},Jc=new P,kB=new Hi,mZ=new P,ed=new P,Yw=class extends $m{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Jc,kB,mZ),ed.set(0,0,1).applyQuaternion(kB);let n=this.panner;if(n.positionX){let i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Jc.x,i),n.positionY.linearRampToValueAtTime(Jc.y,i),n.positionZ.linearRampToValueAtTime(Jc.z,i),n.orientationX.linearRampToValueAtTime(ed.x,i),n.orientationY.linearRampToValueAtTime(ed.y,i),n.orientationZ.linearRampToValueAtTime(ed.z,i)}else n.setPosition(Jc.x,Jc.y,Jc.z),n.setOrientation(ed.x,ed.y,ed.z)}},Xw=class{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}},qm=class{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,o,s;switch(n){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){let i=this.buffer,r=this.valueSize,o=e*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=n}else{s+=n;let a=n/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(e){let n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let n=this.valueSize,i=this.buffer,r=e*n+n,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-o,n)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(i[l]!==i[l+n]){a.setValue(i,r);break}}saveOriginalState(){let e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let o=i,s=r;o!==s;++o)n[o]=n[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[n+s]=e[i+s]}_slerp(e,n,i,r){Hi.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,o){let s=this._workIndex*o;Hi.multiplyQuaternionsFlat(e,s,e,n,e,i),Hi.slerpFlat(e,n,e,n,e,s,r)}_lerp(e,n,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let l=n+a;e[l]=e[l]*s+e[i+a]*r}}_lerpAdditive(e,n,i,r,o){for(let s=0;s!==o;++s){let a=n+s;e[a]=e[a]+e[i+s]*r}}},fA="\\[\\]\\.:\\/",vZ=new RegExp("["+fA+"]","g"),pA="[^"+fA+"]",yZ="[^"+fA.replace("\\.","")+"]",CZ=/((?:WC+[\/:])*)/.source.replace("WC",pA),bZ=/(WCOD+)?/.source.replace("WCOD",yZ),wZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pA),_Z=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pA),SZ=new RegExp("^"+CZ+bZ+wZ+_Z+"$"),xZ=["material","materials","bones","map"],fT=class{constructor(e,n,i){let r=i||Sn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,n)}bind(){let e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){let e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}},Sn=(()=>{class t{constructor(n,i,r){this.path=i,this.parsedPath=r||t.parseTrackName(i),this.node=t.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,i,r){return n&&n.isAnimationObjectGroup?new t.Composite(n,i,r):new t(n,i,r)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(vZ,"")}static parseTrackName(n){let i=SZ.exec(n);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+n);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);xZ.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return r}static findNode(n,i){if(i===void 0||i===""||i==="."||i===-1||i===n.name||i===n.uuid)return n;if(n.skeleton){let r=n.skeleton.getBoneByName(i);if(r!==void 0)return r}if(n.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let c=r(l.children);if(c)return c}return null},o=r(n.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,i){n[i]=this.targetObject[this.propertyName]}_getValue_array(n,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)n[i++]=r[o]}_getValue_arrayElement(n,i){n[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,i){this.resolvedProperty.toArray(n,i)}_setValue_direct(n,i){this.targetObject[this.propertyName]=n[i]}_setValue_direct_setNeedsUpdate(n,i){this.targetObject[this.propertyName]=n[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,i){this.targetObject[this.propertyName]=n[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=n[i++]}_setValue_array_setNeedsUpdate(n,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=n[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=n[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,i){this.resolvedProperty[this.propertyIndex]=n[i]}_setValue_arrayElement_setNeedsUpdate(n,i){this.resolvedProperty[this.propertyIndex]=n[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,i){this.resolvedProperty[this.propertyIndex]=n[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,i){this.resolvedProperty.fromArray(n,i)}_setValue_fromArray_setNeedsUpdate(n,i){this.resolvedProperty.fromArray(n,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,i){this.resolvedProperty.fromArray(n,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,i){this.bind(),this.getValue(n,i)}_setValue_unbound(n,i){this.bind(),this.setValue(n,i)}bind(){let n=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(n||(n=t.findNode(this.rootNode,i.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=i.objectIndex;switch(r){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let u=0;u<n.length;u++)if(n[u].name===d){d=u;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}n=n.material.map;break;default:if(n[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[r]}if(d!==void 0){if(n[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[d]}}let a=n[o];if(a===void 0){let d=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",n);return}let l=this.Versioning.None;this.targetObject=n,n.isMaterial===!0?l=this.Versioning.NeedsUpdate:n.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[s]!==void 0&&(s=n.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return t.Composite=fT,t})();Sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Sn.prototype.GetterByBindingType=[Sn.prototype._getValue_direct,Sn.prototype._getValue_array,Sn.prototype._getValue_arrayElement,Sn.prototype._getValue_toArray];Sn.prototype.SetterByBindingTypeAndVersioning=[[Sn.prototype._setValue_direct,Sn.prototype._setValue_direct_setNeedsUpdate,Sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_array,Sn.prototype._setValue_array_setNeedsUpdate,Sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_arrayElement,Sn.prototype._setValue_arrayElement_setNeedsUpdate,Sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_fromArray,Sn.prototype._setValue_fromArray_setNeedsUpdate,Sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Zw=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=$r(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){let e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length,a,l=e.length,c=this.nCachedObjects_;for(let d=0,u=arguments.length;d!==u;++d){let h=arguments[d],f=h.uuid,p=n[f];if(p===void 0){p=l++,n[f]=p,e.push(h);for(let v=0,m=s;v!==m;++v)o[v].push(new Sn(h,i[v],r[v]))}else if(p<c){a=e[p];let v=--c,m=e[v];n[m.uuid]=p,e[p]=m,n[f]=v,e[v]=h;for(let g=0,C=s;g!==C;++g){let y=o[g],w=y[v],R=y[p];y[p]=w,R===void 0&&(R=new Sn(h,i[g],r[g])),y[v]=R}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){let e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length,o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){let l=arguments[s],c=l.uuid,d=n[c];if(d!==void 0&&d>=o){let u=o++,h=e[u];n[h.uuid]=d,e[d]=h,n[c]=u,e[u]=l;for(let f=0,p=r;f!==p;++f){let v=i[f],m=v[u],g=v[d];v[d]=m,v[u]=g}}}this.nCachedObjects_=o}uncache(){let e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length,o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){let c=arguments[a],d=c.uuid,u=n[d];if(u!==void 0)if(delete n[d],u<o){let h=--o,f=e[h],p=--s,v=e[p];n[f.uuid]=u,e[u]=f,n[v.uuid]=h,e[h]=v,e.pop();for(let m=0,g=r;m!==g;++m){let C=i[m],y=C[h],w=C[p];C[u]=y,C[h]=w,C.pop()}}else{let h=--s,f=e[h];h>0&&(n[f.uuid]=u),e[u]=f,e.pop();for(let p=0,v=r;p!==v;++p){let m=i[p];m[u]=m[h],m.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){let i=this._bindingsIndicesByPath,r=i[e],o=this._bindings;if(r!==void 0)return o[r];let s=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,u=new Array(c);r=o.length,i[e]=r,s.push(e),a.push(n),o.push(u);for(let h=d,f=l.length;h!==f;++h){let p=l[h];u[h]=new Sn(p,e,n)}return u}unsubscribe_(e){let n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){let r=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],c=e[a];n[c]=i,s[i]=l,s.pop(),o[i]=o[a],o.pop(),r[i]=r[a],r.pop()}}},Km=class{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;let o=n.tracks,s=o.length,a=new Array(s),l={endingStart:Sl,endingEnd:Sl};for(let c=0;c!==s;++c){let d=o[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$T,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){let r=this._clip.duration,o=e._clip.duration,s=o/r,a=r/o;e.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+i,c[0]=e/s,c[1]=n/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}let o=this._startTime;if(o!==null){let l=(e-o)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);let s=this._updateTime(n),a=this._updateWeight(e);if(a>0){let l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case V_:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulateAdditive(a);break;case Nv:default:for(let d=0,u=l.length;d!==u;++d)l[d].evaluate(s),c[d].accumulate(r,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){let n=this._clip.duration,i=this.loop,r=this.time+e,o=this._loopCount,s=i===qT;if(e===0)return o===-1?r:s&&(o&1)===1?n-r:r;if(i===jT){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=n||r<0){let a=Math.floor(r/n);r-=n*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return n-r}return r}_setEndings(e,n,i){let r=this._interpolantSettings;i?(r.endingStart=xl,r.endingEnd=xl):(e?r.endingStart=this.zeroSlopeAtStart?xl:Sl:r.endingStart=vh,n?r.endingEnd=this.zeroSlopeAtEnd?xl:Sl:r.endingEnd=vh)}_scheduleFading(e,n,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+e,l[1]=i,this}},EZ=new Float32Array(1),Qw=class extends fr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){let i=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName,d=c[l];d===void 0&&(d={},c[l]=d);for(let u=0;u!==o;++u){let h=r[u],f=h.name,p=d[f];if(p!==void 0)++p.referenceCount,s[u]=p;else{if(p=s[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}let v=n&&n._propertyBindings[u].binding.parsedPath;p=new qm(Sn.create(i,f,v),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),s[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,i)}let n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){let o=n[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){let o=n[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){let r=this._actions,o=this._actionsByClip,s=o[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){let n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;let o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;let u=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){let o=n[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){let n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_takeBackAction(e){let n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_addInactiveBinding(e,n,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[n];s===void 0&&(s={},r[n]=s),s[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){let n=this._bindings,i=e.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(e){let n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_takeBackBinding(e){let n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,o=n[r];e._cacheIndex=r,n[r]=e,o._cacheIndex=i,n[i]=o}_lendControlInterpolant(){let e=this._controlInterpolants,n=this._nActiveControlInterpolants++,i=e[n];return i===void 0&&(i=new Gh(new Float32Array(2),new Float32Array(2),1,EZ),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){let n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=n[r];e.__cacheIndex=r,n[r]=e,o.__cacheIndex=i,n[i]=o}clipAction(e,n,i){let r=n||this._root,o=r.uuid,s=typeof e=="string"?kl.findByName(r,e):e,a=s!==null?s.uuid:e,l=this._actionsByClip[a],c=null;if(i===void 0&&(s!==null?i=s.blendMode:i=Nv),l!==void 0){let u=l.actionByRoot[o];if(u!==void 0&&u.blendMode===i)return u;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;let d=new Km(this,s,n,i);return this._bindAction(d,c),this._addInactiveAction(d,a,o),d}existingAction(e,n){let i=n||this._root,r=i.uuid,o=typeof e=="string"?kl.findByName(i,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let n=this._actions,i=this._nActiveActions,r=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)n[c]._update(r,e,o,s);let a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let n=this._actions,i=e.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){let c=s[a];this._deactivateAction(c);let d=c._cacheIndex,u=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=d,n[d]=u,n.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){let n=e.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}let r=this._bindingsByRootAndName,o=r[n];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){let i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},Jw=class extends _h{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new ad(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}},e_=class t{constructor(e){this.value=e}clone(){return new t(this.value.clone===void 0?this.value:this.value.clone())}},MZ=0,t_=class extends fr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:MZ++}),this.name="",this.usage=Ch,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;let n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){let o=Array.isArray(n[i])?n[i]:[n[i]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}},n_=class extends dd{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){let n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}},i_=class{constructor(e,n,i,r,o,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=o,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},OB=new pt,Ym=class{constructor(e,n,i=0,r=1/0){this.ray=new Ma(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Cs,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return OB.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(OB),this}intersectObject(e,n=!0,i=[]){return pT(e,this,i,n),i.sort(LB),i}intersectObjects(e,n=!0,i=[]){for(let r=0,o=e.length;r<o;r++)pT(e[r],this,i,n);return i.sort(LB),i}};function LB(t,e){return t.distance-e.distance}function pT(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){let o=t.children;for(let s=0,a=o.length;s<a;s++)pT(o[s],e,n,!0)}}var r_=class{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ft(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ft(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},o_=class{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}},s_=class t{constructor(e,n,i,r){t.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){let o=this.elements;return o[0]=e,o[2]=n,o[1]=i,o[3]=r,this}},NB=new ce,a_=class{constructor(e=new ce(1/0,1/0),n=new ce(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){let i=NB.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,NB).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},BB=new P,fw=new P,l_=class{constructor(e=new P,n=new P){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){BB.subVectors(e,this.start),fw.subVectors(this.end,this.start);let i=fw.dot(fw),o=fw.dot(BB)/i;return n&&(o=Ft(o,0,1)),o}closestPointToPoint(e,n,i){let r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},VB=new P,c_=class extends xn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";let i=new Bt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){let c=s/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Ue(r,3));let o=new Fi({fog:!1,toneMapped:!1});this.cone=new Yr(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),VB.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VB),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},wl=new P,pw=new pt,tT=new pt,d_=class extends Yr{constructor(e){let n=zV(e),i=new Bt,r=[],o=[],s=new Le(0,0,1),a=new Le(0,1,0);for(let c=0;c<n.length;c++){let d=n[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}i.setAttribute("position",new Ue(r,3)),i.setAttribute("color",new Ue(o,3));let l=new Fi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let n=this.bones,i=this.geometry,r=i.getAttribute("position");tT.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){let a=n[o];a.parent&&a.parent.isBone&&(pw.multiplyMatrices(tT,a.matrixWorld),wl.setFromMatrixPosition(pw),r.setXYZ(s,wl.x,wl.y,wl.z),pw.multiplyMatrices(tT,a.parent.matrixWorld),wl.setFromMatrixPosition(pw),r.setXYZ(s+1,wl.x,wl.y,wl.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}};function zV(t){let e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...zV(t.children[n]));return e}var u_=class extends zn{constructor(e,n,i){let r=new Vh(n,4,2),o=new Ho({wireframe:!0,fog:!1,toneMapped:!1});super(r,o),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},RZ=new P,HB=new Le,zB=new Le,h_=class extends xn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";let r=new Bh(n);r.rotateY(Math.PI*.5),this.material=new Ho({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);let o=r.getAttribute("position"),s=new Float32Array(o.count*3);r.setAttribute("color",new an(s,3)),this.add(new zn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let n=e.geometry.getAttribute("color");HB.copy(this.light.color),zB.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){let o=i<r/2?HB:zB;n.setXYZ(i,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(RZ.setFromMatrixPosition(this.light.matrixWorld).negate())}},f_=class extends Yr{constructor(e=10,n=10,i=4473924,r=8947848){i=new Le(i),r=new Le(r);let o=n/2,s=e/n,a=e/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=n;h++,p+=s){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);let v=h===o?i:r;v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3}let d=new Bt;d.setAttribute("position",new Ue(l,3)),d.setAttribute("color",new Ue(c,3));let u=new Fi({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},p_=class extends Yr{constructor(e=10,n=16,i=8,r=64,o=4473924,s=8947848){o=new Le(o),s=new Le(s);let a=[],l=[];if(n>1)for(let u=0;u<n;u++){let h=u/n*(Math.PI*2),f=Math.sin(h)*e,p=Math.cos(h)*e;a.push(0,0,0),a.push(f,0,p);let v=u&1?o:s;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let u=0;u<i;u++){let h=u&1?o:s,f=e-e/i*u;for(let p=0;p<r;p++){let v=p/r*(Math.PI*2),m=Math.sin(v)*f,g=Math.cos(v)*f;a.push(m,0,g),l.push(h.r,h.g,h.b),v=(p+1)/r*(Math.PI*2),m=Math.sin(v)*f,g=Math.cos(v)*f,a.push(m,0,g),l.push(h.r,h.g,h.b)}}let c=new Bt;c.setAttribute("position",new Ue(a,3)),c.setAttribute("color",new Ue(l,3));let d=new Fi({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},UB=new P,gw=new P,GB=new P,g_=class extends xn{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new Bt;r.setAttribute("position",new Ue([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));let o=new Fi({fog:!1,toneMapped:!1});this.lightPlane=new zo(r,o),this.add(this.lightPlane),r=new Bt,r.setAttribute("position",new Ue([0,0,0,0,0,1],3)),this.targetLine=new zo(r,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),UB.setFromMatrixPosition(this.light.matrixWorld),gw.setFromMatrixPosition(this.light.target.matrixWorld),GB.subVectors(gw,UB),this.lightPlane.lookAt(gw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gw),this.targetLine.scale.z=GB.length()}},mw=new P,Yn=new ld,m_=class extends Yr{constructor(e){let n=new Bt,i=new Fi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,v){l(p),l(v)}function l(p){r.push(0,0,0),o.push(0,0,0),s[p]===void 0&&(s[p]=[]),s[p].push(r.length/3-1)}n.setAttribute("position",new Ue(r,3)),n.setAttribute("color",new Ue(o,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let c=new Le(16755200),d=new Le(16711680),u=new Le(43775),h=new Le(16777215),f=new Le(3355443);this.setColors(c,d,u,h,f)}setColors(e,n,i,r,o){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){let e=this.geometry,n=this.pointMap,i=1,r=1;Yn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);let o=this.camera.coordinateSystem===jr?-1:0;ni("c",n,e,Yn,0,0,o),ni("t",n,e,Yn,0,0,1),ni("n1",n,e,Yn,-i,-r,o),ni("n2",n,e,Yn,i,-r,o),ni("n3",n,e,Yn,-i,r,o),ni("n4",n,e,Yn,i,r,o),ni("f1",n,e,Yn,-i,-r,1),ni("f2",n,e,Yn,i,-r,1),ni("f3",n,e,Yn,-i,r,1),ni("f4",n,e,Yn,i,r,1),ni("u1",n,e,Yn,i*.7,r*1.1,o),ni("u2",n,e,Yn,-i*.7,r*1.1,o),ni("u3",n,e,Yn,0,r*2,o),ni("cf1",n,e,Yn,-i,0,1),ni("cf2",n,e,Yn,i,0,1),ni("cf3",n,e,Yn,0,-r,1),ni("cf4",n,e,Yn,0,r,1),ni("cn1",n,e,Yn,-i,0,o),ni("cn2",n,e,Yn,i,0,o),ni("cn3",n,e,Yn,0,-r,o),ni("cn4",n,e,Yn,0,r,o),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function ni(t,e,n,i,r,o,s){mw.set(r,o,s).unproject(i);let a=e[t];if(a!==void 0){let l=n.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],mw.x,mw.y,mw.z)}}var vw=new Ci,v_=class extends Yr{constructor(e,n=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),o=new Bt;o.setIndex(new an(i,1)),o.setAttribute("position",new an(r,3)),super(o,new Fi({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&vw.setFromObject(this.object),vw.isEmpty())return;let e=vw.min,n=vw.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},y_=class extends Yr{constructor(e,n=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Bt;o.setIndex(new an(i,1)),o.setAttribute("position",new Ue(r,3)),super(o,new Fi({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},C_=class extends zo{constructor(e,n=1,i=16776960){let r=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Bt;s.setAttribute("position",new Ue(o,3)),s.computeBoundingSphere(),super(s,new Fi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;let a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Bt;l.setAttribute("position",new Ue(a,3)),l.computeBoundingSphere(),this.add(new zn(l,new Ho({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},WB=new P,yw,nT,b_=class extends xn{constructor(e=new P(0,0,1),n=new P(0,0,0),i=1,r=16776960,o=i*.2,s=o*.2){super(),this.type="ArrowHelper",yw===void 0&&(yw=new Bt,yw.setAttribute("position",new Ue([0,0,0,0,1,0],3)),nT=new Ih(.5,1,5,1),nT.translate(0,-.5,0)),this.position.copy(n),this.line=new zo(yw,new Fi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new zn(nT,new Ho({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{WB.set(e.z,0,-e.x).normalize();let n=Math.acos(e.y);this.quaternion.setFromAxisAngle(WB,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},w_=class extends Yr{constructor(e=1){let n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Bt;r.setAttribute("position",new Ue(n,3)),r.setAttribute("color",new Ue(i,3));let o=new Fi({vertexColors:!0,toneMapped:!1});super(r,o),this.type="AxesHelper"}setColors(e,n,i){let r=new Le,o=this.geometry.attributes.color.array;return r.set(e),r.toArray(o,0),r.toArray(o,3),r.set(n),r.toArray(o,6),r.toArray(o,9),r.set(i),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},__=class{constructor(){this.type="ShapePath",this.color=new Le,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new fd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,o,s){return this.currentPath.bezierCurveTo(e,n,i,r,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){let C=[];for(let y=0,w=g.length;y<w;y++){let R=g[y],b=new vs;b.curves=R.curves,C.push(b)}return C}function i(g,C){let y=C.length,w=!1;for(let R=y-1,b=0;b<y;R=b++){let _=C[R],M=C[b],x=M.x-_.x,S=M.y-_.y;if(Math.abs(S)>Number.EPSILON){if(S<0&&(_=C[b],x=-x,M=C[R],S=-S),g.y<_.y||g.y>M.y)continue;if(g.y===_.y){if(g.x===_.x)return!0}else{let I=S*(g.x-_.x)-x*(g.y-_.y);if(I===0)return!0;if(I<0)continue;w=!w}}else{if(g.y!==_.y)continue;if(M.x<=g.x&&g.x<=_.x||_.x<=g.x&&g.x<=M.x)return!0}}return w}let r=co.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l,c=[];if(o.length===1)return a=o[0],l=new vs,l.curves=a.curves,c.push(l),c;let d=!r(o[0].getPoints());d=e?!d:d;let u=[],h=[],f=[],p=0,v;h[p]=void 0,f[p]=[];for(let g=0,C=o.length;g<C;g++)a=o[g],v=a.getPoints(),s=r(v),s=e?!s:s,s?(!d&&h[p]&&p++,h[p]={s:new vs,p:v},h[p].s.curves=a.curves,d&&p++,f[p]=[]):f[p].push({h:a,p:v[0]});if(!h[0])return n(o);if(h.length>1){let g=!1,C=0;for(let y=0,w=h.length;y<w;y++)u[y]=[];for(let y=0,w=h.length;y<w;y++){let R=f[y];for(let b=0;b<R.length;b++){let _=R[b],M=!0;for(let x=0;x<h.length;x++)i(_.p,h[x].p)&&(y!==x&&C++,M?(M=!1,u[x].push(_)):g=!0);M&&u[y].push(_)}}C>0&&g===!1&&(f=u)}let m;for(let g=0,C=h.length;g<C;g++){l=h[g].s,c.push(l),m=f[g];for(let y=0,w=m.length;y<w;y++)l.holes.push(m[y].h)}return c}},S_=class extends fr{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function DZ(t,e){let n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function TZ(t,e){let n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function AZ(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function U_(t,e,n,i){let r=IZ(i);switch(n){case O_:return t*e;case lv:return t*e/r.components*r.byteLength;case Jh:return t*e/r.components*r.byteLength;case N_:return t*e*2/r.components*r.byteLength;case cv:return t*e*2/r.components*r.byteLength;case L_:return t*e*3/r.components*r.byteLength;case Ii:return t*e*4/r.components*r.byteLength;case dv:return t*e*4/r.components*r.byteLength;case ef:case tf:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case nf:case rf:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case hv:case pv:return Math.max(t,16)*Math.max(e,8)/4;case uv:case fv:return Math.max(t,8)*Math.max(e,8)/2;case gv:case mv:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case vv:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case yv:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Cv:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case bv:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case wv:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case _v:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case Sv:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case xv:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Ev:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Mv:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Rv:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Dv:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Tv:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Av:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Iv:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case of:case Fv:case Pv:return Math.ceil(t/4)*Math.ceil(e/4)*16;case B_:case kv:return Math.ceil(t/4)*Math.ceil(e/4)*8;case Ov:case Lv:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function IZ(t){switch(t){case Mr:case F_:return{byteLength:1,components:1};case yd:case P_:case Cd:return{byteLength:2,components:1};case sv:case av:return{byteLength:2,components:4};case xs:case ov:case hr:return{byteLength:4,components:1};case k_:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}var x_=class{static contain(e,n){return DZ(e,n)}static cover(e,n){return TZ(e,n)}static fill(e){return AZ(e)}static getByteLength(e,n,i,r){return U_(e,n,i,r)}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Xm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Xm);function u4(){let t=null,e=!1,n=null,i=null;function r(o,s){n(o,s),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function FZ(t){let e=new WeakMap;function n(a,l){let c=a.array,d=a.usage,u=c.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,c,d),a.onUploadCallback();let f;if(c instanceof Float32Array)f=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)f=t.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=t.HALF_FLOAT:f=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=t.SHORT;else if(c instanceof Uint32Array)f=t.UNSIGNED_INT;else if(c instanceof Int32Array)f=t.INT;else if(c instanceof Int8Array)f=t.BYTE;else if(c instanceof Uint8Array)f=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:u}}function i(a,l,c){let d=l.array,u=l.updateRanges;if(t.bindBuffer(c,a),u.length===0)t.bufferSubData(c,0,d);else{u.sort((f,p)=>f.start-p.start);let h=0;for(let f=1;f<u.length;f++){let p=u[h],v=u[f];v.start<=p.start+p.count+1?p.count=Math.max(p.count,v.start+v.count-p.start):(++h,u[h]=v)}u.length=h+1;for(let f=0,p=u.length;f<p;f++){let v=u[f];t.bufferSubData(c,v.start*d.BYTES_PER_ELEMENT,d,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:o,update:s}}var PZ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kZ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,OZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,LZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NZ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,BZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,VZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,HZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zZ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,UZ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,GZ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,WZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jZ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,$Z=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,KZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,YZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,XZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ZZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,QZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,JZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,eQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,tQ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,nQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,iQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,rQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,oQ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sQ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,aQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,lQ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,cQ="gl_FragColor = linearToOutputTexel( gl_FragColor );",dQ=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,uQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hQ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fQ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,gQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,vQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,yQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,CQ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,bQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,wQ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_Q=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,SQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,EQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,MQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,RQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,DQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,TQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,AQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,IQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,FQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,PQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,kQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,OQ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,LQ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,NQ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,BQ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,VQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,HQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,zQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,UQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,GQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,WQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jQ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,$Q=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,qQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,KQ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,YQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,XQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ZQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,QQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,JQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,iJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,rJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,oJ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dJ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uJ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hJ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fJ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,gJ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mJ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vJ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yJ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,CJ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,bJ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,wJ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_J=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,EJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,MJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,RJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,DJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,TJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,AJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,IJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,FJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,PJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,NJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,VJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,HJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,UJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,GJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$J=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ZJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,JJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,eee=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tee=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nee=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,iee=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ree=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oee=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,see=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,aee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lee=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cee=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dee=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wt={alphahash_fragment:PZ,alphahash_pars_fragment:kZ,alphamap_fragment:OZ,alphamap_pars_fragment:LZ,alphatest_fragment:NZ,alphatest_pars_fragment:BZ,aomap_fragment:VZ,aomap_pars_fragment:HZ,batching_pars_vertex:zZ,batching_vertex:UZ,begin_vertex:GZ,beginnormal_vertex:WZ,bsdfs:jZ,iridescence_fragment:$Z,bumpmap_pars_fragment:qZ,clipping_planes_fragment:KZ,clipping_planes_pars_fragment:YZ,clipping_planes_pars_vertex:XZ,clipping_planes_vertex:ZZ,color_fragment:QZ,color_pars_fragment:JZ,color_pars_vertex:eQ,color_vertex:tQ,common:nQ,cube_uv_reflection_fragment:iQ,defaultnormal_vertex:rQ,displacementmap_pars_vertex:oQ,displacementmap_vertex:sQ,emissivemap_fragment:aQ,emissivemap_pars_fragment:lQ,colorspace_fragment:cQ,colorspace_pars_fragment:dQ,envmap_fragment:uQ,envmap_common_pars_fragment:hQ,envmap_pars_fragment:fQ,envmap_pars_vertex:pQ,envmap_physical_pars_fragment:EQ,envmap_vertex:gQ,fog_vertex:mQ,fog_pars_vertex:vQ,fog_fragment:yQ,fog_pars_fragment:CQ,gradientmap_pars_fragment:bQ,lightmap_pars_fragment:wQ,lights_lambert_fragment:_Q,lights_lambert_pars_fragment:SQ,lights_pars_begin:xQ,lights_toon_fragment:MQ,lights_toon_pars_fragment:RQ,lights_phong_fragment:DQ,lights_phong_pars_fragment:TQ,lights_physical_fragment:AQ,lights_physical_pars_fragment:IQ,lights_fragment_begin:FQ,lights_fragment_maps:PQ,lights_fragment_end:kQ,logdepthbuf_fragment:OQ,logdepthbuf_pars_fragment:LQ,logdepthbuf_pars_vertex:NQ,logdepthbuf_vertex:BQ,map_fragment:VQ,map_pars_fragment:HQ,map_particle_fragment:zQ,map_particle_pars_fragment:UQ,metalnessmap_fragment:GQ,metalnessmap_pars_fragment:WQ,morphinstance_vertex:jQ,morphcolor_vertex:$Q,morphnormal_vertex:qQ,morphtarget_pars_vertex:KQ,morphtarget_vertex:YQ,normal_fragment_begin:XQ,normal_fragment_maps:ZQ,normal_pars_fragment:QQ,normal_pars_vertex:JQ,normal_vertex:eJ,normalmap_pars_fragment:tJ,clearcoat_normal_fragment_begin:nJ,clearcoat_normal_fragment_maps:iJ,clearcoat_pars_fragment:rJ,iridescence_pars_fragment:oJ,opaque_fragment:sJ,packing:aJ,premultiplied_alpha_fragment:lJ,project_vertex:cJ,dithering_fragment:dJ,dithering_pars_fragment:uJ,roughnessmap_fragment:hJ,roughnessmap_pars_fragment:fJ,shadowmap_pars_fragment:pJ,shadowmap_pars_vertex:gJ,shadowmap_vertex:mJ,shadowmask_pars_fragment:vJ,skinbase_vertex:yJ,skinning_pars_vertex:CJ,skinning_vertex:bJ,skinnormal_vertex:wJ,specularmap_fragment:_J,specularmap_pars_fragment:SJ,tonemapping_fragment:xJ,tonemapping_pars_fragment:EJ,transmission_fragment:MJ,transmission_pars_fragment:RJ,uv_pars_fragment:DJ,uv_pars_vertex:TJ,uv_vertex:AJ,worldpos_vertex:IJ,background_vert:FJ,background_frag:PJ,backgroundCube_vert:kJ,backgroundCube_frag:OJ,cube_vert:LJ,cube_frag:NJ,depth_vert:BJ,depth_frag:VJ,distanceRGBA_vert:HJ,distanceRGBA_frag:zJ,equirect_vert:UJ,equirect_frag:GJ,linedashed_vert:WJ,linedashed_frag:jJ,meshbasic_vert:$J,meshbasic_frag:qJ,meshlambert_vert:KJ,meshlambert_frag:YJ,meshmatcap_vert:XJ,meshmatcap_frag:ZJ,meshnormal_vert:QJ,meshnormal_frag:JJ,meshphong_vert:eee,meshphong_frag:tee,meshphysical_vert:nee,meshphysical_frag:iee,meshtoon_vert:ree,meshtoon_frag:oee,points_vert:see,points_frag:aee,shadow_vert:lee,shadow_frag:cee,sprite_vert:dee,sprite_frag:uee},Te={common:{diffuse:{value:new Le(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Pt}},envmap:{envMap:{value:null},envMapRotation:{value:new Pt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Pt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Pt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Pt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Pt},normalScale:{value:new ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Pt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Pt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Pt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Pt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Le(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Le(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0},uvTransform:{value:new Pt}},sprite:{diffuse:{value:new Le(16777215)},opacity:{value:1},center:{value:new ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}}},$o={basic:{uniforms:Qi([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.fog]),vertexShader:Wt.meshbasic_vert,fragmentShader:Wt.meshbasic_frag},lambert:{uniforms:Qi([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,Te.lights,{emissive:{value:new Le(0)}}]),vertexShader:Wt.meshlambert_vert,fragmentShader:Wt.meshlambert_frag},phong:{uniforms:Qi([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,Te.lights,{emissive:{value:new Le(0)},specular:{value:new Le(1118481)},shininess:{value:30}}]),vertexShader:Wt.meshphong_vert,fragmentShader:Wt.meshphong_frag},standard:{uniforms:Qi([Te.common,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.roughnessmap,Te.metalnessmap,Te.fog,Te.lights,{emissive:{value:new Le(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wt.meshphysical_vert,fragmentShader:Wt.meshphysical_frag},toon:{uniforms:Qi([Te.common,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.gradientmap,Te.fog,Te.lights,{emissive:{value:new Le(0)}}]),vertexShader:Wt.meshtoon_vert,fragmentShader:Wt.meshtoon_frag},matcap:{uniforms:Qi([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.fog,{matcap:{value:null}}]),vertexShader:Wt.meshmatcap_vert,fragmentShader:Wt.meshmatcap_frag},points:{uniforms:Qi([Te.points,Te.fog]),vertexShader:Wt.points_vert,fragmentShader:Wt.points_frag},dashed:{uniforms:Qi([Te.common,Te.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wt.linedashed_vert,fragmentShader:Wt.linedashed_frag},depth:{uniforms:Qi([Te.common,Te.displacementmap]),vertexShader:Wt.depth_vert,fragmentShader:Wt.depth_frag},normal:{uniforms:Qi([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,{opacity:{value:1}}]),vertexShader:Wt.meshnormal_vert,fragmentShader:Wt.meshnormal_frag},sprite:{uniforms:Qi([Te.sprite,Te.fog]),vertexShader:Wt.sprite_vert,fragmentShader:Wt.sprite_frag},background:{uniforms:{uvTransform:{value:new Pt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wt.background_vert,fragmentShader:Wt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Pt}},vertexShader:Wt.backgroundCube_vert,fragmentShader:Wt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wt.cube_vert,fragmentShader:Wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wt.equirect_vert,fragmentShader:Wt.equirect_frag},distanceRGBA:{uniforms:Qi([Te.common,Te.displacementmap,{referencePosition:{value:new P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wt.distanceRGBA_vert,fragmentShader:Wt.distanceRGBA_frag},shadow:{uniforms:Qi([Te.lights,Te.fog,{color:{value:new Le(0)},opacity:{value:1}}]),vertexShader:Wt.shadow_vert,fragmentShader:Wt.shadow_frag}};$o.physical={uniforms:Qi([$o.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Pt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Pt},clearcoatNormalScale:{value:new ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Pt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Pt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Pt},sheen:{value:0},sheenColor:{value:new Le(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Pt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Pt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Pt},transmissionSamplerSize:{value:new ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Pt},attenuationDistance:{value:0},attenuationColor:{value:new Le(0)},specularColor:{value:new Le(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Pt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Pt},anisotropyVector:{value:new ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Pt}}]),vertexShader:Wt.meshphysical_vert,fragmentShader:Wt.meshphysical_frag};var G_={r:0,b:0,g:0},Sd=new Vo,hee=new pt;function fee(t,e,n,i,r,o,s){let a=new Le(0),l=o===!0?0:1,c,d,u=null,h=0,f=null;function p(y){let w=y.isScene===!0?y.background:null;return w&&w.isTexture&&(w=(y.backgroundBlurriness>0?n:e).get(w)),w}function v(y){let w=!1,R=p(y);R===null?g(a,l):R&&R.isColor&&(g(R,1),w=!0);let b=t.xr.getEnvironmentBlendMode();b==="additive"?i.buffers.color.setClear(0,0,0,1,s):b==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(t.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function m(y,w){let R=p(w);R&&(R.isCubeTexture||R.mapping===md)?(d===void 0&&(d=new zn(new Rl(1,1,1),new xr({name:"BackgroundCubeMaterial",uniforms:_d($o.backgroundCube.uniforms),vertexShader:$o.backgroundCube.vertexShader,fragmentShader:$o.backgroundCube.fragmentShader,side:Xi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(b,_,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Sd.copy(w.backgroundRotation),Sd.x*=-1,Sd.y*=-1,Sd.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Sd.y*=-1,Sd.z*=-1),d.material.uniforms.envMap.value=R,d.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(hee.makeRotationFromEuler(Sd)),d.material.toneMapped=Zt.getTransfer(R.colorSpace)!==cn,(u!==R||h!==R.version||f!==t.toneMapping)&&(d.material.needsUpdate=!0,u=R,h=R.version,f=t.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):R&&R.isTexture&&(c===void 0&&(c=new zn(new gd(2,2),new xr({name:"BackgroundMaterial",uniforms:_d($o.background.uniforms),vertexShader:$o.background.vertexShader,fragmentShader:$o.background.fragmentShader,side:ys,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=R,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=Zt.getTransfer(R.colorSpace)!==cn,R.matrixAutoUpdate===!0&&R.updateMatrix(),c.material.uniforms.uvTransform.value.copy(R.matrix),(u!==R||h!==R.version||f!==t.toneMapping)&&(c.material.needsUpdate=!0,u=R,h=R.version,f=t.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function g(y,w){y.getRGB(G_,lA(t)),i.buffers.color.setClear(G_.r,G_.g,G_.b,w,s)}function C(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(y,w=1){a.set(y),l=w,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,g(a,l)},render:v,addToRenderList:m,dispose:C}}function pee(t,e){let n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=h(null),o=r,s=!1;function a(S,I,N,B,W){let U=!1,j=u(B,N,I);o!==j&&(o=j,c(o.object)),U=f(S,B,N,W),U&&p(S,B,N,W),W!==null&&e.update(W,t.ELEMENT_ARRAY_BUFFER),(U||s)&&(s=!1,w(S,I,N,B),W!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return t.createVertexArray()}function c(S){return t.bindVertexArray(S)}function d(S){return t.deleteVertexArray(S)}function u(S,I,N){let B=N.wireframe===!0,W=i[S.id];W===void 0&&(W={},i[S.id]=W);let U=W[I.id];U===void 0&&(U={},W[I.id]=U);let j=U[B];return j===void 0&&(j=h(l()),U[B]=j),j}function h(S){let I=[],N=[],B=[];for(let W=0;W<n;W++)I[W]=0,N[W]=0,B[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:N,attributeDivisors:B,object:S,attributes:{},index:null}}function f(S,I,N,B){let W=o.attributes,U=I.attributes,j=0,Y=N.getAttributes();for(let $ in Y)if(Y[$].location>=0){let oe=W[$],ie=U[$];if(ie===void 0&&($==="instanceMatrix"&&S.instanceMatrix&&(ie=S.instanceMatrix),$==="instanceColor"&&S.instanceColor&&(ie=S.instanceColor)),oe===void 0||oe.attribute!==ie||ie&&oe.data!==ie.data)return!0;j++}return o.attributesNum!==j||o.index!==B}function p(S,I,N,B){let W={},U=I.attributes,j=0,Y=N.getAttributes();for(let $ in Y)if(Y[$].location>=0){let oe=U[$];oe===void 0&&($==="instanceMatrix"&&S.instanceMatrix&&(oe=S.instanceMatrix),$==="instanceColor"&&S.instanceColor&&(oe=S.instanceColor));let ie={};ie.attribute=oe,oe&&oe.data&&(ie.data=oe.data),W[$]=ie,j++}o.attributes=W,o.attributesNum=j,o.index=B}function v(){let S=o.newAttributes;for(let I=0,N=S.length;I<N;I++)S[I]=0}function m(S){g(S,0)}function g(S,I){let N=o.newAttributes,B=o.enabledAttributes,W=o.attributeDivisors;N[S]=1,B[S]===0&&(t.enableVertexAttribArray(S),B[S]=1),W[S]!==I&&(t.vertexAttribDivisor(S,I),W[S]=I)}function C(){let S=o.newAttributes,I=o.enabledAttributes;for(let N=0,B=I.length;N<B;N++)I[N]!==S[N]&&(t.disableVertexAttribArray(N),I[N]=0)}function y(S,I,N,B,W,U,j){j===!0?t.vertexAttribIPointer(S,I,N,W,U):t.vertexAttribPointer(S,I,N,B,W,U)}function w(S,I,N,B){v();let W=B.attributes,U=N.getAttributes(),j=I.defaultAttributeValues;for(let Y in U){let $=U[Y];if($.location>=0){let re=W[Y];if(re===void 0&&(Y==="instanceMatrix"&&S.instanceMatrix&&(re=S.instanceMatrix),Y==="instanceColor"&&S.instanceColor&&(re=S.instanceColor)),re!==void 0){let oe=re.normalized,ie=re.itemSize,Ge=e.get(re);if(Ge===void 0)continue;let Xe=Ge.buffer,Z=Ge.type,ye=Ge.bytesPerElement,we=Z===t.INT||Z===t.UNSIGNED_INT||re.gpuType===ov;if(re.isInterleavedBufferAttribute){let pe=re.data,Me=pe.stride,Re=re.offset;if(pe.isInstancedInterleavedBuffer){for(let De=0;De<$.locationSize;De++)g($.location+De,pe.meshPerAttribute);S.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let De=0;De<$.locationSize;De++)m($.location+De);t.bindBuffer(t.ARRAY_BUFFER,Xe);for(let De=0;De<$.locationSize;De++)y($.location+De,ie/$.locationSize,Z,oe,Me*ye,(Re+ie/$.locationSize*De)*ye,we)}else{if(re.isInstancedBufferAttribute){for(let pe=0;pe<$.locationSize;pe++)g($.location+pe,re.meshPerAttribute);S.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let pe=0;pe<$.locationSize;pe++)m($.location+pe);t.bindBuffer(t.ARRAY_BUFFER,Xe);for(let pe=0;pe<$.locationSize;pe++)y($.location+pe,ie/$.locationSize,Z,oe,ie*ye,ie/$.locationSize*pe*ye,we)}}else if(j!==void 0){let oe=j[Y];if(oe!==void 0)switch(oe.length){case 2:t.vertexAttrib2fv($.location,oe);break;case 3:t.vertexAttrib3fv($.location,oe);break;case 4:t.vertexAttrib4fv($.location,oe);break;default:t.vertexAttrib1fv($.location,oe)}}}}C()}function R(){M();for(let S in i){let I=i[S];for(let N in I){let B=I[N];for(let W in B)d(B[W].object),delete B[W];delete I[N]}delete i[S]}}function b(S){if(i[S.id]===void 0)return;let I=i[S.id];for(let N in I){let B=I[N];for(let W in B)d(B[W].object),delete B[W];delete I[N]}delete i[S.id]}function _(S){for(let I in i){let N=i[I];if(N[S.id]===void 0)continue;let B=N[S.id];for(let W in B)d(B[W].object),delete B[W];delete N[S.id]}}function M(){x(),s=!0,o!==r&&(o=r,c(o.object))}function x(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:M,resetDefaultState:x,dispose:R,releaseStatesOfGeometry:b,releaseStatesOfProgram:_,initAttributes:v,enableAttribute:m,disableUnusedAttributes:C}}function gee(t,e,n){let i;function r(c){i=c}function o(c,d){t.drawArrays(i,c,d),n.update(d,i,1)}function s(c,d,u){u!==0&&(t.drawArraysInstanced(i,c,d,u),n.update(d,i,u))}function a(c,d,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,d,0,u);let f=0;for(let p=0;p<u;p++)f+=d[p];n.update(f,i,1)}function l(c,d,u,h){if(u===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<c.length;p++)s(c[p],d[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,d,0,h,0,u);let p=0;for(let v=0;v<u;v++)p+=d[v]*h[v];n.update(p,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function mee(t,e,n,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let _=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(_){return!(_!==Ii&&i.convert(_)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(_){let M=_===Cd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(_!==Mr&&i.convert(_)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&_!==hr&&!M)}function l(_){if(_==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";_="mediump"}return _==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp",d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);let u=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),C=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),y=t.getParameter(t.MAX_VARYING_VECTORS),w=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),R=p>0,b=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:u,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:C,maxVaryings:y,maxFragmentUniforms:w,vertexTextures:R,maxSamples:b}}function vee(t){let e=this,n=null,i=0,r=!1,o=!1,s=new Oo,a=new Pt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let f=u.length!==0||h||i!==0||r;return r=h,i=u.length,f},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){n=d(u,h,0)},this.setState=function(u,h,f){let p=u.clippingPlanes,v=u.clipIntersection,m=u.clipShadows,g=t.get(u);if(!r||p===null||p.length===0||o&&!m)o?d(null):c();else{let C=o?0:i,y=C*4,w=g.clippingState||null;l.value=w,w=d(p,h,y,f);for(let R=0;R!==y;++R)w[R]=n[R];g.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=C}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(u,h,f,p){let v=u!==null?u.length:0,m=null;if(v!==0){if(m=l.value,p!==!0||m===null){let g=f+v*4,C=h.matrixWorldInverse;a.getNormalMatrix(C),(m===null||m.length<g)&&(m=new Float32Array(g));for(let y=0,w=f;y!==v;++y,w+=4)s.copy(u[y]).applyMatrix4(C,a),s.normal.toArray(m,w),m[w+3]=s.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}}function yee(t){let e=new WeakMap;function n(s,a){return a===Xh?s.mapping=Ss:a===Zh&&(s.mapping=Aa),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===Xh||a===Zh)if(e.has(s)){let l=e.get(s).texture;return n(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let c=new Hg(l.height);return c.fromEquirectangularTexture(t,s),e.set(s,c),s.addEventListener("dispose",r),n(c.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var af=4,UV=[.125,.215,.35,.446,.526,.582],Md=20,gA=new Ll,GV=new Le,mA=null,vA=0,yA=0,CA=!1,Ed=(1+Math.sqrt(5))/2,sf=1/Ed,WV=[new P(-Ed,sf,0),new P(Ed,sf,0),new P(-sf,0,Ed),new P(sf,0,Ed),new P(0,Ed,-sf),new P(0,Ed,sf),new P(-1,1,-1),new P(1,1,-1),new P(-1,1,1),new P(1,1,1)],Cee=new P,Vv=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100,o={}){let{size:s=256,position:a=Cee}=o;mA=this._renderer.getRenderTarget(),vA=this._renderer.getActiveCubeFace(),yA=this._renderer.getActiveMipmapLevel(),CA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=qV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$V(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mA,vA,yA),this._renderer.xr.enabled=CA,e.scissorTest=!1,W_(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ss||e.mapping===Aa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mA=this._renderer.getRenderTarget(),vA=this._renderer.getActiveCubeFace(),yA=this._renderer.getActiveMipmapLevel(),CA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:li,minFilter:li,generateMipmaps:!1,type:Cd,format:Ii,colorSpace:Ea,depthBuffer:!1},r=jV(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=jV(e,n,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bee(o)),this._blurMaterial=wee(o,e,n)}return r}_compileMaterial(e){let n=new zn(this._lodPlanes[0],e);this._renderer.compile(n,gA)}_sceneToCubeUV(e,n,i,r,o){let l=new ii(90,1,n,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(GV),u.toneMapping=Wo,u.autoClear=!1;let p=new Ho({name:"PMREM.Background",side:Xi,depthWrite:!1,depthTest:!1}),v=new zn(new Rl,p),m=!1,g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,m=!0):(p.color.copy(GV),m=!0);for(let C=0;C<6;C++){let y=C%3;y===0?(l.up.set(0,c[C],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x+d[C],o.y,o.z)):y===1?(l.up.set(0,0,c[C]),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y+d[C],o.z)):(l.up.set(0,c[C],0),l.position.set(o.x,o.y,o.z),l.lookAt(o.x,o.y,o.z+d[C]));let w=this._cubeSize;W_(r,y*w,C>2?w:0,w,w),u.setRenderTarget(r),m&&u.render(v,l),u.render(e,l)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=f,u.autoClear=h,e.background=g}_textureToCubeUV(e,n){let i=this._renderer,r=e.mapping===Ss||e.mapping===Aa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=qV()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$V());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new zn(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let l=this._cubeSize;W_(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(s,gA)}_applyPMREM(e){let n=this._renderer,i=n.autoClear;n.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=WV[(r-o-1)%WV.length];this._blur(e,o-1,o,s,a)}n.autoClear=i}_blur(e,n,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,n,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,n,i,r,o,s,a){let l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let d=3,u=new zn(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*Md-1),v=o/p,m=isFinite(o)?1+Math.floor(d*v):Md;m>Md&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Md}`);let g=[],C=0;for(let _=0;_<Md;++_){let M=_/v,x=Math.exp(-M*M/2);g.push(x),_===0?C+=x:_<m&&(C+=2*x)}for(let _=0;_<g.length;_++)g[_]=g[_]/C;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;let w=this._sizeLods[r],R=3*w*(r>y-af?r-y+af:0),b=4*(this._cubeSize-w);W_(n,R,b,3*w,2*w),l.setRenderTarget(n),l.render(u,gA)}};function bee(t){let e=[],n=[],i=[],r=t,o=t-af+1+UV.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);n.push(a);let l=1/a;s>t-af?l=UV[s-t+af-1]:s===0&&(l=0),i.push(l);let c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],f=6,p=6,v=3,m=2,g=1,C=new Float32Array(v*p*f),y=new Float32Array(m*p*f),w=new Float32Array(g*p*f);for(let b=0;b<f;b++){let _=b%3*2/3-1,M=b>2?0:-1,x=[_,M,0,_+2/3,M,0,_+2/3,M+1,0,_,M,0,_+2/3,M+1,0,_,M+1,0];C.set(x,v*p*b),y.set(h,m*p*b);let S=[b,b,b,b,b,b];w.set(S,g*p*b)}let R=new Bt;R.setAttribute("position",new an(C,v)),R.setAttribute("uv",new an(y,m)),R.setAttribute("faceIndex",new an(w,g)),e.push(R),r>af&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function jV(t,e,n){let i=new Kr(t,e,n);return i.texture.mapping=md,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function W_(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function wee(t,e,n){let i=new Float32Array(Md),r=new P(0,1,0);return new xr({name:"SphericalGaussianBlur",defines:{n:Md,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:TA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:_s,depthTest:!1,depthWrite:!1})}function $V(){return new xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:_s,depthTest:!1,depthWrite:!1})}function qV(){return new xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:_s,depthTest:!1,depthWrite:!1})}function TA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _ee(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===Xh||l===Zh,d=l===Ss||l===Aa;if(c||d){let u=e.get(a),h=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return n===null&&(n=new Vv(t)),u=c?n.fromEquirectangular(a,u):n.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),u.texture;if(u!==void 0)return u.texture;{let f=a.image;return c&&f&&f.height>0||d&&f&&r(f)?(n===null&&(n=new Vv(t)),u=c?n.fromEquirectangular(a):n.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),a.addEventListener("dispose",o),u.texture):null}}}return a}function r(a){let l=0,c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function o(a){let l=a.target;l.removeEventListener("dispose",o);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:s}}function See(t){let e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){let r=n(i);return r===null&&od("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function xee(t,e,n,i){let r={},o=new WeakMap;function s(u){let h=u.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(e.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,n.memory.geometries++),h}function l(u){let h=u.attributes;for(let f in h)e.update(h[f],t.ARRAY_BUFFER)}function c(u){let h=[],f=u.index,p=u.attributes.position,v=0;if(f!==null){let C=f.array;v=f.version;for(let y=0,w=C.length;y<w;y+=3){let R=C[y+0],b=C[y+1],_=C[y+2];h.push(R,b,b,_,_,R)}}else if(p!==void 0){let C=p.array;v=p.version;for(let y=0,w=C.length/3-1;y<w;y+=3){let R=y+0,b=y+1,_=y+2;h.push(R,b,b,_,_,R)}}else return;let m=new(sA(h)?xh:Sh)(h,1);m.version=v;let g=o.get(u);g&&e.remove(g),o.set(u,m)}function d(u){let h=o.get(u);if(h){let f=u.index;f!==null&&h.version<f.version&&c(u)}else c(u);return o.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function Eee(t,e,n){let i;function r(h){i=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function l(h,f){t.drawElements(i,f,o,h*s),n.update(f,i,1)}function c(h,f,p){p!==0&&(t.drawElementsInstanced(i,f,o,h*s,p),n.update(f,i,p))}function d(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,o,h,0,p);let m=0;for(let g=0;g<p;g++)m+=f[g];n.update(m,i,1)}function u(h,f,p,v){if(p===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<h.length;g++)c(h[g]/s,f[g],v[g]);else{m.multiDrawElementsInstancedWEBGL(i,f,0,o,h,0,v,0,p);let g=0;for(let C=0;C<p;C++)g+=f[C]*v[C];n.update(g,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function Mee(t){let e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Ree(t,e,n){let i=new WeakMap,r=new Qt;function o(s,a,l){let c=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0,h=i.get(a);if(h===void 0||h.count!==u){let x=function(){_.dispose(),i.delete(a),a.removeEventListener("dispose",x)};h!==void 0&&h.texture.dispose();let f=a.morphAttributes.position!==void 0,p=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],C=a.morphAttributes.color||[],y=0;f===!0&&(y=1),p===!0&&(y=2),v===!0&&(y=3);let w=a.attributes.position.count*y,R=1;w>e.maxTextureSize&&(R=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);let b=new Float32Array(w*R*4*u),_=new sd(b,w,R,u);_.type=hr,_.needsUpdate=!0;let M=y*4;for(let S=0;S<u;S++){let I=m[S],N=g[S],B=C[S],W=w*R*4*S;for(let U=0;U<I.count;U++){let j=U*M;f===!0&&(r.fromBufferAttribute(I,U),b[W+j+0]=r.x,b[W+j+1]=r.y,b[W+j+2]=r.z,b[W+j+3]=0),p===!0&&(r.fromBufferAttribute(N,U),b[W+j+4]=r.x,b[W+j+5]=r.y,b[W+j+6]=r.z,b[W+j+7]=0),v===!0&&(r.fromBufferAttribute(B,U),b[W+j+8]=r.x,b[W+j+9]=r.y,b[W+j+10]=r.z,b[W+j+11]=B.itemSize===4?r.w:1)}}h={count:u,texture:_,size:new ce(w,R)},i.set(a,h),a.addEventListener("dispose",x)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let f=0;for(let v=0;v<c.length;v++)f+=c[v];let p=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(t,"morphTargetBaseInfluence",p),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:o}}function Dee(t,e,n,i){let r=new WeakMap;function o(l){let c=i.render.frame,d=l.geometry,u=e.get(l,d);if(r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){let h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return u}function s(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:o,dispose:s}}var h4=new Zi,KV=new Th(1,1),f4=new sd,p4=new ad,g4=new Dl,YV=[],XV=[],ZV=new Float32Array(16),QV=new Float32Array(9),JV=new Float32Array(4);function cf(t,e,n){let i=t[0];if(i<=0||i>0)return t;let r=e*n,o=YV[r];if(o===void 0&&(o=new Float32Array(r),YV[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function wi(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function _i(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function q_(t,e){let n=XV[e];n===void 0&&(n=new Int32Array(e),XV[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Tee(t,e){let n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Aee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wi(n,e))return;t.uniform2fv(this.addr,e),_i(n,e)}}function Iee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(wi(n,e))return;t.uniform3fv(this.addr,e),_i(n,e)}}function Fee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wi(n,e))return;t.uniform4fv(this.addr,e),_i(n,e)}}function Pee(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(wi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),_i(n,e)}else{if(wi(n,i))return;JV.set(i),t.uniformMatrix2fv(this.addr,!1,JV),_i(n,i)}}function kee(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(wi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),_i(n,e)}else{if(wi(n,i))return;QV.set(i),t.uniformMatrix3fv(this.addr,!1,QV),_i(n,i)}}function Oee(t,e){let n=this.cache,i=e.elements;if(i===void 0){if(wi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),_i(n,e)}else{if(wi(n,i))return;ZV.set(i),t.uniformMatrix4fv(this.addr,!1,ZV),_i(n,i)}}function Lee(t,e){let n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Nee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wi(n,e))return;t.uniform2iv(this.addr,e),_i(n,e)}}function Bee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(wi(n,e))return;t.uniform3iv(this.addr,e),_i(n,e)}}function Vee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wi(n,e))return;t.uniform4iv(this.addr,e),_i(n,e)}}function Hee(t,e){let n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function zee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wi(n,e))return;t.uniform2uiv(this.addr,e),_i(n,e)}}function Uee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(wi(n,e))return;t.uniform3uiv(this.addr,e),_i(n,e)}}function Gee(t,e){let n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wi(n,e))return;t.uniform4uiv(this.addr,e),_i(n,e)}}function Wee(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let o;this.type===t.SAMPLER_2D_SHADOW?(KV.compareFunction=H_,o=KV):o=h4,n.setTexture2D(e||o,r)}function jee(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||p4,r)}function $ee(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||g4,r)}function qee(t,e,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||f4,r)}function Kee(t){switch(t){case 5126:return Tee;case 35664:return Aee;case 35665:return Iee;case 35666:return Fee;case 35674:return Pee;case 35675:return kee;case 35676:return Oee;case 5124:case 35670:return Lee;case 35667:case 35671:return Nee;case 35668:case 35672:return Bee;case 35669:case 35673:return Vee;case 5125:return Hee;case 36294:return zee;case 36295:return Uee;case 36296:return Gee;case 35678:case 36198:case 36298:case 36306:case 35682:return Wee;case 35679:case 36299:case 36307:return jee;case 35680:case 36300:case 36308:case 36293:return $ee;case 36289:case 36303:case 36311:case 36292:return qee}}function Yee(t,e){t.uniform1fv(this.addr,e)}function Xee(t,e){let n=cf(e,this.size,2);t.uniform2fv(this.addr,n)}function Zee(t,e){let n=cf(e,this.size,3);t.uniform3fv(this.addr,n)}function Qee(t,e){let n=cf(e,this.size,4);t.uniform4fv(this.addr,n)}function Jee(t,e){let n=cf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ete(t,e){let n=cf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function tte(t,e){let n=cf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function nte(t,e){t.uniform1iv(this.addr,e)}function ite(t,e){t.uniform2iv(this.addr,e)}function rte(t,e){t.uniform3iv(this.addr,e)}function ote(t,e){t.uniform4iv(this.addr,e)}function ste(t,e){t.uniform1uiv(this.addr,e)}function ate(t,e){t.uniform2uiv(this.addr,e)}function lte(t,e){t.uniform3uiv(this.addr,e)}function cte(t,e){t.uniform4uiv(this.addr,e)}function dte(t,e,n){let i=this.cache,r=e.length,o=q_(n,r);wi(i,o)||(t.uniform1iv(this.addr,o),_i(i,o));for(let s=0;s!==r;++s)n.setTexture2D(e[s]||h4,o[s])}function ute(t,e,n){let i=this.cache,r=e.length,o=q_(n,r);wi(i,o)||(t.uniform1iv(this.addr,o),_i(i,o));for(let s=0;s!==r;++s)n.setTexture3D(e[s]||p4,o[s])}function hte(t,e,n){let i=this.cache,r=e.length,o=q_(n,r);wi(i,o)||(t.uniform1iv(this.addr,o),_i(i,o));for(let s=0;s!==r;++s)n.setTextureCube(e[s]||g4,o[s])}function fte(t,e,n){let i=this.cache,r=e.length,o=q_(n,r);wi(i,o)||(t.uniform1iv(this.addr,o),_i(i,o));for(let s=0;s!==r;++s)n.setTexture2DArray(e[s]||f4,o[s])}function pte(t){switch(t){case 5126:return Yee;case 35664:return Xee;case 35665:return Zee;case 35666:return Qee;case 35674:return Jee;case 35675:return ete;case 35676:return tte;case 5124:case 35670:return nte;case 35667:case 35671:return ite;case 35668:case 35672:return rte;case 35669:case 35673:return ote;case 5125:return ste;case 36294:return ate;case 36295:return lte;case 36296:return cte;case 35678:case 36198:case 36298:case 36306:case 35682:return dte;case 35679:case 36299:case 36307:return ute;case 35680:case 36300:case 36308:case 36293:return hte;case 36289:case 36303:case 36311:case 36292:return fte}}var wA=class{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Kee(n.type)}},_A=class{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=pte(n.type)}},SA=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,n[a.id],i)}}},bA=/(\w+)(\])?(\[|\.)?/g;function e4(t,e){t.seq.push(e),t.map[e.id]=e}function gte(t,e,n){let i=t.name,r=i.length;for(bA.lastIndex=0;;){let o=bA.exec(i),s=bA.lastIndex,a=o[1],l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===r){e4(n,c===void 0?new wA(a,t,e):new _A(a,t,e));break}else{let u=n.map[a];u===void 0&&(u=new SA(a),e4(n,u)),n=u}}}var lf=class{constructor(e,n){this.seq=[],this.map={};let i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(n,r),s=e.getUniformLocation(n,o.name);gte(o,s,this)}}setValue(e,n,i,r){let o=this.map[n];o!==void 0&&o.setValue(e,i,r)}setOptional(e,n,i){let r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let o=0,s=n.length;o!==s;++o){let a=n[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in n&&i.push(s)}return i}};function t4(t,e,n){let i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}var mte=37297,vte=0;function yte(t,e){let n=t.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return i.join(`
`)}var n4=new Pt;function Cte(t){Zt._getMatrix(n4,Zt.workingColorSpace,t);let e=`mat3( ${n4.elements.map(n=>n.toFixed(4))} )`;switch(Zt.getTransfer(t)){case yh:return[e,"LinearTransferOETF"];case cn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function i4(t,e,n){let i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return n.toUpperCase()+`

`+r+`

`+yte(t.getShaderSource(e),s)}else return r}function bte(t,e){let n=Cte(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function wte(t,e){let n;switch(e){case BT:n="Linear";break;case VT:n="Reinhard";break;case HT:n="Cineon";break;case A_:n="ACESFilmic";break;case UT:n="AgX";break;case GT:n="Neutral";break;case zT:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}var j_=new P;function _te(){Zt.getLuminanceCoefficients(j_);let t=j_.x.toFixed(4),e=j_.y.toFixed(4),n=j_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ste(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Bv).join(`
`)}function xte(t){let e=[];for(let n in t){let i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function Ete(t,e){let n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=t.getActiveAttrib(e,r),s=o.name,a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function Bv(t){return t!==""}function r4(t,e){let n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function o4(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Mte=/^[ \t]*#include +<([\w\d./]+)>/gm;function xA(t){return t.replace(Mte,Dte)}var Rte=new Map;function Dte(t,e){let n=Wt[e];if(n===void 0){let i=Rte.get(e);if(i!==void 0)n=Wt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return xA(n)}var Tte=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s4(t){return t.replace(Tte,Ate)}function Ate(t,e,n,i){let r="";for(let o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function a4(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ite(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Zm?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===M_?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===ho&&(e="SHADOWMAP_TYPE_VSM"),e}function Fte(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Ss:case Aa:e="ENVMAP_TYPE_CUBE";break;case md:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pte(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Aa:e="ENVMAP_MODE_REFRACTION";break}return e}function kte(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Yh:e="ENVMAP_BLENDING_MULTIPLY";break;case LT:e="ENVMAP_BLENDING_MIX";break;case NT:e="ENVMAP_BLENDING_ADD";break}return e}function Ote(t){let e=t.envMapCubeUVHeight;if(e===null)return null;let n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Lte(t,e,n,i){let r=t.getContext(),o=n.defines,s=n.vertexShader,a=n.fragmentShader,l=Ite(n),c=Fte(n),d=Pte(n),u=kte(n),h=Ote(n),f=Ste(n),p=xte(o),v=r.createProgram(),m,g,C=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Bv).join(`
`),m.length>0&&(m+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Bv).join(`
`),g.length>0&&(g+=`
`)):(m=[a4(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Bv).join(`
`),g=[a4(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Wo?"#define TONE_MAPPING":"",n.toneMapping!==Wo?Wt.tonemapping_pars_fragment:"",n.toneMapping!==Wo?wte("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Wt.colorspace_pars_fragment,bte("linearToOutputTexel",n.outputColorSpace),_te(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Bv).join(`
`)),s=xA(s),s=r4(s,n),s=o4(s,n),a=xA(a),a=r4(a,n),a=o4(a,n),s=s4(s),a=s4(a),n.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,m=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",n.glslVersion===z_?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===z_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let y=C+m+s,w=C+g+a,R=t4(r,r.VERTEX_SHADER,y),b=t4(r,r.FRAGMENT_SHADER,w);r.attachShader(v,R),r.attachShader(v,b),n.index0AttributeName!==void 0?r.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function _(I){if(t.debug.checkShaderErrors){let N=r.getProgramInfoLog(v).trim(),B=r.getShaderInfoLog(R).trim(),W=r.getShaderInfoLog(b).trim(),U=!0,j=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(U=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,v,R,b);else{let Y=i4(r,R,"vertex"),$=i4(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+N+`
`+Y+`
`+$)}else N!==""?console.warn("THREE.WebGLProgram: Program Info Log:",N):(B===""||W==="")&&(j=!1);j&&(I.diagnostics={runnable:U,programLog:N,vertexShader:{log:B,prefix:m},fragmentShader:{log:W,prefix:g}})}r.deleteShader(R),r.deleteShader(b),M=new lf(r,v),x=Ete(r,v)}let M;this.getUniforms=function(){return M===void 0&&_(this),M};let x;this.getAttributes=function(){return x===void 0&&_(this),x};let S=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return S===!1&&(S=r.getProgramParameter(v,mte)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=vte++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=R,this.fragmentShader=b,this}var Nte=0,EA=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let n=this.materialCache.get(e);for(let i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let n=this.materialCache,i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){let n=this.shaderCache,i=n.get(e);return i===void 0&&(i=new MA(e),n.set(e,i)),i}},MA=class{constructor(e){this.id=Nte++,this.code=e,this.usedTimes=0}};function Bte(t,e,n,i,r,o,s){let a=new Cs,l=new EA,c=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(x){return c.add(x),x===0?"uv":`uv${x}`}function m(x,S,I,N,B){let W=N.fog,U=B.geometry,j=x.isMeshStandardMaterial?N.environment:null,Y=(x.isMeshStandardMaterial?n:e).get(x.envMap||j),$=Y&&Y.mapping===md?Y.image.height:null,re=p[x.type];x.precision!==null&&(f=r.getMaxPrecision(x.precision),f!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",f,"instead."));let oe=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,ie=oe!==void 0?oe.length:0,Ge=0;U.morphAttributes.position!==void 0&&(Ge=1),U.morphAttributes.normal!==void 0&&(Ge=2),U.morphAttributes.color!==void 0&&(Ge=3);let Xe,Z,ye,we;if(re){let un=$o[re];Xe=un.vertexShader,Z=un.fragmentShader}else Xe=x.vertexShader,Z=x.fragmentShader,l.update(x),ye=l.getVertexShaderID(x),we=l.getFragmentShaderID(x);let pe=t.getRenderTarget(),Me=t.state.buffers.depth.getReversed(),Re=B.isInstancedMesh===!0,De=B.isBatchedMesh===!0,Dt=!!x.map,rt=!!x.matcap,Be=!!Y,T=!!x.aoMap,ve=!!x.lightMap,ee=!!x.bumpMap,fe=!!x.normalMap,J=!!x.displacementMap,Pe=!!x.emissiveMap,ge=!!x.metalnessMap,Ne=!!x.roughnessMap,it=x.anisotropy>0,F=x.clearcoat>0,E=x.dispersion>0,H=x.iridescence>0,Q=x.sheen>0,de=x.transmission>0,te=it&&!!x.anisotropyMap,We=F&&!!x.clearcoatMap,G=F&&!!x.clearcoatNormalMap,He=F&&!!x.clearcoatRoughnessMap,et=H&&!!x.iridescenceMap,me=H&&!!x.iridescenceThicknessMap,qe=Q&&!!x.sheenColorMap,mt=Q&&!!x.sheenRoughnessMap,ut=!!x.specularMap,Ae=!!x.specularColorMap,Tt=!!x.specularIntensityMap,O=de&&!!x.transmissionMap,ke=de&&!!x.thicknessMap,Ce=!!x.gradientMap,Ze=!!x.alphaMap,_e=x.alphaTest>0,ue=!!x.alphaHash,tt=!!x.extensions,kt=Wo;x.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(kt=t.toneMapping);let Rn={shaderID:re,shaderType:x.type,shaderName:x.name,vertexShader:Xe,fragmentShader:Z,defines:x.defines,customVertexShaderID:ye,customFragmentShaderID:we,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:f,batching:De,batchingColor:De&&B._colorsTexture!==null,instancing:Re,instancingColor:Re&&B.instanceColor!==null,instancingMorph:Re&&B.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:pe===null?t.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:Ea,alphaToCoverage:!!x.alphaToCoverage,map:Dt,matcap:rt,envMap:Be,envMapMode:Be&&Y.mapping,envMapCubeUVHeight:$,aoMap:T,lightMap:ve,bumpMap:ee,normalMap:fe,displacementMap:h&&J,emissiveMap:Pe,normalMapObjectSpace:fe&&x.normalMapType===XT,normalMapTangentSpace:fe&&x.normalMapType===Ia,metalnessMap:ge,roughnessMap:Ne,anisotropy:it,anisotropyMap:te,clearcoat:F,clearcoatMap:We,clearcoatNormalMap:G,clearcoatRoughnessMap:He,dispersion:E,iridescence:H,iridescenceMap:et,iridescenceThicknessMap:me,sheen:Q,sheenColorMap:qe,sheenRoughnessMap:mt,specularMap:ut,specularColorMap:Ae,specularIntensityMap:Tt,transmission:de,transmissionMap:O,thicknessMap:ke,gradientMap:Ce,opaque:x.transparent===!1&&x.blending===El&&x.alphaToCoverage===!1,alphaMap:Ze,alphaTest:_e,alphaHash:ue,combine:x.combine,mapUv:Dt&&v(x.map.channel),aoMapUv:T&&v(x.aoMap.channel),lightMapUv:ve&&v(x.lightMap.channel),bumpMapUv:ee&&v(x.bumpMap.channel),normalMapUv:fe&&v(x.normalMap.channel),displacementMapUv:J&&v(x.displacementMap.channel),emissiveMapUv:Pe&&v(x.emissiveMap.channel),metalnessMapUv:ge&&v(x.metalnessMap.channel),roughnessMapUv:Ne&&v(x.roughnessMap.channel),anisotropyMapUv:te&&v(x.anisotropyMap.channel),clearcoatMapUv:We&&v(x.clearcoatMap.channel),clearcoatNormalMapUv:G&&v(x.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:He&&v(x.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&v(x.iridescenceMap.channel),iridescenceThicknessMapUv:me&&v(x.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&v(x.sheenColorMap.channel),sheenRoughnessMapUv:mt&&v(x.sheenRoughnessMap.channel),specularMapUv:ut&&v(x.specularMap.channel),specularColorMapUv:Ae&&v(x.specularColorMap.channel),specularIntensityMapUv:Tt&&v(x.specularIntensityMap.channel),transmissionMapUv:O&&v(x.transmissionMap.channel),thicknessMapUv:ke&&v(x.thicknessMap.channel),alphaMapUv:Ze&&v(x.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(fe||it),vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,pointsUvs:B.isPoints===!0&&!!U.attributes.uv&&(Dt||Ze),fog:!!W,useFog:x.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:x.flatShading===!0&&x.wireframe===!1,sizeAttenuation:x.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:Me,skinning:B.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:Ge,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numLightProbes:S.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:x.dithering,shadowMapEnabled:t.shadowMap.enabled&&I.length>0,shadowMapType:t.shadowMap.type,toneMapping:kt,decodeVideoTexture:Dt&&x.map.isVideoTexture===!0&&Zt.getTransfer(x.map.colorSpace)===cn,decodeVideoTextureEmissive:Pe&&x.emissiveMap.isVideoTexture===!0&&Zt.getTransfer(x.emissiveMap.colorSpace)===cn,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===Go,flipSided:x.side===Xi,useDepthPacking:x.depthPacking>=0,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionClipCullDistance:tt&&x.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tt&&x.extensions.multiDraw===!0||De)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:x.customProgramCacheKey()};return Rn.vertexUv1s=c.has(1),Rn.vertexUv2s=c.has(2),Rn.vertexUv3s=c.has(3),c.clear(),Rn}function g(x){let S=[];if(x.shaderID?S.push(x.shaderID):(S.push(x.customVertexShaderID),S.push(x.customFragmentShaderID)),x.defines!==void 0)for(let I in x.defines)S.push(I),S.push(x.defines[I]);return x.isRawShaderMaterial===!1&&(C(S,x),y(S,x),S.push(t.outputColorSpace)),S.push(x.customProgramCacheKey),S.join()}function C(x,S){x.push(S.precision),x.push(S.outputColorSpace),x.push(S.envMapMode),x.push(S.envMapCubeUVHeight),x.push(S.mapUv),x.push(S.alphaMapUv),x.push(S.lightMapUv),x.push(S.aoMapUv),x.push(S.bumpMapUv),x.push(S.normalMapUv),x.push(S.displacementMapUv),x.push(S.emissiveMapUv),x.push(S.metalnessMapUv),x.push(S.roughnessMapUv),x.push(S.anisotropyMapUv),x.push(S.clearcoatMapUv),x.push(S.clearcoatNormalMapUv),x.push(S.clearcoatRoughnessMapUv),x.push(S.iridescenceMapUv),x.push(S.iridescenceThicknessMapUv),x.push(S.sheenColorMapUv),x.push(S.sheenRoughnessMapUv),x.push(S.specularMapUv),x.push(S.specularColorMapUv),x.push(S.specularIntensityMapUv),x.push(S.transmissionMapUv),x.push(S.thicknessMapUv),x.push(S.combine),x.push(S.fogExp2),x.push(S.sizeAttenuation),x.push(S.morphTargetsCount),x.push(S.morphAttributeCount),x.push(S.numDirLights),x.push(S.numPointLights),x.push(S.numSpotLights),x.push(S.numSpotLightMaps),x.push(S.numHemiLights),x.push(S.numRectAreaLights),x.push(S.numDirLightShadows),x.push(S.numPointLightShadows),x.push(S.numSpotLightShadows),x.push(S.numSpotLightShadowsWithMaps),x.push(S.numLightProbes),x.push(S.shadowMapType),x.push(S.toneMapping),x.push(S.numClippingPlanes),x.push(S.numClipIntersection),x.push(S.depthPacking)}function y(x,S){a.disableAll(),S.supportsVertexTextures&&a.enable(0),S.instancing&&a.enable(1),S.instancingColor&&a.enable(2),S.instancingMorph&&a.enable(3),S.matcap&&a.enable(4),S.envMap&&a.enable(5),S.normalMapObjectSpace&&a.enable(6),S.normalMapTangentSpace&&a.enable(7),S.clearcoat&&a.enable(8),S.iridescence&&a.enable(9),S.alphaTest&&a.enable(10),S.vertexColors&&a.enable(11),S.vertexAlphas&&a.enable(12),S.vertexUv1s&&a.enable(13),S.vertexUv2s&&a.enable(14),S.vertexUv3s&&a.enable(15),S.vertexTangents&&a.enable(16),S.anisotropy&&a.enable(17),S.alphaHash&&a.enable(18),S.batching&&a.enable(19),S.dispersion&&a.enable(20),S.batchingColor&&a.enable(21),S.gradientMap&&a.enable(22),x.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.reverseDepthBuffer&&a.enable(4),S.skinning&&a.enable(5),S.morphTargets&&a.enable(6),S.morphNormals&&a.enable(7),S.morphColors&&a.enable(8),S.premultipliedAlpha&&a.enable(9),S.shadowMapEnabled&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.transmission&&a.enable(15),S.sheen&&a.enable(16),S.opaque&&a.enable(17),S.pointsUvs&&a.enable(18),S.decodeVideoTexture&&a.enable(19),S.decodeVideoTextureEmissive&&a.enable(20),S.alphaToCoverage&&a.enable(21),x.push(a.mask)}function w(x){let S=p[x.type],I;if(S){let N=$o[S];I=cA.clone(N.uniforms)}else I=x.uniforms;return I}function R(x,S){let I;for(let N=0,B=d.length;N<B;N++){let W=d[N];if(W.cacheKey===S){I=W,++I.usedTimes;break}}return I===void 0&&(I=new Lte(t,S,x,o),d.push(I)),I}function b(x){if(--x.usedTimes===0){let S=d.indexOf(x);d[S]=d[d.length-1],d.pop(),x.destroy()}}function _(x){l.remove(x)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:w,acquireProgram:R,releaseProgram:b,releaseShaderCache:_,programs:d,dispose:M}}function Vte(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function i(s){t.delete(s)}function r(s,a,l){t.get(s)[a]=l}function o(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:o}}function Hte(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function l4(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function c4(){let t=[],e=0,n=[],i=[],r=[];function o(){e=0,n.length=0,i.length=0,r.length=0}function s(u,h,f,p,v,m){let g=t[e];return g===void 0?(g={id:u.id,object:u,geometry:h,material:f,groupOrder:p,renderOrder:u.renderOrder,z:v,group:m},t[e]=g):(g.id=u.id,g.object=u,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=u.renderOrder,g.z=v,g.group=m),e++,g}function a(u,h,f,p,v,m){let g=s(u,h,f,p,v,m);f.transmission>0?i.push(g):f.transparent===!0?r.push(g):n.push(g)}function l(u,h,f,p,v,m){let g=s(u,h,f,p,v,m);f.transmission>0?i.unshift(g):f.transparent===!0?r.unshift(g):n.unshift(g)}function c(u,h){n.length>1&&n.sort(u||Hte),i.length>1&&i.sort(h||l4),r.length>1&&r.sort(h||l4)}function d(){for(let u=e,h=t.length;u<h;u++){let f=t[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:n,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:d,sort:c}}function zte(){let t=new WeakMap;function e(i,r){let o=t.get(i),s;return o===void 0?(s=new c4,t.set(i,[s])):r>=o.length?(s=new c4,o.push(s)):s=o[r],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function Ute(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new P,color:new Le};break;case"SpotLight":n={position:new P,direction:new P,color:new Le,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new P,color:new Le,distance:0,decay:0};break;case"HemisphereLight":n={direction:new P,skyColor:new Le,groundColor:new Le};break;case"RectAreaLight":n={color:new Le,position:new P,halfWidth:new P,halfHeight:new P};break}return t[e.id]=n,n}}}function Gte(){let t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ce,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}var Wte=0;function jte(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function $te(t){let e=new Ute,n=Gte(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new P);let r=new P,o=new pt,s=new pt;function a(c){let d=0,u=0,h=0;for(let x=0;x<9;x++)i.probe[x].set(0,0,0);let f=0,p=0,v=0,m=0,g=0,C=0,y=0,w=0,R=0,b=0,_=0;c.sort(jte);for(let x=0,S=c.length;x<S;x++){let I=c[x],N=I.color,B=I.intensity,W=I.distance,U=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=N.r*B,u+=N.g*B,h+=N.b*B;else if(I.isLightProbe){for(let j=0;j<9;j++)i.probe[j].addScaledVector(I.sh.coefficients[j],B);_++}else if(I.isDirectionalLight){let j=e.get(I);if(j.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){let Y=I.shadow,$=n.get(I);$.shadowIntensity=Y.intensity,$.shadowBias=Y.bias,$.shadowNormalBias=Y.normalBias,$.shadowRadius=Y.radius,$.shadowMapSize=Y.mapSize,i.directionalShadow[f]=$,i.directionalShadowMap[f]=U,i.directionalShadowMatrix[f]=I.shadow.matrix,C++}i.directional[f]=j,f++}else if(I.isSpotLight){let j=e.get(I);j.position.setFromMatrixPosition(I.matrixWorld),j.color.copy(N).multiplyScalar(B),j.distance=W,j.coneCos=Math.cos(I.angle),j.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),j.decay=I.decay,i.spot[v]=j;let Y=I.shadow;if(I.map&&(i.spotLightMap[R]=I.map,R++,Y.updateMatrices(I),I.castShadow&&b++),i.spotLightMatrix[v]=Y.matrix,I.castShadow){let $=n.get(I);$.shadowIntensity=Y.intensity,$.shadowBias=Y.bias,$.shadowNormalBias=Y.normalBias,$.shadowRadius=Y.radius,$.shadowMapSize=Y.mapSize,i.spotShadow[v]=$,i.spotShadowMap[v]=U,w++}v++}else if(I.isRectAreaLight){let j=e.get(I);j.color.copy(N).multiplyScalar(B),j.halfWidth.set(I.width*.5,0,0),j.halfHeight.set(0,I.height*.5,0),i.rectArea[m]=j,m++}else if(I.isPointLight){let j=e.get(I);if(j.color.copy(I.color).multiplyScalar(I.intensity),j.distance=I.distance,j.decay=I.decay,I.castShadow){let Y=I.shadow,$=n.get(I);$.shadowIntensity=Y.intensity,$.shadowBias=Y.bias,$.shadowNormalBias=Y.normalBias,$.shadowRadius=Y.radius,$.shadowMapSize=Y.mapSize,$.shadowCameraNear=Y.camera.near,$.shadowCameraFar=Y.camera.far,i.pointShadow[p]=$,i.pointShadowMap[p]=U,i.pointShadowMatrix[p]=I.shadow.matrix,y++}i.point[p]=j,p++}else if(I.isHemisphereLight){let j=e.get(I);j.skyColor.copy(I.color).multiplyScalar(B),j.groundColor.copy(I.groundColor).multiplyScalar(B),i.hemi[g]=j,g++}}m>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Te.LTC_FLOAT_1,i.rectAreaLTC2=Te.LTC_FLOAT_2):(i.rectAreaLTC1=Te.LTC_HALF_1,i.rectAreaLTC2=Te.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=u,i.ambient[2]=h;let M=i.hash;(M.directionalLength!==f||M.pointLength!==p||M.spotLength!==v||M.rectAreaLength!==m||M.hemiLength!==g||M.numDirectionalShadows!==C||M.numPointShadows!==y||M.numSpotShadows!==w||M.numSpotMaps!==R||M.numLightProbes!==_)&&(i.directional.length=f,i.spot.length=v,i.rectArea.length=m,i.point.length=p,i.hemi.length=g,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=w+R-b,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=_,M.directionalLength=f,M.pointLength=p,M.spotLength=v,M.rectAreaLength=m,M.hemiLength=g,M.numDirectionalShadows=C,M.numPointShadows=y,M.numSpotShadows=w,M.numSpotMaps=R,M.numLightProbes=_,i.version=Wte++)}function l(c,d){let u=0,h=0,f=0,p=0,v=0,m=d.matrixWorldInverse;for(let g=0,C=c.length;g<C;g++){let y=c[g];if(y.isDirectionalLight){let w=i.directional[u];w.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(m),u++}else if(y.isSpotLight){let w=i.spot[f];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(m),w.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(m),f++}else if(y.isRectAreaLight){let w=i.rectArea[p];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(m),s.identity(),o.copy(y.matrixWorld),o.premultiply(m),s.extractRotation(o),w.halfWidth.set(y.width*.5,0,0),w.halfHeight.set(0,y.height*.5,0),w.halfWidth.applyMatrix4(s),w.halfHeight.applyMatrix4(s),p++}else if(y.isPointLight){let w=i.point[h];w.position.setFromMatrixPosition(y.matrixWorld),w.position.applyMatrix4(m),h++}else if(y.isHemisphereLight){let w=i.hemi[v];w.direction.setFromMatrixPosition(y.matrixWorld),w.direction.transformDirection(m),v++}}}return{setup:a,setupView:l,state:i}}function d4(t){let e=new $te(t),n=[],i=[];function r(d){c.camera=d,n.length=0,i.length=0}function o(d){n.push(d)}function s(d){i.push(d)}function a(){e.setup(n)}function l(d){e.setupView(n,d)}let c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function qte(t){let e=new WeakMap;function n(r,o=0){let s=e.get(r),a;return s===void 0?(a=new d4(t),e.set(r,[a])):o>=s.length?(a=new d4(t),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:n,dispose:i}}var Kte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Yte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Xte(t,e,n){let i=new Da,r=new ce,o=new ce,s=new Qt,a=new zh({depthPacking:YT}),l=new Uh,c={},d=n.maxTextureSize,u={[ys]:Xi,[Xi]:ys,[Go]:Go},h=new xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ce},radius:{value:4}},vertexShader:Kte,fragmentShader:Yte}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new Bt;p.setAttribute("position",new an(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new zn(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Zm;let g=this.type;this.render=function(b,_,M){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||b.length===0)return;let x=t.getRenderTarget(),S=t.getActiveCubeFace(),I=t.getActiveMipmapLevel(),N=t.state;N.setBlending(_s),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);let B=g!==ho&&this.type===ho,W=g===ho&&this.type!==ho;for(let U=0,j=b.length;U<j;U++){let Y=b[U],$=Y.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;r.copy($.mapSize);let re=$.getFrameExtents();if(r.multiply(re),o.copy($.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/re.x),r.x=o.x*re.x,$.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/re.y),r.y=o.y*re.y,$.mapSize.y=o.y)),$.map===null||B===!0||W===!0){let ie=this.type!==ho?{minFilter:Ai,magFilter:Ai}:{};$.map!==null&&$.map.dispose(),$.map=new Kr(r.x,r.y,ie),$.map.texture.name=Y.name+".shadowMap",$.camera.updateProjectionMatrix()}t.setRenderTarget($.map),t.clear();let oe=$.getViewportCount();for(let ie=0;ie<oe;ie++){let Ge=$.getViewport(ie);s.set(o.x*Ge.x,o.y*Ge.y,o.x*Ge.z,o.y*Ge.w),N.viewport(s),$.updateMatrices(Y,ie),i=$.getFrustum(),w(_,M,$.camera,Y,this.type)}$.isPointLightShadow!==!0&&this.type===ho&&C($,M),$.needsUpdate=!1}g=this.type,m.needsUpdate=!1,t.setRenderTarget(x,S,I)};function C(b,_){let M=e.update(v);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,f.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Kr(r.x,r.y)),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(_,null,M,h,v,null),f.uniforms.shadow_pass.value=b.mapPass.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(_,null,M,f,v,null)}function y(b,_,M,x){let S=null,I=M.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(I!==void 0)S=I;else if(S=M.isPointLight===!0?l:a,t.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0||_.alphaToCoverage===!0){let N=S.uuid,B=_.uuid,W=c[N];W===void 0&&(W={},c[N]=W);let U=W[B];U===void 0&&(U=S.clone(),W[B]=U,_.addEventListener("dispose",R)),S=U}if(S.visible=_.visible,S.wireframe=_.wireframe,x===ho?S.side=_.shadowSide!==null?_.shadowSide:_.side:S.side=_.shadowSide!==null?_.shadowSide:u[_.side],S.alphaMap=_.alphaMap,S.alphaTest=_.alphaToCoverage===!0?.5:_.alphaTest,S.map=_.map,S.clipShadows=_.clipShadows,S.clippingPlanes=_.clippingPlanes,S.clipIntersection=_.clipIntersection,S.displacementMap=_.displacementMap,S.displacementScale=_.displacementScale,S.displacementBias=_.displacementBias,S.wireframeLinewidth=_.wireframeLinewidth,S.linewidth=_.linewidth,M.isPointLight===!0&&S.isMeshDistanceMaterial===!0){let N=t.properties.get(S);N.light=M}return S}function w(b,_,M,x,S){if(b.visible===!1)return;if(b.layers.test(_.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&S===ho)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,b.matrixWorld);let B=e.update(b),W=b.material;if(Array.isArray(W)){let U=B.groups;for(let j=0,Y=U.length;j<Y;j++){let $=U[j],re=W[$.materialIndex];if(re&&re.visible){let oe=y(b,re,x,S);b.onBeforeShadow(t,b,_,M,B,oe,$),t.renderBufferDirect(M,null,B,oe,b,$),b.onAfterShadow(t,b,_,M,B,oe,$)}}}else if(W.visible){let U=y(b,W,x,S);b.onBeforeShadow(t,b,_,M,B,U,null),t.renderBufferDirect(M,null,B,U,b,null),b.onAfterShadow(t,b,_,M,B,U,null)}}let N=b.children;for(let B=0,W=N.length;B<W;B++)w(N[B],_,M,x,S)}function R(b){b.target.removeEventListener("dispose",R);for(let M in c){let x=c[M],S=b.target.uuid;S in x&&(x[S].dispose(),delete x[S])}}}var Zte={[Qm]:Jm,[ev]:iv,[tv]:rv,[Ml]:nv,[Jm]:Qm,[iv]:ev,[rv]:tv,[nv]:Ml};function Qte(t,e){function n(){let O=!1,ke=new Qt,Ce=null,Ze=new Qt(0,0,0,0);return{setMask:function(_e){Ce!==_e&&!O&&(t.colorMask(_e,_e,_e,_e),Ce=_e)},setLocked:function(_e){O=_e},setClear:function(_e,ue,tt,kt,Rn){Rn===!0&&(_e*=kt,ue*=kt,tt*=kt),ke.set(_e,ue,tt,kt),Ze.equals(ke)===!1&&(t.clearColor(_e,ue,tt,kt),Ze.copy(ke))},reset:function(){O=!1,Ce=null,Ze.set(-1,0,0,0)}}}function i(){let O=!1,ke=!1,Ce=null,Ze=null,_e=null;return{setReversed:function(ue){if(ke!==ue){let tt=e.get("EXT_clip_control");ue?tt.clipControlEXT(tt.LOWER_LEFT_EXT,tt.ZERO_TO_ONE_EXT):tt.clipControlEXT(tt.LOWER_LEFT_EXT,tt.NEGATIVE_ONE_TO_ONE_EXT),ke=ue;let kt=_e;_e=null,this.setClear(kt)}},getReversed:function(){return ke},setTest:function(ue){ue?pe(t.DEPTH_TEST):Me(t.DEPTH_TEST)},setMask:function(ue){Ce!==ue&&!O&&(t.depthMask(ue),Ce=ue)},setFunc:function(ue){if(ke&&(ue=Zte[ue]),Ze!==ue){switch(ue){case Qm:t.depthFunc(t.NEVER);break;case Jm:t.depthFunc(t.ALWAYS);break;case ev:t.depthFunc(t.LESS);break;case Ml:t.depthFunc(t.LEQUAL);break;case tv:t.depthFunc(t.EQUAL);break;case nv:t.depthFunc(t.GEQUAL);break;case iv:t.depthFunc(t.GREATER);break;case rv:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ze=ue}},setLocked:function(ue){O=ue},setClear:function(ue){_e!==ue&&(ke&&(ue=1-ue),t.clearDepth(ue),_e=ue)},reset:function(){O=!1,Ce=null,Ze=null,_e=null,ke=!1}}}function r(){let O=!1,ke=null,Ce=null,Ze=null,_e=null,ue=null,tt=null,kt=null,Rn=null;return{setTest:function(un){O||(un?pe(t.STENCIL_TEST):Me(t.STENCIL_TEST))},setMask:function(un){ke!==un&&!O&&(t.stencilMask(un),ke=un)},setFunc:function(un,vo,Vs){(Ce!==un||Ze!==vo||_e!==Vs)&&(t.stencilFunc(un,vo,Vs),Ce=un,Ze=vo,_e=Vs)},setOp:function(un,vo,Vs){(ue!==un||tt!==vo||kt!==Vs)&&(t.stencilOp(un,vo,Vs),ue=un,tt=vo,kt=Vs)},setLocked:function(un){O=un},setClear:function(un){Rn!==un&&(t.clearStencil(un),Rn=un)},reset:function(){O=!1,ke=null,Ce=null,Ze=null,_e=null,ue=null,tt=null,kt=null,Rn=null}}}let o=new n,s=new i,a=new r,l=new WeakMap,c=new WeakMap,d={},u={},h=new WeakMap,f=[],p=null,v=!1,m=null,g=null,C=null,y=null,w=null,R=null,b=null,_=new Le(0,0,0),M=0,x=!1,S=null,I=null,N=null,B=null,W=null,U=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),j=!1,Y=0,$=t.getParameter(t.VERSION);$.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec($)[1]),j=Y>=1):$.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),j=Y>=2);let re=null,oe={},ie=t.getParameter(t.SCISSOR_BOX),Ge=t.getParameter(t.VIEWPORT),Xe=new Qt().fromArray(ie),Z=new Qt().fromArray(Ge);function ye(O,ke,Ce,Ze){let _e=new Uint8Array(4),ue=t.createTexture();t.bindTexture(O,ue),t.texParameteri(O,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(O,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let tt=0;tt<Ce;tt++)O===t.TEXTURE_3D||O===t.TEXTURE_2D_ARRAY?t.texImage3D(ke,0,t.RGBA,1,1,Ze,0,t.RGBA,t.UNSIGNED_BYTE,_e):t.texImage2D(ke+tt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,_e);return ue}let we={};we[t.TEXTURE_2D]=ye(t.TEXTURE_2D,t.TEXTURE_2D,1),we[t.TEXTURE_CUBE_MAP]=ye(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),we[t.TEXTURE_2D_ARRAY]=ye(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),we[t.TEXTURE_3D]=ye(t.TEXTURE_3D,t.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),pe(t.DEPTH_TEST),s.setFunc(Ml),ee(!1),fe(E_),pe(t.CULL_FACE),T(_s);function pe(O){d[O]!==!0&&(t.enable(O),d[O]=!0)}function Me(O){d[O]!==!1&&(t.disable(O),d[O]=!1)}function Re(O,ke){return u[O]!==ke?(t.bindFramebuffer(O,ke),u[O]=ke,O===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=ke),O===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=ke),!0):!1}function De(O,ke){let Ce=f,Ze=!1;if(O){Ce=h.get(ke),Ce===void 0&&(Ce=[],h.set(ke,Ce));let _e=O.textures;if(Ce.length!==_e.length||Ce[0]!==t.COLOR_ATTACHMENT0){for(let ue=0,tt=_e.length;ue<tt;ue++)Ce[ue]=t.COLOR_ATTACHMENT0+ue;Ce.length=_e.length,Ze=!0}}else Ce[0]!==t.BACK&&(Ce[0]=t.BACK,Ze=!0);Ze&&t.drawBuffers(Ce)}function Dt(O){return p!==O?(t.useProgram(O),p=O,!0):!1}let rt={[xa]:t.FUNC_ADD,[CT]:t.FUNC_SUBTRACT,[bT]:t.FUNC_REVERSE_SUBTRACT};rt[wT]=t.MIN,rt[_T]=t.MAX;let Be={[ST]:t.ZERO,[xT]:t.ONE,[ET]:t.SRC_COLOR,[kg]:t.SRC_ALPHA,[IT]:t.SRC_ALPHA_SATURATE,[TT]:t.DST_COLOR,[RT]:t.DST_ALPHA,[MT]:t.ONE_MINUS_SRC_COLOR,[Og]:t.ONE_MINUS_SRC_ALPHA,[AT]:t.ONE_MINUS_DST_COLOR,[DT]:t.ONE_MINUS_DST_ALPHA,[FT]:t.CONSTANT_COLOR,[PT]:t.ONE_MINUS_CONSTANT_COLOR,[kT]:t.CONSTANT_ALPHA,[OT]:t.ONE_MINUS_CONSTANT_ALPHA};function T(O,ke,Ce,Ze,_e,ue,tt,kt,Rn,un){if(O===_s){v===!0&&(Me(t.BLEND),v=!1);return}if(v===!1&&(pe(t.BLEND),v=!0),O!==yT){if(O!==m||un!==x){if((g!==xa||w!==xa)&&(t.blendEquation(t.FUNC_ADD),g=xa,w=xa),un)switch(O){case El:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case R_:t.blendFunc(t.ONE,t.ONE);break;case D_:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case T_:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}else switch(O){case El:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case R_:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case D_:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case T_:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}C=null,y=null,R=null,b=null,_.set(0,0,0),M=0,m=O,x=un}return}_e=_e||ke,ue=ue||Ce,tt=tt||Ze,(ke!==g||_e!==w)&&(t.blendEquationSeparate(rt[ke],rt[_e]),g=ke,w=_e),(Ce!==C||Ze!==y||ue!==R||tt!==b)&&(t.blendFuncSeparate(Be[Ce],Be[Ze],Be[ue],Be[tt]),C=Ce,y=Ze,R=ue,b=tt),(kt.equals(_)===!1||Rn!==M)&&(t.blendColor(kt.r,kt.g,kt.b,Rn),_.copy(kt),M=Rn),m=O,x=!1}function ve(O,ke){O.side===Go?Me(t.CULL_FACE):pe(t.CULL_FACE);let Ce=O.side===Xi;ke&&(Ce=!Ce),ee(Ce),O.blending===El&&O.transparent===!1?T(_s):T(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),s.setFunc(O.depthFunc),s.setTest(O.depthTest),s.setMask(O.depthWrite),o.setMask(O.colorWrite);let Ze=O.stencilWrite;a.setTest(Ze),Ze&&(a.setMask(O.stencilWriteMask),a.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),a.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),Pe(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),O.alphaToCoverage===!0?pe(t.SAMPLE_ALPHA_TO_COVERAGE):Me(t.SAMPLE_ALPHA_TO_COVERAGE)}function ee(O){S!==O&&(O?t.frontFace(t.CW):t.frontFace(t.CCW),S=O)}function fe(O){O!==gT?(pe(t.CULL_FACE),O!==I&&(O===E_?t.cullFace(t.BACK):O===mT?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Me(t.CULL_FACE),I=O}function J(O){O!==N&&(j&&t.lineWidth(O),N=O)}function Pe(O,ke,Ce){O?(pe(t.POLYGON_OFFSET_FILL),(B!==ke||W!==Ce)&&(t.polygonOffset(ke,Ce),B=ke,W=Ce)):Me(t.POLYGON_OFFSET_FILL)}function ge(O){O?pe(t.SCISSOR_TEST):Me(t.SCISSOR_TEST)}function Ne(O){O===void 0&&(O=t.TEXTURE0+U-1),re!==O&&(t.activeTexture(O),re=O)}function it(O,ke,Ce){Ce===void 0&&(re===null?Ce=t.TEXTURE0+U-1:Ce=re);let Ze=oe[Ce];Ze===void 0&&(Ze={type:void 0,texture:void 0},oe[Ce]=Ze),(Ze.type!==O||Ze.texture!==ke)&&(re!==Ce&&(t.activeTexture(Ce),re=Ce),t.bindTexture(O,ke||we[O]),Ze.type=O,Ze.texture=ke)}function F(){let O=oe[re];O!==void 0&&O.type!==void 0&&(t.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)}function E(){try{t.compressedTexImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function H(){try{t.compressedTexImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Q(){try{t.texSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function de(){try{t.texSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function te(){try{t.compressedTexSubImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function We(){try{t.compressedTexSubImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function G(){try{t.texStorage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function He(){try{t.texStorage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function et(){try{t.texImage2D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function me(){try{t.texImage3D(...arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function qe(O){Xe.equals(O)===!1&&(t.scissor(O.x,O.y,O.z,O.w),Xe.copy(O))}function mt(O){Z.equals(O)===!1&&(t.viewport(O.x,O.y,O.z,O.w),Z.copy(O))}function ut(O,ke){let Ce=c.get(ke);Ce===void 0&&(Ce=new WeakMap,c.set(ke,Ce));let Ze=Ce.get(O);Ze===void 0&&(Ze=t.getUniformBlockIndex(ke,O.name),Ce.set(O,Ze))}function Ae(O,ke){let Ze=c.get(ke).get(O);l.get(ke)!==Ze&&(t.uniformBlockBinding(ke,Ze,O.__bindingPointIndex),l.set(ke,Ze))}function Tt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},re=null,oe={},u={},h=new WeakMap,f=[],p=null,v=!1,m=null,g=null,C=null,y=null,w=null,R=null,b=null,_=new Le(0,0,0),M=0,x=!1,S=null,I=null,N=null,B=null,W=null,Xe.set(0,0,t.canvas.width,t.canvas.height),Z.set(0,0,t.canvas.width,t.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:pe,disable:Me,bindFramebuffer:Re,drawBuffers:De,useProgram:Dt,setBlending:T,setMaterial:ve,setFlipSided:ee,setCullFace:fe,setLineWidth:J,setPolygonOffset:Pe,setScissorTest:ge,activeTexture:Ne,bindTexture:it,unbindTexture:F,compressedTexImage2D:E,compressedTexImage3D:H,texImage2D:et,texImage3D:me,updateUBOMapping:ut,uniformBlockBinding:Ae,texStorage2D:G,texStorage3D:He,texSubImage2D:Q,texSubImage3D:de,compressedTexSubImage2D:te,compressedTexSubImage3D:We,scissor:qe,viewport:mt,reset:Tt}}function Jte(t,e,n,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ce,d=new WeakMap,u,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(F,E){return f?new OffscreenCanvas(F,E):wh("canvas")}function v(F,E,H){let Q=1,de=it(F);if((de.width>H||de.height>H)&&(Q=H/Math.max(de.width,de.height)),Q<1)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap||typeof VideoFrame<"u"&&F instanceof VideoFrame){let te=Math.floor(Q*de.width),We=Math.floor(Q*de.height);u===void 0&&(u=p(te,We));let G=E?p(te,We):u;return G.width=te,G.height=We,G.getContext("2d").drawImage(F,0,0,te,We),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+te+"x"+We+")."),G}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),F;return F}function m(F){return F.generateMipmaps}function g(F){t.generateMipmap(F)}function C(F){return F.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:F.isWebGL3DRenderTarget?t.TEXTURE_3D:F.isWebGLArrayRenderTarget||F.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function y(F,E,H,Q,de=!1){if(F!==null){if(t[F]!==void 0)return t[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let te=E;if(E===t.RED&&(H===t.FLOAT&&(te=t.R32F),H===t.HALF_FLOAT&&(te=t.R16F),H===t.UNSIGNED_BYTE&&(te=t.R8)),E===t.RED_INTEGER&&(H===t.UNSIGNED_BYTE&&(te=t.R8UI),H===t.UNSIGNED_SHORT&&(te=t.R16UI),H===t.UNSIGNED_INT&&(te=t.R32UI),H===t.BYTE&&(te=t.R8I),H===t.SHORT&&(te=t.R16I),H===t.INT&&(te=t.R32I)),E===t.RG&&(H===t.FLOAT&&(te=t.RG32F),H===t.HALF_FLOAT&&(te=t.RG16F),H===t.UNSIGNED_BYTE&&(te=t.RG8)),E===t.RG_INTEGER&&(H===t.UNSIGNED_BYTE&&(te=t.RG8UI),H===t.UNSIGNED_SHORT&&(te=t.RG16UI),H===t.UNSIGNED_INT&&(te=t.RG32UI),H===t.BYTE&&(te=t.RG8I),H===t.SHORT&&(te=t.RG16I),H===t.INT&&(te=t.RG32I)),E===t.RGB_INTEGER&&(H===t.UNSIGNED_BYTE&&(te=t.RGB8UI),H===t.UNSIGNED_SHORT&&(te=t.RGB16UI),H===t.UNSIGNED_INT&&(te=t.RGB32UI),H===t.BYTE&&(te=t.RGB8I),H===t.SHORT&&(te=t.RGB16I),H===t.INT&&(te=t.RGB32I)),E===t.RGBA_INTEGER&&(H===t.UNSIGNED_BYTE&&(te=t.RGBA8UI),H===t.UNSIGNED_SHORT&&(te=t.RGBA16UI),H===t.UNSIGNED_INT&&(te=t.RGBA32UI),H===t.BYTE&&(te=t.RGBA8I),H===t.SHORT&&(te=t.RGBA16I),H===t.INT&&(te=t.RGBA32I)),E===t.RGB&&H===t.UNSIGNED_INT_5_9_9_9_REV&&(te=t.RGB9_E5),E===t.RGBA){let We=de?yh:Zt.getTransfer(Q);H===t.FLOAT&&(te=t.RGBA32F),H===t.HALF_FLOAT&&(te=t.RGBA16F),H===t.UNSIGNED_BYTE&&(te=We===cn?t.SRGB8_ALPHA8:t.RGBA8),H===t.UNSIGNED_SHORT_4_4_4_4&&(te=t.RGBA4),H===t.UNSIGNED_SHORT_5_5_5_1&&(te=t.RGB5_A1)}return(te===t.R16F||te===t.R32F||te===t.RG16F||te===t.RG32F||te===t.RGBA16F||te===t.RGBA32F)&&e.get("EXT_color_buffer_float"),te}function w(F,E){let H;return F?E===null||E===xs||E===bd?H=t.DEPTH24_STENCIL8:E===hr?H=t.DEPTH32F_STENCIL8:E===yd&&(H=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):E===null||E===xs||E===bd?H=t.DEPTH_COMPONENT24:E===hr?H=t.DEPTH_COMPONENT32F:E===yd&&(H=t.DEPTH_COMPONENT16),H}function R(F,E){return m(F)===!0||F.isFramebufferTexture&&F.minFilter!==Ai&&F.minFilter!==li?Math.log2(Math.max(E.width,E.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?E.mipmaps.length:1}function b(F){let E=F.target;E.removeEventListener("dispose",b),M(E),E.isVideoTexture&&d.delete(E)}function _(F){let E=F.target;E.removeEventListener("dispose",_),S(E)}function M(F){let E=i.get(F);if(E.__webglInit===void 0)return;let H=F.source,Q=h.get(H);if(Q){let de=Q[E.__cacheKey];de.usedTimes--,de.usedTimes===0&&x(F),Object.keys(Q).length===0&&h.delete(H)}i.remove(F)}function x(F){let E=i.get(F);t.deleteTexture(E.__webglTexture);let H=F.source,Q=h.get(H);delete Q[E.__cacheKey],s.memory.textures--}function S(F){let E=i.get(F);if(F.depthTexture&&(F.depthTexture.dispose(),i.remove(F.depthTexture)),F.isWebGLCubeRenderTarget)for(let Q=0;Q<6;Q++){if(Array.isArray(E.__webglFramebuffer[Q]))for(let de=0;de<E.__webglFramebuffer[Q].length;de++)t.deleteFramebuffer(E.__webglFramebuffer[Q][de]);else t.deleteFramebuffer(E.__webglFramebuffer[Q]);E.__webglDepthbuffer&&t.deleteRenderbuffer(E.__webglDepthbuffer[Q])}else{if(Array.isArray(E.__webglFramebuffer))for(let Q=0;Q<E.__webglFramebuffer.length;Q++)t.deleteFramebuffer(E.__webglFramebuffer[Q]);else t.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&t.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&t.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let Q=0;Q<E.__webglColorRenderbuffer.length;Q++)E.__webglColorRenderbuffer[Q]&&t.deleteRenderbuffer(E.__webglColorRenderbuffer[Q]);E.__webglDepthRenderbuffer&&t.deleteRenderbuffer(E.__webglDepthRenderbuffer)}let H=F.textures;for(let Q=0,de=H.length;Q<de;Q++){let te=i.get(H[Q]);te.__webglTexture&&(t.deleteTexture(te.__webglTexture),s.memory.textures--),i.remove(H[Q])}i.remove(F)}let I=0;function N(){I=0}function B(){let F=I;return F>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+r.maxTextures),I+=1,F}function W(F){let E=[];return E.push(F.wrapS),E.push(F.wrapT),E.push(F.wrapR||0),E.push(F.magFilter),E.push(F.minFilter),E.push(F.anisotropy),E.push(F.internalFormat),E.push(F.format),E.push(F.type),E.push(F.generateMipmaps),E.push(F.premultiplyAlpha),E.push(F.flipY),E.push(F.unpackAlignment),E.push(F.colorSpace),E.join()}function U(F,E){let H=i.get(F);if(F.isVideoTexture&&ge(F),F.isRenderTargetTexture===!1&&F.version>0&&H.__version!==F.version){let Q=F.image;if(Q===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Q.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(H,F,E);return}}n.bindTexture(t.TEXTURE_2D,H.__webglTexture,t.TEXTURE0+E)}function j(F,E){let H=i.get(F);if(F.version>0&&H.__version!==F.version){we(H,F,E);return}n.bindTexture(t.TEXTURE_2D_ARRAY,H.__webglTexture,t.TEXTURE0+E)}function Y(F,E){let H=i.get(F);if(F.version>0&&H.__version!==F.version){we(H,F,E);return}n.bindTexture(t.TEXTURE_3D,H.__webglTexture,t.TEXTURE0+E)}function $(F,E){let H=i.get(F);if(F.version>0&&H.__version!==F.version){pe(H,F,E);return}n.bindTexture(t.TEXTURE_CUBE_MAP,H.__webglTexture,t.TEXTURE0+E)}let re={[ph]:t.REPEAT,[Wr]:t.CLAMP_TO_EDGE,[gh]:t.MIRRORED_REPEAT},oe={[Ai]:t.NEAREST,[I_]:t.NEAREST_MIPMAP_NEAREST,[vd]:t.NEAREST_MIPMAP_LINEAR,[li]:t.LINEAR,[Qh]:t.LINEAR_MIPMAP_NEAREST,[jo]:t.LINEAR_MIPMAP_LINEAR},ie={[ZT]:t.NEVER,[iA]:t.ALWAYS,[QT]:t.LESS,[H_]:t.LEQUAL,[JT]:t.EQUAL,[nA]:t.GEQUAL,[eA]:t.GREATER,[tA]:t.NOTEQUAL};function Ge(F,E){if(E.type===hr&&e.has("OES_texture_float_linear")===!1&&(E.magFilter===li||E.magFilter===Qh||E.magFilter===vd||E.magFilter===jo||E.minFilter===li||E.minFilter===Qh||E.minFilter===vd||E.minFilter===jo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(F,t.TEXTURE_WRAP_S,re[E.wrapS]),t.texParameteri(F,t.TEXTURE_WRAP_T,re[E.wrapT]),(F===t.TEXTURE_3D||F===t.TEXTURE_2D_ARRAY)&&t.texParameteri(F,t.TEXTURE_WRAP_R,re[E.wrapR]),t.texParameteri(F,t.TEXTURE_MAG_FILTER,oe[E.magFilter]),t.texParameteri(F,t.TEXTURE_MIN_FILTER,oe[E.minFilter]),E.compareFunction&&(t.texParameteri(F,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(F,t.TEXTURE_COMPARE_FUNC,ie[E.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(E.magFilter===Ai||E.minFilter!==vd&&E.minFilter!==jo||E.type===hr&&e.has("OES_texture_float_linear")===!1)return;if(E.anisotropy>1||i.get(E).__currentAnisotropy){let H=e.get("EXT_texture_filter_anisotropic");t.texParameterf(F,H.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy}}}function Xe(F,E){let H=!1;F.__webglInit===void 0&&(F.__webglInit=!0,E.addEventListener("dispose",b));let Q=E.source,de=h.get(Q);de===void 0&&(de={},h.set(Q,de));let te=W(E);if(te!==F.__cacheKey){de[te]===void 0&&(de[te]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,H=!0),de[te].usedTimes++;let We=de[F.__cacheKey];We!==void 0&&(de[F.__cacheKey].usedTimes--,We.usedTimes===0&&x(E)),F.__cacheKey=te,F.__webglTexture=de[te].texture}return H}function Z(F,E,H){return Math.floor(Math.floor(F/H)/E)}function ye(F,E,H,Q){let te=F.updateRanges;if(te.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,E.width,E.height,H,Q,E.data);else{te.sort((me,qe)=>me.start-qe.start);let We=0;for(let me=1;me<te.length;me++){let qe=te[We],mt=te[me],ut=qe.start+qe.count,Ae=Z(mt.start,E.width,4),Tt=Z(qe.start,E.width,4);mt.start<=ut+1&&Ae===Tt&&Z(mt.start+mt.count-1,E.width,4)===Ae?qe.count=Math.max(qe.count,mt.start+mt.count-qe.start):(++We,te[We]=mt)}te.length=We+1;let G=t.getParameter(t.UNPACK_ROW_LENGTH),He=t.getParameter(t.UNPACK_SKIP_PIXELS),et=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,E.width);for(let me=0,qe=te.length;me<qe;me++){let mt=te[me],ut=Math.floor(mt.start/4),Ae=Math.ceil(mt.count/4),Tt=ut%E.width,O=Math.floor(ut/E.width),ke=Ae,Ce=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Tt),t.pixelStorei(t.UNPACK_SKIP_ROWS,O),n.texSubImage2D(t.TEXTURE_2D,0,Tt,O,ke,Ce,H,Q,E.data)}F.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,G),t.pixelStorei(t.UNPACK_SKIP_PIXELS,He),t.pixelStorei(t.UNPACK_SKIP_ROWS,et)}}function we(F,E,H){let Q=t.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(Q=t.TEXTURE_2D_ARRAY),E.isData3DTexture&&(Q=t.TEXTURE_3D);let de=Xe(F,E),te=E.source;n.bindTexture(Q,F.__webglTexture,t.TEXTURE0+H);let We=i.get(te);if(te.version!==We.__version||de===!0){n.activeTexture(t.TEXTURE0+H);let G=Zt.getPrimaries(Zt.workingColorSpace),He=E.colorSpace===Es?null:Zt.getPrimaries(E.colorSpace),et=E.colorSpace===Es||G===He?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,E.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,E.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,et);let me=v(E.image,!1,r.maxTextureSize);me=Ne(E,me);let qe=o.convert(E.format,E.colorSpace),mt=o.convert(E.type),ut=y(E.internalFormat,qe,mt,E.colorSpace,E.isVideoTexture);Ge(Q,E);let Ae,Tt=E.mipmaps,O=E.isVideoTexture!==!0,ke=We.__version===void 0||de===!0,Ce=te.dataReady,Ze=R(E,me);if(E.isDepthTexture)ut=w(E.format===wd,E.type),ke&&(O?n.texStorage2D(t.TEXTURE_2D,1,ut,me.width,me.height):n.texImage2D(t.TEXTURE_2D,0,ut,me.width,me.height,0,qe,mt,null));else if(E.isDataTexture)if(Tt.length>0){O&&ke&&n.texStorage2D(t.TEXTURE_2D,Ze,ut,Tt[0].width,Tt[0].height);for(let _e=0,ue=Tt.length;_e<ue;_e++)Ae=Tt[_e],O?Ce&&n.texSubImage2D(t.TEXTURE_2D,_e,0,0,Ae.width,Ae.height,qe,mt,Ae.data):n.texImage2D(t.TEXTURE_2D,_e,ut,Ae.width,Ae.height,0,qe,mt,Ae.data);E.generateMipmaps=!1}else O?(ke&&n.texStorage2D(t.TEXTURE_2D,Ze,ut,me.width,me.height),Ce&&ye(E,me,qe,mt)):n.texImage2D(t.TEXTURE_2D,0,ut,me.width,me.height,0,qe,mt,me.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){O&&ke&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ze,ut,Tt[0].width,Tt[0].height,me.depth);for(let _e=0,ue=Tt.length;_e<ue;_e++)if(Ae=Tt[_e],E.format!==Ii)if(qe!==null)if(O){if(Ce)if(E.layerUpdates.size>0){let tt=U_(Ae.width,Ae.height,E.format,E.type);for(let kt of E.layerUpdates){let Rn=Ae.data.subarray(kt*tt/Ae.data.BYTES_PER_ELEMENT,(kt+1)*tt/Ae.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,_e,0,0,kt,Ae.width,Ae.height,1,qe,Rn)}E.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,_e,0,0,0,Ae.width,Ae.height,me.depth,qe,Ae.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,_e,ut,Ae.width,Ae.height,me.depth,0,Ae.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else O?Ce&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,_e,0,0,0,Ae.width,Ae.height,me.depth,qe,mt,Ae.data):n.texImage3D(t.TEXTURE_2D_ARRAY,_e,ut,Ae.width,Ae.height,me.depth,0,qe,mt,Ae.data)}else{O&&ke&&n.texStorage2D(t.TEXTURE_2D,Ze,ut,Tt[0].width,Tt[0].height);for(let _e=0,ue=Tt.length;_e<ue;_e++)Ae=Tt[_e],E.format!==Ii?qe!==null?O?Ce&&n.compressedTexSubImage2D(t.TEXTURE_2D,_e,0,0,Ae.width,Ae.height,qe,Ae.data):n.compressedTexImage2D(t.TEXTURE_2D,_e,ut,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):O?Ce&&n.texSubImage2D(t.TEXTURE_2D,_e,0,0,Ae.width,Ae.height,qe,mt,Ae.data):n.texImage2D(t.TEXTURE_2D,_e,ut,Ae.width,Ae.height,0,qe,mt,Ae.data)}else if(E.isDataArrayTexture)if(O){if(ke&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Ze,ut,me.width,me.height,me.depth),Ce)if(E.layerUpdates.size>0){let _e=U_(me.width,me.height,E.format,E.type);for(let ue of E.layerUpdates){let tt=me.data.subarray(ue*_e/me.data.BYTES_PER_ELEMENT,(ue+1)*_e/me.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ue,me.width,me.height,1,qe,mt,tt)}E.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,me.width,me.height,me.depth,qe,mt,me.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ut,me.width,me.height,me.depth,0,qe,mt,me.data);else if(E.isData3DTexture)O?(ke&&n.texStorage3D(t.TEXTURE_3D,Ze,ut,me.width,me.height,me.depth),Ce&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,me.width,me.height,me.depth,qe,mt,me.data)):n.texImage3D(t.TEXTURE_3D,0,ut,me.width,me.height,me.depth,0,qe,mt,me.data);else if(E.isFramebufferTexture){if(ke)if(O)n.texStorage2D(t.TEXTURE_2D,Ze,ut,me.width,me.height);else{let _e=me.width,ue=me.height;for(let tt=0;tt<Ze;tt++)n.texImage2D(t.TEXTURE_2D,tt,ut,_e,ue,0,qe,mt,null),_e>>=1,ue>>=1}}else if(Tt.length>0){if(O&&ke){let _e=it(Tt[0]);n.texStorage2D(t.TEXTURE_2D,Ze,ut,_e.width,_e.height)}for(let _e=0,ue=Tt.length;_e<ue;_e++)Ae=Tt[_e],O?Ce&&n.texSubImage2D(t.TEXTURE_2D,_e,0,0,qe,mt,Ae):n.texImage2D(t.TEXTURE_2D,_e,ut,qe,mt,Ae);E.generateMipmaps=!1}else if(O){if(ke){let _e=it(me);n.texStorage2D(t.TEXTURE_2D,Ze,ut,_e.width,_e.height)}Ce&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,qe,mt,me)}else n.texImage2D(t.TEXTURE_2D,0,ut,qe,mt,me);m(E)&&g(Q),We.__version=te.version,E.onUpdate&&E.onUpdate(E)}F.__version=E.version}function pe(F,E,H){if(E.image.length!==6)return;let Q=Xe(F,E),de=E.source;n.bindTexture(t.TEXTURE_CUBE_MAP,F.__webglTexture,t.TEXTURE0+H);let te=i.get(de);if(de.version!==te.__version||Q===!0){n.activeTexture(t.TEXTURE0+H);let We=Zt.getPrimaries(Zt.workingColorSpace),G=E.colorSpace===Es?null:Zt.getPrimaries(E.colorSpace),He=E.colorSpace===Es||We===G?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,E.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,E.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);let et=E.isCompressedTexture||E.image[0].isCompressedTexture,me=E.image[0]&&E.image[0].isDataTexture,qe=[];for(let ue=0;ue<6;ue++)!et&&!me?qe[ue]=v(E.image[ue],!0,r.maxCubemapSize):qe[ue]=me?E.image[ue].image:E.image[ue],qe[ue]=Ne(E,qe[ue]);let mt=qe[0],ut=o.convert(E.format,E.colorSpace),Ae=o.convert(E.type),Tt=y(E.internalFormat,ut,Ae,E.colorSpace),O=E.isVideoTexture!==!0,ke=te.__version===void 0||Q===!0,Ce=de.dataReady,Ze=R(E,mt);Ge(t.TEXTURE_CUBE_MAP,E);let _e;if(et){O&&ke&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ze,Tt,mt.width,mt.height);for(let ue=0;ue<6;ue++){_e=qe[ue].mipmaps;for(let tt=0;tt<_e.length;tt++){let kt=_e[tt];E.format!==Ii?ut!==null?O?Ce&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt,0,0,kt.width,kt.height,ut,kt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt,Tt,kt.width,kt.height,0,kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):O?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt,0,0,kt.width,kt.height,ut,Ae,kt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt,Tt,kt.width,kt.height,0,ut,Ae,kt.data)}}}else{if(_e=E.mipmaps,O&&ke){_e.length>0&&Ze++;let ue=it(qe[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Ze,Tt,ue.width,ue.height)}for(let ue=0;ue<6;ue++)if(me){O?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,qe[ue].width,qe[ue].height,ut,Ae,qe[ue].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,Tt,qe[ue].width,qe[ue].height,0,ut,Ae,qe[ue].data);for(let tt=0;tt<_e.length;tt++){let Rn=_e[tt].image[ue].image;O?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt+1,0,0,Rn.width,Rn.height,ut,Ae,Rn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt+1,Tt,Rn.width,Rn.height,0,ut,Ae,Rn.data)}}else{O?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,0,0,ut,Ae,qe[ue]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,0,Tt,ut,Ae,qe[ue]);for(let tt=0;tt<_e.length;tt++){let kt=_e[tt];O?Ce&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt+1,0,0,ut,Ae,kt.image[ue]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ue,tt+1,Tt,ut,Ae,kt.image[ue])}}}m(E)&&g(t.TEXTURE_CUBE_MAP),te.__version=de.version,E.onUpdate&&E.onUpdate(E)}F.__version=E.version}function Me(F,E,H,Q,de,te){let We=o.convert(H.format,H.colorSpace),G=o.convert(H.type),He=y(H.internalFormat,We,G,H.colorSpace),et=i.get(E),me=i.get(H);if(me.__renderTarget=E,!et.__hasExternalTextures){let qe=Math.max(1,E.width>>te),mt=Math.max(1,E.height>>te);de===t.TEXTURE_3D||de===t.TEXTURE_2D_ARRAY?n.texImage3D(de,te,He,qe,mt,E.depth,0,We,G,null):n.texImage2D(de,te,He,qe,mt,0,We,G,null)}n.bindFramebuffer(t.FRAMEBUFFER,F),Pe(E)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Q,de,me.__webglTexture,0,J(E)):(de===t.TEXTURE_2D||de>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&de<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Q,de,me.__webglTexture,te),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Re(F,E,H){if(t.bindRenderbuffer(t.RENDERBUFFER,F),E.depthBuffer){let Q=E.depthTexture,de=Q&&Q.isDepthTexture?Q.type:null,te=w(E.stencilBuffer,de),We=E.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,G=J(E);Pe(E)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,G,te,E.width,E.height):H?t.renderbufferStorageMultisample(t.RENDERBUFFER,G,te,E.width,E.height):t.renderbufferStorage(t.RENDERBUFFER,te,E.width,E.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,We,t.RENDERBUFFER,F)}else{let Q=E.textures;for(let de=0;de<Q.length;de++){let te=Q[de],We=o.convert(te.format,te.colorSpace),G=o.convert(te.type),He=y(te.internalFormat,We,G,te.colorSpace),et=J(E);H&&Pe(E)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,et,He,E.width,E.height):Pe(E)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,et,He,E.width,E.height):t.renderbufferStorage(t.RENDERBUFFER,He,E.width,E.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function De(F,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,F),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let Q=i.get(E.depthTexture);Q.__renderTarget=E,(!Q.__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),U(E.depthTexture,0);let de=Q.__webglTexture,te=J(E);if(E.depthTexture.format===id)Pe(E)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0,te):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0);else if(E.depthTexture.format===wd)Pe(E)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0,te):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function Dt(F){let E=i.get(F),H=F.isWebGLCubeRenderTarget===!0;if(E.__boundDepthTexture!==F.depthTexture){let Q=F.depthTexture;if(E.__depthDisposeCallback&&E.__depthDisposeCallback(),Q){let de=()=>{delete E.__boundDepthTexture,delete E.__depthDisposeCallback,Q.removeEventListener("dispose",de)};Q.addEventListener("dispose",de),E.__depthDisposeCallback=de}E.__boundDepthTexture=Q}if(F.depthTexture&&!E.__autoAllocateDepthBuffer){if(H)throw new Error("target.depthTexture not supported in Cube render targets");let Q=F.texture.mipmaps;Q&&Q.length>0?De(E.__webglFramebuffer[0],F):De(E.__webglFramebuffer,F)}else if(H){E.__webglDepthbuffer=[];for(let Q=0;Q<6;Q++)if(n.bindFramebuffer(t.FRAMEBUFFER,E.__webglFramebuffer[Q]),E.__webglDepthbuffer[Q]===void 0)E.__webglDepthbuffer[Q]=t.createRenderbuffer(),Re(E.__webglDepthbuffer[Q],F,!1);else{let de=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,te=E.__webglDepthbuffer[Q];t.bindRenderbuffer(t.RENDERBUFFER,te),t.framebufferRenderbuffer(t.FRAMEBUFFER,de,t.RENDERBUFFER,te)}}else{let Q=F.texture.mipmaps;if(Q&&Q.length>0?n.bindFramebuffer(t.FRAMEBUFFER,E.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer===void 0)E.__webglDepthbuffer=t.createRenderbuffer(),Re(E.__webglDepthbuffer,F,!1);else{let de=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,te=E.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,te),t.framebufferRenderbuffer(t.FRAMEBUFFER,de,t.RENDERBUFFER,te)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function rt(F,E,H){let Q=i.get(F);E!==void 0&&Me(Q.__webglFramebuffer,F,F.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),H!==void 0&&Dt(F)}function Be(F){let E=F.texture,H=i.get(F),Q=i.get(E);F.addEventListener("dispose",_);let de=F.textures,te=F.isWebGLCubeRenderTarget===!0,We=de.length>1;if(We||(Q.__webglTexture===void 0&&(Q.__webglTexture=t.createTexture()),Q.__version=E.version,s.memory.textures++),te){H.__webglFramebuffer=[];for(let G=0;G<6;G++)if(E.mipmaps&&E.mipmaps.length>0){H.__webglFramebuffer[G]=[];for(let He=0;He<E.mipmaps.length;He++)H.__webglFramebuffer[G][He]=t.createFramebuffer()}else H.__webglFramebuffer[G]=t.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){H.__webglFramebuffer=[];for(let G=0;G<E.mipmaps.length;G++)H.__webglFramebuffer[G]=t.createFramebuffer()}else H.__webglFramebuffer=t.createFramebuffer();if(We)for(let G=0,He=de.length;G<He;G++){let et=i.get(de[G]);et.__webglTexture===void 0&&(et.__webglTexture=t.createTexture(),s.memory.textures++)}if(F.samples>0&&Pe(F)===!1){H.__webglMultisampledFramebuffer=t.createFramebuffer(),H.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,H.__webglMultisampledFramebuffer);for(let G=0;G<de.length;G++){let He=de[G];H.__webglColorRenderbuffer[G]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,H.__webglColorRenderbuffer[G]);let et=o.convert(He.format,He.colorSpace),me=o.convert(He.type),qe=y(He.internalFormat,et,me,He.colorSpace,F.isXRRenderTarget===!0),mt=J(F);t.renderbufferStorageMultisample(t.RENDERBUFFER,mt,qe,F.width,F.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+G,t.RENDERBUFFER,H.__webglColorRenderbuffer[G])}t.bindRenderbuffer(t.RENDERBUFFER,null),F.depthBuffer&&(H.__webglDepthRenderbuffer=t.createRenderbuffer(),Re(H.__webglDepthRenderbuffer,F,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(te){n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture),Ge(t.TEXTURE_CUBE_MAP,E);for(let G=0;G<6;G++)if(E.mipmaps&&E.mipmaps.length>0)for(let He=0;He<E.mipmaps.length;He++)Me(H.__webglFramebuffer[G][He],F,E,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+G,He);else Me(H.__webglFramebuffer[G],F,E,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+G,0);m(E)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(We){for(let G=0,He=de.length;G<He;G++){let et=de[G],me=i.get(et);n.bindTexture(t.TEXTURE_2D,me.__webglTexture),Ge(t.TEXTURE_2D,et),Me(H.__webglFramebuffer,F,et,t.COLOR_ATTACHMENT0+G,t.TEXTURE_2D,0),m(et)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let G=t.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(G=F.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(G,Q.__webglTexture),Ge(G,E),E.mipmaps&&E.mipmaps.length>0)for(let He=0;He<E.mipmaps.length;He++)Me(H.__webglFramebuffer[He],F,E,t.COLOR_ATTACHMENT0,G,He);else Me(H.__webglFramebuffer,F,E,t.COLOR_ATTACHMENT0,G,0);m(E)&&g(G),n.unbindTexture()}F.depthBuffer&&Dt(F)}function T(F){let E=F.textures;for(let H=0,Q=E.length;H<Q;H++){let de=E[H];if(m(de)){let te=C(F),We=i.get(de).__webglTexture;n.bindTexture(te,We),g(te),n.unbindTexture()}}}let ve=[],ee=[];function fe(F){if(F.samples>0){if(Pe(F)===!1){let E=F.textures,H=F.width,Q=F.height,de=t.COLOR_BUFFER_BIT,te=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,We=i.get(F),G=E.length>1;if(G)for(let et=0;et<E.length;et++)n.bindFramebuffer(t.FRAMEBUFFER,We.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,We.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,We.__webglMultisampledFramebuffer);let He=F.texture.mipmaps;He&&He.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,We.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,We.__webglFramebuffer);for(let et=0;et<E.length;et++){if(F.resolveDepthBuffer&&(F.depthBuffer&&(de|=t.DEPTH_BUFFER_BIT),F.stencilBuffer&&F.resolveStencilBuffer&&(de|=t.STENCIL_BUFFER_BIT)),G){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,We.__webglColorRenderbuffer[et]);let me=i.get(E[et]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,me,0)}t.blitFramebuffer(0,0,H,Q,0,0,H,Q,de,t.NEAREST),l===!0&&(ve.length=0,ee.length=0,ve.push(t.COLOR_ATTACHMENT0+et),F.depthBuffer&&F.resolveDepthBuffer===!1&&(ve.push(te),ee.push(te),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ee)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ve))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),G)for(let et=0;et<E.length;et++){n.bindFramebuffer(t.FRAMEBUFFER,We.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.RENDERBUFFER,We.__webglColorRenderbuffer[et]);let me=i.get(E[et]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,We.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+et,t.TEXTURE_2D,me,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,We.__webglMultisampledFramebuffer)}else if(F.depthBuffer&&F.resolveDepthBuffer===!1&&l){let E=F.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[E])}}}function J(F){return Math.min(r.maxSamples,F.samples)}function Pe(F){let E=i.get(F);return F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&E.__useRenderToTexture!==!1}function ge(F){let E=s.render.frame;d.get(F)!==E&&(d.set(F,E),F.update())}function Ne(F,E){let H=F.colorSpace,Q=F.format,de=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||H!==Ea&&H!==Es&&(Zt.getTransfer(H)===cn?(Q!==Ii||de!==Mr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",H)),E}function it(F){return typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement?(c.width=F.naturalWidth||F.width,c.height=F.naturalHeight||F.height):typeof VideoFrame<"u"&&F instanceof VideoFrame?(c.width=F.displayWidth,c.height=F.displayHeight):(c.width=F.width,c.height=F.height),c}this.allocateTextureUnit=B,this.resetTextureUnits=N,this.setTexture2D=U,this.setTexture2DArray=j,this.setTexture3D=Y,this.setTextureCube=$,this.rebindTextures=rt,this.setupRenderTarget=Be,this.updateRenderTargetMipmap=T,this.updateMultisampleRenderTarget=fe,this.setupDepthRenderbuffer=Dt,this.setupFrameBufferTexture=Me,this.useMultisampledRTT=Pe}function m4(t,e){function n(i,r=Es){let o,s=Zt.getTransfer(r);if(i===Mr)return t.UNSIGNED_BYTE;if(i===sv)return t.UNSIGNED_SHORT_4_4_4_4;if(i===av)return t.UNSIGNED_SHORT_5_5_5_1;if(i===k_)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===F_)return t.BYTE;if(i===P_)return t.SHORT;if(i===yd)return t.UNSIGNED_SHORT;if(i===ov)return t.INT;if(i===xs)return t.UNSIGNED_INT;if(i===hr)return t.FLOAT;if(i===Cd)return t.HALF_FLOAT;if(i===O_)return t.ALPHA;if(i===L_)return t.RGB;if(i===Ii)return t.RGBA;if(i===id)return t.DEPTH_COMPONENT;if(i===wd)return t.DEPTH_STENCIL;if(i===lv)return t.RED;if(i===Jh)return t.RED_INTEGER;if(i===N_)return t.RG;if(i===cv)return t.RG_INTEGER;if(i===dv)return t.RGBA_INTEGER;if(i===ef||i===tf||i===nf||i===rf)if(s===cn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===ef)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===tf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===nf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===rf)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===ef)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===tf)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===nf)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===rf)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===uv||i===hv||i===fv||i===pv)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===uv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===hv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===fv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===pv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===gv||i===mv||i===vv)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===gv||i===mv)return s===cn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===vv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===yv||i===Cv||i===bv||i===wv||i===_v||i===Sv||i===xv||i===Ev||i===Mv||i===Rv||i===Dv||i===Tv||i===Av||i===Iv)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===yv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Cv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===bv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===wv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===_v)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Sv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===xv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Ev)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Mv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Rv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Dv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Tv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Av)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Iv)return s===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===of||i===Fv||i===Pv)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===of)return s===cn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Fv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Pv)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===B_||i===kv||i===Ov||i===Lv)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===of)return o.COMPRESSED_RED_RGTC1_EXT;if(i===kv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Ov)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Lv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===bd?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}var ene=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,tne=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,RA=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){let r=new Zi,o=e.properties.get(r);o.__webglTexture=n.texture,(n.depthNear!==i.depthNear||n.depthFar!==i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let n=e.cameras[0].viewport,i=new xr({vertexShader:ene,fragmentShader:tne,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new zn(new gd(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},DA=class extends fr{constructor(e,n){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,c=null,d=null,u=null,h=null,f=null,p=null,v=new RA,m=n.getContextAttributes(),g=null,C=null,y=[],w=[],R=new ce,b=null,_=new ii;_.viewport=new Qt;let M=new ii;M.viewport=new Qt;let x=[_,M],S=new jm,I=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ye=y[Z];return ye===void 0&&(ye=new cd,y[Z]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(Z){let ye=y[Z];return ye===void 0&&(ye=new cd,y[Z]=ye),ye.getGripSpace()},this.getHand=function(Z){let ye=y[Z];return ye===void 0&&(ye=new cd,y[Z]=ye),ye.getHandSpace()};function B(Z){let ye=w.indexOf(Z.inputSource);if(ye===-1)return;let we=y[ye];we!==void 0&&(we.update(Z.inputSource,Z.frame,c||s),we.dispatchEvent({type:Z.type,data:Z.inputSource}))}function W(){r.removeEventListener("select",B),r.removeEventListener("selectstart",B),r.removeEventListener("selectend",B),r.removeEventListener("squeeze",B),r.removeEventListener("squeezestart",B),r.removeEventListener("squeezeend",B),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",U);for(let Z=0;Z<y.length;Z++){let ye=w[Z];ye!==null&&(w[Z]=null,y[Z].disconnect(ye))}I=null,N=null,v.reset(),e.setRenderTarget(g),f=null,h=null,u=null,r=null,C=null,Xe.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(Z){c=Z},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(Z){return oi(this,null,function*(){if(r=Z,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",B),r.addEventListener("selectstart",B),r.addEventListener("selectend",B),r.addEventListener("squeeze",B),r.addEventListener("squeezestart",B),r.addEventListener("squeezeend",B),r.addEventListener("end",W),r.addEventListener("inputsourceschange",U),m.xrCompatible!==!0&&(yield n.makeXRCompatible()),b=e.getPixelRatio(),e.getSize(R),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let we=null,pe=null,Me=null;m.depth&&(Me=m.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,we=m.stencil?wd:id,pe=m.stencil?bd:xs);let Re={colorFormat:n.RGBA8,depthFormat:Me,scaleFactor:o};u=new XRWebGLBinding(r,n),h=u.createProjectionLayer(Re),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),C=new Kr(h.textureWidth,h.textureHeight,{format:Ii,type:Mr,depthTexture:new Th(h.textureWidth,h.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,we),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let we={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,n,we),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),C=new Kr(f.framebufferWidth,f.framebufferHeight,{format:Ii,type:Mr,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=yield r.requestReferenceSpace(a),Xe.setContext(r),Xe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function U(Z){for(let ye=0;ye<Z.removed.length;ye++){let we=Z.removed[ye],pe=w.indexOf(we);pe>=0&&(w[pe]=null,y[pe].disconnect(we))}for(let ye=0;ye<Z.added.length;ye++){let we=Z.added[ye],pe=w.indexOf(we);if(pe===-1){for(let Re=0;Re<y.length;Re++)if(Re>=w.length){w.push(we),pe=Re;break}else if(w[Re]===null){w[Re]=we,pe=Re;break}if(pe===-1)break}let Me=y[pe];Me&&Me.connect(we)}}let j=new P,Y=new P;function $(Z,ye,we){j.setFromMatrixPosition(ye.matrixWorld),Y.setFromMatrixPosition(we.matrixWorld);let pe=j.distanceTo(Y),Me=ye.projectionMatrix.elements,Re=we.projectionMatrix.elements,De=Me[14]/(Me[10]-1),Dt=Me[14]/(Me[10]+1),rt=(Me[9]+1)/Me[5],Be=(Me[9]-1)/Me[5],T=(Me[8]-1)/Me[0],ve=(Re[8]+1)/Re[0],ee=De*T,fe=De*ve,J=pe/(-T+ve),Pe=J*-T;if(ye.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Pe),Z.translateZ(J),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),Me[10]===-1)Z.projectionMatrix.copy(ye.projectionMatrix),Z.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{let ge=De+J,Ne=Dt+J,it=ee-Pe,F=fe+(pe-Pe),E=rt*Dt/Ne*ge,H=Be*Dt/Ne*ge;Z.projectionMatrix.makePerspective(it,F,E,H,ge,Ne),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function re(Z,ye){ye===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ye.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;let ye=Z.near,we=Z.far;v.texture!==null&&(v.depthNear>0&&(ye=v.depthNear),v.depthFar>0&&(we=v.depthFar)),S.near=M.near=_.near=ye,S.far=M.far=_.far=we,(I!==S.near||N!==S.far)&&(r.updateRenderState({depthNear:S.near,depthFar:S.far}),I=S.near,N=S.far),_.layers.mask=Z.layers.mask|2,M.layers.mask=Z.layers.mask|4,S.layers.mask=_.layers.mask|M.layers.mask;let pe=Z.parent,Me=S.cameras;re(S,pe);for(let Re=0;Re<Me.length;Re++)re(Me[Re],pe);Me.length===2?$(S,_,M):S.projectionMatrix.copy(_.projectionMatrix),oe(Z,S,pe)};function oe(Z,ye,we){we===null?Z.matrix.copy(ye.matrixWorld):(Z.matrix.copy(we.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ye.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ye.projectionMatrix),Z.projectionMatrixInverse.copy(ye.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=rd*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(Z){l=Z,h!==null&&(h.fixedFoveation=Z),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Z)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(S)};let ie=null;function Ge(Z,ye){if(d=ye.getViewerPose(c||s),p=ye,d!==null){let we=d.views;f!==null&&(e.setRenderTargetFramebuffer(C,f.framebuffer),e.setRenderTarget(C));let pe=!1;we.length!==S.cameras.length&&(S.cameras.length=0,pe=!0);for(let De=0;De<we.length;De++){let Dt=we[De],rt=null;if(f!==null)rt=f.getViewport(Dt);else{let T=u.getViewSubImage(h,Dt);rt=T.viewport,De===0&&(e.setRenderTargetTextures(C,T.colorTexture,T.depthStencilTexture),e.setRenderTarget(C))}let Be=x[De];Be===void 0&&(Be=new ii,Be.layers.enable(De),Be.viewport=new Qt,x[De]=Be),Be.matrix.fromArray(Dt.transform.matrix),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.projectionMatrix.fromArray(Dt.projectionMatrix),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert(),Be.viewport.set(rt.x,rt.y,rt.width,rt.height),De===0&&(S.matrix.copy(Be.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),pe===!0&&S.cameras.push(Be)}let Me=r.enabledFeatures;if(Me&&Me.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&u){let De=u.getDepthInformation(we[0]);De&&De.isValid&&De.texture&&v.init(e,De,r.renderState)}}for(let we=0;we<y.length;we++){let pe=w[we],Me=y[we];pe!==null&&Me!==void 0&&Me.update(pe,ye,c||s)}ie&&ie(Z,ye),ye.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ye}),p=null}let Xe=new u4;Xe.setAnimationLoop(Ge),this.setAnimationLoop=function(Z){ie=Z},this.dispose=function(){}}},xd=new Vo,nne=new pt;function ine(t,e){function n(m,g){m.matrixAutoUpdate===!0&&m.updateMatrix(),g.value.copy(m.matrix)}function i(m,g){g.color.getRGB(m.fogColor.value,lA(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function r(m,g,C,y,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(m,g):g.isMeshToonMaterial?(o(m,g),u(m,g)):g.isMeshPhongMaterial?(o(m,g),d(m,g)):g.isMeshStandardMaterial?(o(m,g),h(m,g),g.isMeshPhysicalMaterial&&f(m,g,w)):g.isMeshMatcapMaterial?(o(m,g),p(m,g)):g.isMeshDepthMaterial?o(m,g):g.isMeshDistanceMaterial?(o(m,g),v(m,g)):g.isMeshNormalMaterial?o(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?l(m,g,C,y):g.isSpriteMaterial?c(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,n(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,g.side===Xi&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,n(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),g.side===Xi&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,n(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,n(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let C=e.get(g),y=C.envMap,w=C.envMapRotation;y&&(m.envMap.value=y,xd.copy(w),xd.x*=-1,xd.y*=-1,xd.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(xd.y*=-1,xd.z*=-1),m.envMapRotation.value.setFromMatrix4(nne.makeRotationFromEuler(xd)),m.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap&&(m.lightMap.value=g.lightMap,m.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,m.lightMapTransform)),g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,m.aoMapTransform))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform))}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function l(m,g,C,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*C,m.scale.value=y*.5,g.map&&(m.map.value=g.map,n(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function c(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function d(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function u(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function h(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,m.roughnessMapTransform)),g.envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function f(m,g,C){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Xi&&m.clearcoatNormalScale.value.negate())),g.dispersion>0&&(m.dispersion.value=g.dispersion),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=C.texture,m.transmissionSamplerSize.value.set(C.width,C.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,m.specularIntensityMapTransform))}function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}function v(m,g){let C=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(C.matrixWorld),m.nearDistance.value=C.shadow.camera.near,m.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function rne(t,e,n,i){let r={},o={},s=[],a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(C,y){let w=y.program;i.uniformBlockBinding(C,w)}function c(C,y){let w=r[C.id];w===void 0&&(p(C),w=d(C),r[C.id]=w,C.addEventListener("dispose",m));let R=y.program;i.updateUBOMapping(C,R);let b=e.render.frame;o[C.id]!==b&&(h(C),o[C.id]=b)}function d(C){let y=u();C.__bindingPointIndex=y;let w=t.createBuffer(),R=C.__size,b=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,w),t.bufferData(t.UNIFORM_BUFFER,R,b),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,y,w),w}function u(){for(let C=0;C<a;C++)if(s.indexOf(C)===-1)return s.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(C){let y=r[C.id],w=C.uniforms,R=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,y);for(let b=0,_=w.length;b<_;b++){let M=Array.isArray(w[b])?w[b]:[w[b]];for(let x=0,S=M.length;x<S;x++){let I=M[x];if(f(I,b,x,R)===!0){let N=I.__offset,B=Array.isArray(I.value)?I.value:[I.value],W=0;for(let U=0;U<B.length;U++){let j=B[U],Y=v(j);typeof j=="number"||typeof j=="boolean"?(I.__data[0]=j,t.bufferSubData(t.UNIFORM_BUFFER,N+W,I.__data)):j.isMatrix3?(I.__data[0]=j.elements[0],I.__data[1]=j.elements[1],I.__data[2]=j.elements[2],I.__data[3]=0,I.__data[4]=j.elements[3],I.__data[5]=j.elements[4],I.__data[6]=j.elements[5],I.__data[7]=0,I.__data[8]=j.elements[6],I.__data[9]=j.elements[7],I.__data[10]=j.elements[8],I.__data[11]=0):(j.toArray(I.__data,W),W+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,N,I.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(C,y,w,R){let b=C.value,_=y+"_"+w;if(R[_]===void 0)return typeof b=="number"||typeof b=="boolean"?R[_]=b:R[_]=b.clone(),!0;{let M=R[_];if(typeof b=="number"||typeof b=="boolean"){if(M!==b)return R[_]=b,!0}else if(M.equals(b)===!1)return M.copy(b),!0}return!1}function p(C){let y=C.uniforms,w=0,R=16;for(let _=0,M=y.length;_<M;_++){let x=Array.isArray(y[_])?y[_]:[y[_]];for(let S=0,I=x.length;S<I;S++){let N=x[S],B=Array.isArray(N.value)?N.value:[N.value];for(let W=0,U=B.length;W<U;W++){let j=B[W],Y=v(j),$=w%R,re=$%Y.boundary,oe=$+re;w+=re,oe!==0&&R-oe<Y.storage&&(w+=R-oe),N.__data=new Float32Array(Y.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=w,w+=Y.storage}}}let b=w%R;return b>0&&(w+=R-b),C.__size=w,C.__cache={},this}function v(C){let y={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(y.boundary=4,y.storage=4):C.isVector2?(y.boundary=8,y.storage=8):C.isVector3||C.isColor?(y.boundary=16,y.storage=12):C.isVector4?(y.boundary=16,y.storage=16):C.isMatrix3?(y.boundary=48,y.storage=48):C.isMatrix4?(y.boundary=64,y.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),y}function m(C){let y=C.target;y.removeEventListener("dispose",m);let w=s.indexOf(y.__bindingPointIndex);s.splice(w,1),t.deleteBuffer(r[y.id]),delete r[y.id],delete o[y.id]}function g(){for(let C in r)t.deleteBuffer(r[C]);s=[],r={},o={}}return{bind:l,update:c,dispose:g}}var $_=class{constructor(e={}){let{canvas:n=aA(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=s;let p=new Uint32Array(4),v=new Int32Array(4),m=null,g=null,C=[],y=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Wo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let w=this,R=!1;this._outputColorSpace=Vi;let b=0,_=0,M=null,x=-1,S=null,I=new Qt,N=new Qt,B=null,W=new Le(0),U=0,j=n.width,Y=n.height,$=1,re=null,oe=null,ie=new Qt(0,0,j,Y),Ge=new Qt(0,0,j,Y),Xe=!1,Z=new Da,ye=!1,we=!1,pe=new pt,Me=new pt,Re=new P,De=new Qt,Dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},rt=!1;function Be(){return M===null?$:1}let T=i;function ve(D,V){return n.getContext(D,V)}try{let D={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Xm}`),n.addEventListener("webglcontextlost",Ze,!1),n.addEventListener("webglcontextrestored",_e,!1),n.addEventListener("webglcontextcreationerror",ue,!1),T===null){let V="webgl2";if(T=ve(V,D),T===null)throw ve(V)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let ee,fe,J,Pe,ge,Ne,it,F,E,H,Q,de,te,We,G,He,et,me,qe,mt,ut,Ae,Tt,O;function ke(){ee=new See(T),ee.init(),Ae=new m4(T,ee),fe=new mee(T,ee,e,Ae),J=new Qte(T,ee),fe.reverseDepthBuffer&&h&&J.buffers.depth.setReversed(!0),Pe=new Mee(T),ge=new Vte,Ne=new Jte(T,ee,J,ge,fe,Ae,Pe),it=new yee(w),F=new _ee(w),E=new FZ(T),Tt=new pee(T,E),H=new xee(T,E,Pe,Tt),Q=new Dee(T,H,E,Pe),qe=new Ree(T,fe,Ne),He=new vee(ge),de=new Bte(w,it,F,ee,fe,Tt,He),te=new ine(w,ge),We=new zte,G=new qte(ee),me=new fee(w,it,F,J,Q,f,l),et=new Xte(w,Q,fe),O=new rne(T,Pe,fe,J),mt=new gee(T,ee,Pe),ut=new Eee(T,ee,Pe),Pe.programs=de.programs,w.capabilities=fe,w.extensions=ee,w.properties=ge,w.renderLists=We,w.shadowMap=et,w.state=J,w.info=Pe}ke();let Ce=new DA(w,T);this.xr=Ce,this.getContext=function(){return T},this.getContextAttributes=function(){return T.getContextAttributes()},this.forceContextLoss=function(){let D=ee.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){let D=ee.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(D){D!==void 0&&($=D,this.setSize(j,Y,!1))},this.getSize=function(D){return D.set(j,Y)},this.setSize=function(D,V,K=!0){if(Ce.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=D,Y=V,n.width=Math.floor(D*$),n.height=Math.floor(V*$),K===!0&&(n.style.width=D+"px",n.style.height=V+"px"),this.setViewport(0,0,D,V)},this.getDrawingBufferSize=function(D){return D.set(j*$,Y*$).floor()},this.setDrawingBufferSize=function(D,V,K){j=D,Y=V,$=K,n.width=Math.floor(D*K),n.height=Math.floor(V*K),this.setViewport(0,0,D,V)},this.getCurrentViewport=function(D){return D.copy(I)},this.getViewport=function(D){return D.copy(ie)},this.setViewport=function(D,V,K,X){D.isVector4?ie.set(D.x,D.y,D.z,D.w):ie.set(D,V,K,X),J.viewport(I.copy(ie).multiplyScalar($).round())},this.getScissor=function(D){return D.copy(Ge)},this.setScissor=function(D,V,K,X){D.isVector4?Ge.set(D.x,D.y,D.z,D.w):Ge.set(D,V,K,X),J.scissor(N.copy(Ge).multiplyScalar($).round())},this.getScissorTest=function(){return Xe},this.setScissorTest=function(D){J.setScissorTest(Xe=D)},this.setOpaqueSort=function(D){re=D},this.setTransparentSort=function(D){oe=D},this.getClearColor=function(D){return D.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor(...arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha(...arguments)},this.clear=function(D=!0,V=!0,K=!0){let X=0;if(D){let z=!1;if(M!==null){let Se=M.texture.format;z=Se===dv||Se===cv||Se===Jh}if(z){let Se=M.texture.type,Oe=Se===Mr||Se===xs||Se===yd||Se===bd||Se===sv||Se===av,nt=me.getClearColor(),Ke=me.getClearAlpha(),_t=nt.r,Et=nt.g,at=nt.b;Oe?(p[0]=_t,p[1]=Et,p[2]=at,p[3]=Ke,T.clearBufferuiv(T.COLOR,0,p)):(v[0]=_t,v[1]=Et,v[2]=at,v[3]=Ke,T.clearBufferiv(T.COLOR,0,v))}else X|=T.COLOR_BUFFER_BIT}V&&(X|=T.DEPTH_BUFFER_BIT),K&&(X|=T.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),T.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ze,!1),n.removeEventListener("webglcontextrestored",_e,!1),n.removeEventListener("webglcontextcreationerror",ue,!1),me.dispose(),We.dispose(),G.dispose(),ge.dispose(),it.dispose(),F.dispose(),Q.dispose(),Tt.dispose(),O.dispose(),de.dispose(),Ce.dispose(),Ce.removeEventListener("sessionstart",IP),Ce.removeEventListener("sessionend",FP),Xl.stop()};function Ze(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;let D=Pe.autoReset,V=et.enabled,K=et.autoUpdate,X=et.needsUpdate,z=et.type;ke(),Pe.autoReset=D,et.enabled=V,et.autoUpdate=K,et.needsUpdate=X,et.type=z}function ue(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function tt(D){let V=D.target;V.removeEventListener("dispose",tt),kt(V)}function kt(D){Rn(D),ge.remove(D)}function Rn(D){let V=ge.get(D).programs;V!==void 0&&(V.forEach(function(K){de.releaseProgram(K)}),D.isShaderMaterial&&de.releaseShaderCache(D))}this.renderBufferDirect=function(D,V,K,X,z,Se){V===null&&(V=Dt);let Oe=z.isMesh&&z.matrixWorld.determinant()<0,nt=d5(D,V,K,X,z);J.setMaterial(X,Oe);let Ke=K.index,_t=1;if(X.wireframe===!0){if(Ke=H.getWireframeAttribute(K),Ke===void 0)return;_t=2}let Et=K.drawRange,at=K.attributes.position,Xt=Et.start*_t,gn=(Et.start+Et.count)*_t;Se!==null&&(Xt=Math.max(Xt,Se.start*_t),gn=Math.min(gn,(Se.start+Se.count)*_t)),Ke!==null?(Xt=Math.max(Xt,0),gn=Math.min(gn,Ke.count)):at!=null&&(Xt=Math.max(Xt,0),gn=Math.min(gn,at.count));let jn=gn-Xt;if(jn<0||jn===1/0)return;Tt.setup(z,X,nt,K,Ke);let Dn,yn=mt;if(Ke!==null&&(Dn=E.get(Ke),yn=ut,yn.setIndex(Dn)),z.isMesh)X.wireframe===!0?(J.setLineWidth(X.wireframeLinewidth*Be()),yn.setMode(T.LINES)):yn.setMode(T.TRIANGLES);else if(z.isLine){let ct=X.linewidth;ct===void 0&&(ct=1),J.setLineWidth(ct*Be()),z.isLineSegments?yn.setMode(T.LINES):z.isLineLoop?yn.setMode(T.LINE_LOOP):yn.setMode(T.LINE_STRIP)}else z.isPoints?yn.setMode(T.POINTS):z.isSprite&&yn.setMode(T.TRIANGLES);if(z.isBatchedMesh)if(z._multiDrawInstances!==null)od("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),yn.renderMultiDrawInstances(z._multiDrawStarts,z._multiDrawCounts,z._multiDrawCount,z._multiDrawInstances);else if(ee.get("WEBGL_multi_draw"))yn.renderMultiDraw(z._multiDrawStarts,z._multiDrawCounts,z._multiDrawCount);else{let ct=z._multiDrawStarts,Ln=z._multiDrawCounts,nn=z._multiDrawCount,Ir=Ke?E.get(Ke).bytesPerElement:1,Xd=ge.get(X).currentProgram.getUniforms();for(let Fr=0;Fr<nn;Fr++)Xd.setValue(T,"_gl_DrawID",Fr),yn.render(ct[Fr]/Ir,Ln[Fr])}else if(z.isInstancedMesh)yn.renderInstances(Xt,jn,z.count);else if(K.isInstancedBufferGeometry){let ct=K._maxInstanceCount!==void 0?K._maxInstanceCount:1/0,Ln=Math.min(K.instanceCount,ct);yn.renderInstances(Xt,jn,Ln)}else yn.render(Xt,jn)};function un(D,V,K){D.transparent===!0&&D.side===Go&&D.forceSinglePass===!1?(D.side=Xi,D.needsUpdate=!0,zy(D,V,K),D.side=ys,D.needsUpdate=!0,zy(D,V,K),D.side=Go):zy(D,V,K)}this.compile=function(D,V,K=null){K===null&&(K=D),g=G.get(K),g.init(V),y.push(g),K.traverseVisible(function(z){z.isLight&&z.layers.test(V.layers)&&(g.pushLight(z),z.castShadow&&g.pushShadow(z))}),D!==K&&D.traverseVisible(function(z){z.isLight&&z.layers.test(V.layers)&&(g.pushLight(z),z.castShadow&&g.pushShadow(z))}),g.setupLights();let X=new Set;return D.traverse(function(z){if(!(z.isMesh||z.isPoints||z.isLine||z.isSprite))return;let Se=z.material;if(Se)if(Array.isArray(Se))for(let Oe=0;Oe<Se.length;Oe++){let nt=Se[Oe];un(nt,K,z),X.add(nt)}else un(Se,K,z),X.add(Se)}),g=y.pop(),X},this.compileAsync=function(D,V,K=null){let X=this.compile(D,V,K);return new Promise(z=>{function Se(){if(X.forEach(function(Oe){ge.get(Oe).currentProgram.isReady()&&X.delete(Oe)}),X.size===0){z(D);return}setTimeout(Se,10)}ee.get("KHR_parallel_shader_compile")!==null?Se():setTimeout(Se,10)})};let vo=null;function Vs(D){vo&&vo(D)}function IP(){Xl.stop()}function FP(){Xl.start()}let Xl=new u4;Xl.setAnimationLoop(Vs),typeof self<"u"&&Xl.setContext(self),this.setAnimationLoop=function(D){vo=D,Ce.setAnimationLoop(D),D===null?Xl.stop():Xl.start()},Ce.addEventListener("sessionstart",IP),Ce.addEventListener("sessionend",FP),this.render=function(D,V){if(V!==void 0&&V.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),V.parent===null&&V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),Ce.enabled===!0&&Ce.isPresenting===!0&&(Ce.cameraAutoUpdate===!0&&Ce.updateCamera(V),V=Ce.getCamera()),D.isScene===!0&&D.onBeforeRender(w,D,V,M),g=G.get(D,y.length),g.init(V),y.push(g),Me.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),Z.setFromProjectionMatrix(Me),we=this.localClippingEnabled,ye=He.init(this.clippingPlanes,we),m=We.get(D,C.length),m.init(),C.push(m),Ce.enabled===!0&&Ce.isPresenting===!0){let Se=w.xr.getDepthSensingMesh();Se!==null&&rE(Se,V,-1/0,w.sortObjects)}rE(D,V,0,w.sortObjects),m.finish(),w.sortObjects===!0&&m.sort(re,oe),rt=Ce.enabled===!1||Ce.isPresenting===!1||Ce.hasDepthSensing()===!1,rt&&me.addToRenderList(m,D),this.info.render.frame++,ye===!0&&He.beginShadows();let K=g.state.shadowsArray;et.render(K,D,V),ye===!0&&He.endShadows(),this.info.autoReset===!0&&this.info.reset();let X=m.opaque,z=m.transmissive;if(g.setupLights(),V.isArrayCamera){let Se=V.cameras;if(z.length>0)for(let Oe=0,nt=Se.length;Oe<nt;Oe++){let Ke=Se[Oe];kP(X,z,D,Ke)}rt&&me.render(D);for(let Oe=0,nt=Se.length;Oe<nt;Oe++){let Ke=Se[Oe];PP(m,D,Ke,Ke.viewport)}}else z.length>0&&kP(X,z,D,V),rt&&me.render(D),PP(m,D,V);M!==null&&_===0&&(Ne.updateMultisampleRenderTarget(M),Ne.updateRenderTargetMipmap(M)),D.isScene===!0&&D.onAfterRender(w,D,V),Tt.resetDefaultState(),x=-1,S=null,y.pop(),y.length>0?(g=y[y.length-1],ye===!0&&He.setGlobalState(w.clippingPlanes,g.state.camera)):g=null,C.pop(),C.length>0?m=C[C.length-1]:m=null};function rE(D,V,K,X){if(D.visible===!1)return;if(D.layers.test(V.layers)){if(D.isGroup)K=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(V);else if(D.isLight)g.pushLight(D),D.castShadow&&g.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||Z.intersectsSprite(D)){X&&De.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Me);let Oe=Q.update(D),nt=D.material;nt.visible&&m.push(D,Oe,nt,K,De.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||Z.intersectsObject(D))){let Oe=Q.update(D),nt=D.material;if(X&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),De.copy(D.boundingSphere.center)):(Oe.boundingSphere===null&&Oe.computeBoundingSphere(),De.copy(Oe.boundingSphere.center)),De.applyMatrix4(D.matrixWorld).applyMatrix4(Me)),Array.isArray(nt)){let Ke=Oe.groups;for(let _t=0,Et=Ke.length;_t<Et;_t++){let at=Ke[_t],Xt=nt[at.materialIndex];Xt&&Xt.visible&&m.push(D,Oe,Xt,K,De.z,at)}}else nt.visible&&m.push(D,Oe,nt,K,De.z,null)}}let Se=D.children;for(let Oe=0,nt=Se.length;Oe<nt;Oe++)rE(Se[Oe],V,K,X)}function PP(D,V,K,X){let z=D.opaque,Se=D.transmissive,Oe=D.transparent;g.setupLightsView(K),ye===!0&&He.setGlobalState(w.clippingPlanes,K),X&&J.viewport(I.copy(X)),z.length>0&&Hy(z,V,K),Se.length>0&&Hy(Se,V,K),Oe.length>0&&Hy(Oe,V,K),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function kP(D,V,K,X){if((K.isScene===!0?K.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[X.id]===void 0&&(g.state.transmissionRenderTarget[X.id]=new Kr(1,1,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")||ee.has("EXT_color_buffer_float")?Cd:Mr,minFilter:jo,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zt.workingColorSpace}));let Se=g.state.transmissionRenderTarget[X.id],Oe=X.viewport||I;Se.setSize(Oe.z*w.transmissionResolutionScale,Oe.w*w.transmissionResolutionScale);let nt=w.getRenderTarget(),Ke=w.getActiveCubeFace(),_t=w.getActiveMipmapLevel();w.setRenderTarget(Se),w.getClearColor(W),U=w.getClearAlpha(),U<1&&w.setClearColor(16777215,.5),w.clear(),rt&&me.render(K);let Et=w.toneMapping;w.toneMapping=Wo;let at=X.viewport;if(X.viewport!==void 0&&(X.viewport=void 0),g.setupLightsView(X),ye===!0&&He.setGlobalState(w.clippingPlanes,X),Hy(D,K,X),Ne.updateMultisampleRenderTarget(Se),Ne.updateRenderTargetMipmap(Se),ee.has("WEBGL_multisampled_render_to_texture")===!1){let Xt=!1;for(let gn=0,jn=V.length;gn<jn;gn++){let Dn=V[gn],yn=Dn.object,ct=Dn.geometry,Ln=Dn.material,nn=Dn.group;if(Ln.side===Go&&yn.layers.test(X.layers)){let Ir=Ln.side;Ln.side=Xi,Ln.needsUpdate=!0,OP(yn,K,X,ct,Ln,nn),Ln.side=Ir,Ln.needsUpdate=!0,Xt=!0}}Xt===!0&&(Ne.updateMultisampleRenderTarget(Se),Ne.updateRenderTargetMipmap(Se))}w.setRenderTarget(nt,Ke,_t),w.setClearColor(W,U),at!==void 0&&(X.viewport=at),w.toneMapping=Et}function Hy(D,V,K){let X=V.isScene===!0?V.overrideMaterial:null;for(let z=0,Se=D.length;z<Se;z++){let Oe=D[z],nt=Oe.object,Ke=Oe.geometry,_t=Oe.group,Et=Oe.material;Et.allowOverride===!0&&X!==null&&(Et=X),nt.layers.test(K.layers)&&OP(nt,V,K,Ke,Et,_t)}}function OP(D,V,K,X,z,Se){D.onBeforeRender(w,V,K,X,z,Se),D.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),z.onBeforeRender(w,V,K,X,D,Se),z.transparent===!0&&z.side===Go&&z.forceSinglePass===!1?(z.side=Xi,z.needsUpdate=!0,w.renderBufferDirect(K,V,X,z,D,Se),z.side=ys,z.needsUpdate=!0,w.renderBufferDirect(K,V,X,z,D,Se),z.side=Go):w.renderBufferDirect(K,V,X,z,D,Se),D.onAfterRender(w,V,K,X,z,Se)}function zy(D,V,K){V.isScene!==!0&&(V=Dt);let X=ge.get(D),z=g.state.lights,Se=g.state.shadowsArray,Oe=z.state.version,nt=de.getParameters(D,z.state,Se,V,K),Ke=de.getProgramCacheKey(nt),_t=X.programs;X.environment=D.isMeshStandardMaterial?V.environment:null,X.fog=V.fog,X.envMap=(D.isMeshStandardMaterial?F:it).get(D.envMap||X.environment),X.envMapRotation=X.environment!==null&&D.envMap===null?V.environmentRotation:D.envMapRotation,_t===void 0&&(D.addEventListener("dispose",tt),_t=new Map,X.programs=_t);let Et=_t.get(Ke);if(Et!==void 0){if(X.currentProgram===Et&&X.lightsStateVersion===Oe)return NP(D,nt),Et}else nt.uniforms=de.getUniforms(D),D.onBeforeCompile(nt,w),Et=de.acquireProgram(nt,Ke),_t.set(Ke,Et),X.uniforms=nt.uniforms;let at=X.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(at.clippingPlanes=He.uniform),NP(D,nt),X.needsLights=h5(D),X.lightsStateVersion=Oe,X.needsLights&&(at.ambientLightColor.value=z.state.ambient,at.lightProbe.value=z.state.probe,at.directionalLights.value=z.state.directional,at.directionalLightShadows.value=z.state.directionalShadow,at.spotLights.value=z.state.spot,at.spotLightShadows.value=z.state.spotShadow,at.rectAreaLights.value=z.state.rectArea,at.ltc_1.value=z.state.rectAreaLTC1,at.ltc_2.value=z.state.rectAreaLTC2,at.pointLights.value=z.state.point,at.pointLightShadows.value=z.state.pointShadow,at.hemisphereLights.value=z.state.hemi,at.directionalShadowMap.value=z.state.directionalShadowMap,at.directionalShadowMatrix.value=z.state.directionalShadowMatrix,at.spotShadowMap.value=z.state.spotShadowMap,at.spotLightMatrix.value=z.state.spotLightMatrix,at.spotLightMap.value=z.state.spotLightMap,at.pointShadowMap.value=z.state.pointShadowMap,at.pointShadowMatrix.value=z.state.pointShadowMatrix),X.currentProgram=Et,X.uniformsList=null,Et}function LP(D){if(D.uniformsList===null){let V=D.currentProgram.getUniforms();D.uniformsList=lf.seqWithValue(V.seq,D.uniforms)}return D.uniformsList}function NP(D,V){let K=ge.get(D);K.outputColorSpace=V.outputColorSpace,K.batching=V.batching,K.batchingColor=V.batchingColor,K.instancing=V.instancing,K.instancingColor=V.instancingColor,K.instancingMorph=V.instancingMorph,K.skinning=V.skinning,K.morphTargets=V.morphTargets,K.morphNormals=V.morphNormals,K.morphColors=V.morphColors,K.morphTargetsCount=V.morphTargetsCount,K.numClippingPlanes=V.numClippingPlanes,K.numIntersection=V.numClipIntersection,K.vertexAlphas=V.vertexAlphas,K.vertexTangents=V.vertexTangents,K.toneMapping=V.toneMapping}function d5(D,V,K,X,z){V.isScene!==!0&&(V=Dt),Ne.resetTextureUnits();let Se=V.fog,Oe=X.isMeshStandardMaterial?V.environment:null,nt=M===null?w.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:Ea,Ke=(X.isMeshStandardMaterial?F:it).get(X.envMap||Oe),_t=X.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,Et=!!K.attributes.tangent&&(!!X.normalMap||X.anisotropy>0),at=!!K.morphAttributes.position,Xt=!!K.morphAttributes.normal,gn=!!K.morphAttributes.color,jn=Wo;X.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(jn=w.toneMapping);let Dn=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,yn=Dn!==void 0?Dn.length:0,ct=ge.get(X),Ln=g.state.lights;if(ye===!0&&(we===!0||D!==S)){let rr=D===S&&X.id===x;He.setState(X,D,rr)}let nn=!1;X.version===ct.__version?(ct.needsLights&&ct.lightsStateVersion!==Ln.state.version||ct.outputColorSpace!==nt||z.isBatchedMesh&&ct.batching===!1||!z.isBatchedMesh&&ct.batching===!0||z.isBatchedMesh&&ct.batchingColor===!0&&z.colorTexture===null||z.isBatchedMesh&&ct.batchingColor===!1&&z.colorTexture!==null||z.isInstancedMesh&&ct.instancing===!1||!z.isInstancedMesh&&ct.instancing===!0||z.isSkinnedMesh&&ct.skinning===!1||!z.isSkinnedMesh&&ct.skinning===!0||z.isInstancedMesh&&ct.instancingColor===!0&&z.instanceColor===null||z.isInstancedMesh&&ct.instancingColor===!1&&z.instanceColor!==null||z.isInstancedMesh&&ct.instancingMorph===!0&&z.morphTexture===null||z.isInstancedMesh&&ct.instancingMorph===!1&&z.morphTexture!==null||ct.envMap!==Ke||X.fog===!0&&ct.fog!==Se||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==He.numPlanes||ct.numIntersection!==He.numIntersection)||ct.vertexAlphas!==_t||ct.vertexTangents!==Et||ct.morphTargets!==at||ct.morphNormals!==Xt||ct.morphColors!==gn||ct.toneMapping!==jn||ct.morphTargetsCount!==yn)&&(nn=!0):(nn=!0,ct.__version=X.version);let Ir=ct.currentProgram;nn===!0&&(Ir=zy(X,V,z));let Xd=!1,Fr=!1,Hf=!1,Fn=Ir.getUniforms(),Qr=ct.uniforms;if(J.useProgram(Ir.program)&&(Xd=!0,Fr=!0,Hf=!0),X.id!==x&&(x=X.id,Fr=!0),Xd||S!==D){J.buffers.depth.getReversed()?(pe.copy(D.projectionMatrix),IV(pe),FV(pe),Fn.setValue(T,"projectionMatrix",pe)):Fn.setValue(T,"projectionMatrix",D.projectionMatrix),Fn.setValue(T,"viewMatrix",D.matrixWorldInverse);let Cr=Fn.map.cameraPosition;Cr!==void 0&&Cr.setValue(T,Re.setFromMatrixPosition(D.matrixWorld)),fe.logarithmicDepthBuffer&&Fn.setValue(T,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&Fn.setValue(T,"isOrthographic",D.isOrthographicCamera===!0),S!==D&&(S=D,Fr=!0,Hf=!0)}if(z.isSkinnedMesh){Fn.setOptional(T,z,"bindMatrix"),Fn.setOptional(T,z,"bindMatrixInverse");let rr=z.skeleton;rr&&(rr.boneTexture===null&&rr.computeBoneTexture(),Fn.setValue(T,"boneTexture",rr.boneTexture,Ne))}z.isBatchedMesh&&(Fn.setOptional(T,z,"batchingTexture"),Fn.setValue(T,"batchingTexture",z._matricesTexture,Ne),Fn.setOptional(T,z,"batchingIdTexture"),Fn.setValue(T,"batchingIdTexture",z._indirectTexture,Ne),Fn.setOptional(T,z,"batchingColorTexture"),z._colorsTexture!==null&&Fn.setValue(T,"batchingColorTexture",z._colorsTexture,Ne));let Jr=K.morphAttributes;if((Jr.position!==void 0||Jr.normal!==void 0||Jr.color!==void 0)&&qe.update(z,K,Ir),(Fr||ct.receiveShadow!==z.receiveShadow)&&(ct.receiveShadow=z.receiveShadow,Fn.setValue(T,"receiveShadow",z.receiveShadow)),X.isMeshGouraudMaterial&&X.envMap!==null&&(Qr.envMap.value=Ke,Qr.flipEnvMap.value=Ke.isCubeTexture&&Ke.isRenderTargetTexture===!1?-1:1),X.isMeshStandardMaterial&&X.envMap===null&&V.environment!==null&&(Qr.envMapIntensity.value=V.environmentIntensity),Fr&&(Fn.setValue(T,"toneMappingExposure",w.toneMappingExposure),ct.needsLights&&u5(Qr,Hf),Se&&X.fog===!0&&te.refreshFogUniforms(Qr,Se),te.refreshMaterialUniforms(Qr,X,$,Y,g.state.transmissionRenderTarget[D.id]),lf.upload(T,LP(ct),Qr,Ne)),X.isShaderMaterial&&X.uniformsNeedUpdate===!0&&(lf.upload(T,LP(ct),Qr,Ne),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&Fn.setValue(T,"center",z.center),Fn.setValue(T,"modelViewMatrix",z.modelViewMatrix),Fn.setValue(T,"normalMatrix",z.normalMatrix),Fn.setValue(T,"modelMatrix",z.matrixWorld),X.isShaderMaterial||X.isRawShaderMaterial){let rr=X.uniformsGroups;for(let Cr=0,oE=rr.length;Cr<oE;Cr++){let Zl=rr[Cr];O.update(Zl,Ir),O.bind(Zl,Ir)}}return Ir}function u5(D,V){D.ambientLightColor.needsUpdate=V,D.lightProbe.needsUpdate=V,D.directionalLights.needsUpdate=V,D.directionalLightShadows.needsUpdate=V,D.pointLights.needsUpdate=V,D.pointLightShadows.needsUpdate=V,D.spotLights.needsUpdate=V,D.spotLightShadows.needsUpdate=V,D.rectAreaLights.needsUpdate=V,D.hemisphereLights.needsUpdate=V}function h5(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(D,V,K){let X=ge.get(D);X.__autoAllocateDepthBuffer=D.resolveDepthBuffer===!1,X.__autoAllocateDepthBuffer===!1&&(X.__useRenderToTexture=!1),ge.get(D.texture).__webglTexture=V,ge.get(D.depthTexture).__webglTexture=X.__autoAllocateDepthBuffer?void 0:K,X.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(D,V){let K=ge.get(D);K.__webglFramebuffer=V,K.__useDefaultFramebuffer=V===void 0};let f5=T.createFramebuffer();this.setRenderTarget=function(D,V=0,K=0){M=D,b=V,_=K;let X=!0,z=null,Se=!1,Oe=!1;if(D){let Ke=ge.get(D);if(Ke.__useDefaultFramebuffer!==void 0)J.bindFramebuffer(T.FRAMEBUFFER,null),X=!1;else if(Ke.__webglFramebuffer===void 0)Ne.setupRenderTarget(D);else if(Ke.__hasExternalTextures)Ne.rebindTextures(D,ge.get(D.texture).__webglTexture,ge.get(D.depthTexture).__webglTexture);else if(D.depthBuffer){let at=D.depthTexture;if(Ke.__boundDepthTexture!==at){if(at!==null&&ge.has(at)&&(D.width!==at.image.width||D.height!==at.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ne.setupDepthRenderbuffer(D)}}let _t=D.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(Oe=!0);let Et=ge.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(Et[V])?z=Et[V][K]:z=Et[V],Se=!0):D.samples>0&&Ne.useMultisampledRTT(D)===!1?z=ge.get(D).__webglMultisampledFramebuffer:Array.isArray(Et)?z=Et[K]:z=Et,I.copy(D.viewport),N.copy(D.scissor),B=D.scissorTest}else I.copy(ie).multiplyScalar($).floor(),N.copy(Ge).multiplyScalar($).floor(),B=Xe;if(K!==0&&(z=f5),J.bindFramebuffer(T.FRAMEBUFFER,z)&&X&&J.drawBuffers(D,z),J.viewport(I),J.scissor(N),J.setScissorTest(B),Se){let Ke=ge.get(D.texture);T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+V,Ke.__webglTexture,K)}else if(Oe){let Ke=ge.get(D.texture),_t=V;T.framebufferTextureLayer(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,Ke.__webglTexture,K,_t)}else if(D!==null&&K!==0){let Ke=ge.get(D.texture);T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,Ke.__webglTexture,K)}x=-1},this.readRenderTargetPixels=function(D,V,K,X,z,Se,Oe,nt=0){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ke=ge.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ke=Ke[Oe]),Ke){J.bindFramebuffer(T.FRAMEBUFFER,Ke);try{let _t=D.textures[nt],Et=_t.format,at=_t.type;if(!fe.textureFormatReadable(Et)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!fe.textureTypeReadable(at)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}V>=0&&V<=D.width-X&&K>=0&&K<=D.height-z&&(D.textures.length>1&&T.readBuffer(T.COLOR_ATTACHMENT0+nt),T.readPixels(V,K,X,z,Ae.convert(Et),Ae.convert(at),Se))}finally{let _t=M!==null?ge.get(M).__webglFramebuffer:null;J.bindFramebuffer(T.FRAMEBUFFER,_t)}}},this.readRenderTargetPixelsAsync=function(D,V,K,X,z,Se,Oe,nt=0){return oi(this,null,function*(){if(!(D&&D.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ke=ge.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ke=Ke[Oe]),Ke)if(V>=0&&V<=D.width-X&&K>=0&&K<=D.height-z){J.bindFramebuffer(T.FRAMEBUFFER,Ke);let _t=D.textures[nt],Et=_t.format,at=_t.type;if(!fe.textureFormatReadable(Et))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!fe.textureTypeReadable(at))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let Xt=T.createBuffer();T.bindBuffer(T.PIXEL_PACK_BUFFER,Xt),T.bufferData(T.PIXEL_PACK_BUFFER,Se.byteLength,T.STREAM_READ),D.textures.length>1&&T.readBuffer(T.COLOR_ATTACHMENT0+nt),T.readPixels(V,K,X,z,Ae.convert(Et),Ae.convert(at),0);let gn=M!==null?ge.get(M).__webglFramebuffer:null;J.bindFramebuffer(T.FRAMEBUFFER,gn);let jn=T.fenceSync(T.SYNC_GPU_COMMANDS_COMPLETE,0);return T.flush(),yield AV(T,jn,4),T.bindBuffer(T.PIXEL_PACK_BUFFER,Xt),T.getBufferSubData(T.PIXEL_PACK_BUFFER,0,Se),T.deleteBuffer(Xt),T.deleteSync(jn),Se}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(D,V=null,K=0){let X=Math.pow(2,-K),z=Math.floor(D.image.width*X),Se=Math.floor(D.image.height*X),Oe=V!==null?V.x:0,nt=V!==null?V.y:0;Ne.setTexture2D(D,0),T.copyTexSubImage2D(T.TEXTURE_2D,K,0,0,Oe,nt,z,Se),J.unbindTexture()};let p5=T.createFramebuffer(),g5=T.createFramebuffer();this.copyTextureToTexture=function(D,V,K=null,X=null,z=0,Se=null){Se===null&&(z!==0?(od("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Se=z,z=0):Se=0);let Oe,nt,Ke,_t,Et,at,Xt,gn,jn,Dn=D.isCompressedTexture?D.mipmaps[Se]:D.image;if(K!==null)Oe=K.max.x-K.min.x,nt=K.max.y-K.min.y,Ke=K.isBox3?K.max.z-K.min.z:1,_t=K.min.x,Et=K.min.y,at=K.isBox3?K.min.z:0;else{let Jr=Math.pow(2,-z);Oe=Math.floor(Dn.width*Jr),nt=Math.floor(Dn.height*Jr),D.isDataArrayTexture?Ke=Dn.depth:D.isData3DTexture?Ke=Math.floor(Dn.depth*Jr):Ke=1,_t=0,Et=0,at=0}X!==null?(Xt=X.x,gn=X.y,jn=X.z):(Xt=0,gn=0,jn=0);let yn=Ae.convert(V.format),ct=Ae.convert(V.type),Ln;V.isData3DTexture?(Ne.setTexture3D(V,0),Ln=T.TEXTURE_3D):V.isDataArrayTexture||V.isCompressedArrayTexture?(Ne.setTexture2DArray(V,0),Ln=T.TEXTURE_2D_ARRAY):(Ne.setTexture2D(V,0),Ln=T.TEXTURE_2D),T.pixelStorei(T.UNPACK_FLIP_Y_WEBGL,V.flipY),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),T.pixelStorei(T.UNPACK_ALIGNMENT,V.unpackAlignment);let nn=T.getParameter(T.UNPACK_ROW_LENGTH),Ir=T.getParameter(T.UNPACK_IMAGE_HEIGHT),Xd=T.getParameter(T.UNPACK_SKIP_PIXELS),Fr=T.getParameter(T.UNPACK_SKIP_ROWS),Hf=T.getParameter(T.UNPACK_SKIP_IMAGES);T.pixelStorei(T.UNPACK_ROW_LENGTH,Dn.width),T.pixelStorei(T.UNPACK_IMAGE_HEIGHT,Dn.height),T.pixelStorei(T.UNPACK_SKIP_PIXELS,_t),T.pixelStorei(T.UNPACK_SKIP_ROWS,Et),T.pixelStorei(T.UNPACK_SKIP_IMAGES,at);let Fn=D.isDataArrayTexture||D.isData3DTexture,Qr=V.isDataArrayTexture||V.isData3DTexture;if(D.isDepthTexture){let Jr=ge.get(D),rr=ge.get(V),Cr=ge.get(Jr.__renderTarget),oE=ge.get(rr.__renderTarget);J.bindFramebuffer(T.READ_FRAMEBUFFER,Cr.__webglFramebuffer),J.bindFramebuffer(T.DRAW_FRAMEBUFFER,oE.__webglFramebuffer);for(let Zl=0;Zl<Ke;Zl++)Fn&&(T.framebufferTextureLayer(T.READ_FRAMEBUFFER,T.COLOR_ATTACHMENT0,ge.get(D).__webglTexture,z,at+Zl),T.framebufferTextureLayer(T.DRAW_FRAMEBUFFER,T.COLOR_ATTACHMENT0,ge.get(V).__webglTexture,Se,jn+Zl)),T.blitFramebuffer(_t,Et,Oe,nt,Xt,gn,Oe,nt,T.DEPTH_BUFFER_BIT,T.NEAREST);J.bindFramebuffer(T.READ_FRAMEBUFFER,null),J.bindFramebuffer(T.DRAW_FRAMEBUFFER,null)}else if(z!==0||D.isRenderTargetTexture||ge.has(D)){let Jr=ge.get(D),rr=ge.get(V);J.bindFramebuffer(T.READ_FRAMEBUFFER,p5),J.bindFramebuffer(T.DRAW_FRAMEBUFFER,g5);for(let Cr=0;Cr<Ke;Cr++)Fn?T.framebufferTextureLayer(T.READ_FRAMEBUFFER,T.COLOR_ATTACHMENT0,Jr.__webglTexture,z,at+Cr):T.framebufferTexture2D(T.READ_FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,Jr.__webglTexture,z),Qr?T.framebufferTextureLayer(T.DRAW_FRAMEBUFFER,T.COLOR_ATTACHMENT0,rr.__webglTexture,Se,jn+Cr):T.framebufferTexture2D(T.DRAW_FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,rr.__webglTexture,Se),z!==0?T.blitFramebuffer(_t,Et,Oe,nt,Xt,gn,Oe,nt,T.COLOR_BUFFER_BIT,T.NEAREST):Qr?T.copyTexSubImage3D(Ln,Se,Xt,gn,jn+Cr,_t,Et,Oe,nt):T.copyTexSubImage2D(Ln,Se,Xt,gn,_t,Et,Oe,nt);J.bindFramebuffer(T.READ_FRAMEBUFFER,null),J.bindFramebuffer(T.DRAW_FRAMEBUFFER,null)}else Qr?D.isDataTexture||D.isData3DTexture?T.texSubImage3D(Ln,Se,Xt,gn,jn,Oe,nt,Ke,yn,ct,Dn.data):V.isCompressedArrayTexture?T.compressedTexSubImage3D(Ln,Se,Xt,gn,jn,Oe,nt,Ke,yn,Dn.data):T.texSubImage3D(Ln,Se,Xt,gn,jn,Oe,nt,Ke,yn,ct,Dn):D.isDataTexture?T.texSubImage2D(T.TEXTURE_2D,Se,Xt,gn,Oe,nt,yn,ct,Dn.data):D.isCompressedTexture?T.compressedTexSubImage2D(T.TEXTURE_2D,Se,Xt,gn,Dn.width,Dn.height,yn,Dn.data):T.texSubImage2D(T.TEXTURE_2D,Se,Xt,gn,Oe,nt,yn,ct,Dn);T.pixelStorei(T.UNPACK_ROW_LENGTH,nn),T.pixelStorei(T.UNPACK_IMAGE_HEIGHT,Ir),T.pixelStorei(T.UNPACK_SKIP_PIXELS,Xd),T.pixelStorei(T.UNPACK_SKIP_ROWS,Fr),T.pixelStorei(T.UNPACK_SKIP_IMAGES,Hf),Se===0&&V.generateMipmaps&&T.generateMipmap(Ln),J.unbindTexture()},this.copyTextureToTexture3D=function(D,V,K=null,X=null,z=0){return od('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(D,V,K,X,z)},this.initRenderTarget=function(D){ge.get(D).__webglFramebuffer===void 0&&Ne.setupRenderTarget(D)},this.initTexture=function(D){D.isCubeTexture?Ne.setTextureCube(D,0):D.isData3DTexture?Ne.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?Ne.setTexture2DArray(D,0):Ne.setTexture2D(D,0),J.unbindTexture()},this.resetState=function(){b=0,_=0,M=null,J.reset(),Tt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let n=this.getContext();n.drawingBufferColorSpace=Zt._getDrawingBufferColorSpace(e),n.unpackColorSpace=Zt._getUnpackColorSpace()}};function AA(t,e,n){!e&&rM(t);let i=e??A(xt);return n?xi(i,n):i}var NA="__ngt_renderer__",Dd="__ngt_renderer_canvas_content__",X_="__ngt_renderer_portal_content__",v4="__ngt_renderer_args__",y4="__ngt_renderer_parent__",Nl="__ngt_renderer_add_comment__",J_="__ngt_renderer_set_parent_comment__",S4="__ngt_get_node_attribute__",Rd="__ngt_dom_parent__",C4="__ngt_delegate_renderer_destroy_node_patched__",one="__ngt_html__",sne=["added","removed","childadded","childremoved","change","disposed"],mn={obj:t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function",material:t=>!!t&&t.isMaterial,geometry:t=>!!t&&t.isBufferGeometry,orthographicCamera:t=>!!t&&t.isOrthographicCamera,perspectiveCamera:t=>!!t&&t.isPerspectiveCamera,camera:t=>!!t&&t.isCamera,renderer:t=>!!t&&typeof t=="object"&&"render"in t&&typeof t.render=="function",scene:t=>!!t&&t.isScene,ref:t=>!!t&&typeof t=="object"&&"nativeElement"in t,instance:t=>!!t&&!!t.__ngt__,object3D:t=>!!t&&t.isObject3D,three:(t,e)=>!!t&&t[e],colorRepresentation:t=>t!=null&&(typeof t=="string"||typeof t=="number"||mn.three(t,"isColor")),colorSpaceExist:t=>"colorSpace"in t||"outputColorSpace"in t,equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(typeof t=="string"||typeof t=="number")return t===e;let o=mn.obj(t);if(o&&i==="reference")return t===e;let s=Array.isArray(t);if(s&&n==="reference")return t===e;if((s||o)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;for(a in r?e:t)if(t[a]!==e[a])return!1;if(a===void 0){if(s&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}},x4=(()=>{let e=class e{get commentNode(){return this.vcr.element.nativeElement}constructor(){this.vcr=A(mi),this.template=A(Nr),this.injector=A(xt),this.injected=!1,this.injectedValue=null,cs(()=>{if(this.shouldSkipRender())return;let i=this.linkedValue();mn.equ(i,this.injectedValue)||(this.injected=!1,this.injectedValue=i,this.createView())}),A(Li).onDestroy(()=>{this.view?.destroy()})}get value(){return this.validate()?(this.injected=!0,this.injectedValue):null}beforeCreateView(){}createView(){this.view&&!this.view.destroyed&&this.view.destroy(),this.beforeCreateView(),this.view=this.vcr.createEmbeddedView(this.template),this.view.detectChanges()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=wt({type:e});let t=e;return t})(),ane=(()=>{let e=class e extends x4{constructor(){super(),this.args=ao.required(),this.linkedValue=Tu(this.args),this.shouldSkipRender=Tn(()=>{let r=this.args();return r==null||!Array.isArray(r)||r.length===1&&r[0]===null});let i=this.commentNode;i.data=v4,i[v4]=!0,i[Nl]&&(i[Nl]("args",this.injector),delete i[Nl])}validate(){return!this.injected&&!!this.injectedValue?.length}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=wt({type:e,selectors:[["ng-template","args",""]],inputs:{args:[1,"args"]},features:[Ri]});let t=e;return t})(),lne=new Map;var cne=new Set,dne=new Set,une=new Set;function IA(t,e){if(t.size)for(let{callback:n}of t.values())n(e)}function Hv(t,e){switch(t){case"before":return IA(cne,e);case"after":return IA(dne,e);case"tail":return IA(une,e)}}function FA(t,e,n){let i=e.snapshot,r=i.clock.getDelta();i.frameloop==="never"&&typeof t=="number"&&(r=t-i.clock.elapsedTime,i.clock.oldTime=i.clock.elapsedTime,i.clock.elapsedTime=t);let o=i.internal.subscribers;for(let s=0;s<o.length;s++){let a=o[s];a.callback(ae(k({},a.store.snapshot),{delta:r,frame:n}))}return!i.internal.priority&&i.gl.render&&i.gl.render(i.scene,i.camera),i.internal.frames=Math.max(0,i.internal.frames-1),i.frameloop==="always"?1:i.internal.frames}function hne(t){let e=!1,n,i,r=!1;function o(l){i=requestAnimationFrame(o),e=!0,n=0,Hv("before",l),r=!0;for(let c of t.values()){let d=c.snapshot;d.internal.active&&(d.frameloop==="always"||d.internal.frames>0)&&!d.gl.xr?.isPresenting&&(n+=FA(l,c))}if(r=!1,Hv("after",l),n===0)return Hv("tail",l),e=!1,cancelAnimationFrame(i)}function s(l,c=1){let d=l?.snapshot;if(!d)return t.forEach(u=>s(u,c));d.gl.xr?.isPresenting||!d.internal.active||d.frameloop==="never"||(c>1?d.internal.frames=Math.min(60,d.internal.frames+c):r?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function a(l,c=!0,d,u){if(c&&Hv("before",l),d)FA(l,d,u);else for(let h of t.values())FA(l,h);c&&Hv("after",l)}return{loop:o,invalidate:s,advance:a}}var APe=new se("NGT_LOOP",{factory:()=>hne(lne)});var E4=Symbol("STATE_SOURCE");function fne(t,...e){t[E4].update(n=>e.reduce((i,r)=>k(k({},i),typeof r=="function"?r(i):r),n))}function M4(t){let e=en(()=>t());return gne(e)?new Proxy(t,{get(n,i){return i in e?(Zs(n[i])||Object.defineProperty(n,i,{value:Tn(()=>n()[i]),configurable:!0}),M4(n[i])):n[i]}}):t}var pne=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function gne(t){if(t===null||typeof t!="object"||mne(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(pne.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function mne(t){return typeof t?.[Symbol.iterator]=="function"}function vne(t){let e=It(t),n=M4(e.asReadonly());return Object.defineProperties(n,{[E4]:{value:e},update:{value:fne.bind(null,n)},snapshot:{get:()=>en(e)}}),n}function yne(t){t!==null&&mn.obj(t)&&"needsUpdate"in t&&(t.needsUpdate=!0,"uniformsNeedUpdate"in t&&(t.uniformsNeedUpdate=!0))}function OA(t){mn.three(t,"isCamera")&&((mn.three(t,"isPerspectiveCamera")||mn.three(t,"isOrthographicCamera"))&&t.updateProjectionMatrix(),t.updateMatrixWorld()),!mn.three(t,"isCubeTexture")&&yne(t)}function Un(t){if(t)return t.__ngt__||void 0}function Uv(t){let e=Un(t)?.store;if(e){for(;e.snapshot.previousRoot;)e=e.snapshot.previousRoot;e.snapshot.internal.frames===0&&e.snapshot.invalidate()}OA(t)}function PA(t,e,n){let i=t;if(n?.type==="ngt-primitive"||!i.__ngt__){let r=n||{},{hierarchyStore:o=vne({parent:null,objects:[],nonObjects:[],geometryStamp:Date.now()}),store:s=null}=r,a=zf(r,["hierarchyStore","store"]),l=o.nonObjects,c=o.geometryStamp,d=Tn(()=>{let[u]=[l(),c()];return u});i.__ngt_id__=crypto.randomUUID(),i.__ngt__=k({previousAttach:null,type:e,eventCount:0,handlers:{},hierarchyStore:o,object:i,parent:o.parent,objects:o.objects,nonObjects:d,add(u,h){let f=i.__ngt__.hierarchyStore.snapshot[h],p=f.findIndex(v=>u===v||!!u.uuid&&!!v.uuid&&u.uuid===v.uuid);p>-1?(f.splice(p,1,u),i.__ngt__.hierarchyStore.update({[h]:f})):i.__ngt__.hierarchyStore.update(v=>({[h]:[...v[h],u]})),LA(i.__ngt__.hierarchyStore.snapshot.parent,h)},remove(u,h){i.__ngt__.hierarchyStore.update(f=>({[h]:f[h].filter(p=>p!==u)})),LA(i.__ngt__.hierarchyStore.snapshot.parent,h)},setParent(u){i.__ngt__.hierarchyStore.update({parent:u})},updateGeometryStamp(){i.__ngt__.hierarchyStore.update({geometryStamp:Date.now()})},store:s},a)}return Object.defineProperties(i.__ngt__,{setPointerEvent:{value:(o,s)=>{let a=Un(i);a.handlers||(a.handlers={});let l=a.handlers[o],c=d=>{l&&l(d),s(d)};return Object.assign(a.handlers,{[o]:c}),a.eventCount+=1,()=>{let d=Un(i);d&&(d.handlers&&delete d.handlers[o],d.eventCount-=1)}},configurable:!0},addInteraction:{value:o=>{if(!o||Un(i).eventCount<1||!("raycast"in i)||!i.raycast)return;let a=o;for(;a.snapshot.previousRoot;)a=a.snapshot.previousRoot;a.snapshot.internal&&a.snapshot.internal.interaction.findIndex(d=>d.uuid===i.uuid)<0&&a.snapshot.internal.interaction.push(i)},configurable:!0},removeInteraction:{value:o=>{if(!o)return;let s=o;for(;s.snapshot.previousRoot;)s=s.snapshot.previousRoot;if(s.snapshot.internal){let a=s.snapshot.internal.interaction,l=a.findIndex(c=>c.uuid===i.uuid);l>=0&&a.splice(l,1)}},configurable:!0}}),i}var zv=new Map;function LA(t,e){if(!t)return;let n=Un(t);if(!n)return;let i=t.__ngt_id__||t.uuid;if(!i)return;let r=n.store?.snapshot.maxNotificationSkipCount||5,o=zv.get(i);if(!o||o.lastType!==e||o.skipCount>r){zv.set(i,{skipCount:0,lastType:e}),zv.size===1&&queueMicrotask(()=>zv.clear());let{parent:s}=n.hierarchyStore.snapshot;n.hierarchyStore.update({[e]:(n.hierarchyStore.snapshot[e]||[]).slice()}),LA(s,e);return}zv.set(i,ae(k({},o),{skipCount:o.skipCount+1}))}function Cne(t,e){let n=[];for(let i in e){let r=e[i],o=i;mn.colorSpaceExist(t)&&(i==="encoding"?o="colorSpace":i==="outputEncoding"&&(o="outputColorSpace")),!mn.equ(r,t[o])&&n.push([i,r])}return n}var Z_="__ngt_apply_props__",bne=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"];function wne(t,e){let n=t[e];if(!e.includes("."))return{root:t,targetKey:e,targetProp:n};n=t;for(let i of e.split("."))e=i,t=n,n=n[e];return{root:t,targetKey:e,targetProp:n}}function Gv(t,e){if(!Object.keys(e).length)return t;let n=Un(t),i=n?.store?.snapshot??t[Z_]?.snapshot??{},r=Cne(t,e);for(let a=0;a<r.length;a++){let[l,c]=r[a];if(c===void 0)continue;let{root:d,targetKey:u,targetProp:h}=wne(t,l);if(d!==t)return Gv(d,{[u]:c});h instanceof Cs&&c instanceof Cs?h.mask=c.mask:mn.three(h,"isColor")&&mn.colorRepresentation(c)?h.set(c):h&&typeof h.set=="function"&&typeof h.copy=="function"&&c?.constructor&&h.constructor===c.constructor?mn.three(h,"isBufferGeometry")&&mn.three(c,"isBufferGeometry")?Object.assign(d,{[u]:c}):h.copy(c):h&&typeof h.set=="function"&&Array.isArray(c)?typeof h.fromArray=="function"?h.fromArray(c):h.set(...c):h&&typeof h.set=="function"&&typeof c!="object"?!mn.three(h,"isColor")&&typeof h.setScalar=="function"&&typeof c=="number"?h.setScalar(c):h.set(c):(Object.assign(d,{[u]:c}),i&&!i.linear&&bne.includes(u)&&d[u]?.isTexture&&d[u].format===Ii&&d[u].type===Mr&&(d[u].colorSpace=Vi)),OA(d[u]),OA(h),Uv(t)}let o=n?.eventCount,s=n?.hierarchyStore?.snapshot.parent;if(s&&i.internal&&t.raycast&&o!==n?.eventCount){let a=i.internal.interaction.indexOf(t);a>-1&&i.internal.interaction.splice(a,1),n?.eventCount&&i.internal.interaction.push(t)}return s&&n?.onUpdate&&r.length&&n.onUpdate(t),t[Z_]&&delete t[Z_],t}var _ne={};var Sne=new se("NGT_CATALOGUE",{factory:()=>_ne});function xne(){return A(Sne)}function Q_(t){return!!t&&typeof t=="object"&&NA in t}function Ms(t,e,n){let i=[t,!1,void 0,void 0,void 0,void 0,[]],r=Object.assign(e,{[NA]:i});if(r.ownerDocument||(r.ownerDocument=n),!("getAttribute"in r)||typeof r.getAttribute!="function"){let o=s=>r[s];o[S4]=!0,Object.defineProperty(r,"getAttribute",{value:o,configurable:!0})}return r}function Y_(t,e){t.__ngt_renderer__[5]||(t.__ngt_renderer__[5]=e)}function b4(t,e){t.__ngt_renderer__[6].includes(e)||t.__ngt_renderer__[6].push(e)}function R4(t){let e={nodes:{},materials:{},meshes:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),"material"in n&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material),mn.three(n,"isMesh")&&!e.meshes[n.name]&&(e.meshes[n.name]=n)}),e}function Ene(t,e,n,i){let r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function Mne(t,e){let{internal:n}=t.snapshot;n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{Ene(n.capturedMap,e,i,r)})}function eS(t,e,n=[],i=!1){let[r,...o]=n;r&&(o.length===0?i?Gv(t,{[r]:e}):t[r]=e:(Dne(t,r,i),eS(t[r],e,o,i)))}function Rne(t,e,n){let i=Un(e);i&&(Array.isArray(n)?eS(t,i.previousAttach,n,i.type==="ngt-value"):i.previousAttach?.())}function Dne(t,e,n=!1){if((!Object.hasOwn(t,e)&&Reflect&&Reflect.has&&!Reflect.has(t,e)||t[e]===void 0)&&(t[e]={}),n){if(Un(t[e]))return;let r=Un(t);if(!r)return;Object.assign(t[e],{[Z_]:r.store})}}function Tne(t){if(!t)return t;let e="",n=!0;for(let i=0;i<t.length;i++){let r=t[i];if(r==="-"){n=!0;continue}e+=n?r.toUpperCase():r,n=!1}return e}function D4(t,e){let n=Un(t),i=Un(e);if(!(!n||!i)&&(!n.store||n.store!==i.store||n.store===i.store.snapshot.previousRoot)){n.store=i.store,n.addInteraction?.(i.store);let r=[...n.objects?en(n.objects):[],...n.nonObjects?en(n.nonObjects):[]];for(let o of r)D4(o,t)}}function kA(t,e){let n=Un(t),i=Un(e);if(!n||!i)throw new Error("[NGT] THREE instances need to be prepared with local state.");let r=!1;if(D4(e,t),i.attach){let o=i.attach;if(typeof o=="function"){let s;if(i.type==="ngt-value"){if(i.hierarchyStore.snapshot.parent!==t&&i.setParent(t),e.__ngt_renderer__[2]===void 0)return;s=o(t,e.__ngt_renderer__[2],i.store)}else s=o(t,e,i.store);s&&(i.previousAttach=s)}else{if(o[0]==="none"){Uv(e);return}if(o[0]==="material"&&o[1]&&typeof Number(o[1])=="number"&&mn.three(e,"isMaterial")&&!Array.isArray(t.material)&&(t.material=[]),i.type==="ngt-value"){if(i.hierarchyStore.snapshot.parent!==t&&i.setParent(t),e.__ngt_renderer__[2]===void 0)return;i.previousAttach=o.reduce((s,a)=>s[a],t),eS(t,e.__ngt_renderer__[2],o,!0)}else i.previousAttach=o.reduce((s,a)=>s[a],t),eS(t,e,o)}}else mn.three(t,"isObject3D")&&mn.three(e,"isObject3D")&&(t.add(e),r=!0,i.addInteraction?.(i.store||n.store));n.add&&n.add(e,r?"objects":"nonObjects"),i.parent&&en(i.parent)!==t&&i.setParent(t),i.onAttach&&i.onAttach({parent:t,node:e}),Uv(e),Uv(t)}function Ane(t,e,n){let i=Un(e),r=Un(t);if(r?.setParent(null),i?.remove?.(t,"objects"),i?.remove?.(t,"nonObjects"),r?.attach)Rne(e,t,r.attach);else if(mn.three(e,"isObject3D")&&mn.three(t,"isObject3D")){e.remove(t);let s=r?.store||i?.store;r?.removeInteraction?.(s),s&&Mne(s,t)}!(r?.type&&r.type!=="ngt-primitive")&&t.dispose&&!mn.three(t,"isScene")&&queueMicrotask(()=>t.dispose()),Uv(e)}function BA(t,e){let n=t.__ngt_renderer__;if(!n||n[1])return;for(let r of n[6].slice())e?.(t,r),BA(r,e);n[5]=void 0,n[6].length=0;let i=Un(t);if(i){let r=i;i.removeInteraction?.(i.store),delete r.onAttach,delete r.onUpdate,delete r.object,delete r.objects,delete r.nonObjects,delete r.parent,delete r.add,delete r.remove,delete r.updateGeometryStamp,delete r.setParent,delete r.store,delete r.handlers,delete r.hierarchyStore,delete r.previousAttach,delete r.setPointerEvent,delete r.addInteraction,delete r.removeInteraction,i.type!=="ngt-primitive"&&delete t.__ngt__}n[4]=void 0,n[0]==="comment"&&(delete t[Nl],delete t[J_],delete t[Dd],delete t[X_],delete t[Rd]),"getAttribute"in t&&typeof t.getAttribute=="function"&&t.getAttribute[S4]&&delete t.getAttribute,n[1]=!0}var VA=new se("NGT_RENDERER_OPTIONS"),T4=(()=>{let e=class e{constructor(i){this.delegateRendererFactory=i,this.catalogue=xne(),this.document=A(lt),this.options=A(VA,{optional:!0})||{},this.rendererMap=new Map}createRenderer(i,r){let o=this.delegateRendererFactory.createRenderer(i,r);if(!r)return o;let s=this.rendererMap.get(r.id);if(s)return s instanceof tS&&(s.count+=1,s.delegateRenderer!==o&&(s.delegateRenderer=o)),s;if(i&&!Q_(i)&&Ms("platform",i,this.document),Reflect.get(r,"type")?.[one]){this.rendererMap.set(r.id,o);let a=o.destroyNode?.bind(o);return(!a||!(C4 in a))&&(o.destroyNode=l=>{a?.(l),l===i&&BA(l,null)},Object.assign(o.destroyNode,{[C4]:!0})),o}return this.rendererMap.set(r.id,s=new tS(o,this.catalogue,this.document,this.options)),s}};e.\u0275fac=function(r){return new(r||e)(je(qn))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),tS=class{constructor(e,n,i,r,o=1){this.delegateRenderer=e,this.catalogue=n,this.document=i,this.options=r,this.count=o,this.argsInjectors=[],this.parentInjectors=[],this.destroyNode=s=>{BA(s,this.removeChild.bind(this))},this.addClass=this.delegateRenderer.addClass.bind(this.delegateRenderer),this.removeClass=this.delegateRenderer.removeClass.bind(this.delegateRenderer),this.setStyle=this.delegateRenderer.setStyle.bind(this.delegateRenderer),this.removeStyle=this.delegateRenderer.removeStyle.bind(this.delegateRenderer),this.selectRootElement=this.delegateRenderer.selectRootElement.bind(this.delegateRenderer),this.nextSibling=this.delegateRenderer.nextSibling.bind(this.delegateRenderer),this.setValue=this.delegateRenderer.setValue.bind(this.delegateRenderer),this.options.verbose||(this.options.verbose=!1)}get data(){return ae(k({},this.delegateRenderer.data),{__ngt_renderer__:!0})}destroy(){if(this.count>1){this.count-=1;return}this.count=0,this.argsInjectors=[],this.parentInjectors=[]}createElement(e,n){let i=this.delegateRenderer.createElement(e,n);if(e==="ngt-portal")return Ms("portal",i,this.document);if(e==="ngt-value")return Ms("three",PA(i,"ngt-value"),this.document);let[r,o]=[this.getNgtDirective(ane,this.argsInjectors)?.value||[],this.getNgtDirective(Fne,this.parentInjectors)?.value];if(e==="ngt-primitive"){if(!r[0])throw new Error("[NGT] ngt-primitive without args is invalid");let l=r[0],c=Un(l);(!c||c.type!=="ngt-primitive")&&PA(l,"ngt-primitive",c);let d=Ms("three",l,this.document);return o&&(d.__ngt_renderer__[5]=o),d}if(!e.startsWith("ngt-"))return Ms("platform",i,this.document);let s=Tne(e.startsWith("ngt-")?e.slice(4):e),a=this.catalogue[s];if(!a&&s in K_){let l=K_[s];typeof l=="function"&&(a=this.catalogue[s]=l)}if(a){let l=PA(new a(...r),e),c=Ms("three",l,this.document),d=Un(l);return mn.three(l,"isBufferGeometry")?d.attach=["geometry"]:mn.three(l,"isMaterial")&&(d.attach=["material"]),o&&(c.__ngt_renderer__[5]=o),c}return Ms("platform",i,this.document)}createComment(e){let n=this.delegateRenderer.createComment(e),i=Ms("comment",n,this.document);return Object.assign(i,{[Nl]:(r,o)=>{r==="args"?this.argsInjectors.push(o):r==="parent"&&(Object.assign(i,{[J_]:s=>{i.__ngt_renderer__[5]=s}}),this.parentInjectors.push(o)),i.__ngt_renderer__[4]=o}}),i}createText(e){let n=this.delegateRenderer.createText(e);return Ms("text",n,this.document)}appendChild(e,n,i,r){let o=i?this.delegateRenderer.insertBefore.bind(this.delegateRenderer,e,n,i,r):this.delegateRenderer.appendChild.bind(this.delegateRenderer,e,n),s=e.__ngt_renderer__,a=n.__ngt_renderer__;if(!s||!a)return this.options.verbose&&console.warn("[NGT dev mode] One of parent or child is not a renderer node.",{parent:e,newChild:n}),o();if(a[0]==="comment"){Y_(n,e),s[0]!=="three"&&o();return}if(s[0]==="platform"&&a[0]==="platform")return n[Rd]&&n[Rd]instanceof HTMLElement?this.delegateRenderer.appendChild(n[Rd],n):s[5]&&!a[5]?this.appendChild(s[5],n):o();if(s[0]==="three"&&a[0]==="three")return this.appendThreeRendererNodes(e,n);if(s[0]==="platform"&&a[0]==="three"){if(s[5])return b4(e,n),this.appendChild(s[5],n);let l=this.delegateRenderer.parentNode(e);if(l)return this.appendChild(l,n);this.setNodeRelationship(e,n);return}if(s[0]==="three"&&a[0]==="platform"){a[5]||Y_(n,e);for(let l of a[6])this.appendChild(e,l);for(let l of n.childNodes||[])!Q_(l)||l.__ngt_renderer__[0]!=="platform"||this.appendChild(e,l);return}return s[0]==="portal"&&a[0]==="three"?!a[5]&&s[3]?this.appendChild(s[3],n):void 0:s[0]==="platform"&&a[0]==="portal"?this.delegateRenderer.appendChild(e,n):o()}insertBefore(e,n,i,r){return i&&i[Dd]&&i instanceof Comment&&n instanceof Comment&&Object.assign(n,{[Dd]:i[Dd]}),e?this.appendChild(e,n,i,r):this.delegateRenderer.insertBefore(e,n,i,r)}removeChild(e,n,i){e===null&&(e=this.parentNode(n));let r=n.__ngt_renderer__;if(!r)try{return this.delegateRenderer.removeChild(e,n,i)}catch{return}if(r[5]=null,e==null){if(r[1])return;this.options.verbose&&console.warn("[NGT dev mode] parent is not found when remove child",{parent:e,oldChild:n});return}let o=e.__ngt_renderer__;if(!o)return this.delegateRenderer.removeChild(e,n,i);let s=o[6].indexOf(n);if(s>=0&&o[6].splice(s,1),o[0]==="three"&&r[0]==="three")return Ane(n,e,!0);if(o[0]==="platform"&&r[0]==="platform")return this.delegateRenderer.removeChild(e,n,i);if(!(o[0]==="three"&&r[0]==="platform")){if(o[0]==="platform"&&r[0]==="three"){let a=Un(n);if(!a)return;let l=a.parent?en(a.parent):null;return l?this.removeChild(l,n):void 0}return this.delegateRenderer.removeChild(e,n,i)}}parentNode(e){if(e&&(e[Dd]||e[X_])&&e instanceof Comment&&Q_(e)){let i=e[Dd]||e[X_];if(!i)return this.delegateRenderer.parentNode(e);let r=i.snapshot.scene;if(!r)return this.delegateRenderer.parentNode(e);if(!(NA in r)){let o=Ms("three",r,this.document);Y_(e,o)}if(e[X_]&&e[Rd]&&Q_(e[Rd])){let s=e[Rd].__ngt_renderer__;s[3]||(s[3]=r)}return r}return e.__ngt_renderer__?.[5]??this.delegateRenderer.parentNode(e)}removeAttribute(e,n,i){let r=e.__ngt_renderer__;if(!r||r[1])return this.delegateRenderer.removeAttribute(e,n,i);if(r[0]!=="three")return this.delegateRenderer.removeAttribute(e,n,i)}setAttribute(e,n,i,r){let o=e.__ngt_renderer__;if(!o)return this.delegateRenderer.setAttribute(e,n,i,r);if(o[1]){this.options.verbose&&console.warn("[NGT dev mode] setAttribute is invoked on destroyed renderer node.",{el:e,name:n,value:i});return}if(o[0]==="three"){if(n==="attach"){let a=i.split(".");if(a.length){let l=Un(e);l&&(l.attach=a)}return}let s=i;if(s===""||s==="true"||s==="false")s=s==="true"||s==="";else{let a=Number(s);isNaN(a)||(s=a)}n==="rawValue"?o[2]=s:Gv(e,{[n]:s});return}return this.delegateRenderer.setAttribute(e,n,i,r)}setProperty(e,n,i){let r=e.__ngt_renderer__;if(!r||r[1]){this.options.verbose&&console.warn("[NGT dev mode] setProperty is invoked on destroyed renderer node.",{el:e,name:n,value:i});return}if(r[0]==="three"){let o=Un(e);if(n==="parameters"){"raycast"in i&&i.raycast===null&&(i.raycast=()=>null),Gv(e,i),"geometry"in i&&mn.three(i.geometry,"isBufferGeometry")&&en(()=>{o?.updateGeometryStamp()});return}let s=o?.hierarchyStore.snapshot.parent||r[5];if(o?.type==="ngt-value"&&n==="rawValue"){r[2]=i,s&&en(()=>kA(s,e));return}if(n==="attach"){o&&(o.attach=Array.isArray(i)?i.map(a=>a.toString()):typeof i=="function"?i:typeof i=="string"?i.split("."):[i]),s&&en(()=>kA(s,e));return}n==="raycast"&&i===null&&(i=()=>null),Gv(e,{[n]:i}),o&&n==="geometry"&&mn.three(i,"isBufferGeometry")&&en(()=>{o.updateGeometryStamp()});return}return this.delegateRenderer.setProperty(e,n,i)}listen(e,n,i){if(typeof e=="string")return this.delegateRenderer.listen(e,n,i);let r=e.__ngt_renderer__;if(!r)return this.delegateRenderer.listen(e,n,i);if(r[1])return()=>{};if(r[0]==="three"){let o=Un(e);if(!o)return console.warn("[NGT] instance which has not been prepared cannot have events. Call `prepare()` manually if needed."),()=>{};if(n==="created")return i(e),()=>{};if(n==="attached"){o.onAttach=i;let a=o.parent&&en(o.parent);return a&&o.onAttach({parent:a,node:e}),()=>{o.onAttach=void 0}}if(n==="updated")return o.onUpdate=i,()=>{o.onUpdate=void 0};if(sne.includes(n)&&e instanceof fr)return n==="disposed"&&(n="dispose"),e.parent&&(n==="added"||n==="removed")&&i({type:n,target:e}),e.addEventListener(n,i),()=>{e.removeEventListener(n,i)};let s=o.setPointerEvent?.(n,i)||(()=>{});return o.store&&o.addInteraction?.(o.store),s}return this.delegateRenderer.listen(e,n,i)}appendThreeRendererNodes(e,n){if(e===n){this.options.verbose&&console.warn("[NGT dev mode] appending THREE.js parent and child but they are the same",{parent:e,child:n});return}if(Un(n)?.hierarchyStore.snapshot.parent){this.options.verbose&&console.warn("[NGT dev mode] appending THREE.js parent and child but child is already attached",{parent:e,child:n});return}this.setNodeRelationship(e,n),kA(e,n)}setNodeRelationship(e,n){Y_(n,e),b4(e,n)}getNgtDirective(e,n){let i,r=n.length-1;for(;r>=0;){let s=n[r].get(e,null);if(s&&typeof s=="object"&&s.validate()){i=s;break}r--}return i}};var A4=new se("NgtStore Token");function I4(t){return A(A4,t)}function Ine(t){return mn.ref(t)?t.nativeElement:t}var Fne=(()=>{let e=class e extends x4{constructor(){super(),this.parent=ao.required(),this.store=I4(),this._parent=Tn(()=>{let r=this.parent(),o=typeof r=="function"?r():r;if(!o)return null;let s=this.store.scene();return typeof o=="string"?s.getObjectByName(o):Ine(o)}),this.linkedValue=Tu(this._parent),this.shouldSkipRender=Tn(()=>!this._parent());let i=this.commentNode;i.data=y4,i[y4]=!0,i[Nl]&&(i[Nl]("parent",this.injector),delete i[Nl])}validate(){return!this.injected&&!!this.injectedValue}beforeCreateView(){let i=this.commentNode;i[J_]&&i[J_](this.injectedValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=wt({type:e,selectors:[["ng-template","parent",""]],inputs:{parent:[1,"parent"]},features:[Ri]});let t=e;return t})();var IPe=new se("NGT_HTML_DOM_ELEMENT");var Wv=new Map,w4=new WeakMap;function Pne(t){let e=[];return Array.isArray(t)?e=t:typeof t=="string"?e=[t]:e=Object.values(t),e.map(n=>n.includes("undefined")||n.includes("null")||!n?"":n)}function F4(t,e,{extensions:n,onLoad:i,onProgress:r}={}){return()=>{let o=Pne(e()),s=w4.get(t(o));return s||(s=new(t(o)),w4.set(t(o),s)),n&&n(s),o.map(a=>a===""?Promise.resolve(null):(Wv.has(a)||Wv.set(a,new Promise((l,c)=>{s.load(a,d=>{"scene"in d&&Object.assign(d,R4(d.scene)),i&&i(d),l(d)},r,d=>c(new Error(`[NGT] Could not load ${a}: ${d?.message}`)))})),Wv.get(a)))}}function iS(t,e,{extensions:n,onProgress:i,onLoad:r,injector:o}={}){return AA(iS,o,()=>{let s=It(null),a=F4(t,e,{extensions:n,onProgress:i,onLoad:r});return cs(()=>{let l=e(),c=a();Promise.all(c).then(d=>{s.update(()=>{if(Array.isArray(l))return d;if(typeof l=="string")return d[0];let u=Object.keys(l);return u.reduce((h,f)=>(h[f]=d[u.indexOf(f)],h),{})})})}),s.asReadonly()})}iS.preload=(t,e,n,i)=>{let r=F4(t,e,{extensions:n,onLoad:i})();r&&Promise.all(r)};iS.destroy=()=>{Wv.clear()};iS.clear=t=>{(Array.isArray(t)?t:[t]).forEach(n=>{Wv.delete(n)})};function kne(t){let e=[];return Array.isArray(t)?e=t:typeof t=="string"?e=[t]:e=Object.values(t),e.map(n=>n.includes("undefined")||n.includes("null")||!n?"":n)}var nS=new Map,_4=new WeakMap;function P4(t,e,n){let i=t(),r=e(i),o=kne(i),s=_4.get(r);return s||(s=new r,_4.set(r,s)),n&&n(s),{urls:i,normalizedUrls:o,loader:s}}function k4(t,e){return t.normalizedUrls.map(n=>{if(n==="")return Promise.resolve(null);let i=nS.get(n);if(i)return i;let r=new Promise((o,s)=>{t.loader.load(n,a=>{"scene"in a&&Object.assign(a,R4(a.scene)),o(a)},e,a=>s(new Error(`[NGT] Could not load ${n}: ${a?.message}`)))});return nS.set(n,r),r})}function rS(t,e,{extensions:n,onLoad:i,onProgress:r,injector:o}={}){return AA(rS,o,()=>wR({params:()=>P4(e,t,n),loader:a=>oi(null,[a],function*({params:s}){let l=yield Promise.all(k4(s,r)),c;if(Array.isArray(s.urls))c=l;else if(typeof s.urls=="string")c=l[0];else{let d=Object.keys(s.urls);c=d.reduce((u,h)=>(u[h]=l[d.indexOf(h)],u),{})}return i&&i(c),c})}))}rS.preload=(t,e,n)=>{let i=P4(()=>e,()=>t,n);Promise.all(k4(i))};rS.destroy=()=>{nS.clear()};rS.clear=t=>{(Array.isArray(t)?t:[t]).forEach(n=>{nS.delete(n)})};function HA(t){return(e,n,i)=>{if(typeof n>"u"||typeof n=="boolean"){i=!!n;let s=e;return Tn(()=>{let a=s();if(!(i&&a==null))return typeof a=="number"?new t().setScalar(a):Array.isArray(a)?new t(...a):a||new t},{equal:(a,l)=>!!a&&!!l&&a.equals(l)})}let r=e,o=n;return Tn(()=>{let s=r()[o];if(!(i&&s==null))return typeof s=="number"?new t().setScalar(s):Array.isArray(s)?new t(...s):s||new t},{equal:(s,a)=>!!s&&!!a&&s.equals(a)})}}var FPe=HA(ce),PPe=HA(P),kPe=HA(Qt);function O4(t={}){return kr([{provide:VA,useValue:t},{provide:qn,useFactory:e=>new T4(e),deps:[Iu]}])}var U4=new se("");function GA(t){return t==null||WA(t)===0}function WA(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var vS=new se(""),G4=new se(""),One=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sS=class{static min(e){return Lne(e)}static max(e){return Nne(e)}static required(e){return Bne(e)}static requiredTrue(e){return Vne(e)}static email(e){return Hne(e)}static minLength(e){return zne(e)}static maxLength(e){return Une(e)}static pattern(e){return Gne(e)}static nullValidator(e){return W4()}static compose(e){return X4(e)}static composeAsync(e){return Z4(e)}};function Lne(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Nne(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Bne(t){return GA(t.value)?{required:!0}:null}function Vne(t){return t.value===!0?null:{required:!0}}function Hne(t){return GA(t.value)||One.test(t.value)?null:{email:!0}}function zne(t){return e=>{let n=e.value?.length??WA(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function Une(t){return e=>{let n=e.value?.length??WA(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function Gne(t){if(!t)return W4;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(GA(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function W4(t){return null}function j4(t){return t!=null}function $4(t){return Pc(t)?En(t):t}function q4(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function K4(t,e){return e.map(n=>n(t))}function Wne(t){return!t.validate}function Y4(t){return t.map(e=>Wne(e)?e:n=>e.validate(n))}function X4(t){if(!t)return null;let e=t.filter(j4);return e.length==0?null:function(n){return q4(K4(n,e))}}function jA(t){return t!=null?X4(Y4(t)):null}function Z4(t){if(!t)return null;let e=t.filter(j4);return e.length==0?null:function(n){let i=K4(n,e).map($4);return lc(i).pipe(Ye(q4))}}function $A(t){return t!=null?Z4(Y4(t)):null}function L4(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Q4(t){return t._rawValidators}function J4(t){return t._rawAsyncValidators}function zA(t){return t?Array.isArray(t)?t:[t]:[]}function aS(t,e){return Array.isArray(t)?t.includes(e):t===e}function N4(t,e){let n=zA(e);return zA(t).forEach(r=>{aS(n,r)||n.push(r)}),n}function B4(t,e){return zA(e).filter(n=>!aS(t,n))}var lS=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$A(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},hf=class extends lS{name;get formDirective(){return null}get path(){return null}},cS=class extends lS{_parent=null;name=null;valueAccessor=null};var jne={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},lke=ae(k({},jne),{"[class.ng-submitted]":"isSubmitted"});var jv="VALID",oS="INVALID",df="PENDING",$v="DISABLED",Bl=class{},dS=class extends Bl{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Kv=class extends Bl{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Yv=class extends Bl{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},uf=class extends Bl{status;source;constructor(e,n){super(),this.status=e,this.source=n}},uS=class extends Bl{source;constructor(e){super(),this.source=e}},hS=class extends Bl{source;constructor(e){super(),this.source=e}};function eH(t){return(yS(t)?t.validators:t)||null}function $ne(t){return Array.isArray(t)?jA(t):t||null}function tH(t,e){return(yS(e)?e.asyncValidators:t)||null}function qne(t){return Array.isArray(t)?$A(t):t||null}function yS(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Kne(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new Ie(1e3,"");if(!i[n])throw new Ie(1001,"")}function Yne(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new Ie(1002,"")})}var fS=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return en(this.statusReactive)}set status(e){en(()=>this.statusReactive.set(e))}_status=Tn(()=>this.statusReactive());statusReactive=It(void 0);get valid(){return this.status===jv}get invalid(){return this.status===oS}get pending(){return this.status==df}get disabled(){return this.status===$v}get enabled(){return this.status!==$v}errors;get pristine(){return en(this.pristineReactive)}set pristine(e){en(()=>this.pristineReactive.set(e))}_pristine=Tn(()=>this.pristineReactive());pristineReactive=It(!0);get dirty(){return!this.pristine}get touched(){return en(this.touchedReactive)}set touched(e){en(()=>this.touchedReactive.set(e))}_touched=Tn(()=>this.touchedReactive());touchedReactive=It(!1);get untouched(){return!this.touched}_events=new Qe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(N4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(N4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(B4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(B4(e,this._rawAsyncValidators))}hasValidator(e){return aS(this._rawValidators,e)}hasAsyncValidator(e){return aS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(k({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new Yv(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new Yv(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(k({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new Kv(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new Kv(!0,i))}markAsPending(e={}){this.status=df;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uf(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$v,this.errors=null,this._forEachChild(r=>{r.disable(ae(k({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dS(this.value,i)),this._events.next(new uf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=jv,this._forEachChild(i=>{i.enable(ae(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jv||this.status===df)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dS(this.value,n)),this._events.next(new uf(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$v:jv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=df,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let i=$4(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new uf(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new q,this.statusChanges=new q}_calculateStatus(){return this._allControlsDisabled()?$v:this.errors?oS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(df)?df:this._anyControlsHaveStatus(oS)?oS:jv}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new Kv(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Yv(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yS(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=$ne(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=qne(this._rawAsyncValidators)}},pS=class extends fS{constructor(e,n,i){super(eH(n),tH(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Yne(this,!0,e),Object.keys(e).forEach(i=>{Kne(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var CS=new se("",{providedIn:"root",factory:()=>bS}),bS="always";function UA(t,e,n=bS){qA(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Zne(t,e),Jne(t,e),Qne(t,e),Xne(t,e)}function V4(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),mS(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function gS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Xne(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function qA(t,e){let n=Q4(t);e.validator!==null?t.setValidators(L4(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=J4(t);e.asyncValidator!==null?t.setAsyncValidators(L4(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();gS(e._rawValidators,r),gS(e._rawAsyncValidators,r)}function mS(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=Q4(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=J4(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return gS(e._rawValidators,i),gS(e._rawAsyncValidators,i),n}function Zne(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&nH(t,e)})}function Qne(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&nH(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function nH(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Jne(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function iH(t,e){t==null,qA(t,e)}function eie(t,e){return mS(t,e)}function rH(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function tie(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var nie={provide:hf,useExisting:_o(()=>KA)},qv=Promise.resolve(),KA=(()=>{class t extends hf{callSetDisabledState;get submitted(){return en(this.submittedReactive)}_submitted=Tn(()=>this.submittedReactive());submittedReactive=It(!1);_directives=new Set;form;ngSubmit=new q;options;constructor(n,i,r){super(),this.callSetDisabledState=r,this.form=new pS({},jA(n),$A(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){qv.then(()=>{let i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),UA(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){qv.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){qv.then(()=>{let i=this._findContainer(n.path),r=new pS({});iH(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){qv.then(()=>{let i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){qv.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),rH(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new uS(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1),this.form._events.next(new hS(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(i){return new(i||t)(Kn(vS,10),Kn(G4,10),Kn(CS,8))};static \u0275dir=wt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Jt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[vi([nie]),Ri]})}return t})();function H4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function z4(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var iie=class extends fS{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,i){super(eH(n),tH(i,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yS(n)&&(n.nonNullable||n.initialValueIsDefault)&&(z4(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){H4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){H4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){z4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var rie=t=>t instanceof iie;var oie=new se("");var sie={provide:hf,useExisting:_o(()=>YA)},YA=(()=>{class t extends hf{callSetDisabledState;get submitted(){return en(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Tn(()=>this._submittedReactive());_submittedReactive=It(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new q;constructor(n,i,r){super(),this.callSetDisabledState=r,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(mS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let i=this.form.get(n.path);return UA(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){V4(n.control||null,n,!1),tie(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this._submittedReactive.set(!0),rH(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new uS(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,i={}){this.form.reset(n,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new hS(this.form))}_updateDomValue(){this.directives.forEach(n=>{let i=n.control,r=this.form.get(n.path);i!==r&&(V4(i||null,n),rie(r)&&(UA(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let i=this.form.get(n.path);iH(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let i=this.form.get(n.path);i&&eie(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qA(this.form,this),this._oldForm&&mS(this._oldForm,this)}static \u0275fac=function(i){return new(i||t)(Kn(vS,10),Kn(G4,10),Kn(CS,8))};static \u0275dir=wt({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Jt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[vi([sie]),Ri,gi]})}return t})();var oH=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({})}return t})();var sH=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:CS,useValue:n.callSetDisabledState??bS}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[oH]})}return t})(),aH=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:oie,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:CS,useValue:n.callSetDisabledState??bS}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[oH]})}return t})();function Xv(t){return t.buttons===0||t.detail===0}function Zv(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var XA;function lH(){if(XA==null){let t=typeof document<"u"?document.head:null;XA=!!(t&&(t.createShadowRoot||t.attachShadow))}return XA}function ZA(t){if(lH()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function gr(t){return t.composedPath?t.composedPath()[0]:t.target}var QA;try{QA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QA=!1}var An=(()=>{class t{_platformId=A(il);isBrowser=this._platformId?hL(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||QA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Qv;function cH(){if(Qv==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qv=!0}))}finally{Qv=Qv||!1}return Qv}function ff(t){return cH()?t:!!t.capture}function pf(t,e=0){return dH(t)?Number(t):arguments.length===2?e:0}function dH(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function fo(t){return t instanceof dt?t.nativeElement:t}var uH=new se("cdk-input-modality-detector-options"),hH={ignoreKeys:[18,17,224,91,16]},fH=650,JA={passive:!0,capture:!0},pH=(()=>{class t{_platform=A(An);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Jn(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(i=>i===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=gr(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<fH||(this._modality.next(Xv(n)?"keyboard":"mouse"),this._mostRecentTarget=gr(n))};_onTouchstart=n=>{if(Zv(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gr(n)};constructor(){let n=A($e),i=A(lt),r=A(uH,{optional:!0});if(this._options=k(k({},hH),r),this.modalityDetected=this._modality.pipe(Qf(1)),this.modalityChanged=this.modalityDetected.pipe(xC()),this._platform.isBrowser){let o=A(qn).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[o.listen(i,"keydown",this._onKeydown,JA),o.listen(i,"mousedown",this._onMousedown,JA),o.listen(i,"touchstart",this._onTouchstart,JA)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jv=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Jv||{}),gH=new se("cdk-focus-monitor-default-options"),wS=ff({passive:!0,capture:!0}),eI=(()=>{class t{_ngZone=A($e);_platform=A(An);_inputModalityDetector=A(pH);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=A(lt);_stopInputModalityDetector=new Qe;constructor(){let n=A(gH,{optional:!0});this._detectionMode=n?.detectionMode||Jv.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let i=gr(n);for(let r=i;r;r=r.parentElement)n.type==="focus"?this._onFocus(n,r):this._onBlur(n,r)};monitor(n,i=!1){let r=fo(n);if(!this._platform.isBrowser||r.nodeType!==1)return Je();let o=ZA(r)||this._document,s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new Qe,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let i=fo(n),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(n,i,r){let o=fo(n),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===Jv.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused",i==="touch"),n.classList.toggle("cdk-keyboard-focused",i==="keyboard"),n.classList.toggle("cdk-mouse-focused",i==="mouse"),n.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&i,this._detectionMode===Jv.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?fH:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(n,i){let r=this._elementInfo.get(i),o=gr(n);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(n,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let i=n.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,wS),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,wS)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(hi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(n){let i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wS),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wS),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,r){this._setClasses(n,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){let i=[];return this._elementInfo.forEach((r,o)=>{(o===n||r.checkChildren&&o.contains(n))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let o=n.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _S=new WeakMap,Dr=(()=>{class t{_appRef;_injector=A(xt);_environmentInjector=A(bn);load(n){let i=this._appRef=this._appRef||this._injector.get(so),r=_S.get(i);r||(r={loaders:new Set,refs:[]},_S.set(i,r),i.onDestroy(()=>{_S.get(i)?.refs.forEach(o=>o.destroy()),_S.delete(i)})),r.loaders.has(n)||(r.loaders.add(n),r.refs.push(Ub(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mH=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return t})();function gf(t){return Array.isArray(t)?t:[t]}var vH=new Set,Td,SS=(()=>{class t{_platform=A(An);_nonce=A(Eu,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):lie}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&aie(n,this._nonce),this._matchMedia(n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aie(t,e){if(!vH.has(t))try{Td||(Td=document.createElement("style"),e&&Td.setAttribute("nonce",e),Td.setAttribute("type","text/css"),document.head.appendChild(Td)),Td.sheet&&(Td.sheet.insertRule(`@media ${t} {body{ }}`,0),vH.add(t))}catch(n){console.error(n)}}function lie(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var tI=(()=>{class t{_mediaMatcher=A(SS);_zone=A($e);_queries=new Map;_destroySubject=new Qe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return yH(gf(n)).some(r=>this._registerQuery(r).mql.matches)}observe(n){let r=yH(gf(n)).map(s=>this._registerQuery(s).observable),o=sc(r);return o=Wa(o.pipe(sr(1)),o.pipe(Qf(1),cc(0))),o.pipe(Ye(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let i=this._mediaMatcher.matchMedia(n),o={observable:new Ct(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(wo(i),Ye(({matches:s})=>({query:n,matches:s})),hi(this._destroySubject)),mql:i};return this._queries.set(n,o),o}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yH(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function cie(t){if(t.type==="characterData"&&t.target instanceof Comment)return!0;if(t.type==="childList"){for(let e=0;e<t.addedNodes.length;e++)if(!(t.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<t.removedNodes.length;e++)if(!(t.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var CH=(()=>{class t{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),die=(()=>{class t{_mutationObserverFactory=A(CH);_observedElements=new Map;_ngZone=A($e);constructor(){}ngOnDestroy(){this._observedElements.forEach((n,i)=>this._cleanupObserver(i))}observe(n){let i=fo(n);return new Ct(r=>{let s=this._observeElement(i).pipe(Ye(a=>a.filter(l=>!cie(l))),tn(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{r.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(i)}})}_observeElement(n){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(n))this._observedElements.get(n).count++;else{let i=new Qe,r=this._mutationObserverFactory.create(o=>i.next(o));r&&r.observe(n,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(n,{observer:r,stream:i,count:1})}return this._observedElements.get(n).stream})}_unobserveElement(n){this._observedElements.has(n)&&(this._observedElements.get(n).count--,this._observedElements.get(n).count||this._cleanupObserver(n))}_cleanupObserver(n){if(this._observedElements.has(n)){let{observer:i,stream:r}=this._observedElements.get(n);i&&i.disconnect(),r.complete(),this._observedElements.delete(n)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bH=(()=>{class t{_contentObserver=A(die);_elementRef=A(dt);event=new q;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(n){this._debounce=pf(n),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let n=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?n.pipe(cc(this.debounce)):n).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",L],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return t})(),xS=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({providers:[CH]})}return t})();var SH=new se("liveAnnouncerElement",{providedIn:"root",factory:xH});function xH(){return null}var EH=new se("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),uie=0,iI=(()=>{class t{_ngZone=A($e);_defaultOptions=A(EH,{optional:!0});_liveElement;_document=A(lt);_previousTimeout;_currentPromise;_currentResolve;constructor(){let n=A(SH,{optional:!0});this._liveElement=n||this._createLiveElement()}announce(n,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=n,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let n="cdk-live-announcer-element",i=this._document.getElementsByClassName(n),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(n),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${uie++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(n){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(n)===-1&&o.setAttribute("aria-owns",s+" "+n):o.setAttribute("aria-owns",n)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Vl=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Vl||{}),wH="cdk-high-contrast-black-on-white",_H="cdk-high-contrast-white-on-black",nI="cdk-high-contrast-active",rI=(()=>{class t{_platform=A(An);_hasCheckedHighContrastMode;_document=A(lt);_breakpointSubscription;constructor(){this._breakpointSubscription=A(tI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Vl.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(n):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(n.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Vl.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Vl.BLACK_ON_WHITE}return Vl.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(nI,wH,_H),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Vl.BLACK_ON_WHITE?n.add(nI,wH):i===Vl.WHITE_ON_BLACK&&n.add(nI,_H)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var oI={},po=(()=>{class t{_appId=A(xu);getId(n){return this._appId!=="ng"&&(n+=this._appId),oI.hasOwnProperty(n)||(oI[n]=0),`${n}${oI[n]++}`}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var hie=200,ES=class{_letterKeyStream=new Qe;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Qe;selectedItem=this._selectedItem;constructor(e,n){let i=typeof n?.debounceInterval=="number"?n.debounceInterval:hie;n?.skipPredicate&&(this._skipPredicateFn=n.skipPredicate),this.setItems(e),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let n=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(on(n=>this._pressedLetters.push(n)),cc(e),tn(()=>this._pressedLetters.length>0),Ye(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(n=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(n)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function Rs(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var MS=class{_items;_activeItemIndex=It(-1);_activeItem=It(null);_wrap=!1;_typeaheadSubscription=Kt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,n){this._items=e,e instanceof Ac?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Zs(e)&&(this._effectRef=cs(()=>this._itemsChanged(e()),{injector:n}))}tabOut=new Qe;change=new Qe;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let n=this._getItemsArray();return this._typeahead=new ES(n,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){let n=this._activeItem();this.updateActiveItem(e),this._activeItem()!==n&&this.change.next(this._activeItemIndex())}onKeydown(e){let n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(n){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Rs(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let n=this._getItemsArray(),i=typeof e=="number"?e:n.indexOf(e),r=n[i];this._activeItem.set(r??null),this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let n=this._getItemsArray();for(let i=1;i<=n.length;i++){let r=(this._activeItemIndex()+e*i+n.length)%n.length,o=n[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,n){let i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(e+=n,!i[e])return;this.setActiveItem(e)}}_getItemsArray(){return Zs(this._items)?this._items():this._items instanceof Ac?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let n=this._activeItem();if(n){let i=e.indexOf(n);i>-1&&i!==this._activeItemIndex()&&(this._activeItemIndex.set(i),this._typeahead?.setCurrentSelectedItemIndex(i))}}};var ey=class extends MS{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}};var TH=" ";function AH(t,e,n){let i=IH(t,e);n=n.trim(),!i.some(r=>r.trim()===n)&&(i.push(n),t.setAttribute(e,i.join(TH)))}function lI(t,e,n){let i=IH(t,e);n=n.trim();let r=i.filter(o=>o!==n);r.length?t.setAttribute(e,r.join(TH)):t.removeAttribute(e)}function IH(t,e){return t.getAttribute(e)?.match(/\S+/g)??[]}var qo=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(qo||{}),RS,Ad;function DS(){if(Ad==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ad=!1,Ad;if("scrollBehavior"in document.documentElement.style)Ad=!0;else{let t=Element.prototype.scrollTo;t?Ad=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Ad=!1}}return Ad}function mf(){if(typeof document!="object"||!document)return qo.NORMAL;if(RS==null){let t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),RS=qo.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,RS=t.scrollLeft===0?qo.NEGATED:qo.INVERTED),t.remove()}return RS}function cI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ri(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Hl(t){return t!=null&&`${t}`!="false"}var pie=new se("MATERIAL_ANIMATIONS");function Ji(){return A(pie,{optional:!0})?.animationsDisabled||A(Rp,{optional:!0})==="NoopAnimations"?!0:A(SS).matchMedia("(prefers-reduced-motion)").matches}var go=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(go||{}),dI=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=go.HIDDEN;constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},FH=ff({passive:!0,capture:!0}),uI=class{_events=new Map;addHandler(e,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,FH)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,FH)))}_delegateEventHandler=e=>{let n=gr(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}},ty={enterDuration:225,exitDuration:150},gie=800,PH=ff({passive:!0,capture:!0}),kH=["mousedown","touchstart"],OH=["mouseup","mouseleave","touchend","touchcancel"],mie=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),Id=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new uI;constructor(e,n,i,r,o){this._target=e,this._ngZone=n,this._platform=r,r.isBrowser&&(this._containerElement=fo(i)),o&&o.get(Dr).load(mie)}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=k(k({},ty),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||vie(e,n,r),a=e-r.left,l=n-r.top,c=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${l-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,v=new dI(this,d,i,p);d.style.transform="scale3d(1, 1, 1)",v.state=go.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let m=null;return!p&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let g=()=>{m&&(m.fallbackTimer=null),clearTimeout(y),this._finishRippleTransition(v)},C=()=>this._destroyRipple(v),y=setTimeout(C,c+100);d.addEventListener("transitionend",g),d.addEventListener("transitioncancel",C),m={onTransitionEnd:g,onTransitionCancel:C,fallbackTimer:y}}),this._activeRipples.set(v,m),(p||!c)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(e.state===go.FADING_OUT||e.state===go.HIDDEN)return;let n=e.element,i=k(k({},ty),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=go.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=fo(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,kH.forEach(i=>{t._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{OH.forEach(n=>{this._triggerElement.addEventListener(n,this,PH)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===go.FADING_IN?this._startFadeOutTransition(e):e.state===go.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=go.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=go.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel),n.fallbackTimer!==null&&clearTimeout(n.fallbackTimer)),e.element.remove()}_onMousedown(e){let n=Xv(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+gie;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Zv(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===go.VISIBLE||e.config.terminateOnPointerUp&&e.state===go.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(kH.forEach(n=>t._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(OH.forEach(n=>e.removeEventListener(n,this,PH)),this._pointerUpEventsRegistered=!1))}};function vie(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var ny=new se("mat-ripple-global-options"),TS=(()=>{class t{_elementRef=A(dt);_animationsDisabled=Ji();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let n=A($e),i=A(An),r=A(ny,{optional:!0}),o=A(xt);this._globalOptions=r||{},this._rippleRenderer=new Id(this,n,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:k(k(k({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,r){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,i,k(k({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,k(k({},this.rippleConfig),n))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Nt("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var LH=(()=>{class t{_animationsDisabled=Ji();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){i&2&&Nt("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return t})();var zl=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var yie=["text"],Cie=[[["mat-icon"]],"*"],bie=["mat-icon","*"];function wie(t,e){if(t&1&&Lt(0,"mat-pseudo-checkbox",1),t&2){let n=rn();Yt("disabled",n.disabled)("state",n.selected?"checked":"unchecked")}}function _ie(t,e){if(t&1&&Lt(0,"mat-pseudo-checkbox",3),t&2){let n=rn();Yt("disabled",n.disabled)}}function Sie(t,e){if(t&1&&(be(0,"span",4),Vt(1),xe()),t&2){let n=rn();ze(),Vr("(",n.group.label,")")}}var fI=new se("MAT_OPTION_PARENT_COMPONENT"),pI=new se("MatOptgroup");var hI=class{source;isUserInput;constructor(e,n=!1){this.source=e,this.isUserInput=n}},Fd=(()=>{class t{_element=A(dt);_changeDetectorRef=A(Bi);_parent=A(fI,{optional:!0});group=A(pI,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=A(po).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(n){this._disabled.set(n)}_disabled=It(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new q;_text;_stateChanges=new Qe;constructor(){let n=A(Dr);n.load(zl),n.load(mH),this._signalDisableRipple=!!this._parent&&Zs(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(n=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}deselect(n=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}focus(n,i){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(n.keyCode===13||n.keyCode===32)&&!Rs(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=n)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new hI(this,n))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-option"]],viewQuery:function(i,r){if(i&1&&kn(yie,7),i&2){let o;$t(o=qt())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){i&1&&Jt("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(ll("id",r.id),Mn("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Nt("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",L]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:bie,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){i&1&&(Vn(Cie),fn(0,wie,1,2,"mat-pseudo-checkbox",1),Gt(1),be(2,"span",2,0),Gt(4,1),xe(),fn(5,_ie,1,1,"mat-pseudo-checkbox",3),fn(6,Sie,2,1,"span",4),Lt(7,"div",5)),i&2&&(pn(r.multiple?0:-1),ze(5),pn(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),ze(),pn(r.group&&r.group._inert?6:-1),ze(),Yt("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[LH,TS],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();function NH(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),o=0;for(let s=0;s<t+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function BH(t,e,n,i){return t<n?t:t+e>n+i?Math.max(0,t-i+e):n}var xie=new se("cdk-dir-doc",{providedIn:"root",factory:Eie});function Eie(){return A(lt)}var Mie=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function VH(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Mie.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Ds=(()=>{class t{get value(){return this.valueSignal()}valueSignal=It("ltr");change=new q;constructor(){let n=A(xie,{optional:!0});if(n){let i=n.body?n.body.dir:null,r=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(VH(i||r||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ul=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({})}return t})();var gI=class{_box;_destroyed=new Qe;_resizeSubject=new Qe;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Ct(n=>{let i=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(tn(n=>n.some(i=>i.target===e)),RC({bufferSize:1,refCount:!0}),hi(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},HH=(()=>{class t{_cleanupErrorListener;_observers=new Map;_ngZone=A($e);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,n]of this._observers)n.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(n,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new gI(r)),this._observers.get(r).observe(n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Rie=["notch"],Die=["matFormFieldNotchedOutline",""],Tie=["*"],zH=["iconPrefixContainer"],UH=["textPrefixContainer"],GH=["iconSuffixContainer"],WH=["textSuffixContainer"],Aie=["textField"],Iie=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Fie=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Pie(t,e){t&1&&Lt(0,"span",20)}function kie(t,e){if(t&1&&(be(0,"label",19),Gt(1,1),fn(2,Pie,1,0,"span",20),xe()),t&2){let n=rn(2);Yt("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),Mn("for",n._control.disableAutomaticLabeling?null:n._control.id),ze(2),pn(!n.hideRequiredMarker&&n._control.required?2:-1)}}function Oie(t,e){if(t&1&&fn(0,kie,3,5,"label",19),t&2){let n=rn();pn(n._hasFloatingLabel()?0:-1)}}function Lie(t,e){t&1&&Lt(0,"div",7)}function Nie(t,e){}function Bie(t,e){if(t&1&&ra(0,Nie,0,0,"ng-template",13),t&2){rn(2);let n=sa(1);Yt("ngTemplateOutlet",n)}}function Vie(t,e){if(t&1&&(be(0,"div",9),fn(1,Bie,1,1,null,13),xe()),t&2){let n=rn();Yt("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),ze(),pn(n._forceDisplayInfixLabel()?-1:1)}}function Hie(t,e){t&1&&(be(0,"div",10,2),Gt(2,2),xe())}function zie(t,e){t&1&&(be(0,"div",11,3),Gt(2,3),xe())}function Uie(t,e){}function Gie(t,e){if(t&1&&ra(0,Uie,0,0,"ng-template",13),t&2){rn();let n=sa(1);Yt("ngTemplateOutlet",n)}}function Wie(t,e){t&1&&(be(0,"div",14,4),Gt(2,4),xe())}function jie(t,e){t&1&&(be(0,"div",15,5),Gt(2,5),xe())}function $ie(t,e){t&1&&Lt(0,"div",16)}function qie(t,e){t&1&&Gt(0,6)}function Kie(t,e){if(t&1&&(be(0,"mat-hint",21),Vt(1),xe()),t&2){let n=rn(2);Yt("id",n._hintLabelId),ze(),Di(n.hintLabel)}}function Yie(t,e){if(t&1&&(fn(0,Kie,2,2,"mat-hint",21),Gt(1,7),Lt(2,"div",22),Gt(3,8)),t&2){let n=rn();pn(n.hintLabel?0:-1)}}var iy=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["mat-label"]]})}return t})(),ZH=new se("MatError");var mI=(()=>{class t{align="start";id=A(po).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(ll("id",r.id),Mn("align",null),Nt("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return t})(),QH=new se("MatPrefix");var JH=new se("MatSuffix");var e6=new se("FloatingLabelParent"),jH=(()=>{class t{_elementRef=A(dt);get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=A(HH);_ngZone=A($e);_parent=A(e6);_resizeSubscription=new Kt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Xie(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Nt("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return t})();function Xie(t){let e=t;if(e.offsetParent!==null)return e.scrollWidth;let n=e.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);let i=n.scrollWidth;return n.remove(),i}var $H="mdc-line-ripple--active",FS="mdc-line-ripple--deactivating",qH=(()=>{class t{_elementRef=A(dt);_cleanupTransitionEnd;constructor(){let n=A($e),i=A(Mi);n.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let n=this._elementRef.nativeElement.classList;n.remove(FS),n.add($H)}deactivate(){this._elementRef.nativeElement.classList.add(FS)}_handleTransitionEnd=n=>{let i=this._elementRef.nativeElement.classList,r=i.contains(FS);n.propertyName==="opacity"&&r&&i.remove($H,FS)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return t})(),KH=(()=>{class t{_elementRef=A(dt);_ngZone=A($e);open=!1;_notch;ngAfterViewInit(){let n=this._elementRef.nativeElement,i=n.querySelector(".mdc-floating-label");i?(n.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):n.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){let i=this._notch.nativeElement;!this.open||!n?i.style.width="":i.style.width=`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(n){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${n}px)`)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&kn(Rie,5),i&2){let o;$t(o=qt())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Nt("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:Die,ngContentSelectors:Tie,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Vn(),Lt(0,"div",1),be(1,"div",2,0),Gt(3),xe(),Lt(4,"div",3))},encapsulation:2,changeDetection:0})}return t})(),PS=(()=>{class t{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t})}return t})();var kS=new se("MatFormField"),t6=new se("MAT_FORM_FIELD_DEFAULT_OPTIONS"),YH="fill",Zie="auto",XH="fixed",Qie="translateY(-50%)",ry=(()=>{class t{_elementRef=A(dt);_changeDetectorRef=A(Bi);_dir=A(Ds);_platform=A(An);_idGenerator=A(po);_ngZone=A($e);_defaults=A(t6,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=Au("iconPrefixContainer");_textPrefixContainerSignal=Au("textPrefixContainer");_iconSuffixContainerSignal=Au("iconSuffixContainer");_textSuffixContainerSignal=Au("textSuffixContainer");_prefixSuffixContainers=Tn(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(n=>n?.nativeElement).filter(n=>n!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=zb(iy);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=Hl(n)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Zie}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(n){let i=n||this._defaults?.appearance||YH;this._appearanceSignal.set(i)}_appearanceSignal=It(YH);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||XH}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||XH}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}_destroyed=new Qe;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_animationsDisabled=Ji();constructor(){let n=this._defaults;n&&(n.appearance&&(this.appearance=n.appearance),this._hideRequiredMarker=!!n?.hideRequiredMarker,n.color&&(this.color=n.color)),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Tn(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(n){let i=this._control,r="mat-mdc-form-field-type-";n&&this._elementRef.nativeElement.classList.remove(r+n.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(wo([void 0,void 0]),Ye(()=>[i.errorState,i.userAriaDescribedBy]),MC(),tn(([[o,s],[a,l]])=>o!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(hi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),js(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_outlineLabelOffsetResizeObserver=null;_syncOutlineLabelOffset(){rL({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let n of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(n,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:n=>this._writeOutlinedLabelStyles(n())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Tn(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(n){let i=this._control?this._control.ngControl:null;return i&&i[n]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&n.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;o?n.push(o.id):this._hintLabel&&n.push(this._hintLabelId),s&&n.push(s.id)}else this._errorChildren&&n.push(...this._errorChildren.map(o=>o.id));let i=this._control.describedByIds,r;if(i){let o=this._describedByIds||n;r=n.concat(i.filter(s=>s&&!o.includes(s)))}else r=n;this._control.setDescribedByIds(r),this._describedByIds=n}}_getOutlinedLabelOffset(){let n=this._dir.valueSignal();if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,a=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,u=n==="rtl"?"-1":"1",h=`${a+l}px`,p=`calc(${u} * (${h} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,v=`var(--mat-mdc-form-field-label-transform, ${Qie} translateX(${p}))`,m=a+l+c+d;return[v,m]}_writeOutlinedLabelStyles(n){if(n!==null){let[i,r]=n;this._floatingLabel&&(this._floatingLabel.element.style.transform=i),r!==null&&this._notchedOutline?._setMaxWidth(r)}}_isAttachedToDom(){let n=this._elementRef.nativeElement;if(n.getRootNode){let i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(i&1&&(kb(o,r._labelChild,iy,5),si(o,PS,5),si(o,QH,5),si(o,JH,5),si(o,ZH,5),si(o,mI,5)),i&2){Np();let s;$t(s=qt())&&(r._formFieldControl=s.first),$t(s=qt())&&(r._prefixChildren=s),$t(s=qt())&&(r._suffixChildren=s),$t(s=qt())&&(r._errorChildren=s),$t(s=qt())&&(r._hintChildren=s)}},viewQuery:function(i,r){if(i&1&&(Du(r._iconPrefixContainerSignal,zH,5),Du(r._textPrefixContainerSignal,UH,5),Du(r._iconSuffixContainerSignal,GH,5),Du(r._textSuffixContainerSignal,WH,5),kn(Aie,5),kn(zH,5),kn(UH,5),kn(GH,5),kn(WH,5),kn(jH,5),kn(KH,5),kn(qH,5)),i&2){Np(4);let o;$t(o=qt())&&(r._textField=o.first),$t(o=qt())&&(r._iconPrefixContainer=o.first),$t(o=qt())&&(r._textPrefixContainer=o.first),$t(o=qt())&&(r._iconSuffixContainer=o.first),$t(o=qt())&&(r._textSuffixContainer=o.first),$t(o=qt())&&(r._floatingLabel=o.first),$t(o=qt())&&(r._notchedOutline=o.first),$t(o=qt())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:40,hostBindings:function(i,r){i&2&&Nt("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[vi([{provide:kS,useExisting:t},{provide:e6,useExisting:t}])],ngContentSelectors:Fie,decls:19,vars:25,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["aria-atomic","true","aria-live","polite"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let o=Ni();Vn(Iie),ra(0,Oie,1,1,"ng-template",null,0,Nb),be(2,"div",6,1),Jt("click",function(a){return wn(o),_n(r._control.onContainerClick(a))}),fn(4,Lie,1,0,"div",7),be(5,"div",8),fn(6,Vie,2,2,"div",9),fn(7,Hie,3,0,"div",10),fn(8,zie,3,0,"div",11),be(9,"div",12),fn(10,Gie,1,1,null,13),Gt(11),xe(),fn(12,Wie,3,0,"div",14),fn(13,jie,3,0,"div",15),xe(),fn(14,$ie,1,0,"div",16),xe(),be(15,"div",17)(16,"div",18),fn(17,qie,1,0)(18,Yie,4,1),xe()()}if(i&2){let o;ze(2),Nt("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),ze(2),pn(!r._hasOutline()&&!r._control.disabled?4:-1),ze(2),pn(r._hasOutline()?6:-1),ze(),pn(r._hasIconPrefix?7:-1),ze(),pn(r._hasTextPrefix?8:-1),ze(2),pn(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),ze(2),pn(r._hasTextSuffix?12:-1),ze(),pn(r._hasIconSuffix?13:-1),ze(),pn(r._hasOutline()?-1:14),ze(),Nt("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let s=r._getSubscriptMessageType();ze(),Nt("mat-mdc-form-field-error-wrapper",s==="error")("mat-mdc-form-field-hint-wrapper",s==="hint"),ze(),pn((o=s)==="error"?17:o==="hint"?18:-1)}},dependencies:[jH,KH,FR,qH,mI],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return t})();var Jie=20,LS=(()=>{class t{_ngZone=A($e);_platform=A(An);_renderer=A(qn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Qe;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=Jie){return this._platform.isBrowser?new Ct(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=n>0?this._scrolled.pipe(SC(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Je()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){let r=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(tn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(n){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,n)&&i.push(o)}),i}_scrollableContainsElement(n,i){let r=fo(i),o=n.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),n6=(()=>{class t{elementRef=A(dt);scrollDispatcher=A(LS);ngZone=A($e);dir=A(Ds,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new Qe;_renderer=A(Mi);_cleanupScroll;_elementScrolled=new Qe;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",n=>this._elementScrolled.next(n))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(n){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";n.left==null&&(n.left=r?n.end:n.start),n.right==null&&(n.right=r?n.start:n.end),n.bottom!=null&&(n.top=i.scrollHeight-i.clientHeight-n.bottom),r&&mf()!=qo.NORMAL?(n.left!=null&&(n.right=i.scrollWidth-i.clientWidth-n.left),mf()==qo.INVERTED?n.left=n.right:mf()==qo.NEGATED&&(n.left=n.right?-n.right:n.right)):n.right!=null&&(n.left=i.scrollWidth-i.clientWidth-n.right),this._applyScrollToOptions(n)}_applyScrollToOptions(n){let i=this.elementRef.nativeElement;DS()?i.scrollTo(n):(n.top!=null&&(i.scrollTop=n.top),n.left!=null&&(i.scrollLeft=n.left))}measureScrollOffset(n){let i="left",r="right",o=this.elementRef.nativeElement;if(n=="top")return o.scrollTop;if(n=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return n=="start"?n=s?r:i:n=="end"&&(n=s?i:r),s&&mf()==qo.INVERTED?n==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&mf()==qo.NEGATED?n==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:n==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),ere=20,Pd=(()=>{class t{_platform=A(An);_listeners;_viewportSize;_change=new Qe;_document=A(lt);constructor(){let n=A($e),i=A(qn).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+r,right:n.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,i=this._getWindow(),r=n.documentElement,o=r.getBoundingClientRect(),s=-o.top||n.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||n.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(n=ere){return n>0?this._change.pipe(SC(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var OS=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({})}return t})(),oy=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[Ul,OS,Ul,OS]})}return t})();var sy=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},vI=class extends sy{component;viewContainerRef;injector;projectableNodes;constructor(e,n,i,r){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.projectableNodes=r}},ay=class extends sy{templateRef;viewContainerRef;context;injector;constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},yI=class extends sy{element;constructor(e){super(),this.element=e instanceof dt?e.nativeElement:e}},CI=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof vI)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ay)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof yI)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},NS=class extends CI{outletElement;_appRef;_defaultInjector;constructor(e,n,i){super(),this.outletElement=e,this._appRef=n,this._defaultInjector=i}attachComponentPortal(e){let n;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(nl,null,{optional:!0})||void 0;n=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||xt.NULL,o=r.get(bn,i.injector);n=Ub(e.component,{elementInjector:r,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),i.attachView(n.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let n=e.element;n.parentNode;let i=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(i,n),this.outletElement.appendChild(n),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(n,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var i6=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({})}return t})();var r6=DS();function h6(t){return new BS(t.get(Pd),t.get(lt))}var BS=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,n){this._viewportRuler=e,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ri(-this._previousScrollPosition.left),e.style.top=ri(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),r6&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),r6&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};function f6(t,e){return new VS(t.get(LS),t.get($e),t.get(Pd),e)}var VS=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(tn(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var ly=class{enable(){}disable(){}attach(){}};function bI(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,s=t.left>n.right;return i||r||o||s})}function o6(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,s=t.right>n.right;return i||r||o||s})}function Od(t,e){return new HS(t.get(LS),t.get(Pd),t.get($e),e)}var HS=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();bI(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},p6=(()=>{class t{_injector=A(xt);constructor(){}noop=()=>new ly;close=n=>f6(this._injector,n);block=()=>h6(this._injector);reposition=n=>Od(this._injector,n);static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cy=class{positionStrategy;scrollStrategy=new ly;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var zS=class{connectionPair;scrollableViewProperties;constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var g6=(()=>{class t{_attachedOverlays=[];_document=A(lt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),m6=(()=>{class t extends g6{_ngZone=A($e);_renderer=A(qn).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),v6=(()=>{class t extends g6{_platform=A(An);_ngZone=A($e);_renderer=A(qn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let i=this._document.body,r={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(i,"pointerdown",this._pointerDownListener,r),o.listen(i,"click",this._clickListener,r),o.listen(i,"auxclick",this._clickListener,r),o.listen(i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=gr(n)};_clickListener=n=>{let i=gr(n),r=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(s6(a.overlayElement,i)||s6(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n)}};static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function s6(t,e){let n=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===t)return!0;i=n&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var y6=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),C6=(()=>{class t{_platform=A(An);_containerElement;_document=A(lt);_styleLoader=A(Dr);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||cI()){let r=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(n),cI()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(y6)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wI=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,n,i,r){this._renderer=n,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},US=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Qe;_attachments=new Qe;_detachments=new Qe;_positionStrategy;_scrollStrategy;_locationChanges=Kt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Qe;_outsidePointerEvents=new Qe;_afterNextRenderRef;constructor(e,n,i,r,o,s,a,l,c,d=!1,u,h){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._injector=u,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=oa(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=k(k({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ae(k({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ri(this._config.width),e.height=ri(this._config.height),e.minWidth=ri(this._config.minWidth),e.minHeight=ri(this._config.minHeight),e.maxWidth=ri(this._config.maxWidth),e.maxHeight=ri(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new wI(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,n,i){let r=gf(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=oa(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(n){if(e)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},a6="cdk-overlay-connected-position-bounding-box",nre=/([A-Za-z%]+)$/;function _I(t,e){return new GS(e,t.get(Pd),t.get(lt),t.get(An),t.get(C6))}var GS=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Qe;_resizeSubscription=Kt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(a6),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,n,a),d=this._getOverlayFit(c,n,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(d,c,i)){o.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(o.length){let a=null,l=-1;for(let c of o){let d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&kd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(a6),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:a}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=c6(n),{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let d=0-s,u=s+o.width-i.width,h=0-a,f=a+o.height-i.height,p=this._subtractOverflows(o.width,d,u),v=this._subtractOverflows(o.height,h,f),m=p*v;return{visibleArea:m,isCompletelyWithinViewport:o.width*o.height===m,fitsInViewportVertically:v===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,s=l6(this._overlayRef.getConfig().minHeight),a=l6(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=r,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=c6(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0),d=0,u=0;return r.width<=o.width?d=c||-s:d=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?u=l||-a:u=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:d,y:u},{x:e.x+d,y:e.y+u}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!ire(this._lastScrollVisibility,i)){let r=new zS(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(n.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}let l=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,c=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,d,u,h;if(c)h=i.width-e.x+this._viewportMargin*2,d=e.x-this._viewportMargin;else if(l)u=e.x,d=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;d=f*2,u=e.x-f,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-p/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=ri(i.height),r.top=ri(i.top),r.bottom=ri(i.bottom),r.width=ri(i.width),r.left=ri(i.left),r.right=ri(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=ri(o)),s&&(r.maxWidth=ri(s))}this._lastBoundingBoxSize=i,kd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){kd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){kd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();kd(i,this._getExactOverlayY(n,e,d)),kd(i,this._getExactOverlayX(n,e,d))}else i.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=ri(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=ri(s.maxWidth):o&&(i.maxWidth="")),kd(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=ri(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=ri(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:o6(e,i),isOriginOutsideView:bI(e,i),isOverlayClipped:o6(n,i),isOverlayOutsideView:bI(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&gf(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof dt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function kd(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l6(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(nre);return!n||n==="px"?parseFloat(e):null}return t||null}function c6(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function ire(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var d6="cdk-global-overlay-wrapper";function b6(t){return new WS}var WS=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(d6),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",v="";l?v="flex-start":d==="center"?(v="center",h?p=u:f=u):h?d==="left"||d==="end"?(v="flex-end",f=u):(d==="right"||d==="start")&&(v="flex-start",p=u):d==="left"||d==="start"?(v="flex-start",f=u):(d==="right"||d==="end")&&(v="flex-end",p=u),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,n.justifyContent=v,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(d6),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},w6=(()=>{class t{_injector=A(xt);constructor(){}global(){return b6()}flexibleConnectedTo(n){return _I(this._injector,n)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function SI(t,e){t.get(Dr).load(y6);let n=t.get(C6),i=t.get(lt),r=t.get(po),o=t.get(so),s=t.get(Ds),a=i.createElement("div"),l=i.createElement("div");l.id=r.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),n.getContainerElement().appendChild(a);let c=new NS(l,o,t),d=new cy(e),u=t.get(Mi,null,{optional:!0})||t.get(qn).createRenderer(null,null);return d.direction=d.direction||s.value,new US(c,a,l,d,t.get($e),t.get(m6),i,t.get(ds),t.get(v6),e?.disableAnimations??t.get(Rp,null,{optional:!0})==="NoopAnimations",t.get(bn),u)}var _6=(()=>{class t{scrollStrategies=A(p6);_positionBuilder=A(w6);_injector=A(xt);constructor(){}create(n){return SI(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rre=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],S6=new se("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=A(xt);return()=>Od(t)}}),vf=(()=>{class t{elementRef=A(dt);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),jS=(()=>{class t{_dir=A(Ds,{optional:!0});_injector=A(xt);_overlayRef;_templatePortal;_backdropSubscription=Kt.EMPTY;_attachSubscription=Kt.EMPTY;_detachSubscription=Kt.EMPTY;_positionSubscription=Kt.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=A(S6);_disposeOnNavigation=!1;_ngZone=A($e);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(n){this._offsetX=n,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(n){this._offsetY=n,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(n){this._disposeOnNavigation=n}backdropClick=new q;positionChange=new q;attach=new q;detach=new q;overlayKeydown=new q;overlayOutsideClick=new q;constructor(){let n=A(Nr),i=A(mi);this._templatePortal=new ay(n,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(n){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),n.origin&&this.open&&this._position.apply()),n.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=rre);let n=this._overlayRef=SI(this._injector,this._buildConfig());this._attachSubscription=n.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=n.detachments().subscribe(()=>this.detach.emit()),n.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!Rs(i)&&(i.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=gr(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let n=this._position=this.positionStrategy||this._createPositionStrategy(),i=new cy({direction:this._dir||"ltr",positionStrategy:n,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(n){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return n.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let n=_I(this._injector,this._getOrigin());return this._updatePositionStrategy(n),n}_getOrigin(){return this.origin instanceof vf?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof vf?this.origin.elementRef.nativeElement:this.origin instanceof dt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(n=>{this.backdropClick.emit(n)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(DE(()=>this.positionChange.observers.length>0)).subscribe(n=>{this._ngZone.run(()=>this.positionChange.emit(n)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",L],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",L],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",L],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",L],push:[2,"cdkConnectedOverlayPush","push",L],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",L]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[gi]})}return t})();function ore(t){let e=A(xt);return()=>Od(e)}var sre={provide:S6,useFactory:ore},xI=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({providers:[_6,sre],imports:[Ul,i6,oy,oy]})}return t})();var dy=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Qe;constructor(e=!1,n,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,n&&n.length&&(e?n.forEach(o=>this._markSelected(o)):this._markSelected(n[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}setSelection(...e){this._verifyValueAssignment(e);let n=this.selected,i=new Set(e.map(o=>this._getConcreteValue(o)));e.forEach(o=>this._markSelected(o)),n.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let n=this._hasQueuedChanges();return e&&this._emitChangeEvent(),n}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,n){if(this.compareWith){n=n??this._selection;for(let i of n)if(this.compareWith(e,i))return i;return e}else return e}};var x6=(()=>{class t{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $S=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(e,n,i,r,o){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,n)??!1;o!==e&&(this.errorState=o,this._stateChanges.next())}};var dn=(()=>{class t{constructor(){A(rI)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[Ul,Ul]})}return t})();var yf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn,dn]})}return t})();var qS=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn]})}return t})();var EI=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[yf,dn,qS,Fd]})}return t})();var uy=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn,xS,ry,dn]})}return t})();var are=["trigger"],lre=["panel"],cre=[[["mat-select-trigger"]],"*"],dre=["mat-select-trigger","*"];function ure(t,e){if(t&1&&(be(0,"span",4),Vt(1),xe()),t&2){let n=rn();ze(),Di(n.placeholder)}}function hre(t,e){t&1&&Gt(0)}function fre(t,e){if(t&1&&(be(0,"span",11),Vt(1),xe()),t&2){let n=rn(2);ze(),Di(n.triggerValue)}}function pre(t,e){if(t&1&&(be(0,"span",5),fn(1,hre,1,0)(2,fre,2,1,"span",11),xe()),t&2){let n=rn();ze(),pn(n.customTrigger?1:2)}}function gre(t,e){if(t&1){let n=Ni();be(0,"div",12,1),Jt("keydown",function(r){wn(n);let o=rn();return _n(o._handleKeydown(r))}),Gt(2,1),xe()}if(t&2){let n=rn();Br(cR("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",n._getPanelTheme())),Nt("mat-select-panel-animations-enabled",!n._animationsDisabled),Yt("ngClass",n.panelClass),Mn("id",n.id+"-panel")("aria-multiselectable",n.multiple)("aria-label",n.ariaLabel||null)("aria-labelledby",n._getPanelAriaLabelledby())}}var MI=new se("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=A(xt);return()=>Od(t)}});function E6(t){let e=A(xt);return()=>Od(e)}var M6=new se("MAT_SELECT_CONFIG"),R6={provide:MI,deps:[],useFactory:E6},D6=new se("MatSelectTrigger"),KS=class{source;value;constructor(e,n){this.source=e,this.value=n}},RI=(()=>{class t{_viewportRuler=A(Pd);_changeDetectorRef=A(Bi);_elementRef=A(dt);_dir=A(Ds,{optional:!0});_idGenerator=A(po);_renderer=A(Mi);_parentFormField=A(kS,{optional:!0});ngControl=A(cS,{self:!0,optional:!0});_liveAnnouncer=A(iI);_defaultOptions=A(M6,{optional:!0});_animationsDisabled=Ji();_initialized=new Qe;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(n){let i=this.options.toArray()[n];if(i){let r=this.panel.nativeElement,o=NH(n,this.options,this.optionGroups),s=i._getHostElement();n===0&&o===1?r.scrollTop=0:r.scrollTop=BH(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(n){return new KS(this,n)}_scrollStrategyFactory=A(MI);_panelOpen=!1;_compareWith=(n,i)=>n===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Qe;_errorStateTracker;stateChanges=new Qe;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;get disableRipple(){return this._disableRipple()}set disableRipple(n){this._disableRipple.set(n)}_disableRipple=It(!1);tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(n){this._hideSingleSelectionIndicator=n,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(n){this._placeholder=n,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(sS.required)??!1}set required(n){this._required=n,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(n){this._selectionModel,this._multiple=n}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(n){this._compareWith=n,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(n){this._assignValue(n)&&this._onChange(n)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(n){this._id=n||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=ac(()=>{let n=this.options;return n?n.changes.pipe(wo(n),$n(()=>js(...n.map(i=>i.onSelectionChange)))):this._initialized.pipe($n(()=>this.optionSelectionChanges))});openedChange=new q;_openedStream=this.openedChange.pipe(tn(n=>n),Ye(()=>{}));_closedStream=this.openedChange.pipe(tn(n=>!n),Ye(()=>{}));selectionChange=new q;valueChange=new q;constructor(){let n=A(x6),i=A(KA,{optional:!0}),r=A(YA,{optional:!0}),o=A(new aa("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new $S(n,this.ngControl,r,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new dy(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(hi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(hi(this._destroy)).subscribe(n=>{n.added.forEach(i=>i.select()),n.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(wo(null),hi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let n=this._getTriggerAriaLabelledby(),i=this.ngControl;if(n!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=n,n?r.setAttribute("aria-labelledby",n):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(n){(n.disabled||n.userAriaDescribedBy)&&this.stateChanges.next(),n.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(sr(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let n=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!n)return;let i=`${this.id}-panel`;this._trackedModal&&lI(this._trackedModal,"aria-owns",i),AH(n,"aria-owns",i),this._trackedModal=n}_clearFromModal(){if(!this._trackedModal)return;let n=`${this.id}-panel`;lI(this._trackedModal,"aria-owns",n),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{i(),clearTimeout(r),this._cleanupDetach=void 0};let n=this.panel.nativeElement,i=this._renderer.listen(n,"animationend",o=>{o.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),r=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);n.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(n){this._assignValue(n)}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let n=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&n.reverse(),n.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(n){this.disabled||(this.panelOpen?this._handleOpenKeydown(n):this._handleClosedKeydown(n))}_handleClosedKeydown(n){let i=n.keyCode,r=i===40||i===38||i===37||i===39,o=i===13||i===32,s=this._keyManager;if(!s.isTyping()&&o&&!Rs(n)||(this.multiple||n.altKey)&&r)n.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(n);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(n){let i=this._keyManager,r=n.keyCode,o=r===40||r===38,s=i.isTyping();if(o&&n.altKey)n.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&i.activeItem&&!Rs(n))n.preventDefault(),i.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&n.ctrlKey){n.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=i.activeItemIndex;i.onKeydown(n),this._multiple&&o&&n.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}}_handleOverlayKeydown(n){n.keyCode===27&&!Rs(n)&&(n.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(n){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&n)Array.isArray(n),n.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(n);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(n){let i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(r.value!=null||this.canSelectNullableOptions)&&this._compareWith(r.value,n)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(n){return n!==this._value||this._multiple&&Array.isArray(n)?(this.options&&this._setSelectionByValue(n),this._value=n,!0):!1}_skipPredicate=n=>this.panelOpen?!1:n.disabled;_getOverlayWidth(n){return this.panelWidth==="auto"?(n instanceof vf?n.elementRef:n||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let n of this.options)n._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new ey(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let n=js(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(hi(n)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),js(...this.options.map(i=>i._stateChanges)).pipe(hi(n)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(n,i){let r=this._selectionModel.isSelected(n);!this.canSelectNullableOptions&&n.value==null&&!this._multiple?(n.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(n.value)):(r!==n.selected&&(n.selected?this._selectionModel.select(n):this._selectionModel.deselect(n)),i&&this._keyManager.setActiveItem(n),this.multiple&&(this._sortValues(),i&&this.focus())),r!==this._selectionModel.isSelected(n)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let n=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,n):n.indexOf(i)-n.indexOf(r)),this.stateChanges.next()}}_propagateChanges(n){let i;this.multiple?i=this.selected.map(r=>r.value):i=this.selected?this.selected.value:n,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let n=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){n=i;break}this._keyManager.setActiveItem(n)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(n){this._elementRef.nativeElement.focus(n)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let n=this._parentFormField?.getLabelId()||null,i=n?n+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:n}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let n=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n||(n=this._valueId),n}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-select"]],contentQueries:function(i,r,o){if(i&1&&(si(o,D6,5),si(o,Fd,5),si(o,pI,5)),i&2){let s;$t(s=qt())&&(r.customTrigger=s.first),$t(s=qt())&&(r.options=s),$t(s=qt())&&(r.optionGroups=s)}},viewQuery:function(i,r){if(i&1&&(kn(are,5),kn(lre,5),kn(jS,5)),i&2){let o;$t(o=qt())&&(r.trigger=o.first),$t(o=qt())&&(r.panel=o.first),$t(o=qt())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,r){i&1&&Jt("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),i&2&&(Mn("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),Nt("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",L],disableRipple:[2,"disableRipple","disableRipple",L],tabIndex:[2,"tabIndex","tabIndex",n=>n==null?0:la(n)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",L],placeholder:"placeholder",required:[2,"required","required",L],multiple:[2,"multiple","multiple",L],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",L],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",la],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",L]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[vi([{provide:PS,useExisting:t},{provide:fI,useExisting:t}]),gi],ngContentSelectors:dre,decls:11,vars:9,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,r){if(i&1){let o=Ni();Vn(cre),be(0,"div",2,0),Jt("click",function(){return wn(o),_n(r.open())}),be(3,"div",3),fn(4,ure,2,1,"span",4)(5,pre,3,1,"span",5),xe(),be(6,"div",6)(7,"div",7),Ec(),be(8,"svg",8),Lt(9,"path",9),xe()()()(),ra(10,gre,3,10,"ng-template",10),Jt("detach",function(){return wn(o),_n(r.close())})("backdropClick",function(){return wn(o),_n(r.close())})("overlayKeydown",function(a){return wn(o),_n(r._handleOverlayKeydown(a))})}if(i&2){let o=sa(1);ze(3),Mn("id",r._valueId),ze(),pn(r.empty?4:5),ze(6),Yt("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)}},dependencies:[vf,jS,IR],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return t})();var DI=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({providers:[R6],imports:[xI,EI,dn,OS,uy,EI,dn]})}return t})();var Y8=HP(II());var Gd=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,n){let i=e?this.allAsyncListeners:this.allSyncListeners,r=i.get(t);return!r&&n&&(r=new Set,i.set(t,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,n=!1){this.getListeners(t,n,!0).add(e)}removeEventListener(t,e,n=!1){let i=this.getListeners(t,n,!1);i&&(i.delete(e),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){this.getGlobalListeners(e).add(t)}removeGlobalListener(t,e=!1){this.getGlobalListeners(e).delete(t)}dispatchEvent(t){this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){let n=t.type;if(e&&"event"in t){let a=t.event;a instanceof Event&&(t.eventPath=a.composedPath())}let{frameworkOverrides:i}=this,r=a=>{let l=i?()=>i.wrapIncoming(a):a;e?this.dispatchAsync(l):l()},o=this.getListeners(n,e,!1);if((o?.size??0)>0){let a=new Set(o);for(let l of a)o?.has(l)&&r(()=>l(t))}let s=this.getGlobalListeners(e);if(s.size>0){let a=new Set(s);for(let l of a)r(()=>l(n,t))}}getGlobalListeners(t){return t?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(t){if(this.asyncFunctionsQueue.push(t),!this.scheduled){let e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(e=>e())}};function yre(t,e){return e}function VF(t){return t?.getLocaleTextFunc()??yre}function Cre(t,e,n,i){let r=e[n];return t.getLocaleTextFunc()(n,typeof r=="function"?r(i):r,i)}function ka(t){return t==null||t===""?null:t}function Ve(t){return t!=null&&t!==""}function di(t){return!Ve(t)}function cF(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function Az(t,e){let n=t?JSON.stringify(t):null,i=e?JSON.stringify(e):null;return n===i}function bre(t,e,n=!1){let i=t==null,r=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function o(s,a){return s>a?1:s<a?-1:0}if(typeof t!="string"||!n)return o(t,e);try{return t.localeCompare(e)}catch{return o(t,e)}}var wre=new Set(["__proto__","constructor","prototype"]);function _re(t,e){if(t!=null){if(Array.isArray(t)){for(let n=0;n<t.length;n++)e(n.toString(),t[n]);return}for(let n of Object.keys(t))e(n,t[n])}}function Ar(t,e,n=!0,i=!1){Ve(e)&&_re(e,(r,o)=>{if(wre.has(r))return;let s=t[r];s!==o&&(i&&s==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(s={},t[r]=s),T6(o)&&T6(s)&&!Array.isArray(s)?Ar(s,o,n,i):(n||o!==void 0)&&(t[r]=o))})}function yy(t,e,n){if(!e||!t)return;if(!n)return t[e];let i=e.split("."),r=t;for(let o=0;o<i.length;o++){if(r==null)return;r=r[i[o]]}return r}function T6(t){return typeof t=="object"&&t!==null}var Sre=(()=>{let t=class Ld{static applyGlobalGridOptions(n){if(!Ld.gridOptions)return k({},n);let i={};return Ar(i,Ld.gridOptions,!0,!0),Ld.mergeStrategy==="deep"?Ar(i,n,!0,!0):i=k(k({},i),n),Ld.gridOptions.context&&(i.context=Ld.gridOptions.context),n.context&&(Ld.mergeStrategy==="deep"&&i.context&&Ar(n.context,i.context,!0,!0),i.context=n.context),i}};return t.gridOptions=void 0,t.mergeStrategy="shallow",t})(),xre=Sre;var Ere={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1};function Bs(t,e,n){n==null||typeof n=="string"&&n==""?Iz(t,e):Xo(t,e,n)}function Xo(t,e,n){t.setAttribute(Fz(e),n.toString())}function Iz(t,e){t.removeAttribute(Fz(e))}function Fz(t){return`aria-${t}`}function Kl(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Mre(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function Rre(t){return t.getAttribute("aria-label")}function Af(t,e){Bs(t,"label",e)}function Sy(t,e){Bs(t,"labelledby",e)}function Pz(t,e){Bs(t,"live",e)}function Dre(t,e){Bs(t,"atomic",e)}function Tre(t,e){Bs(t,"relevant",e)}function Are(t,e){Bs(t,"invalid",e)}function Ire(t,e){Bs(t,"disabled",e)}function kz(t,e){Bs(t,"hidden",e)}function dF(t,e){Xo(t,"expanded",e)}function Fre(t,e){Xo(t,"setsize",e)}function Pre(t,e){Xo(t,"posinset",e)}function kre(t,e){Xo(t,"multiselectable",e)}function Ore(t,e){Xo(t,"rowcount",e)}function Oz(t,e){Xo(t,"rowindex",e)}function Lre(t,e){Xo(t,"colcount",e)}function Lz(t,e){Xo(t,"colindex",e)}function Nre(t,e){Xo(t,"colspan",e)}function Bre(t,e){Xo(t,"sort",e)}function Vre(t){Iz(t,"sort")}function uF(t,e){Bs(t,"selected",e)}function Hre(t,e){Bs(t,"controls",e)}function zre(t,e){Hre(t,e.id),Sy(e,t.id)}function Nz(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var FI,PI,kI,OI,hF,fF,LI;function HF(){return FI===void 0&&(FI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),FI}function Bz(){return PI===void 0&&(PI=/(firefox)/i.test(navigator.userAgent)),PI}function Vz(){return kI===void 0&&(kI=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),kI}function Bd(){return OI===void 0&&(OI=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),OI}function A6(t){if(!t)return null;let e=t.tabIndex,n=t.getAttribute("tabIndex");return e===-1&&(n===null||n===""&&!Bz())?null:e.toString()}function Ure(){if(LI!==void 0)return LI;if(!document.body)return-1;let t=1e6,e=Bz()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=t*2;if(n.style.height=i+"px",i>e||n.clientHeight!==i)break;t=i}return document.body.removeChild(n),LI=t,t}function Gre(){return fF==null&&Hz(),fF}function Hz(){let t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let n=e.offsetWidth-e.clientWidth;n===0&&e.clientWidth===0&&(n=null),e.parentNode&&e.parentNode.removeChild(e),n!=null&&(fF=n,hF=n===0)}function zz(){return hF==null&&Hz(),hF}var Wre="[tabindex], input, select, button, textarea, [href]",Uz="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function zF(t){let e=Element.prototype.matches||Element.prototype.msMatchesSelector,i=e.call(t,"input, select, button, textarea"),r=e.call(t,Uz),o=Yo(t);return i&&!r&&o}function Zn(t,e,n={}){let{skipAriaHidden:i}=n;t.classList.toggle("ag-hidden",!e),i||kz(t,!e)}function jre(t,e,n={}){let{skipAriaHidden:i}=n;t.classList.toggle("ag-invisible",!e),i||kz(t,!e)}function xy(t,e){let n="disabled",i=e?o=>o.setAttribute(n,""):o=>o.removeAttribute(n);i(t);let r=t.querySelectorAll("input")??[];for(let o of r)i(o)}function Vd(t,e,n){let i=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof n=="number"){if(++i>n)break}else if(t===n)break}return!1}function Of(t){let{height:e,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:u,marginRight:h,marginBottom:f,marginLeft:p,boxSizing:v}=window.getComputedStyle(t);return{height:parseFloat(e||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(d||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(p||"0"),boxSizing:v}}function UF(t){let e=Of(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function px(t){let e=Of(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function Gz(t){let{height:e,marginBottom:n,marginTop:i}=Of(t);return Math.floor(e+n+i)}function gx(t){let{width:e,marginLeft:n,marginRight:i}=Of(t);return Math.floor(e+n+i)}function Wz(t){let e=t.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:o}=Of(t);return{top:e.top+(n||0),left:e.left+(i||0),right:e.right+(r||0),bottom:e.bottom+(o||0)}}function mx(t,e){let n=t.scrollLeft;return e&&(n=Math.abs(n)),n}function vx(t,e,n){n&&(e*=-1),t.scrollLeft=e}function Zr(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function yr(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function jz(t){return!!t.offsetParent}function Yo(t){let e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!jz(t)||window.getComputedStyle(t).visibility!=="visible")}function GF(t){let e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function $z(t,e,n){n&&n.nextSibling===e||(t.firstChild?n?n.nextSibling?t.insertBefore(e,n.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e):t.appendChild(e))}function qz(t,e){for(let n=0;n<e.length;n++){let i=e[n],r=t.children[n];r!==i&&t.insertBefore(i,r)}}function $re(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}function Iy(t,e){if(e)for(let n of Object.keys(e)){let i=e[n];if(!n||!n.length||i==null)continue;let r=$re(n),o=i.toString(),s=o.replace(/\s*!important/g,""),a=s.length!=o.length?"important":void 0;t.style.setProperty(r,s,a)}}function sx(t){return()=>{let e=t();return e?Kz(e):!0}}function Kz(t){return t.clientWidth<t.scrollWidth}function qre(t){return t.clientHeight<t.scrollHeight}function yx(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):Os(t,e)}function Os(t,e){e=WF(e),t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}function Cy(t,e){e=WF(e),t.style.height=e,t.style.maxHeight=e,t.style.minHeight=e}function WF(t){return typeof t=="number"?`${t}px`:t}function jF(t){return t instanceof Node||t instanceof HTMLElement}function Fs(t,e,n){n==null||n===""?t.removeAttribute(e):t.setAttribute(e,n.toString())}function qd(t,e,n){let r=rU(t).ResizeObserver,o=r?new r(n):null;return o?.observe(e),()=>o?.disconnect()}function Ba(t,e){let n=rU(t);n.requestAnimationFrame?n.requestAnimationFrame(e):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(e):n.setTimeout(e,0)}var Yz="data-ref",NI;function I6(){return NI??(NI=document.createTextNode(" ")),NI.cloneNode()}function On(t){let{attrs:e,children:n,cls:i,ref:r,role:o,tag:s}=t,a=document.createElement(s);if(i&&(a.className=i),r&&a.setAttribute(Yz,r),o&&a.setAttribute("role",o),e)for(let l of Object.keys(e))a.setAttribute(l,e[l]);if(n)if(typeof n=="string")a.textContent=n;else{let l=!0;for(let c of n)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(I6()),l=!1),a.append(On(c)),a.appendChild(I6())))}return a}var F6={};function $F(t,e){F6[e]||(t(),F6[e]=!0)}function Ey(t,e,...n){t.get("debug")&&console.log("AG Grid: "+e,...n)}function Xz(t,...e){$F(()=>console.warn("AG Grid: "+t,...e),t+e?.join(""))}function by(t,...e){$F(()=>console.error("AG Grid: "+t,...e),t+e?.join(""))}var Kre={pending:!1,funcs:[]},Yre={pending:!1,funcs:[]};function pF(t,e="setTimeout",n){let i=e==="raf"?Yre:Kre;if(i.funcs.push(t),i.pending)return;i.pending=!0;let r=()=>{let o=i.funcs.slice();i.funcs.length=0,i.pending=!1,o.forEach(s=>s())};e==="raf"?Ba(n,r):window.setTimeout(r,0)}function Pa(t,e,n){let i;return function(...r){let o=this;window.clearTimeout(i),i=window.setTimeout(function(){t.isAlive()&&e.apply(o,r)},n)}}function P6(t,e){let n=0;return function(...i){let r=this,o=Date.now();o-n<e||(n=o,t.apply(r,i))}}function Xre(t,e,n=100,i){let r=Date.now(),o=null,s=!1,a=()=>{let l=Date.now()-r>n;(t()||l)&&(e(),s=!0,o!=null&&(window.clearInterval(o),o=null),l&&i&&Xz(i))};a(),s||(o=window.setInterval(a,10))}var Zz="https://www.ag-grid.com",Rt="34.0.2",k6=2e3,O6=100,Qz="_version_",Zre=null,Qre=!1,Jz=`${Zz}/javascript-data-grid`;function Jre(t){Jz=t}function eU(t,e,n){return Zre?.getConsoleMessage(t,e)??[roe(t,e,n)]}function qF(t,e,n,i){Qre||t(`error #${e}`,...eU(e,n,i))}function eoe(t){if(!t)return String(t);let e={};for(let n of Object.keys(t))typeof t[n]!="object"&&typeof t[n]!="function"&&(e[n]=t[n]);return JSON.stringify(e)}function toe(t){let e=t;return t instanceof Error?e=t.toString():typeof t=="object"&&(e=eoe(t)),e}function gF(t,e){return`${t}?${e.toString()}`}function noe(t,e,n){let i=Array.from(e.entries()).sort((o,s)=>s[1].length-o[1].length),r=gF(t,e);for(let[o,s]of i){if(o===Qz)continue;let a=r.length-n;if(a<=0)break;let l="...",c=a+l.length,d=s.length-c>O6?s.slice(0,s.length-c)+l:s.slice(0,O6)+l;e.set(o,d),r=gF(t,e)}return r}function ioe(t,e){let n=new URLSearchParams;if(n.append(Qz,Rt),e)for(let o of Object.keys(e))n.append(o,toe(e[o]));let i=`${Jz}/errors/${t}`,r=gF(i,n);return r.length<=k6?r:noe(i,n,k6)}var roe=(t,e,n)=>{let i=ioe(t,e);return`${n?n+` 
`:""}Visit ${i}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function Ee(...t){qF(Xz,t[0],t[1])}function In(...t){qF(by,t[0],t[1])}function my(t,e,n){qF(by,t,e,n)}function ooe(t,e){let n=e[0];return`error #${n} `+eU(n,e[1],t).join(" ")}function mF(...t){return ooe(void 0,t)}function tU(t,e){return t.get("rowModelType")===e}function Tr(t,e){return tU(t,"clientSide")}function Lx(t,e){return tU(t,"serverSide")}function tr(t,e){return t.get("domLayout")===e}function Hd(t){return wx(t)!==void 0}function nU(t){return typeof t.get("getRowHeight")=="function"}function soe(t,e){return e?!t.get("enableStrictPivotColumnOrder"):t.get("maintainColumnOrder")}function Wd(t,e,n=!1,i){let{gos:r,environment:o}=t;if(i==null&&(i=o.getDefaultRowHeight()),nU(r)){if(n)return{height:i,estimated:!0};let l={node:e,data:e.data},c=r.getCallback("getRowHeight")(l);if(vF(c))return c===0&&Ee(23),{height:Math.max(1,c),estimated:!1}}if(e.detail&&r.get("masterDetail"))return aoe(r);let s=r.get("rowHeight");return{height:s&&vF(s)?s:i,estimated:!1}}function aoe(t){if(t.get("detailRowAutoHeight"))return{height:1,estimated:!1};let e=t.get("detailRowHeight");return vF(e)?{height:e,estimated:!1}:{height:300,estimated:!1}}function KF(t){let{environment:e,gos:n}=t,i=n.get("rowHeight");if(!i||di(i))return e.getDefaultRowHeight();let r=e.refreshRowHeightVariable();return r!==-1?r:(Ee(24),e.getDefaultRowHeight())}function vF(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}function iU(t,e,n){let i=e[t.getDomDataKey()];return i?i[n]:void 0}function If(t,e,n,i){let r=t.getDomDataKey(),o=e[r];di(o)&&(o={},e[r]=o),o[n]=i}function zi(t){let{gos:e,eGridDiv:n}=t,i=null,r=e.get("getDocument");return r&&Ve(r)?i=r():n&&(i=n.ownerDocument),i&&Ve(i)?i:document}function rU(t){return zi(t).defaultView||window}function My(t){return t.eGridDiv.getRootNode()}function Wn(t){return My(t).activeElement}function YF(t){let e=null,n=null;try{e=zi(t).fullscreenElement}catch{}finally{e||(e=My(t));let i=e.querySelector("body");i?n=i:e instanceof ShadowRoot?n=e:e instanceof Document?n=e?.documentElement:n=e}return n}function loe(t){return YF(t)?.clientWidth??(window.innerHeight||-1)}function coe(t){return YF(t)?.clientHeight??(window.innerHeight||-1)}function doe(t,e,n){let r=t.getBoundingClientRect().height,o=loe(n)-2,s=coe(n)-2;if(!t.offsetParent)return;let l=Wz(t.offsetParent),{clientY:c,clientX:d}=e,u=c-l.top-r/2,h=d-l.left-10,f=zi(n),p=f.defaultView||window,v=p.pageYOffset||f.documentElement.scrollTop,m=p.pageXOffset||f.documentElement.scrollLeft;o>0&&h+t.clientWidth>o+m&&(h=o+m-t.clientWidth),h<0&&(h=0),s>0&&u+t.clientHeight>s+v&&(u=s+v-t.clientHeight),u<0&&(u=0),t.style.left=`${h}px`,t.style.top=`${u}px`}function oU(t){let e=Wn(t);return e===null||e===zi(t).body}function xf(t){return t.get("ensureDomOrder")?!1:t.get("animateRows")}function sU(t){return!(t.get("paginateChildRows")||t.get("groupHideOpenParents")||tr(t,"print"))}function As(t){return!t.get("autoGroupColumnDef")?.comparator&&!t.get("treeData")}function yF(t){let e=t.get("groupAggFiltering");if(typeof e=="function")return t.getCallback("groupAggFiltering");if(e===!0)return()=>!0}function aU(t){return t.get("grandTotalRow")}function lU(t,e){return e?!1:t.get("groupDisplayType")==="groupRows"}function uoe(t,e,n){return!!e.group&&!e.footer&&lU(t,n)}function Cx(t){let e=t.getCallback("getRowId");return e===void 0?e:n=>{let i=e(n);return typeof i!="string"&&($F(()=>Ee(25,{id:i}),"getRowIdString"),i=String(i)),i}}function Ef(t){return t?.checkboxes??!0}function ax(t){return t?.mode==="multiRow"&&(t.headerCheckbox??!0)}function bx(t){if(typeof t=="object")return t.checkboxLocation??"selectionColumn"}function BI(t){return t?.hideDisabledCheckboxes??!1}function hoe(t){return typeof t.get("rowSelection")!="string"}function Ff(t){let e=t.get("cellSelection");return e!==void 0?!!e:t.get("enableRangeSelection")}function cU(t){let e=t.get("rowSelection")??"single";if(typeof e=="string"){let n=t.get("suppressRowClickSelection"),i=t.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return e.mode==="singleRow"||e.mode==="multiRow"?e.enableClickSelection??!1:!1}function foe(t){let e=cU(t);return e===!0||e==="enableSelection"}function poe(t){let e=cU(t);return e===!0||e==="enableDeselection"}function CF(t){let e=t.get("rowSelection");return typeof e=="string"?t.get("isRowSelectable"):e?.isRowSelectable}function wx(t){let e="beanName"in t&&t.beanName==="gos"?t.get("rowSelection"):t.rowSelection;if(typeof e=="string")switch(e){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(e?.mode){case"multiRow":case"singleRow":return e.mode;default:return}}function Ry(t){return wx(t)==="multiRow"}function goe(t){let e=t.get("rowSelection");return typeof e=="string"?t.get("rowMultiSelectWithClick"):e?.enableSelectionWithoutKeys??!1}function _x(t){let e=t.get("rowSelection");if(typeof e=="string"){let n=t.get("groupSelectsChildren"),i=t.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return e?.mode==="multiRow"?e.groupSelects:void 0}function dU(t,e=!0){let n=t.get("rowSelection");return typeof n!="object"?e?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function Dy(t){let e=_x(t);return e==="descendants"||e==="filteredDescendants"}function L6(t){let e=t.get("rowSelection");return typeof e=="object"&&e.masterSelects||"self"}function moe(t){return t.isModuleRegistered("SetFilter")&&!t.get("suppressSetFilterByDefault")}function Xr(t){return t.get("columnMenu")==="legacy"}function voe(t){return!Xr(t)}function yoe(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}function uU(t,e,n){typeof t!="object"&&(t={});let i=k({},t);return n.forEach(r=>{let o=e[r];typeof o<"u"&&(i[r]=o)}),i}function hU(t,e){if(!t)return;let n={},i=!1;if(Object.keys(t).forEach(s=>{n[s]=t[s],i=!0}),!i)return;let r={type:"gridOptionsChanged",options:n};e.dispatchEvent(r);let o=k({type:"componentStateChanged"},n);e.dispatchEvent(o)}function jt(t,e){return t.addGridCommonParams(e)}function Coe(t){return t.get("treeData")?t.get("treeDataParentIdField")?"treeSelfRef":t.get("treeDataChildrenField")?"treeNested":"treePath":"group"}var fU="__ag_Grid_Stop_Propagation",boe=["touchstart","touchend","touchmove","touchcancel","scroll"],woe=["wheel"],VI={};function jd(t){t[fU]=!0}function Oa(t){return t[fU]===!0}var pU=(()=>{let t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof VI[n]=="boolean")return VI[n];let i=document.createElement(t[n]||"div");return n="on"+n,VI[n]=n in i}})();function gU(t,e,n){let i=e;for(;i;){let r=iU(t,i,n);if(r)return r;i=i.parentElement}return null}function _oe(t,e){return!e||!t?!1:xoe(e).indexOf(t)>=0}function Soe(t){let e=[],n=t.target;for(;n;)e.push(n),n=n.parentElement;return e}function xoe(t){let e=t;return e.path?e.path:e.composedPath?e.composedPath():Soe(e)}function Eoe(t,e,n,i){let r=mU(n),o;r!=null&&(o={passive:r}),t&&t.addEventListener&&t.addEventListener(e,n,i,o)}var mU=t=>{let e=boe.includes(t),n=woe.includes(t);if(e)return!0;if(n)return!1},he=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(t){this.beans=t,this.stubContext=t.context,this.eventSvc=t.eventSvc,this.gos=t.gos}destroy(){let{destroyFunctions:t}=this;for(let e=0;e<t.length;e++)t[e]();t.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(t,e,n){this.localEventService||(this.localEventService=new Gd),this.localEventService.addEventListener(t,e,n)}removeEventListener(t,e,n){this.localEventService?.removeEventListener(t,e,n)}dispatchLocalEvent(t){this.localEventService?.dispatchEvent(t)}addManagedElementListeners(t,e){return this._setupListeners(t,e)}addManagedEventListeners(t){return this._setupListeners(this.eventSvc,t)}addManagedListeners(t,e){return this._setupListeners(t,e)}_setupListeners(t,e){let n=[];for(let i of Object.keys(e)){let r=e[i];r&&n.push(this._setupListener(t,i,r))}return n}_setupListener(t,e,n){if(this.destroyed)return()=>null;let i;return Moe(t)?(t.__addEventListener(e,n),i=()=>(t.__removeEventListener(e,n),null)):(t instanceof HTMLElement?Eoe(this.beans.frameworkOverrides,t,e,n):t.addEventListener(e,n),i=()=>(t.removeEventListener(e,n),null)),this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}setupGridOptionListener(t,e){let{gos:n}=this;n.addPropertyEventListener(t,e);let i=()=>(n.removePropertyEventListener(t,e),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}addManagedPropertyListener(t,e){return this.destroyed?()=>null:this.setupGridOptionListener(t,e)}addManagedPropertyListeners(t,e){if(this.destroyed)return;let n=t.join("-")+this.propertyListenerId++,i=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=r.changeSet.id}let o={type:"gridPropertyChanged",changeSet:r.changeSet,source:r.source};e(o)};t.forEach(r=>this.setupGridOptionListener(r,i))}getLocaleTextFunc(){return VF(this.beans.localeSvc)}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createOptionalManagedBean(t,e){return t?this.createManagedBean(t,e):void 0}createManagedBean(t,e){let n=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),n}createBean(t,e,n){return(e||this.stubContext).createBean(t,n)}destroyBean(t,e){return(e||this.stubContext).destroyBean(t)}destroyBeans(t,e){return(e||this.stubContext).destroyBeans(t)}};function Moe(t){return t.__addEventListener!==void 0}var Roe=/[&<>"']/g,Doe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Fy(t){return t?.toString().toString()??null}function lx(t){return Fy(t)?.replace(Roe,e=>Doe[e])??null}var Toe={resizable:!0,sortable:!0},Aoe=0;function vU(){return Aoe++}function Na(t){return t instanceof Nx}var Nx=class extends he{constructor(t,e,n,i){super(),this.colDef=t,this.userProvidedColDef=e,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=vU(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new Gd,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=lx(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){let{colDef:t,beans:{sortSvc:e,pinnedCols:n,colFlex:i}}=this;e?.initCol(this);let r=t.hide;r!==void 0?this.visible=!r:this.visible=!t.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(t,e,n){let i=t.spanRows!==this.colDef.spanRows;this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan()}initDotNotation(){let{gos:t,colDef:{field:e,tooltipField:n}}=this,i=t.get("suppressFieldDotNotation");this.fieldContainsDots=Ve(e)&&e.indexOf(".")>=0&&!i,this.tooltipFieldContainsDots=Ve(n)&&n.indexOf(".")>=0&&!i}initMinAndMaxWidths(){let t=this.colDef;this.minWidth=t.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=t.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}resetActualWidth(t){let e=this.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)}calculateColInitialWidth(t){let e,n=t.width,i=t.initialWidth;return n!=null?e=n:i!=null?e=i:e=200,Math.max(Math.min(e,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,t)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(t,e){this.colEventSvc.addEventListener(t,e)}__removeEventListener(t,e){this.colEventSvc.removeEventListener(t,e)}addEventListener(t,e){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);let n=this.frameworkEventListenerService?.wrap(t,e)??e;this.colEventSvc.addEventListener(t,n)}removeEventListener(t,e){let n=this.frameworkEventListenerService?.unwrap(t,e)??e;this.colEventSvc.removeEventListener(t,n)}createColumnFunctionCallbackParams(t){return jt(this.gos,{node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){return this.beans.cellNavigation?.isSuppressNavigable(this,t)??!1}isCellEditable(t){return this.beans.editSvc?.isCellEditable({rowNode:t,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.beans.selectionSvc?.isCellCheckboxSelection(this,t)??!1}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){return this.colDef[t]??Toe[t]}isColumnFunc(t,e){if(typeof e=="boolean")return e;if(typeof e=="function"){let n=this.createColumnFunctionCallbackParams(t);return e(n)}return!1}createColumnEvent(t,e){return jt(this.gos,{type:t,column:this,columns:[this],source:e})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return di(this.sort)}isSorting(){return Ve(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,e){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.dispatchColEvent("leftChanged",e))}isFilterActive(){return this.filterActive}isHovered(){return Ee(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(t,e){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.dispatchColEvent("firstRightPinnedChanged",e))}setLastLeftPinned(t,e){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.dispatchColEvent("lastLeftPinnedChanged",e))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,e){let n=t===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",e)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let e=t.getPaddingLevel()+1,n=!0;for(;t;){if(!t.isPadding()){n=!1;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){let e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e}createBaseColDefParams(t){return jt(this.gos,{node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(di(this.colDef.colSpan))return 1;let e=this.createBaseColDefParams(t),n=this.colDef.colSpan(e);return Math.max(n,1)}getRowSpan(t){if(di(this.colDef.rowSpan))return 1;let e=this.createBaseColDefParams(t),n=this.colDef.rowSpan(e);return Math.max(n,1)}setActualWidth(t,e,n=!1){t=Math.max(t,this.minWidth),t=Math.min(t,this.maxWidth),this.actualWidth!==t&&(this.actualWidth=t,this.flex!=null&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.dispatchColEvent("widthChanged",t)}isGreaterThanMax(t){return t>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(t,e,n){let i=this.createColumnEvent(t,e);n&&Ar(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(t){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:t})}};function er(t){return t instanceof cx}var cx=class extends he{constructor(t,e,n,i){super(),this.colGroupDef=t,this.groupId=e,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=vU(),this.expandableListenerRemoveCallback=null,this.expanded=!!t?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let t=[];return this.addLeafColumns(t),t}forEachLeafColumn(t){if(this.children)for(let e of this.children)Na(e)?t(e):er(e)&&e.forEachLeafColumn(t)}addLeafColumns(t){this.children&&this.children.forEach(e=>{Na(e)?t.push(e):er(e)&&e.addLeafColumns(t)})}getColumnGroupShow(){let t=this.colGroupDef;if(t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let t=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(e=>e.__addEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(e=>e.__removeEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,e=!1,n=!1,i=this.findChildrenRemovingPadding();for(let o=0,s=i.length;o<s;o++){let a=i[o];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(t=!0,n=!0):l==="closed"?(e=!0,n=!0):(t=!0,e=!0)}let r=t&&e&&n;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let t=[],e=n=>{n.forEach(i=>{er(i)&&i.isPadding()?e(i.children):t.push(i)})};return e(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}},Ioe={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function N6(t,e,n){let i={},r=t.gos;return Object.assign(i,r.get("defaultColGroupDef")),Object.assign(i,e),r.validateColDef(i,n),i}var Foe=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=cF(t);let n=0;for(;;){let i=t??e;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){let r=String(i);return t&&n>0&&Ee(273,{providedId:t,usedId:r}),this.existingKeys[r]=!0,r}n++}}},B6=Object.freeze([]);function vn(t){if(t?.length)return t[t.length-1]}function Kd(t,e,n){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((i,r)=>n?n(i,e[r]):e[r]===i)}function YS(t,e){if(t)for(let n of t)e(n)}function Ls(t,e){let n=t.indexOf(e);n>=0&&t.splice(n,1)}function V6(t,e,n){for(let i=0;i<e.length;i++)Ls(t,e[i]);for(let i=e.length-1;i>=0;i--)t.splice(n,0,e[i])}var Bx="ag-Grid-AutoColumn",yU="ag-Grid-SelectionColumn",CU="ag-Grid-RowNumbersColumn";function Poe(t){let e=[],n=i=>{for(let r=0;r<i.length;r++){let o=i[r];Na(o)?e.push(o):er(o)&&n(o.getChildren())}};return n(t),e}function Cf(t){return t.reduce((e,n)=>e+n.getActualWidth(),0)}function Sx(t,e,n){let i={};if(!e)return;La(null,e,o=>{i[o.getInstanceId()]=o}),n&&La(null,n,o=>{i[o.getInstanceId()]=null});let r=Object.values(i).filter(o=>o!=null);t.context.destroyBeans(r)}function bU(t){return t.getId().startsWith(Bx)}function Py(t){return(typeof t=="string"?t:"getColId"in t?t.getColId():t.colId)?.startsWith(yU)??!1}function wy(t){return(typeof t=="string"?t:"getColId"in t?t.getColId():t.colId)?.startsWith(CU)??!1}function xx(t){let e=[];return t instanceof Array?e=t:typeof t=="string"&&(e=t.split(",")),e}function koe(t,e){return Kd(t,e,(n,i)=>n.getColId()===i.getColId())}function Ooe(t){t.map={},t.list.forEach(e=>t.map[e.getId()]=e)}function Mf(t){return t==="gridOptionsUpdated"?"gridOptionsChanged":t}function wU(t,e){let n=t===e,i=t.getColDef()===e,r=t.getColId()==e;return n||i||r}var Loe=(t,e)=>(n,i)=>{let r={value1:void 0,value2:void 0},o=!1;return t&&(t[n]!==void 0&&(r.value1=t[n],o=!0),Ve(i)&&t[i]!==void 0&&(r.value2=t[i],o=!0)),!o&&e&&(e[n]!==void 0&&(r.value1=e[n]),Ve(i)&&e[i]!==void 0&&(r.value2=e[i])),r};function Noe(t,e=null,n,i,r){let o=new Foe,{existingCols:s,existingGroups:a,existingColKeys:l}=Boe(i);o.addExistingKeys(l);let c=_U(t,e,0,n,s,o,a,r),{colGroupSvc:d}=t,u=d?.findMaxDepth(c,0)??0,h=d?d.balanceColumnTree(c,0,u,o):c;return La(null,h,(p,v)=>{er(p)&&p.setupExpandable(),p.originalParent=v}),{columnTree:h,treeDepth:u}}function Boe(t){let e=[],n=[],i=[];return t&&La(null,t,r=>{if(er(r)){let o=r;n.push(o)}else{let o=r;i.push(o.getId()),e.push(o)}}),{existingCols:e,existingGroups:n,existingColKeys:i}}function _U(t,e,n,i,r,o,s,a){if(!e)return[];let{colGroupSvc:l}=t,c=new Array(e.length);for(let d=0;d<c.length;d++){let u=e[d];l&&Woe(u)?c[d]=l.createProvidedColumnGroup(i,u,n,r,o,s,a):c[d]=Voe(t,i,u,r,o,a)}return c}function Voe(t,e,n,i,r,o){let s=zoe(n,i);s&&i?.splice(s.idx,1);let a=s?.column;if(a){let l=bF(t,n,a.getColId());a.setColDef(l,n,o),Hoe(t,a,l,o)}else{let l=r.getUniqueKey(n.colId,n.field),c=bF(t,n,l);a=new Nx(c,n,l,e),t.context.createBean(a)}return t.dataTypeSvc?.addColumnListeners(a),a}function SU(t,e,n,i,r,o,s,a){let{sortSvc:l,pinnedCols:c,colFlex:d}=t;n!==void 0&&e.setVisible(!n,a),l&&(l.updateColSort(e,i,a),r!==void 0&&l.setColSortIndex(e,r)),o!==void 0&&c?.setColPinned(e,o),s!==void 0&&d?.setColFlex(e,s)}function Hoe(t,e,n,i){SU(t,e,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);let r=e.getFlex();if(!(r!=null&&r>0))if(n.width!=null)e.setActualWidth(n.width,i);else{let o=e.getActualWidth();e.setActualWidth(o,i)}}function zoe(t,e){if(e)for(let n=0;n<e.length;n++){let i=e[n].getUserProvidedColDef();if(!i)continue;if(t.colId!=null){if(e[n].getId()===t.colId)return{idx:n,column:e[n]};continue}if(t.field!=null){if(i.field===t.field)return{idx:n,column:e[n]};continue}if(i===t)return{idx:n,column:e[n]}}}function bF(t,e,n,i){let{gos:r,dataTypeSvc:o}=t,s={},a=r.get("defaultColDef");Ar(s,a,!1,!0);let l=Uoe(t,s,e,n);l&&Goe(t,l,s);let c=s.cellDataType;Ar(s,e,!1,!0),c!==void 0&&(s.cellDataType=c);let d=r.get("autoGroupColumnDef"),u=As(r);return e.rowGroup&&d&&u&&Ar(s,{sort:d.sort,initialSort:d.initialSort},!1,!0),o&&(o.postProcess(s),o.validateColDef(s)),r.validateColDef(s,n,i),s}function Uoe(t,e,n,i){let r=t.dataTypeSvc?.updateColDefAndGetColumnType(e,n,i),o=n.type??r??e.type;return e.type=o,o?xx(o):void 0}function Goe(t,e,n){if(!e.length)return;let i=Object.assign({},Ioe),r=t.gos.get("columnTypes")||{};for(let o of Object.keys(r)){let s=r[o];o in i?Ee(34,{key:o}):(s.type&&Ee(35),i[o]=s)}e.forEach(o=>{let s=i[o.trim()];s?Ar(n,s,!1,!0):Ee(36,{t:o})})}function Woe(t){return t.children!==void 0}function La(t,e,n){if(e)for(let i=0;i<e.length;i++){let r=e[i];er(r)&&La(r,r.getChildren(),n),n(r,t)}}function xU(t,e){let n=[],i=[],r=[];return t.forEach(s=>{let a=s.getColDef().lockPosition;a==="right"?r.push(s):a==="left"||a===!0?n.push(s):i.push(s)}),e.get("enableRtl")?[...r,...i,...n]:[...n,...i,...r]}function EU(t,e){let n=!0;return La(null,e,i=>{if(!er(i))return;let r=i,o=r.getColGroupDef();if(!(o&&o.marryChildren))return;let a=[];r.getLeafColumns().forEach(h=>{let f=t.indexOf(h);a.push(f)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,u=r.getLeafColumns().length-1;d>u&&(n=!1)}),n}function MU(t,e){if(!t||t.length==0)return;let n=e(t[0]);for(let i=1;i<t.length;i++)if(n!==e(t[i]))return;return n}function RU(t,e,n){if(!e.length)return;let i=e.length===1?e[0]:null,r=MU(e,o=>o.getPinned());t.dispatchEvent({type:"columnPinned",pinned:r??null,columns:e,column:i,source:n})}function joe(t,e,n){if(!e.length)return;let i=e.length===1?e[0]:null,r=MU(e,o=>o.isVisible());t.dispatchEvent({type:"columnVisible",visible:r,columns:e,column:i,source:n})}function $oe(t,e,n,i){t.dispatchEvent({type:e,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function Ex(t,e,n,i,r=null){e?.length&&t.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:r,finished:n,source:i})}function XF(t,e,n){let{colModel:i,rowGroupColsSvc:r,pivotColsSvc:o,autoColSvc:s,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:d,environment:u,valueColsSvc:h,eventSvc:f,gos:p}=t,v=i.getColDefCols()??[],m=a?.getColumns();if(!v?.length&&!m?.length)return!1;if(e?.state&&!e.state.forEach)return Ee(32),!1;let g=(R,b,_,M,x)=>{if(!R)return;let S=Loe(b,e.defaultState),I=S("flex").value1;if(SU(t,R,S("hide").value1,S("sort").value1,S("sortIndex").value1,S("pinned").value1,I,n),I==null){let N=S("width").value1;if(N!=null){let B=R.getColDef().minWidth??u.getDefaultColumnMinWidth();B!=null&&N>=B&&R.setActualWidth(N,n)}}x||!R.isPrimary()||(h?.syncColumnWithState(R,n,S),r?.syncColumnWithState(R,n,S,_),o?.syncColumnWithState(R,n,S,M))},C=(R,b,_)=>{let M=DU(t,n),x=b.slice(),S={},I={},N=[],B=[],W=[],U=0,j=r?.columns.slice()??[],Y=o?.columns.slice()??[];R.forEach(oe=>{let ie=oe.colId;if(ie.startsWith(Bx)){N.push(oe),W.push(oe);return}if(Py(ie)){B.push(oe),W.push(oe);return}let Xe=_(ie);Xe?(g(Xe,oe,S,I,!1),Ls(x,Xe)):(W.push(oe),U+=1)});let $=oe=>g(oe,null,S,I,!1);x.forEach($),r?.sortColumns(z6.bind(r,S,j)),o?.sortColumns(z6.bind(o,I,Y)),i.refreshCols(!1);let re=(oe,ie,Ge=[])=>{ie.forEach(Xe=>{let Z=oe(Xe.colId);Ls(Ge,Z),g(Z,Xe,null,null,!0)}),Ge.forEach($)};return re(oe=>s?.getColumn(oe)??null,N,s?.getColumns()?.slice()),re(oe=>a?.getColumn(oe)??null,B,a?.getColumns()?.slice()),Koe(e,i,p),c.refresh(n),f.dispatchEvent({type:"columnEverythingChanged",source:n}),M(),{unmatchedAndAutoStates:W,unmatchedCount:U}};l?.start();let{unmatchedAndAutoStates:y,unmatchedCount:w}=C(e.state||[],v,R=>i.getColDefCol(R));if(y.length>0||Ve(e.defaultState)){let R=d?.getPivotResultCols()?.list??[];w=C(y,R,b=>d?.getPivotResultCol(b)??null).unmatchedCount}return l?.finish(),w===0}function DU(t,e){let{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:r,colModel:o,sortSvc:s,eventSvc:a}=t,l={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:r?.columns.slice()??[]},c=H6(t),d={};return c.forEach(u=>{d[u.colId]=u}),()=>{let u=(b,_,M,x)=>{let S=_.map(x),I=M.map(x);if(Kd(S,I))return;let B=new Set(_);M.forEach(U=>{B.delete(U)||B.add(U)});let W=[...B];a.dispatchEvent({type:b,columns:W,column:W.length===1?W[0]:null,source:e})},h=b=>{let _=[];return o.forAllCols(M=>{let x=d[M.getColId()];x&&b(x,M)&&_.push(M)}),_},f=b=>b.getColId();u("columnRowGroupChanged",l.rowGroupColumns,n?.columns??[],f),u("columnPivotChanged",l.pivotColumns,i?.columns??[],f);let v=h((b,_)=>{let M=b.aggFunc!=null,x=M!=_.isValueActive(),S=M&&b.aggFunc!=_.getAggFunc();return x||S});v.length>0&&$oe(a,"columnValueChanged",v,e),Ex(a,h((b,_)=>b.width!=_.getActualWidth()),!0,e),RU(a,h((b,_)=>b.pinned!=_.getPinned()),e),joe(a,h((b,_)=>b.hide==_.isVisible()),e);let w=h((b,_)=>b.sort!=_.getSort()||b.sortIndex!=_.getSortIndex());w.length>0&&s?.dispatchSortChangedEvents(e,w);let R=H6(t);Xoe(c,R,e,o,a)}}function H6(t){let{colModel:e,rowGroupColsSvc:n,pivotColsSvc:i}=t,r=e.getColDefCols();if(di(r)||!e.isAlive())return[];let o=n?.columns,s=i?.columns,a=[],l=d=>{let u=d.isRowGroupActive()&&o?o.indexOf(d):null,h=d.isPivotActive()&&s?s.indexOf(d):null,f=d.isValueActive()?d.getAggFunc():null,p=d.getSort()!=null?d.getSort():null,v=d.getSortIndex()!=null?d.getSortIndex():null;a.push({colId:d.getColId(),width:d.getActualWidth(),hide:!d.isVisible(),pinned:d.getPinned(),sort:p,sortIndex:v,aggFunc:f,rowGroup:d.isRowGroupActive(),rowGroupIndex:u,pivot:d.isPivotActive(),pivotIndex:h,flex:d.getFlex()??null})};e.forAllCols(d=>l(d));let c=new Map(e.getCols().map((d,u)=>[d.getColId(),u]));return a.sort((d,u)=>{let h=c.has(d.colId)?c.get(d.colId):-1,f=c.has(u.colId)?c.get(u.colId):-1;return h-f}),a}function qoe(t){let e=(p,v)=>p??v??null,n=t.getColDef(),i=e(n.sort,n.initialSort),r=e(n.sortIndex,n.initialSortIndex),o=e(n.hide,n.initialHide),s=e(n.pinned,n.initialPinned),a=e(n.width,n.initialWidth),l=e(n.flex,n.initialFlex),c=e(n.rowGroupIndex,n.initialRowGroupIndex),d=e(n.rowGroup,n.initialRowGroup);c==null&&(d==null||d==!1)&&(c=null,d=null);let u=e(n.pivotIndex,n.initialPivotIndex),h=e(n.pivot,n.initialPivot);u==null&&(h==null||h==!1)&&(u=null,h=null);let f=e(n.aggFunc,n.initialAggFunc);return{colId:t.getColId(),sort:i,sortIndex:r,hide:o,pinned:s,width:a,flex:l,rowGroup:d,rowGroupIndex:c,pivot:h,pivotIndex:u,aggFunc:f}}function Koe(t,e,n){if(!t.applyOrder||!t.state)return;let i=[];t.state.forEach(r=>{r.colId!=null&&i.push(r.colId)}),Yoe(e.cols,i,e,n)}function Yoe(t,e,n,i){if(t==null)return;let r=[],o={};e.forEach(a=>{if(o[a])return;let l=t.map[a];l&&(r.push(l),o[a]=!0)});let s=0;if(t.list.forEach(a=>{let l=a.getColId();if(o[l]!=null)return;l.startsWith(Bx)?r.splice(s++,0,a):r.push(a)}),r=xU(r,i),!EU(r,n.getColTree())){Ee(39);return}t.list=r}function Xoe(t,e,n,i,r){let o={};e.forEach(d=>o[d.colId]=d);let s={};t.forEach(d=>{o[d.colId]&&(s[d.colId]=!0)});let a=t.filter(d=>s[d.colId]),l=e.filter(d=>s[d.colId]),c=[];l.forEach((d,u)=>{let h=a&&a[u];if(h&&h.colId!==d.colId){let f=i.getCol(h.colId);f&&c.push(f)}}),c.length&&r.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:n})}var z6=(t,e,n,i)=>{let r=t[n.getId()],o=t[i.getId()],s=r!=null,a=o!=null;if(s&&a)return r-o;if(s)return-1;if(a)return 1;let l=e.indexOf(n),c=e.indexOf(i),d=l>=0,u=c>=0;return d&&u?l-c:d?-1:1},Zoe=class extends he{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(Mf(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),Mf(t.source)))}createColsFromColDefs(t){let{beans:e}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:r,pivotColsSvc:o,valueColsSvc:s,visibleCols:a,colViewport:l,eventSvc:c}=e,d=this.colDefs?DU(e,t):void 0;n?.expire();let u=this.colDefCols?.list,h=this.colDefCols?.tree,f=Noe(e,this.colDefs,!0,h,t);Sx(e,this.colDefCols?.tree,f.columnTree);let p=f.columnTree,v=f.treeDepth,m=Poe(p),g={};m.forEach(C=>g[C.getId()]=C),this.colDefCols={tree:p,treeDepth:v,list:m,map:g},r?.extractCols(t,u),o?.extractCols(t,u),s?.extractCols(t,u),this.ready=!0,this.refreshCols(!0),a.refresh(t),l.checkViewportColumns(),c.dispatchEvent({type:"columnEverythingChanged",source:t}),d&&(this.changeEventsDispatching=!0,d(),this.changeEventsDispatching=!1),c.dispatchEvent({type:"newColumnsLoaded",source:t}),t==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(t){if(!this.colDefCols)return;let e=this.cols?.tree;this.saveColOrder();let{autoColSvc:n,selectionColSvc:i,rowNumbersSvc:r,quickFilter:o,pivotResultCols:s,showRowGroupCols:a,rowAutoHeight:l,visibleCols:c,colViewport:d,eventSvc:u}=this.beans,h=this.selectCols(s,this.colDefCols);this.createColumnsForService([n,i,r],h);let f=soe(this.gos,this.showingPivotResult);(!t||f)&&this.restoreColOrder(h),this.positionLockedCols(h),a?.refresh(),o?.refreshCols(),this.setColSpanActive(),l?.setAutoHeightActive(h),c.clear(),d.clear(),!Kd(e,this.cols.tree)&&u.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(t,e){for(let n of t)n&&(n.createColumns(e,i=>{this.lastOrder=i(this.lastOrder),this.lastPivotOrder=i(this.lastPivotOrder)}),n.addColumns(e))}selectCols(t,e){let n=t?.getPivotResultCols()??null;this.showingPivotResult=n!=null;let{map:i,list:r,tree:o,treeDepth:s}=n??e;return this.cols={list:r.slice(),map:k({},i),tree:o.slice(),treeDepth:s},n&&(n.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];let t=this.isPivotMode()&&!this.showingPivotResult,e=this.beans.valueColsSvc?.columns;return this.cols.list.filter(i=>{let r=bU(i);if(t){let o=e?.includes(i);return r||o}else return r||i.isVisible()})}refreshAll(t){this.ready&&(this.refreshCols(!1),this.beans.visibleCols.refresh(t))}setColsVisible(t,e=!1,n){XF(this.beans,{state:t.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!e}))},n)}restoreColOrder(t){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let n=e.filter(u=>t.map[u.getId()]!=null);if(n.length===0)return;if(n.length===t.list.length){t.list=n;return}let i=u=>{let h=u.getOriginalParent();return h?h.getChildren().length>1?!0:i(h):!1};if(!n.some(u=>i(u))){let u=new Set(n);for(let h of t.list)u.has(h)||n.push(h);t.list=n;return}let r=new Map;for(let u=0;u<n.length;u++){let h=n[u];r.set(h,u)}let o=t.list.filter(u=>!r.has(u));if(o.length===0){t.list=n;return}let s=(u,h)=>{let f=h?h.getOriginalParent():u.getOriginalParent();if(!f)return null;let p=null,v=null;for(let m of f.getChildren())if(!(m===h||m===u)){if(m instanceof Nx){let g=r.get(m);if(g==null)continue;(p==null||p<g)&&(p=g,v=m);continue}m.forEachLeafColumn(g=>{let C=r.get(g);C!=null&&(p==null||p<C)&&(p=C,v=g)})}return v??s(u,f)},a=[],l=new Map;for(let u of o){let h=s(u,null);if(h==null){a.push(u);continue}let f=l.get(h);f===void 0?l.set(h,u):Array.isArray(f)?f.push(u):l.set(h,[f,u])}let c=new Array(t.list.length),d=c.length-1;for(let u=a.length-1;u>=0;u--)c[d--]=a[u];for(let u=n.length-1;u>=0;u--){let h=n[u],f=l.get(h);if(f)if(Array.isArray(f))for(let p=f.length-1;p>=0;p--){let v=f[p];c[d--]=v}else c[d--]=f;c[d--]=h}t.list=c}positionLockedCols(t){t.list=xU(t.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(){return this.colDefCols?this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[]):void 0}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(t=>t.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(t,e){if(t===this.pivotMode||(this.pivotMode=t,!this.ready))return;this.refreshCols(!1);let{visibleCols:n,eventSvc:i}=this.beans;n.refresh(e),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){let t=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!t?.length}recreateColumnDefs(t){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(t);let e=Mf(t.source);this.createColsFromColDefs(e)}setColumnDefs(t,e){this.colDefs=t,this.createColsFromColDefs(e)}destroy(){Sx(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(t){let{pivotResultCols:e,autoColSvc:n,selectionColSvc:i}=this.beans;YS(this.colDefCols?.list,t),YS(n?.columns?.list,t),YS(i?.columns?.list,t),YS(e?.getPivotResultCols()?.list,t)}getColsForKeys(t){return t?t.map(e=>this.getCol(e)).filter(e=>e!=null):[]}getColDefCol(t){return this.colDefCols?.list?this.getColFromCollection(t,this.colDefCols):null}getCol(t){return t==null?null:this.getColFromCollection(t,this.cols)}getColById(t){return this.cols?.map[t]??null}getColFromCollection(t,e){if(e==null)return null;let{map:n,list:i}=e;if(typeof t=="string"&&n[t])return n[t];for(let r=0;r<i.length;r++)if(wU(i[r],t))return i[r];return this.beans.autoColSvc?.getColumn(t)??this.beans.selectionColSvc?.getColumn(t)??null}};var Qoe=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){let e=this.existingIds[t],n;return typeof e!="number"?n=0:n=e+1,this.existingIds[t]=n,n}};function ky(t,e,n){return n&&t.addDestroyFunc(()=>e.destroyBean(n)),n??t}var TU=class{constructor(t){this.cssClassStates={},this.getGui=t}toggleCss(t,e){if(!t)return;if(t.indexOf(" ")>=0){let i=(t||"").split(" ");if(i.length>1){i.forEach(r=>this.toggleCss(r,e));return}}this.cssClassStates[t]!==e&&t.length&&(this.getGui()?.classList.toggle(t,e),this.cssClassStates[t]=e)}},Joe=0,Fe=null,ln=class extends he{constructor(t,e){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Joe++,this.cssManager=new TU(()=>this.eGui),this.componentSelectors=new Map((e??[]).map(n=>[n.selector,n])),t&&this.setTemplate(t)}preConstruct(){this.wireTemplate(this.getGui());let t="component-"+Object.getPrototypeOf(this)?.constructor?.name;this.css?.forEach(e=>this.beans.environment.addGlobalCSS(e,t))}wireTemplate(t,e){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,e))}getCompId(){return this.compId}getDataRefAttribute(t){return t.getAttribute?t.getAttribute(Yz):null}applyElementsToComponent(t,e,n,i=null){if(e===void 0&&(e=this.getDataRefAttribute(t)),e){let r=this[e];if(r===Fe)this[e]=i??t;else{let o=n&&n[e];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${e} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,e){let n=[];for(let i of t.childNodes??[])n.push(i);n.forEach(i=>{if(!(i instanceof HTMLElement))return;let r=this.createComponentFromElement(i,o=>{let s=o.getGui();if(s)for(let a of i.attributes??[])s.setAttribute(a.name,a.value)},e);if(r){if(r.addItems&&i.children.length){this.createChildComponentsFromTags(i,e);let o=Array.prototype.slice.call(i.children);r.addItems(o)}this.swapComponentForNode(r,t,i)}else i.childNodes&&this.createChildComponentsFromTags(i,e)})}createComponentFromElement(t,e,n){let i=t.nodeName,r=this.getDataRefAttribute(t),o=i.indexOf("AG-")===0,s=o?this.componentSelectors.get(i):null,a=null;if(s){let l=n&&r?n[r]:void 0;a=new s.component(l),a.setParentComponent(this),this.createBean(a,null,e)}else if(o)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(t,r,n,a),a}swapComponentForNode(t,e,n){let i=t.getGui();e.replaceChild(i,n),e.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let e=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(n=>n.setAttribute("tabindex",e.toString()))}setTemplate(t,e,n){let i;typeof t=="string"||t==null?i=GF(t):i=On(t),this.setTemplateFromElement(i,e,n)}setTemplateFromElement(t,e,n,i=!1){if(this.eGui=t,this.suppressDataRefValidation=i,e)for(let r=0;r<e.length;r++){let o=e[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,e){let n=e;return t==null?null:(n||(n=this.eGui),jF(t)?{element:t,parent:n}:{element:t.getGui(),parent:n})}prependChild(t,e){let{element:n,parent:i}=this.getContainerAndElement(t,e)||{};!n||!i||i.insertAdjacentElement("afterbegin",n)}appendChild(t,e){let{element:n,parent:i}=this.getContainerAndElement(t,e)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(t,e={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:n}=e;jre(this.eGui,t,{skipAriaHidden:n})}}setDisplayed(t,e={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:n}=e;Zn(this.eGui,t,{skipAriaHidden:n});let i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(t,e,n){this.eGui.addEventListener(t,e,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,e))}addCss(t){this.cssManager.toggleCss(t,!0)}removeCss(t){this.cssManager.toggleCss(t,!1)}toggleCss(t,e){this.cssManager.toggleCss(t,e)}registerCSS(t){this.css||(this.css=[]),this.css.push(t)}};function AU(t){return typeof t=="object"&&!!t.component}var Gn=class vy{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(n=>this.onDone(n),n=>this.onReject(n))}static all(e){return e.length?new vy(n=>{let i=e.length,r=new Array(i);e.forEach((o,s)=>{o.then(a=>{r[s]=a,i--,i===0&&n(r)})})}):vy.resolve()}static resolve(e=null){return new vy(n=>n(e))}then(e){return new vy(n=>{this.status===1?n(e(this.resolution)):this.waiters.push(i=>n(e(i)))})}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(n=>n(e))}onReject(e){}};function ese(t){return t?t.prototype&&"getGui"in t.prototype:!1}function IU(t,e,n,i){let{name:r}=n,o,s,a,l,c,d;if(e){let u=e,h=u[r+"Selector"],f=h?h(i):null,p=v=>{typeof v=="string"?o=v:v!=null&&v!==!0&&(t.isFrameworkComponent(v)?a=v:s=v)};f?(p(f.component),l=f.params,c=f.popup,d=f.popupPosition):p(u[r])}return{compName:o,jsComp:s,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}var tse=class extends he{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(t){this.agCompUtils=t.agCompUtils,this.registry=t.registry,this.frameworkCompWrapper=t.frameworkCompWrapper,this.gridOptions=t.gridOptions}getCompDetailsFromGridOptions(t,e,n,i=!1){return this.getCompDetails(this.gridOptions,t,e,n,i)}getCompDetails(t,e,n,i,r=!1){let{name:o,cellRenderer:s}=e,{compName:a,jsComp:l,fwComp:c,paramsFromSelector:d,popupFromSelector:u,popupPositionFromSelector:h}=IU(this.beans.frameworkOverrides,t,e,i),f,p,v=y=>{let w=this.registry.getUserComponent(o,y);w&&(l=w.componentFromFramework?void 0:w.component,c=w.componentFromFramework?w.component:void 0,f=w.params,p=w.processParams)};if(a!=null&&v(a),l==null&&c==null&&n!=null&&v(n),l&&s&&!ese(l)&&(l=this.agCompUtils?.adaptFunction(e,l)),!l&&!c){let{validation:y}=this.beans;r&&(a!==n||!n)?a?y?.isProvidedUserComp(a)||In(50,{compName:a}):n?y||In(260,ae(k({},this.gos.getModuleErrorParams()),{propName:o,compName:n})):In(216,{name:o}):n&&!y&&In(146,{comp:n});return}let m=this.mergeParams(t,e,i,d,f,p),g=l==null,C=l??c;return{componentFromFramework:g,componentClass:C,params:m,type:e,popupFromSelector:u,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(C,g,m,e)}}newAgStackInstance(t,e,n,i){let r=!e,o;r?o=new t:o=this.frameworkCompWrapper.wrap(t,i.mandatoryMethods,i.optionalMethods,i),this.createBean(o);let s=o.init?.(n);return s==null?Gn.resolve(o):s.then(()=>o)}mergeParams(t,e,n,i=null,r,o){let s=k(k({},n),r),a=t,l=a&&a[e.name+"Params"];if(typeof l=="function"){let c=l(n);Ar(s,c)}else typeof l=="object"&&Ar(s,l);return Ar(s,i),o?o(s):s}};var nse={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},ise={name:"headerComponent",optionalMethods:["refresh"]},rse={name:"innerHeaderComponent"},ose={name:"innerHeaderGroupComponent"},sse={name:"headerGroupComponent"};var ase={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0};var lse={name:"loadingCellRenderer",cellRenderer:!0};var cse={name:"loadingOverlayComponent",optionalMethods:["refresh"]},dse={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},use={name:"tooltipComponent"},ZF={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},hse={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},fse={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},pse={name:"loadingCellRenderer",cellRenderer:!0},gse={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},mse={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function vse(t,e){return t.getCompDetailsFromGridOptions(nse,"agDragAndDropImage",e,!0)}function yse(t,e,n){return t.getCompDetails(e,ise,"agColumnHeader",n)}function Cse(t,e,n){return t.getCompDetails(e,rse,void 0,n)}function bse(t,e){let n=e.columnGroup.getColGroupDef();return t.getCompDetails(n,sse,"agColumnGroupHeader",e)}function wse(t,e,n){return t.getCompDetails(e,ose,void 0,n)}function _se(t,e){return t.getCompDetailsFromGridOptions(fse,void 0,e,!0)}function Sse(t,e){return t.getCompDetailsFromGridOptions(pse,"agLoadingCellRenderer",e,!0)}function xse(t,e){return t.getCompDetailsFromGridOptions(gse,"agGroupRowRenderer",e,!0)}function Ese(t,e){return t.getCompDetailsFromGridOptions(mse,"agDetailCellRenderer",e,!0)}function U6(t,e,n){return t.getCompDetails(e,ase,void 0,n)}function G6(t,e,n){return t.getCompDetails(e,lse,"agSkeletonCellRenderer",n,!0)}function Mse(t,e,n,i){let r=e.filter;return AU(r)&&(e={filter:r.component,filterParams:e.filterParams}),t.getCompDetails(e,ZF,i,n,!0)}function Rse(t,e){return t.getCompDetailsFromGridOptions(cse,"agLoadingOverlay",e,!0)}function Dse(t,e){return t.getCompDetailsFromGridOptions(dse,"agNoRowsOverlay",e,!0)}function Tse(t,e){return t.getCompDetails(e.colDef,use,"agTooltipComponent",e,!0)}function Ase(t,e,n,i){return t.getCompDetails(e,hse,i,n)}function FU(t,e){return IU(t,e,ZF)}function HI(t,e,n){return t.mergeParams(e,ZF,n)}function wF(t){let e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var PU=new Set,Mx={},Rf={},dx,kU=!1,OU=!1,Ise=!1;function Fse(t){let[e,n]=t.version.split(".")||[],[i,r]=dx.split(".")||[];return e===i&&n===r}function Pse(t){dx||(dx=t.version);let e=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(t.version?Fse(t)||by(e(`'${t.moduleName}' is version ${t.version} but the other modules are version ${dx}.`)):by(e(`'${t.moduleName}' is incompatible.`)),t.validate){let n=t.validate();n.isValid||by(`${n.message}`)}}function Ty(t,e,n=!1){n||(kU=!0),Pse(t);let i=t.rowModels??["all"];PU.add(t);let r;e!==void 0?(OU=!0,Rf[e]===void 0&&(Rf[e]={}),r=Rf[e]):r=Mx,i.forEach(o=>{r[o]===void 0&&(r[o]={}),r[o][t.moduleName]=t}),t.dependsOn&&t.dependsOn.forEach(o=>Ty(o,e,n))}function kse(t){delete Rf[t]}function _F(t,e,n){let i=r=>!!Mx[r]?.[t]||!!Rf[e]?.[r]?.[t];return i(n)||i("all")}function LU(){return OU}function Ose(t,e){let n=Rf[t]??{};return[...Object.values(Mx.all??{}),...Object.values(n.all??{}),...Object.values(Mx[e]??{}),...Object.values(n[e]??{})]}function Lse(){return new Set(PU)}function Nse(){return kU}function Bse(){return Ise}var NU=class{static register(t){Ty(t,void 0)}static registerModules(t){t.forEach(e=>Ty(e,void 0))}},Vse=class{constructor(t){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!t||!t.beanClasses)&&(this.beanDestroyComparator=t.beanDestroyComparator,this.init(t))}init(t){for(let e of Object.keys(t.providedBeanInstances))this.beans[e]=t.providedBeanInstances[e];t.beanClasses.forEach(e=>{let n=new e;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(n)}),t.derivedBeans?.forEach(e=>{let{beanName:n,bean:i}=e(this);this.beans[n]=i,this.createdBeans.push(i)}),t.beanInitComparator&&this.createdBeans.sort(t.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(t,e){return this.initBeans([t],e),t}initBeans(t,e){t.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),t.forEach(n=>n.preConstruct?.()),e&&t.forEach(e),t.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(t){return this.beans[t]}destroy(){if(this.destroyed)return;this.destroyed=!0;let t=this.getBeanInstances();this.beanDestroyComparator&&t.sort(this.beanDestroyComparator),this.destroyBeans(t),this.beans={},this.createdBeans=[]}destroyBean(t){t?.destroy?.()}destroyBeans(t){if(t)for(let e=0;e<t.length;e++)this.destroyBean(t[e]);return[]}isDestroyed(){return this.destroyed}};function Hse(t){return typeof t=="object"&&!!t.getComp}var zse=class extends Vse{init(t){this.gridId=t.gridId,this.beans.context=this,this.destroyCallback=t.destroyCallback,super.init(t)}destroy(){super.destroy(),kse(this.gridId),this.destroyCallback?.()}getGridId(){return this.gridId}};var Use=class{constructor(){this.cellValidations=new Map}getCellValidation(t){let{rowNode:e,column:n}=t||{};return this.cellValidations?.get(e)?.get(n)}hasCellValidation(t){return!t||!t.rowNode||!t.column?this.cellValidations.size>0:!!this.getCellValidation(t)}setCellValidation(t,e){let{rowNode:n,column:i}=t;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,e)}clearCellValidation(t){let{rowNode:e,column:n}=t;this.cellValidations.get(e)?.delete(n)}setCellValidationMap(t){this.cellValidations=t}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},Gse=class{constructor(){this.rowValidations=new Map}getRowValidation(t){let{rowNode:e}=t||{};return this.rowValidations.get(e)}hasRowValidation(t){return!t||!t.rowNode?this.rowValidations.size>0:!!this.getRowValidation(t)}setRowValidation({rowNode:t},e){this.rowValidations.set(t,e)}clearRowValidation({rowNode:t}){this.rowValidations.delete(t)}setRowValidationMap(t){this.rowValidations=t}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function Wse(t,e){let n=t.column===e.column,i=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return n&&i&&r}function jse(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(Ve(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}function $se(t){let e=0,n,{pinnedRowModel:i,rowModel:r,pageBounds:o}=t;return i?.getPinnedTopRowCount()?n="top":r.getRowCount()?(n=null,e=o.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:e,rowPinned:n}}function qse(t){let e,n=null,{pinnedRowModel:i,pageBounds:r}=t,o=i?.getPinnedBottomRowCount(),s=i?.getPinnedTopRowCount();return o?(n="bottom",e=o-1):t.rowModel.getRowCount()?(n=null,e=r.getLastRow()):s&&(n="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:n}}function BU(t,e){switch(e.rowPinned){case"top":return t.pinnedRowModel?.getPinnedTopRow(e.rowIndex);case"bottom":return t.pinnedRowModel?.getPinnedBottomRow(e.rowIndex);default:return t.rowModel.getRow(e.rowIndex)}}function XS(t,e){let n=t.spannedRowRenderer?.getCellByPosition(e);if(n)return n;let i=t.rowRenderer.getRowByPosition(e);return i?i.getCellCtrl(e.column):null}function Kse(t,e,n){let{rowModel:i,pinnedRowModel:r}=t,o;return o??(o=i?.getRowNode(e)),n?o??(o=r?.getPinnedRowById(e,n)):(o??(o=r?.getPinnedRowById(e,"top")),o??(o=r?.getPinnedRowById(e,"bottom"))),o}function Rx(t,e){let{rowIndex:n,rowPinned:i}=e,{pageBounds:r,pinnedRowModel:o,rowModel:s}=t;if(n===0)return i==="top"?null:i==="bottom"&&s.isRowsToRender()?{rowIndex:r.getLastRow(),rowPinned:null}:o?.isRowsToRender("top")?{rowIndex:o.getPinnedTopRowCount()-1,rowPinned:"top"}:null;let a=i?void 0:s.getRow(n);return VU(t,a,!0)??{rowIndex:n-1,rowPinned:i}}function W6(t,e){let{rowIndex:n,rowPinned:i}=e,{pageBounds:r,pinnedRowModel:o,rowModel:s}=t;if(Yse(t,e))return i==="bottom"?null:i==="top"&&s.isRowsToRender()?{rowIndex:r.getFirstRow(),rowPinned:null}:o?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;let a=i?void 0:s.getRow(n);return VU(t,a)??{rowIndex:n+1,rowPinned:i}}function VU(t,e,n){let{gos:i,rowRenderer:r}=t;if(!e?.sticky||!sU(i))return;let o=n?r.getStickyTopRowCtrls():r.getStickyBottomRowCtrls(),s;for(let a=0;a<o.length;a++)if(o[a].rowNode.rowIndex===e.rowIndex){s=o[a+(n?-1:1)];break}return s?{rowIndex:s.rowNode.rowIndex,rowPinned:null}:void 0}function Yse(t,e){let{rowPinned:n,rowIndex:i}=e,{pinnedRowModel:r,pageBounds:o}=t;return n==="top"?(r?.getPinnedTopRowCount()??0)-1<=i:n==="bottom"?(r?.getPinnedBottomRowCount()??0)-1<=i:o.getLastRow()<=i}function Xse(t,e={}){let{rowIndex:n,rowId:i,rowCtrl:r,rowPinned:o}=e;if(r)return r;let{rowModel:s,rowRenderer:a}=t,{rowNode:l}=e;return l||(i?l=Kse(t,i,o):n!=null&&(l=s.getRow(n))),a.getRowCtrls(l?[l]:[])?.[0]}function HU(t,e={}){let{cellCtrl:n,colId:i,columnId:r,column:o}=e;if(n)return n;let s=t.colModel.getCol(i??r??Zse(o)),a=e.rowCtrl??Xse(t,e),l=a?.getCellCtrl(s)??void 0;if(l)return l;let c=e.rowNode??a?.rowNode;if(c)return t.rowRenderer.getCellCtrls([c],[s])?.[0]}function Zse(t){if(t)return typeof t=="string"?t:t.getColId()}var QF=Symbol("unedited");function Qse(t,e={}){let n=[],i=t.rowRenderer.getCellCtrls(e.rowNodes,e.columns);for(let r of i){let o=r.comp?.getCellEditor();o&&n.push({ctrl:r,editor:wF(o)})}return n}function Jse({newValue:t,oldValue:e}){return t===QF&&(t=e),t!==e}function eae(t,e){let n={newValueExists:!1};if(t)return n;let i=e?.getCellEditor();return!i||(i.getValidationErrors?.()?.length??0)>0?n:{newValue:i.getValue(),newValueExists:!0}}function tae(t,e){t.editModelSvc?.getEditPositions().forEach(n=>{let i=HU(t,n);if(!i)return;let{newValue:r,newValueExists:o}=eae(!1,i.comp);o&&nae(t,n,r,void 0,e)})}function nae(t,e,n,i,r){let{editModelSvc:o,valueSvc:s}=t;if(!o)return;let{rowNode:a,column:l}=e;if(!(a&&l))return;let c=o.getEdit(e)?.oldValue??s.getValue(l,a,void 0,"api"),u=!!HU(t,e)?.comp?.getCellEditor();n===void 0&&(n=QF),o.setEdit(e,{newValue:n,oldValue:c,state:u?"editing":"changed"});let{value:h}=s.getValueForDisplay(l,a,!0);if(n=h,o.setEdit(e,{newValue:n}),n===c||u)return;let f=o.getEdit(e);t.editSvc?.dispatchCellEvent(e,r?.event,"cellValueChanged",{valueChanged:f&&Jse(f),newValue:f?.newValue,oldValue:f?.oldValue})}function SF(t){let e=Qse(t),n=new Use,{ariaAnnounce:i,localeSvc:r,editModelSvc:o,gos:s}=t,a=s.get("editType")==="fullRow",c=VF(r)("ariaValidationErrorPrefix","Cell Editor Validation");for(let u of e){let{ctrl:h,editor:f}=u,{rowNode:p,column:v}=h,m=f.getValidationErrors?.()??[],g=f.getValidationElement?.();if(g){let C=m!=null&&m.length>0,y=C?m.join(". "):"";Are(g,C),C&&i.announceValue(`${c} ${m}`,"editorValidation"),g instanceof HTMLInputElement?g.setCustomValidity(y):g.classList.toggle("invalid",C)}m?.length>0&&n.setCellValidation({rowNode:p,column:v},{errorMessages:m})}tae(t),o?.setCellValidationModel(n);let d=new Set;for(let{ctrl:u}of e)d.add(u.rowCtrl);if(a){let u=iae(t);o?.setRowValidationModel(u)}for(let u of d.values()){u.rowEditStyleFeature?.applyRowStyles();for(let h of u.getAllCellCtrls())h.tooltipFeature?.refreshTooltip(!0),h.editorTooltipFeature?.refreshTooltip(!0),h.editStyleFeature?.applyCellStyles?.()}}var iae=t=>{let e=new Gse,n=t.gos.get("getFullRowEditValidationErrors"),i=t.editModelSvc?.getEditMap();if(!i)return e;for(let r of i.keys()){let o=i.get(r);if(!o)continue;let s=[],{rowIndex:a,rowPinned:l}=r;for(let d of o.keys()){let u=o.get(d);u&&s.push(ae(k({column:d,colId:d.getColId(),rowIndex:a,rowPinned:l},u),{newValue:u.newValue===QF?void 0:u.newValue}))}let c=n?.({editorsState:s})??[];c.length>0&&e.setRowValidation({rowNode:r},{errorMessages:c})}return e};var rae="ag-column-first",oae="ag-column-last";function zU(t,e,n,i){return di(t)?[]:aae(t.headerClass,t,e,n,i)}function UU(t,e,n){t.toggleCss(rae,n.isColAtEdge(e,"first")),t.toggleCss(oae,n.isColAtEdge(e,"last"))}function sae(t,e,n,i){return jt(e,{colDef:t,column:n,columnGroup:i})}function aae(t,e,n,i,r){if(di(t))return[];let o;if(typeof t=="function"){let s=sae(e,n,i,r);o=t(s)}else o=t;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function Oy(t){return!!(t.rowPinned&&t.pinnedSibling)}function mo(t,e,n,i){let r=e==="top";if(!n)return mo(t,e,r?t.getPinnedTopRow(0):t.getPinnedBottomRow(0),i);if(!i){let l=r?t.getPinnedTopRowCount():t.getPinnedBottomRowCount();return mo(t,e,n,r?t.getPinnedTopRow(l-1):t.getPinnedBottomRow(l-1))}let o=!1,s=!1,a=[];return t.forEachPinnedRow(e,l=>{if(l===n&&!o){o=!0,a.push(l);return}if(o&&l===i){s=!0,a.push(l);return}o&&!s&&a.push(l)}),a}var ne={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},xF=!1,Dx=0;function lae(t){Dx>0||(t.addEventListener("keydown",Tx),t.addEventListener("mousedown",Tx))}function cae(t){Dx>0||(t.removeEventListener("keydown",Tx),t.removeEventListener("mousedown",Tx))}function Tx(t){let e=xF,n=t.type==="keydown";n&&(t.ctrlKey||t.metaKey||t.altKey)||e!==n&&(xF=n)}function dae(t){let e=zi(t);return lae(e),Dx++,()=>{Dx--,cae(e)}}function uae(){return xF}function hae(t,e,n){e.addManagedElementListeners(n,{keydown:i=>{if(!i.defaultPrevented&&i.key===ne.TAB){let r=i.shiftKey;Yd(t,n,!1,r)||Pf(t,r)&&i.preventDefault()}}})}function Df(t,e,n=!1){let i=Wre,r=Uz;e&&(r+=", "+e),n&&(r+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(t.querySelectorAll(i)).filter(l=>Yo(l)),s=Array.prototype.slice.apply(t.querySelectorAll(r));return s.length?((l,c)=>l.filter(d=>c.indexOf(d)===-1))(o,s):o}function $d(t,e=!1,n=!1,i=!1){let r=Df(t,i?".ag-tab-guard":null,n),o=e?vn(r):r[0];return o?(o.focus({preventScroll:!0}),!0):!1}function Yd(t,e,n,i){let r=Df(e,n?':not([tabindex="-1"])':null),o=Wn(t),s;n?s=r.findIndex(l=>l.contains(o)):s=r.indexOf(o);let a=s+(i?-1:1);return a<0||a>=r.length?null:r[a]}function GU(t,e=5){let n=0;for(;t&&A6(t)===null&&++n<=e;)t=t.parentElement;return A6(t)===null?null:t}function fae(t,e){return t.ctrlsSvc.get("gridCtrl").focusInnerElement(e)}function zd(t){return t.gos.get("suppressHeaderFocus")||!!t.overlays?.isExclusive()}function JF(t){return t.gos.get("suppressCellFocus")||!!t.overlays?.isExclusive()}function Pf(t,e,n=!1){let i=t.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(e)?!0:((n||!e&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(e),!1)}function pae(t,e,n,{rowNode:i,column:r},o){return jt(t.gos,{type:n,node:i,data:i.data,value:o,column:r,colDef:r.getColDef(),rowPinned:i.rowPinned,event:e,rowIndex:i.rowIndex})}function gae(t,e=!1){return t===ne.DELETE?!0:!e&&t===ne.BACKSPACE?Vz():!1}var mae=class extends he{constructor(t,e,n,i){super(),this.cellCtrl=t,this.rowNode=n,this.rowCtrl=i,this.beans=e}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(t){let e=t.key;switch(e){case ne.ENTER:this.onEnterKeyDown(t);break;case ne.F2:this.onF2KeyDown(t);break;case ne.ESCAPE:this.onEscapeKeyDown(t);break;case ne.TAB:this.onTabKeyDown(t);break;case ne.BACKSPACE:case ne.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case ne.DOWN:case ne.UP:case ne.RIGHT:case ne.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){let{cellCtrl:n,beans:i}=this;if(!i.editSvc?.isEditing(n,{withOpenEditor:!0})){if(t.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(t);else{let r=n.getFocusedCellPosition();i.navigation?.navigateToNextCell(t,e,r,!0)}t.preventDefault()}}onShiftRangeSelect(t){let{rangeSvc:e,navigation:n}=this.beans;if(!e)return;let i=e.extendLatestRangeInDirection(t);i&&n?.ensureCellVisible(i)}onTabKeyDown(t){this.beans.navigation?.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){let{cellCtrl:n,beans:i,rowNode:r}=this,{gos:o,rangeSvc:s,eventSvc:a,editSvc:l}=i;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),gae(t,o.get("enableCellEditingOnBackspace"))&&!l?.isEditing(n,{withOpenEditor:!0})){if(s&&Ff(o))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let{column:c}=n,d=this.beans.valueSvc.getDeleteValue(c,r);r.setDataValue(c,d,"cellClear")}}else l?.isEditing(n,{withOpenEditor:!0})||i.editSvc?.startEditing(n,{startedEdit:!0,event:e});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(t){let{cellCtrl:e,beans:n}=this,{editSvc:i,navigation:r}=n,o=i?.isEditing(e),s=e.rowNode,a=i?.isRowEditing(s),l=c=>{i?.startEditing(c,{startedEdit:!0,event:t})&&t.preventDefault()};if(o||a){if(this.isCtrlEnter(t)){i?.applyBulkEdit(e,n?.rangeSvc?.getCellRanges()||[]);return}if(SF(n),i?.checkNavWithValidation(e,t)==="block-stop")return;i?.isEditing(e,{withOpenEditor:!0})?i?.stopEditing(e,{event:t}):a&&!e.isCellEditable()?i?.stopEditing({rowNode:s},{event:t}):l(e)}else if(n.gos.get("enterNavigatesVertically")){let c=t.shiftKey?ne.UP:ne.DOWN;r?.navigateToNextCell(null,c,e.cellPosition,!1)}else{if(i?.hasValidationErrors())return;i?.hasValidationErrors(e)&&i.revertSingleCellEdit(e,!0),l(e)}}isCtrlEnter(t){return(t.ctrlKey||t.metaKey)&&t.key===ne.ENTER}onF2KeyDown(t){let{cellCtrl:e,beans:{editSvc:n}}=this;n?.isEditing()&&(SF(this.beans),n?.checkNavWithValidation(void 0,t)==="block-stop")||n?.startEditing(e,{startedEdit:!0,event:t})}onEscapeKeyDown(t){let{cellCtrl:e,beans:{editSvc:n}}=this;n?.checkNavWithValidation(e,t)==="block-stop"&&n.revertSingleCellEdit(e),n?.stopEditing(e,{event:t,cancel:!0})}processCharacter(t){let n=t.target!==this.eGui,{beans:{editSvc:i},cellCtrl:r}=this;if(n||i?.isEditing(r,{withOpenEditor:!0}))return;if(t.key===ne.SPACE)this.onSpaceKeyDown(t);else if(i?.isCellEditable(r,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(r))return;i?.startEditing(r,{startedEdit:!0,event:t,source:"api"}),!r.editCompDetails?.params?.suppressPreventDefault&&t.preventDefault()}}onSpaceKeyDown(t){let{gos:e,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&Hd(e)&&this.beans.selectionSvc?.handleSelectionEvent(t,i,"spaceKey"),t.preventDefault()}};function WU(t,e,n){if(n===0)return!1;let i=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(i,r)<=n}function j6({gos:t},e){return e.button===2||e.ctrlKey&&t.get("allowContextMenuWithControlKey")}var vae=class extends he{constructor(t,e,n){super(),this.cellCtrl=t,this.column=n,this.beans=e}onMouseEvent(t,e){if(!Oa(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.beans.touchSvc?.handleCellDoubleClick(this,t))return;let{eventSvc:e,rangeSvc:n,editSvc:i,editModelSvc:r,frameworkOverrides:o}=this.beans,s=t.ctrlKey||t.metaKey,{cellCtrl:a}=this,{column:l,cellPosition:c}=a;n&&s&&n.getCellRangeCount(c)>1&&n.intersectLastRange(!0);let d=a.createEvent(t,"cellClicked");e.dispatchEvent(d);let u=l.getColDef();if(u.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{u.onCellClicked(d)})},0),r?.getState(a)!=="editing"){let h=i?.isEditing(),f=r?.getCellValidationModel().getCellValidationMap().size??0,p=r?.getRowValidationModel().getRowValidationMap().size??0;if(h&&(f>0||p>0))return;i?.shouldStartEditing(a,t)?i?.startEditing(a,{event:t}):i?.shouldStopEditing(a,t)&&i?.stopEditing(a)}}onCellDoubleClicked(t){let{column:e,beans:n,cellCtrl:i}=this,{eventSvc:r,frameworkOverrides:o,editSvc:s,editModelSvc:a}=n,l=e.getColDef(),c=i.createEvent(t,"cellDoubleClicked");if(r.dispatchEvent(c),typeof l.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{l.onCellDoubleClicked(c)})},0),s?.shouldStartEditing(this.cellCtrl,t)&&this.beans.editModelSvc?.getState(this.cellCtrl)!=="editing"){let d=s?.isEditing(),u=a?.getCellValidationModel().getCellValidationMap().size??0,h=a?.getRowValidationModel().getRowValidationMap().size??0;if(d&&(u>0||h>0))return;s?.startEditing(i,{event:t})}}onMouseDown(t){let{ctrlKey:e,metaKey:n,shiftKey:i}=t,r=t.target,{cellCtrl:o,beans:s}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:d,gos:u,editSvc:h}=s;if(this.isRightClickInExistingRange(t))return;let f=l&&!l.isEmpty(),p=this.containsWidget(r),{cellPosition:v,column:m}=o,g=wy(m);if(c&&g&&!c.handleMouseDownOnCell(v,t)){l&&t.preventDefault(),t.stopImmediatePropagation();return}if(!i||!f){let C=h?.isEditing(o),w=u.get("enableCellTextSelection")&&t.defaultPrevented,R=(HF()||w)&&!C&&!zF(r)&&!p;o.focusCell(R,t)}if(i&&f&&!d.isCellFocused(v)){t.preventDefault();let C=d.getFocusedCell();if(C){let{column:y,rowIndex:w,rowPinned:R}=C;h?.isEditing(C)&&h?.stopEditing(C),d.setFocusedCell({column:y,rowIndex:w,rowPinned:R,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:t})}}if(!p){if(l){g&&t.preventDefault();let C=j6(this.beans,t)&&g;if(i)l.extendLatestRangeToCell(v);else if(!C){let y=e||n;l.setRangeToCell(v,y)}}a.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseDown"))}}isRightClickInExistingRange(t){let{rangeSvc:e}=this.beans;if(e){let n=e.isCellInAnyRange(this.cellCtrl.cellPosition),i=j6(this.beans,t);if(n&&i)return!0}return!1}containsWidget(t){return Vd(t,"ag-selection-checkbox",3)||Vd(t,"ag-drag-handle",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;let{eventSvc:e,colHover:n}=this.beans;e.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;let{eventSvc:e,colHover:n}=this.beans;e.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;let e=this.cellCtrl.eGui,n=e.contains(t.target),i=e.contains(t.relatedTarget);return n&&i}},yae=class extends he{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.column,this.rowNode=t.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;let t=this.cellCtrl.getCellSpan();if(t||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),t||this._legacyApplyRowSpan(),t){let e=this.refreshSpanHeight.bind(this,t);e(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:e,recalculateRowBounds:e,pinnedHeightChanged:e})}}refreshSpanHeight(t){let e=t.getCellHeight();e!=null&&(this.eContent.style.height=`${e}px`)}onNewColumnsLoaded(){let t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){let t=this.getColSpanningList();Kd(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;let t=this.getCellWidth();this.eContent.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let{column:t,rowNode:e}=this,n=t.getColSpan(e),i=[];if(n===1)i.push(t);else{let r=t,o=t.getPinned();for(let s=0;r&&s<n&&(i.push(r),r=this.beans.visibleCols.getColAfter(r),!(!r||di(r)||o!==r.getPinned()));s++);}return i}onLeftChanged(){if(!this.eSetLeft)return;let t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=vn(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return t;let{visibleCols:e}=this.beans,n=e.getColsLeftWidth();if(this.column.getPinned()==="right"){let i=e.bodyWidth;return n+i+(t||0)}return n+(t||0)}_legacyApplyRowSpan(t){if(this.rowSpan===1&&!t)return;let n=KF(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},Cae="ag-cell",bae="ag-cell-auto-height",wae="ag-cell-normal-height",_ae="ag-cell-focus",Sae="ag-cell-first-right-pinned",xae="ag-cell-last-left-pinned",Eae="ag-cell-not-inline-editing",Mae="ag-cell-wrap-text",Ax="cellCtrl";function jU(t,e){return gU(t,e,Ax)}var Rae=0,ux=class extends he{constructor(t,e,n,i){super(),this.column=t,this.rowNode=e,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;let{colId:r}=t;this.instanceId=r+"-"+Rae++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){let{beans:t}=this;this.positionFeature=new yae(this,t),this.customStyleFeature=t.cellStyles?.createCellCustomStyleFeature(this,t),this.editStyleFeature=t.editSvc?.createCellStyleFeature(this,t),this.mouseListener=new vae(this,t,this.column),this.keyboardListener=new mae(this,t,this.rowNode,this.rowCtrl),this.enableTooltipFeature();let{rangeSvc:e}=t;e&&Ff(t.gos)&&(this.rangeFeature=e.createCellRangeFeature(t,this)),wy(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(t,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){let t=this.beans.context;this.positionFeature=t.destroyBean(this.positionFeature),this.editorTooltipFeature=t.destroyBean(this.editorTooltipFeature),this.customStyleFeature=t.destroyBean(this.customStyleFeature),this.editStyleFeature=t.destroyBean(this.editStyleFeature),this.mouseListener=t.destroyBean(this.mouseListener),this.keyboardListener=t.destroyBean(this.keyboardListener),this.rangeFeature=t.destroyBean(this.rangeFeature),this.rowResizeFeature=t.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,e){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,t,e)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(t){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,t),SF(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(t,e,n,i,r,o,s){this.comp=t,this.eGui=e,this.printLayout=r,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(t),this.editStyleFeature?.setComp(t),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(t),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()?this.editSvc?.startEditing(this,{startedEdit:!0,source:"api"}):this.showValue(!1,!0),this.onCompAttachedFuncs.length&&(this.onCompAttachedFuncs.forEach(a=>a()),this.onCompAttachedFuncs=[])}setupAutoHeight(t,e){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,t,e)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){let{beans:t,column:e}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:r}=t,o=e.getColDef(),s=this.createCellRendererParams();s.deferRender=!0;let a=G6(n,o,s);if(i.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let l,c=new Gn(d=>{l=d});return this.addManagedListeners(r,{bodyScrollEnd:()=>l()}),{loadingComp:a,onReady:c}}return{loadingComp:a,onReady:Gn.resolve()}}showValue(t,e){let{beans:n,column:i,rowNode:r,rangeFeature:o}=this,{userCompFactory:s}=n,a=this.getValueToDisplay(),l,c=r.stub&&r.groupData?.[i.getId()]==null,d=i.getColDef();if(c||this.isCellRenderer()){let u=this.createCellRendererParams();!c||wy(i)?l=U6(s,d,u):l=G6(s,d,u)}if(!l&&!c&&n.findSvc?.isMatch(r,i)){let u=this.createCellRendererParams();l=U6(s,ae(k({},i.getColDef()),{cellRenderer:"agFindCellRenderer"}),u)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(r,{checkSiblings:!0})){let u=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});u&&(u.compDetails?l=u.compDetails:u.valueToDisplay&&(a=u.valueToDisplay))}this.comp.setRenderDetails(l,a,t),!e&&o&&Ba(n,()=>o?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t),!0),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t,e=!1){return(this.rowNode.rowPinned==null||e&&Oy(this.rowNode))&&!!t}isCheckboxSelection(t){let{rowSelection:e,groupDisplayType:n}=this.beans.gridOptions,i=bx(e),r=Py(this.column);return n==="custom"&&i!=="selectionColumn"&&r?!1:t.checkboxSelection||r&&typeof e=="object"&&Ef(e)}refreshShouldDestroy(){let t=this.column.getColDef(),e=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t),!0),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),i=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return e||n||i||r}onPopupEditorClosed(){let{editSvc:t}=this.beans;t?.isEditing(this,{withOpenEditor:!0})&&t?.stopEditing(this,{source:t?.isBatchEditing()?"ui":"api"})}stopEditing(t=!1){let{editSvc:e}=this.beans;return e?.stopEditing(this,{cancel:t,source:e?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){let{value:t,valueFormatted:e,column:n,rowNode:i,comp:r,eGui:o,beans:{valueSvc:s,gos:a,editSvc:l}}=this;return jt(a,{value:t,valueFormatted:e,getValue:()=>s.getValueForDisplay(n,i).value,setValue:d=>l?.setDataValue({rowNode:i,column:n},d)||s.setValue(i,n,d),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:r.getParentOfValue(),registerRowDragger:(d,u,h,f)=>this.registerRowDragger(d,u,f),setTooltip:(d,u)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(d,u),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell({force:t,suppressFlash:e,newData:n}={}){if(this.suppressRefreshCell)return;let i=this.column.getColDef(),r=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,o=t||r||n,s=!!this.comp,a=this.updateAndFormatValue(s),l=o||a;if(s){if(l){this.showValue(!!n,!1);let c=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!e&&!c&&i.enableCellChangeFlash&&this.beans.cellFlashSvc?.flashCell(this),this.editStyleFeature?.applyCellStyles?.(),this.customStyleFeature?.applyUserStyles(),this.customStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshTooltip(),this.customStyleFeature?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueSvc.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let e=this.value,n=this.valueFormatted,{value:i,valueFormatted:r}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=i,this.valueFormatted=r,t?!this.valuesAreEqual(e,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(t,e){let n=this.column.getColDef();return n.equals?n.equals(t,e):t===e}addDomData(t){let e=this.eGui;If(this.beans.gos,e,Ax,this),t.addDestroyFunc(()=>If(this.beans.gos,e,Ax,null))}createEvent(t,e){let{rowNode:n,column:i,value:r,beans:o}=this;return pae(o,t,e,{rowNode:n,column:i},r)}processCharacter(t){this.keyboardListener?.processCharacter(t)}onKeyDown(t){this.keyboardListener?.onKeyDown(t)}onMouseEvent(t,e){this.mouseListener?.onMouseEvent(t,e)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{comp:t,column:e,beans:n}=this;UU(t,e,n.visibleCols)}refreshAriaColIndex(){let t=this.beans.visibleCols.getAriaColIndex(this.column);Lz(this.eGui,t)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){let{rowIndex:t,rowPinned:e}=this.cellPosition;return{rowIndex:t,rowPinned:e}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(t=!1,e){this.beans.focusSvc.setFocusedCell(ae(k({},this.getFocusedCellPosition()),{forceBrowserFocus:t,sourceEvent:e}))}restoreFocus(t=!1){let{beans:{editSvc:e,focusSvc:n},comp:i}=this;if(!i||e?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;let r=()=>{if(!this.isAlive())return;let o=i.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(t){setTimeout(r,0);return}r()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(t){let e=this.eGui;e&&(wy(this.column)&&(t=!0),Fs(e,"tabindex",t?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;let t=this.column.isFirstRightPinned();this.comp.toggleCss(Sae,t)}onLastLeftPinnedChanged(){if(!this.comp)return;let t=this.column.isLastLeftPinned();this.comp.toggleCss(xae,t)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){let t=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=t),t}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(t){let{beans:e}=this;if(JF(e))return;if(!this.comp){t&&(this.focusEventWhileNotReady=t);return}let n=this.isCellFocused(),i=e.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(_ae,n),n&&t&&t.forceBrowserFocus){let r=this.comp.getFocusableElement();if(i){let o=Df(r,null,!0);o.length&&(r=o[0])}r.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}n&&this.rowCtrl.announceDescription()}createCellPosition(){let{rowIndex:t,rowPinned:e}=this.rowNode;this.cellPosition={rowIndex:t,rowPinned:ka(e),column:this.column}}applyStaticCssClasses(){let{comp:t}=this;t.toggleCss(Cae,!0),t.toggleCss(Eae,!0);let e=this.column.isAutoHeight()==!0;t.toggleCss(bae,e),t.toggleCss(wae,!e)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.comp.toggleCss(Mae,t)}dispatchCellContextMenuEvent(t){let e=this.column.getColDef(),n=this.createEvent(t,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),e.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{e.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(Wn(this.beans))??!1}createSelectionCheckbox(){let t=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return t&&this.beans.context.createBean(t),t}registerRowDragger(t,e,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,e);return}let i=this.createRowDragComp(t,e,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}))}createRowDragComp(t,e,n){let i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,t,e,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){this.onEditorAttachedFuncs.forEach(t=>t()),this.onEditorAttachedFuncs=[]}setFocusedCellPosition(t){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}},$U="__ag_grid_instance";function qU(t,e){e[$U]=t.gridInstanceId}function Ay(t,e){return Dae(t,e.target)}function Dae(t,e){let n=e;for(;n;){let i=n[$U];if(Ve(i))return i===t.gridInstanceId;n=n.parentElement}return!1}function Tae(t,e){return jU(t,e.target)?.getFocusedCellPosition()??null}var Aae=class extends he{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.dragSvc=t.dragSvc,this.environment=t.environment,this.userCompFactory=t.userCompFactory}addDragSource(t,e=!1){let n={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:n,dragSource:t}),this.dragSvc.addDragSource(n)}getDragAndDropImageComponent(){let{dragAndDropImageComp:t}=this;return!t||!t.comp?null:t.comp}removeDragSource(t){let{dragSourceAndParamsList:e,dragSvc:n}=this,i=e.find(r=>r.dragSource===t);i&&(n.removeDragSource(i.params),Ls(e,i))}destroy(){let{dragSourceAndParamsList:t,dragSvc:e,dropTargets:n}=this;t.forEach(i=>e.removeDragSource(i.params)),t.length=0,n.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=t.getDragItem(),t.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(t){this.dragSource?.onDragStopped?.();let{lastDropTarget:e}=this;if(e?.onDragStop){let n=this.createDropTargetEvent(e,t,null,null,!1);e.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){let{dragSource:t,lastDropTarget:e}=this;t?.onDragCancelled?.(),e?.onDragCancel&&e.onDragCancel(this.createDropTargetEvent(e,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(t,e=!1){let n=this.getHorizontalDirection(t),i=this.getVerticalDirection(t);this.eventLastTime=t,this.positionDragAndDropImageComp(t);let r=this.dropTargets.filter(d=>this.isMouseOnDropTarget(t,d)),o=this.findCurrentDropTarget(t,r),{lastDropTarget:s,dragSource:a,dragAndDropImageComp:l,dragItem:c}=this;if(o!==s){if(this.leaveLastTargetIfExists(t,n,i,e),s!==null&&o===null&&a?.onGridExit?.(c),s===null&&o!==null&&a?.onGridEnter?.(c),this.enterDragTargetIfExists(o,t,n,i,e),o&&l){let{comp:d,promise:u}=l;d?d.setIcon(o.getIconName?o.getIconName():null,!1):u.then(h=>{h&&h.setIcon(o.getIconName?o.getIconName():null,!1)})}this.lastDropTarget=o}else if(o&&o.onDragging){let d=this.createDropTargetEvent(o,t,n,i,e);o.onDragging(d)}}getAllContainersFromDropTarget(t){let e=t.getSecondaryContainers?t.getSecondaryContainers():null,n=[[t.getContainer()]];return e?n.concat(e):n}isMouseOnDropTarget(t,e){let n=this.getAllContainersFromDropTarget(e),i=!1,r=(a,l)=>{for(let c of l){let{width:d,height:u,left:h,right:f,top:p,bottom:v}=c.getBoundingClientRect();if(d===0||u===0)return!1;let m=a.clientX>=h&&a.clientX<f,g=a.clientY>=p&&a.clientY<v;if(!m||!g)return!1}return!0};for(let a of n)if(r(t,a)){i=!0;break}let{eElement:o,type:s}=this.dragSource;return e.targetContainsSource&&!e.getContainer().contains(o)?!1:i&&e.isInterestedIn(s,o)}findCurrentDropTarget(t,e){let n=e.length;if(n===0)return null;if(n===1)return e[0];let r=My(this.beans).elementsFromPoint(t.clientX,t.clientY);for(let o of r)for(let s of e)if(this.getAllContainersFromDropTarget(s).flatMap(l=>l).indexOf(o)!==-1)return s;return null}enterDragTargetIfExists(t,e,n,i,r){if(t&&t.onDragEnter){let o=this.createDropTargetEvent(t,e,n,i,r);t.onDragEnter(o)}}leaveLastTargetIfExists(t,e,n,i){let{lastDropTarget:r}=this;if(!r)return;if(r.onDragLeave){let s=this.createDropTargetEvent(r,t,e,n,i);r.onDragLeave(s)}let o=this.getDragAndDropImageComponent();o&&o.setIcon(null,!1)}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==t.getContainer())}hasExternalDropZones(){return this.dropTargets.some(t=>t.external)}findExternalZone(t){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===t.getContainer())||null}isDropZoneWithinThisGrid(t){let n=this.ctrlsSvc.getGridBodyCtrl().eGridBody,{dropZoneTarget:i}=t;return n.contains(i)}getHorizontalDirection(t){let e=this.eventLastTime?.clientX,n=t.clientX;return e===n?null:e>n?"left":"right"}getVerticalDirection(t){let e=this.eventLastTime?.clientY,n=t.clientY;return e===n?null:e>n?"up":"down"}createDropTargetEvent(t,e,n,i,r){let o=t.getContainer(),s=o.getBoundingClientRect(),{dragItem:a,dragSource:l,gos:c}=this,d=e.clientX-s.left,u=e.clientY-s.top;return jt(c,{event:e,x:d,y:u,vDirection:i,hDirection:n,dragSource:l,fromNudge:r,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(t){let e=this.getDragAndDropImageComponent();e&&doe(e.getGui(),t,this.beans)}removeDragAndDropImageComponent(){let{dragAndDropImageComp:t}=this;if(t){let{comp:e}=t;if(e){let n=e.getGui();this.dragAndDropImageParent?.removeChild(n),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:t,gos:e,userCompFactory:n}=this;if(!t)return;let i=vse(n,jt(e,{dragSource:t}));if(!i)return;let r=i.newAgStackInstance();this.dragAndDropImageComp={promise:r},r.then(o=>{!o||!this.isAlive()||(this.processDragAndDropImageComponent(o),this.dragAndDropImageComp.comp=o)})}processDragAndDropImageComponent(t){let{dragSource:e,environment:n}=this;if(!e)return;let i=t.getGui();i.style.setProperty("position","absolute"),i.style.setProperty("z-index","9999"),qU(this.gos,i),n.applyThemeClasses(i),t.setIcon(null,!1);let{dragItemName:r}=e;typeof r=="function"&&(r=r()),t.setLabel(r||""),i.style.top="20px",i.style.left="20px";let o=YF(this.beans);this.dragAndDropImageParent=o,o?o.appendChild(i):Ee(54)}registerGridDropTarget(t,e){let n={getContainer:t,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),e.addDestroyFunc(()=>this.removeDropTarget(n))}},Iae=class extends he{constructor(){super(...arguments),this.beanName="dragSvc",this.dragEndFunctions=[],this.dragSources=[]}destroy(){let{dragSources:t}=this;t.forEach(this.removeListener.bind(this)),t.length=0,super.destroy()}removeListener(t){let e=t.dragSource.eElement,n=t.mouseDownListener;if(e.removeEventListener("mousedown",n),t.touchEnabled){let i=t.touchStartListener;e.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(t){let{dragSources:e}=this,n=e.find(i=>i.dragSource===t);n&&(this.removeListener(n),Ls(e,n))}addDragSource(t){let e=this.onMouseDown.bind(this,t),{eElement:n,includeTouch:i,stopPropagationForTouch:r}=t;n.addEventListener("mousedown",e);let o=null,s=this.gos.get("suppressTouch");i&&!s&&(o=a=>{zF(a.target)||(r&&a.stopPropagation(),this.onTouchStart(t,a))},n.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:e,touchStartListener:o,touchEnabled:!!i})}onTouchStart(t,e){this.currentDragParams=t,this.dragging=!1;let n=e.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,t.eElement),r=l=>this.onTouchUp(l,t.eElement),o=l=>{l.cancelable&&l.preventDefault()},s=e.target,a=[{target:My(this.beans),type:"touchmove",listener:o,options:{passive:!1}},{target:s,type:"touchmove",listener:i,options:{passive:!0}},{target:s,type:"touchend",listener:r,options:{passive:!0}},{target:s,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,t.eElement)}onMouseDown(t,e){let n=e;if(t.skipMouseEvent&&t.skipMouseEvent(e)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;let i=c=>this.onMouseMove(c,t.eElement),r=c=>this.onMouseUp(c,t.eElement),o=c=>c.preventDefault(),s=c=>{c.key===ne.ESCAPE&&this.cancelDrag(t.eElement)},a=My(this.beans),l=[{target:a,type:"mousemove",listener:i},{target:a,type:"mouseup",listener:r},{target:a,type:"contextmenu",listener:o},{target:a,type:"keydown",listener:s}];this.addTemporaryEvents(l),t.dragStartPixels===0&&this.onMouseMove(e,t.eElement)}addTemporaryEvents(t){t.forEach(e=>{let{target:n,type:i,listener:r,options:o}=e;n.addEventListener(i,r,o)}),this.dragEndFunctions.push(()=>{t.forEach(e=>{let{target:n,type:i,listener:r,options:o}=e;n.removeEventListener(i,r,o)})})}isEventNearStartEvent(t,e){let{dragStartPixels:n}=this.currentDragParams,i=Ve(n)?n:4;return WU(t,e,i)}getFirstActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}onCommonMove(t,e,n){if(!this.dragging){if(this.isEventNearStartEvent(t,e))return;if(this.dragging=!0,this.eventSvc.dispatchEvent({type:"dragStarted",target:n}),this.currentDragParams.onDragStart(e),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(e)}this.currentDragParams?.onDragging(t)}onTouchMove(t,e){let n=this.getFirstActiveTouch(t.touches);n&&this.onCommonMove(n,this.touchStart,e)}onMouseMove(t,e){HF()&&zi(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)}shouldPreventMouseEvent(t){let{gos:e}=this,n=e.get("enableCellTextSelection"),i=t.type==="mousemove",r=o=>!!o.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button");return n&&i&&t.cancelable&&Ay(e,t)&&!r(t)}onTouchUp(t,e){let n=this.getFirstActiveTouch(t.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,e)}onMouseUp(t,e){this.onUpCommon(t,e)}onUpCommon(t,e){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(t),this.eventSvc.dispatchEvent({type:"dragStopped",target:e})),this.resetDragProperties()}cancelDrag(t){this.eventSvc.dispatchEvent({type:"dragCancelled",target:t}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null;let{dragEndFunctions:t}=this;t.forEach(e=>e()),t.length=0}};function KU(t,e){return t+"_"+e}function Xn(t){return t instanceof YU}var YU=class extends he{constructor(t,e,n,i){super(),this.providedColumnGroup=t,this.groupId=e,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return KU(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(e=>e.isMoving())}checkLeft(){if(this.displayedChildren.forEach(t=>{Xn(t)&&t.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let e=vn(this.displayedChildren).getLeft();this.setLeft(e)}else{let t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let t=0;return this.displayedChildren?.forEach(e=>{t+=e.getActualWidth()}),t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;return this.displayedChildren.forEach(e=>{e.isResizable()&&(t=!0)}),t}getMinWidth(){let t=0;return this.displayedChildren.forEach(e=>{t+=e.getMinWidth()}),t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){let t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){let e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e}addDisplayedLeafColumns(t){this.displayedChildren.forEach(e=>{Na(e)?t.push(e):Xn(e)&&e.addDisplayedLeafColumns(t)})}addLeafColumns(t){this.children.forEach(e=>{Na(e)?t.push(e):Xn(e)&&e.addLeafColumns(t)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t!=null&&t.isPadding();)t=t.getParent();if(!(t?t.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(Xn(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":t.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":t.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},EF="row-group-",eP="t-",tP="b-",Fae=0,Ly=class{constructor(t){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Fae++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,e){let{valueCache:n,eventSvc:i}=this.beans,r=this.data;this.data=t,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();let o=this.createDataChangedEvent(t,r,e);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=t;let a=this.sibling.createDataChangedEvent(t,r,e);this.sibling.__localEventService?.dispatchEvent(a)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});let s=this.pinnedSibling;s&&(s.data=t,s.__localEventService?.dispatchEvent(s.createDataChangedEvent(t,r,e)),i.dispatchEvent({type:"rowNodeDataChanged",node:s}))}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,e,n){return{type:"dataChanged",node:this,oldData:e,newData:t,update:n}}getRowIndexString(){return this.rowIndex==null?(In(13),null):this.rowPinned==="top"?eP+this.rowIndex:this.rowPinned==="bottom"?tP+this.rowIndex:this.rowIndex.toString()}setDataAndId(t,e){let{selectionSvc:n}=this.beans,i=n?.createDaemonNode?.(this),r=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,i));let o=this.createDataChangedEvent(t,r,!1);this.__localEventService?.dispatchEvent(o)}setId(t){let e=Cx(this.beans.gos);if(e)if(this.data){let n=this.parent?.getRoute()??[];this.id=e({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(EF)&&In(14,{groupPrefix:EF})}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setRowHeight(t,e=!1){this.rowHeight=t,this.rowHeightEstimated=e,this.dispatchRowEvent("heightChanged")}setExpanded(t,e,n){this.beans.expansionSvc?.setExpanded(this,t,e,n)}setDataValue(t,e,n){let{colModel:i,valueSvc:r,gos:o,editSvc:s}=this.beans,a=typeof t!="string"?t:i.getCol(t)??i.getColDefCol(t);if(!a)return!1;let l=r.getValueForDisplay(a,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){let{beans:{eventSvc:u},data:h,rowIndex:f,rowPinned:p}=this;return u.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:f,rowPinned:p,column:a,colDef:a.colDef,data:h,node:this,oldValue:l,newValue:e,value:e,source:n}),!1}if(s){let u=s.setDataValue({rowNode:this,column:a},e,n);if(u!=null)return u}let c=r.setValue(this,a,e,n);this.dispatchCellChangedEvent(a,e,l);let d=this.pinnedSibling;return d&&c&&d.dispatchCellChangedEvent(a,e,l),c}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,{rowChildrenSvc:e}=this.beans;e&&(t=e.getHasChildrenValue(this)),t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,e,n){let i={type:"cellChanged",node:this,column:t,newValue:e,oldValue:n};this.__localEventService?.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){return this.footer?this.sibling.isSelected():this.rowPinned&&this.pinnedSibling?this.pinnedSibling.isSelected():this.__selected}depthFirstSearch(t){this.childrenAfterGroup?.forEach(e=>e.depthFirstSearch(t)),t(this)}dispatchRowEvent(t){this.__localEventService?.dispatchEvent({type:t,node:this})}setSelected(t,e=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:t,clearSelection:e,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(t,e){this.__localEventService||(this.__localEventService=new Gd),this.__localEventService.addEventListener(t,e)}__removeEventListener(t,e){this.removeLocalListener(t,e)}addEventListener(t,e){this.beans.validation?.checkRowEvents(t),this.__localEventService||(this.__localEventService=new Gd),this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.__localEventService);let n=this.frameworkEventListenerService?.wrap(t,e)??e;this.__localEventService.addEventListener(t,n)}removeEventListener(t,e){let n=this.frameworkEventListenerService?.unwrap(t,e)??e;this.removeLocalListener(t,n)}removeLocalListener(t,e){this.__localEventService?.removeEventListener(t,e),this.__localEventService?.noRegisteredListenersExist()&&(this.__localEventService=null)}isFullWidthCell(){if(Ee(61),this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let t=[],e=this;for(;e&&e.key!=null;)t.push(e.key),e=e.parent;return t.reverse()}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){return this.childStore?this.childStore.getFirstNode():this.childrenAfterSort?.[0]??null}};function Pae(t,e,n){return jt(e,{type:n,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned})}var kae=new Set(["__localEventService","__objectId","sticky","__autoHeights","__checkAutoHeightsDebounced","childStore"]);function Oae(t,e){let n=new Ly(e);return Object.keys(t).forEach(i=>{kae.has(i)||(n[i]=t[i])}),n.oldRowTop=null,n}var XU={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},Lae=new Set(Object.values(XU));function Gl(t,e){let n=t.filterUi;if(!n)return null;if(n.created)return n.promise;if(e)return null;let i=n.create(n.refreshed),r=n;return r.created=!0,r.promise=i,i}function Nae(t,e,n,i,r,o){return e.refresh?.(ae(k({},n),{model:i,source:o})),t().then(s=>{if(s){let{filter:a,filterParams:l}=s;ZU(a,l,i,r,o)}})}function ZU(t,e,n,i,r){t?.refresh?.(ae(k({},e),{model:n,state:i,source:r}))}function QU(t,e,n){let i=t();i?.created&&i.promise.then(r=>{let o=e();ZU(r,i.filterParams,o,n()??{model:o},"ui")})}function $6(t,e,n,i,r,o){let s,a=!1,l;switch(t){case"apply":{let c=i();l=c?.model??null,s={state:c?.state,model:l},a=!0;break}case"clear":{s={model:null};break}case"reset":{s={model:null},a=!0,l=null;break}case"cancel":{s={model:n()};break}}r(s),a?o(l):QU(e,n,i)}function Pi(t,e){return t[e]??null}var Bae={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:t=>`(${t[0]}, ${t[1]})`,filterSummaryTextQuote:t=>`"${t[0]}"`};function ql(t,e,n){return Cre(t,Bae,e,n)}function Vae(t){return{tag:"div",cls:t}}var Hae=class extends ln{constructor(t){let{className:e="ag-filter-apply-panel"}=t??{};super(Vae(e)),this.listeners=[],this.className=e}updateButtons(t,e){let n=this.buttons;if(this.buttons=t,n===t)return;let i=this.getGui();Zr(i);let r;this.destroyListeners();let o=document.createDocumentFragment(),s=this.className,a=l=>{let c=`${l}Filter`,d=l?ql(this,c):void 0,u=g=>{this.dispatchLocalEvent({type:l,event:g})};["apply","clear","reset","cancel"].includes(l)||Ee(75);let h=l==="apply",p=On({tag:"button",attrs:{type:h&&e?"submit":"button"},ref:`${l}FilterButton`,cls:`ag-button ag-standard-button ${s}-button${h?" "+s+"-apply-button":""}`,children:d});this.activateTabIndex([p]),h&&(r=p);let v=g=>{g.key===ne.ENTER&&(g.preventDefault(),u(g))},m=this.listeners;p.addEventListener("click",u),m.push(()=>p.removeEventListener("click",u)),p.addEventListener("keydown",v),m.push(()=>p.removeEventListener("keydown",v)),o.append(p)};t.forEach(l=>a(l)),this.eApply=r,i.append(o)}updateValidity(t){let e=this.eApply;e&&xy(e,t===!1)}destroyListeners(){this.listeners.forEach(t=>t()),this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}};function JU(t,e){let{debounceMs:n}=t;return Vx(t)?(n!=null&&Ee(71),0):n??e}function Vx(t){return(t.buttons?.indexOf("apply")??-1)>=0}var zae=class extends ln{constructor(t,e,n,i,r,o){super(),this.column=t,this.wrapper=e,this.eventParent=n,this.updateModel=i,this.isGlobalButtons=r,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){let{comp:t,params:e}=this.wrapper,n=e,i=n.useForm,r=i?"form":"div";this.setTemplate({tag:r,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(t.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,k({filterParamsChanged:({column:o,params:s})=>{o===this.column&&this.resetButtonsPanel(s,this.params)},filterStateChanged:({column:o,state:s})=>{o===this.column&&this.eButtons?.updateValidity(s.valid)},filterAction:({column:o,action:s,event:a})=>{o===this.column&&this.afterAction(s,a)}},this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;let s=this.params;this.resetButtonsPanel(s,s,!0)}}}:void 0))}afterGuiAttached(t){t&&(this.hidePopup=t.hidePopup)}resetButtonsPanel(t,e,n){let{buttons:i,readOnly:r}=e??{},{buttons:o,readOnly:s,useForm:a}=t;if(!n&&r===s&&Az(i,o))return;let l=o&&o.length>0&&!t.readOnly&&!this.isGlobalButtons,c=this.eButtons;if(l){if(this.applyActive=Vx(this.params),!c){c=this.createBean(new Hae),this.appendChild(c.getGui());let d=this.column,u=h=>({event:f})=>{this.updateModel(d,h),this.afterAction(h,f)};c?.addManagedListeners(c,{apply:u("apply"),clear:u("clear"),reset:u("reset"),cancel:u("cancel")}),this.eButtons=c}c.updateButtons(o,a)}else this.applyActive=!1,c&&(yr(c.getGui()),this.eButtons=this.destroyBean(c))}close(t){let e=this.hidePopup;if(!e)return;let n=t,i=n&&n.key,r;(i===ne.ENTER||i===ne.SPACE)&&(r={keyboardEvent:n}),e(r),this.hidePopup=null}afterAction(t,e){let{params:n,applyActive:i}=this,r=n?.closeOnApply;switch(t){case"apply":{e?.preventDefault(),r&&i&&this.close(e);break}case"reset":{r&&i&&this.close();break}case"cancel":{r&&this.close(e);break}}}handleKeyDown(t){!t.defaultPrevented&&t.key===ne.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply"),this.afterAction("apply",t))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},Uae={tag:"div",cls:"ag-filter"},Gae=class extends ln{constructor(t,e,n){super(Uae),this.column=t,this.source=e,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(t=>t.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??Gn.resolve()}afterGuiAttached(t){this.afterGuiAttachedParams=t,this.wrapper?.then(e=>{this.comp?.afterGuiAttached(t),e?.comp?.afterGuiAttached?.(t)})}afterGuiDetached(){this.wrapper?.then(t=>{t?.comp?.afterGuiDetached?.()})}createFilter(t){let{column:e,source:n,beans:{colFilter:i}}=this,r=i.getFilterUiForDisplay(e)??null;this.wrapper=r,r?.then(o=>{if(!o)return;let{isHandler:s,comp:a}=o,l;if(s){let c=!!this.enableGlobalButtonCheck,d=this.createBean(new zae(e,o,i,i.updateModel.bind(i),c&&i.isGlobalButtons,c));this.comp=d,l=d.getGui()}else l=a.getGui(),Ve(l)||Ee(69,{guiFromFilter:l});this.appendChild(l),t?this.eventSvc.dispatchEvent({type:"filterOpened",column:e,source:n,eGui:this.getGui()}):a.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(t){let{source:e,column:n}=t;(e==="api"||e==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Zr(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},nP="T",Wae=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${nP}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Nd(t,e){return t.toString().padStart(e,"0")}function q6(t,e=!0,n="-"){if(!t)return null;let i=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>Nd(r,2)).join(n);return e&&(i+=nP+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>Nd(r,2)).join(":")),i}function ZS(t,e=!0){return t?e?[String(t.getFullYear()),String(t.getMonth()+1),Nd(t.getDate(),2),Nd(t.getHours(),2),`:${Nd(t.getMinutes(),2)}`,`:${Nd(t.getSeconds(),2)}`]:[t.getFullYear(),t.getMonth()+1,Nd(t.getDate(),2)].map(String):null}function hx(t,e=!1){return!!MF(t,e)}function jae(t){return!!t&&hx(t,!0)&&!!t.match(Wae)?.[1]}function MF(t,e=!1){if(!t)return null;let[n,i]=t.split(nP);if(!n)return null;let r=n.split("-").map(h=>parseInt(h,10));if(r.filter(h=>!isNaN(h)).length!==3)return null;let[o,s,a]=r,l=new Date(o,s-1,a);if(l.getFullYear()!==o||l.getMonth()!==s-1||l.getDate()!==a)return null;if(!i||i==="00:00:00")return l;let[c,d,u]=i.split(":").map(h=>parseInt(h,10));if(c>=0&&c<24)l.setHours(c);else if(e)return null;if(d>=0&&d<60)l.setMinutes(d);else if(e)return null;if(u>=0&&u<60)l.setSeconds(u);else if(e)return null;return l}var K6={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Y6=["january","february","march","april","may","june","july","august","september","october","november","december"];function $ae(t,e){return t==null?-1:e==null?1:parseFloat(t)-parseFloat(e)}function X6(t){return t instanceof Date&&!isNaN(t.getTime())}var RF={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(t,e)=>e,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(t,e)=>e===!1,numberOfInputs:0}]}),date:()=>({isValidDate:X6}),dateString:({dataTypeDefinition:t})=>({comparator:(e,n)=>{let i=t.dateParser(n);return n==null||i<e?-1:i>e?1:0},isValidDate:e=>typeof e=="string"&&X6(t.dateParser(e))}),dateTime:t=>RF.date(t),dateTimeString:t=>RF.dateString(t),object:()=>{},text:()=>{}},DF={number:()=>({comparator:$ae}),boolean:({t})=>({valueFormatter:e=>Ve(e.value)?t(String(e.value),e.value?"True":"False"):t("blanks","(Blanks)")}),date:({formatValue:t,t:e})=>({valueFormatter:n=>{let i=t(n);return Ve(i)?i:e("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,i)=>{if(n==="NaN")return e("invalidDate","Invalid Date");if(i===1&&n!=null){let r=Y6[Number(n)-1];return e(r,K6[r])}return n??e("blanks","(Blanks)")},treeListPathGetter:n=>ZS(n,!1)}),dateString:({formatValue:t,dataTypeDefinition:e,t:n})=>({valueFormatter:i=>{let r=t(i);return Ve(r)?r:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>ZS(e.dateParser(i??void 0),!1),treeListFormatter:(i,r)=>{if(r===1&&i!=null){let o=Y6[Number(i)-1];return n(o,K6[o])}return i??n("blanks","(Blanks)")}}),dateTime:t=>{let e=DF.date(t);return e.treeListPathGetter=ZS,e},dateTimeString(t){let e=t.dataTypeDefinition.dateParser,n=DF.dateString(t);return n.treeListPathGetter=i=>ZS(e(i??void 0)),n},object:({formatValue:t,t:e})=>({valueFormatter:n=>{let i=t(n);return Ve(i)?i:e("blanks","(Blanks)")}}),text:()=>{}};function qae(t,e,n,i,r,o,s){let a=e,l=n,c=t==="agSetColumnFilter";!l&&i.baseDataType==="object"&&!c&&(l=({column:f,node:p})=>r({column:f,node:p,value:o.valueSvc.getValue(f,p)}));let u=(c?DF:RF)[i.baseDataType],h=u({dataTypeDefinition:i,formatValue:r,t:s});return a=typeof e=="object"?k(k({},h),e):h,{filterParams:a,filterValueGetter:l}}var Kae={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},Yae={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function Xae(t,e=!1){return(e?Yae:Kae)[t??"text"]}var eG="ag-resizer-wrapper",Wl=(t,e)=>({tag:"div",ref:`${t}Resizer`,cls:`ag-resizer ag-resizer-${e}`}),Zae={tag:"div",cls:eG,children:[Wl("eTopLeft","topLeft"),Wl("eTop","top"),Wl("eTopRight","topRight"),Wl("eRight","right"),Wl("eBottomRight","bottomRight"),Wl("eBottom","bottom"),Wl("eBottomLeft","bottomLeft"),Wl("eLeft","left")]},Qae=class extends he{constructor(t,e){super(),this.element=t,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}wireBeans(t){this.popupSvc=t.popupSvc,this.dragSvc=t.dragSvc}center(){let{clientHeight:t,clientWidth:e}=this.offsetParent,n=e/2-this.getWidth()/2,i=t/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:e,minWidth:n,width:i,minHeight:r,height:o,x:s,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,d=Yo(this.element);if(d){let u=this.findBoundaryElement(),h=window.getComputedStyle(u);if(h.minWidth!=null){let f=u.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-f}if(h.minHeight!=null){let f=u.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-f}}if(this.minHeight=r||l,this.minWidth=n||c,i&&this.setWidth(i),o&&this.setHeight(o),(!i||!o)&&this.refreshSize(),t)this.center();else if(s||a)this.offsetElement(s,a);else if(d&&e){let u=this.boundaryEl,h=!0;if(u||(u=this.findBoundaryElement(),h=!1),u){let f=parseFloat(u.style.top),p=parseFloat(u.style.left);h?this.offsetElement(isNaN(p)?0:p,isNaN(f)?0:f):this.setPosition(p,f)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable)return;this.movable=t;let n=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(t){if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),typeof t=="boolean"){if(t===!1)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(e=>{let i=!!t[e],r=this.getResizerElement(e),o={dragStartPixels:0,eElement:r,onDragStart:s=>this.onResizeStart(s,e),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,e)};(i||!this.isAlive()&&!i)&&(i?(this.dragSvc?.addDragSource(o),this.resizeListeners.push(o),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[e]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:t,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),t!==-1&&(this.element.style.height=`${t}px`)}getHeight(){return this.element.offsetHeight}setHeight(t){let{popup:e}=this.config,n=this.element,i=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)Cy(n,t),t=Gz(n),i=!0;else if(t=Math.max(this.minHeight,t),this.positioned){let r=this.getAvailableHeight();r&&t>r&&(t=r)}this.getHeight()!==t&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):e?Cy(n,t):(n.style.height=`${t}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof t=="number"?t:parseFloat(t)))}getAvailableHeight(){let{popup:t,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=t?this.position.y:i.top,s=t?0:r.top,a=0;if(e){let c=this.element.parentElement;if(c){let{bottom:d}=c.getBoundingClientRect();a=d-i.bottom}}return n+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(t){let e=this.element,{popup:n}=this.config,i=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)Os(e,t),t=gx(e),i=!0;else if(this.positioned){t=Math.max(this.minWidth,t);let{clientWidth:r}=this.offsetParent,o=n?this.position.x:this.element.getBoundingClientRect().left;r&&t+o>r&&(t=r-o)}this.getWidth()!==t&&(i?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?Os(e,t):(e.style.width=`${t}px`,e.style.flex=" unset",this.lastSize.width=typeof t=="number"?t:parseFloat(t)))}offsetElement(t=0,e=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupSvc?.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent)return;let e=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};t&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=qd(this.beans,this.popupSvc?.getPopupParent(),e)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(t,e){this.position.x=t,this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){let{e,isLeft:n,isTop:i,anywhereWithin:r,topBuffer:o}=t,s=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!n,!!r,s)?0:s,c=this.shouldSkipY(e,!!i,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(t,e,n,i){let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left,l=a<=0&&o.left>=t.clientX||o.right<=t.clientX&&o.right<=s.right;return l?!0:(e?l=i<0&&t.clientX>a+o.left||i>0&&t.clientX<a+o.left:n?l=i<0&&t.clientX>s.right||i>0&&t.clientX<a+o.left:l=i<0&&t.clientX>s.right||i>0&&t.clientX<s.right,l)}shouldSkipY(t,e,n=0,i){let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top,l=a<=0&&o.top>=t.clientY||o.bottom<=t.clientY&&o.bottom<=s.bottom;return l?!0:(e?l=i<0&&t.clientY>a+o.top+n||i>0&&t.clientY<a+o.top:l=i<0&&t.clientY>s.bottom||i>0&&t.clientY<s.bottom,l)}createResizeMap(){let t=e=>({element:this.element.querySelector(`[data-ref=${e}Resizer]`)});this.resizerMap={topLeft:t("eTopLeft"),top:t("eTop"),topRight:t("eTopRight"),right:t("eRight"),bottomRight:t("eBottomRight"),bottom:t("eBottom"),bottomLeft:t("eBottomLeft"),left:t("eLeft")}}addResizers(){if(this.resizersAdded)return;let t=this.element;t&&(t.appendChild(On(Zae)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;let t=this.element.querySelector(`.${eG}`);t&&this.element.removeChild(t),this.resizersAdded=!1}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){let e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let t=this.getSiblings()||[],e=0,n=0;for(let i=0;i<t.length;i++){let r=t[i],o=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(o){let l=window.getComputedStyle(r);l.minHeight&&(s=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else s=r.offsetHeight,a=r.offsetWidth;e+=s,n+=a}return{height:e,width:n}}applySizeToSiblings(t){let e=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let r=n[i];r!==e&&(t?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(e=n[i+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(t=>t)}onResize(t){if(!this.isResizing||!this.currentResizer)return;let{popup:e,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:r,isBottom:o,isLeft:s}=this.currentResizer,a=r||s,l=o||i,{movementX:c,movementY:d}=this.calculateMouseMovement({e:t,isLeft:s,isTop:i}),u=this.position.x,h=this.position.y,f=0,p=0;if(a&&c){let v=s?-1:1,m=this.getWidth(),g=m+c*v,C=!1;s&&(f=m-g,(u+f<=0||g<=this.minWidth)&&(C=!0,f=0)),C||this.setWidth(g)}if(l&&d){let v=i?-1:1,m=this.getHeight(),g=m+d*v,C=!1;i?(p=m-g,(h+p<=0||g<=this.minHeight)&&(C=!0,p=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&m<g&&this.getMinSizeOfSiblings().height+g>this.element.parentElement.offsetHeight&&(C=!0),C||this.setHeight(g)}this.updateDragStartPosition(t.clientX,t.clientY),((e||n)&&f||p)&&this.offsetElement(u+f,h+p)}onResizeEnd(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))}onMoveStart(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving)return;let{x:e,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:r,movementY:o}=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(e+r,n+o),this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let t=this.element;for(;t;){if(window.getComputedStyle(t).position!=="static")return t;t=t.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let t=this.resizeListeners.pop();this.dragSvc?.removeDragSource(t)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Jae="ag-focus-managed",Lf=class extends he{constructor(t,e={}){super(),this.eFocusable=t,this.callbacks=e,this.callbacks=k({shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;let i=Yd(this.beans,this.eFocusable,!1,n.shiftKey);i&&(i.focus(),n.preventDefault())}},e)}postConstruct(){let{eFocusable:t,callbacks:{onFocusIn:e,onFocusOut:n}}=this;t.classList.add(Jae),this.addKeyDownListeners(t),e&&this.addManagedElementListeners(t,{focusin:e}),n&&this.addManagedElementListeners(t,{focusout:n})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:e=>{if(e.defaultPrevented||Oa(e))return;let{callbacks:n}=this;if(n.shouldStopEventPropagation(e)){jd(e);return}e.key===ne.TAB?n.onTabKeyDown(e):n.handleKeyDown&&n.handleKeyDown(e)}})}},ele=class extends ln{constructor(t,e){super(),this.filterNameKey=t,this.cssIdentifier=e,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){let t={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(t,this.getAgComponents()),this.createManagedBean(new Lf(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new Qae(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(t){}init(t){let e=t;this.setParams(e),this.setModelIntoUi(e.state.model,!0).then(()=>this.updateUiVisibility())}refresh(t){let e=t,n=this.params;this.params=e,e.source==="colDef"&&this.updateParams(e,n);let r=e.state,o=this.state;return this.state=r,(r.model!==o.model||r.state!==o.state)&&this.setModelIntoUi(r.model),!0}setParams(t){this.params=t,this.state=t.state,this.commonUpdateParams(t)}updateParams(t,e){this.commonUpdateParams(t,e)}commonUpdateParams(t,e){this.applyActive=Vx(t),this.setupApplyDebounced()}doesFilterPass(t){Ee(283);let{getHandler:e,model:n,column:i}=this.params;return e().doesFilterPass(ae(k({},t),{model:n,handlerParams:this.beans.colFilter.getHandlerParams(i)}))}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return Ee(284),this.params.model!=null}setupApplyDebounced(){let t=JU(this.params,this.defaultDebounceMs),e=Pa(this,this.checkApplyDebounce.bind(this),t);this.applyDebounced=()=>{this.debouncePending=!0,e()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return Ee(285),this.params.model}setModel(t){Ee(286);let{beans:e,params:n}=this;return e.colFilter.setModelForColumnLegacy(n.column,t)}applyModel(t="api"){return this.doApplyModel()}canApply(t){return!0}doApplyModel(t){let{params:e,state:n}=this,i=!this.areModelsEqual(e.model,n.model);return i&&e.onAction("apply",t),i}onNewRowsLoaded(){}onUiChanged(t,e=!1){this.updateUiVisibility();let n=this.getModelFromUi(),i={model:n,state:this.getState(),valid:this.canApply(n)};this.state=i;let r=this.params;r.onStateChange(i),r.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:r.column,filterInstance:this}),t??(t=this.applyActive?void 0:"debounce"),t==="immediately"?this.doApplyModel({afterFloatingFilter:e,afterDataChange:!1}):t==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(t){this.lastContainerType=t?.container,this.refreshFilterResizer(t?.container)}refreshFilterResizer(t){let{positionableFeature:e,gos:n}=this;if(!e)return;let i=t==="floatingFilter"||t==="columnFilter";i?(e.restoreLastSize(),e.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(e.removeSizeFromEl(),e.setResizable(!1)),e.constrainSizeToAvailableHeight(i)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(t){return ql(this,t)}getPositionableElement(){return this.getGui()}areModelsEqual(t,e){return t===e||t==null&&e==null?!0:t==null||e==null?!1:this.areNonNullModelsEqual(t,e)}};function tle(t){return!!t.operator}function nle(t,e,n){if(e==null)return null;let i=null,{compName:r,jsComp:o,fwComp:s}=FU(t,e);return r?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:o==null&&s==null&&e.filter===!0&&(i=n()),i}var Ko={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},iP=class extends he{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let t=this.gos.get("domLayout"),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},n=e.autoHeight?Ko.AUTO_HEIGHT:e.print?Ko.PRINT:Ko.NORMAL;this.view.updateLayoutClasses(n,e)}},jl="Viewport",Z6="fakeVScrollComp",zI=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Q6=100,UI=150,ile=class extends he{constructor(t){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=t,this.resetLastHScrollDebounced=Pa(this,()=>this.lastScrollSource[1]=null,UI),this.resetLastVScrollDebounced=Pa(this,()=>this.lastScrollSource[0]=null,UI)}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.animationFrameSvc=t.animationFrameSvc,this.visibleCols=t.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");let t=this.invalidateVerticalScroll.bind(this),e=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),gridSizeChanged:t,scrollGapChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:t}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,jl)});for(let t of zI){let e=this.ctrlsSvc.get(t);this.registerScrollPartner(e,this.onHScroll.bind(this,t))}}addVerticalScrollListeners(){let t=this.ctrlsSvc.get("fakeVScrollComp"),e=this.gos.get("debounceVerticalScrollbar"),n=e?Pa(this,this.onVScroll.bind(this,jl),Q6):this.onVScroll.bind(this,jl),i=e?Pa(this,this.onVScroll.bind(this,Z6),Q6):this.onVScroll.bind(this,Z6);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(t,i)}registerScrollPartner(t,e){t.onScrollCallback(e)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){this.centerRowsCtrl!=null&&(t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(t)))}setScrollLeftForAllContainersExceptCurrent(t){for(let e of[...zI,jl]){if(this.lastScrollSource[1]===e)continue;let n=this.getViewportForSource(e);vx(n,t,this.enableRtl)}}getViewportForSource(t){return t===jl?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(t).eViewport}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(e===0?this.lastScrollSource[0]=t:this.lastScrollSource[1]=t,!0):this.lastScrollSource[e]===t}onHScroll(t){if(!this.isControllingScroll(t,1))return;let e=this.centerRowsCtrl.eViewport,{scrollLeft:n}=e;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i=mx(this.getViewportForSource(t),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(t){if(!this.isControllingScroll(t,0))return;let e;if(t===jl?e=this.eBodyViewport.scrollTop:e=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,e,!0))return;let{animationFrameSvc:n}=this;n?.setScrollTop(e),this.nextScrollTop=e,t===jl?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(t){let e=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(t){let e={type:"bodyScroll",direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent(ae(k({},e),{type:"bodyScrollEnd"}))},UI)}shouldBlockScrollUpdate(t,e,n=!1){return n&&!Bd()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){let e=UF(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return t<0||t+e>n}shouldBlockHorizontalScroll(t){let e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){let t=this.scrollLeft,e=!1;for(let n of zI)if(this.getViewportForSource(n).scrollLeft!==t){e=!0;break}e&&this.onHScroll(jl)}scrollGridIfNeeded(t=!1){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,t&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(t,e=!1){let i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl?t=t>0?0:i:t=Math.min(Math.max(t,0),i)),vx(this.centerRowsCtrl.eViewport,Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=t}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){let{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;let{scrollTop:t,offsetHeight:e}=this.eBodyViewport;return this.lastScrollTop=t,this.lastOffsetHeight=e,{top:t,bottom:t+e}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(t){let e=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.eViewport.scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){let{rowModel:n}=this.beans,i=n.getRowCount(),r=-1;for(let o=0;o<i;o++){let s=n.getRow(o);if(typeof t=="function"){if(s&&t(s)){r=o;break}}else if(t===s||t===s.data){r=o;break}}r>=0&&this.ensureIndexVisible(r,e)}ensureIndexVisible(t,e,n=0){if(tr(this.gos,"print"))return;let{rowModel:i}=this.beans,r=i.getRowCount();if(typeof t!="number"||t<0||t>=r){Ee(88,{index:t});return}this.clearRetryListeners();let{frameworkOverrides:o,pageBounds:s,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{let c=this.ctrlsSvc.getGridBodyCtrl(),d=i.getRow(t),u,h,f=0;this.invalidateVerticalScroll();do{let{stickyTopHeight:p,stickyBottomHeight:v}=c,m=d.rowTop,g=d.rowHeight,C=s.getPixelOffset(),y=d.rowTop-C,w=y+d.rowHeight,R=this.getVScrollPosition(),b=a.divStretchOffset,_=R.top+b,M=R.bottom+b,x=M-_,S=a.getScrollPositionForPixel(y),I=a.getScrollPositionForPixel(w-x),N=Math.min((S+I)/2,y),B=_+p>y,W=M-v<w,U=null;e==="top"?U=S-p:e==="bottom"?U=I+v:e==="middle"?U=N:B?U=S-p:W&&(I-S>x?U=S-p:U=I+v),U!==null&&(this.setVerticalScrollPosition(U),l.redraw({afterScroll:!0})),u=m!==d.rowTop||g!==d.rowHeight,h=p!==c.stickyTopHeight||v!==c.stickyBottomHeight,f++}while((u||h)&&f<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(d?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){let p=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{let v=this.getVScrollPosition().top;p!==v&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(t>=i.getRowCount())&&this.ensureIndexVisible(t,e,n+1)}})}})}clearRetryListeners(){this.clearRetryListenerFncs.forEach(t=>t()),this.clearRetryListenerFncs=[]}ensureColumnVisible(t,e="auto"){let{colModel:n,frameworkOverrides:i}=this.beans,r=n.getCol(t);if(!r||r.isPinned()||!this.visibleCols.isColDisplayed(r))return;let o=this.getPositionedHorizontalScroll(r,e);i.wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(t,e){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(t),r=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?n:i)||r,l=s?i:n;e!=="auto"&&(a=e==="start",l=e==="end");let c=e==="middle";if(a||l||c){let{colLeft:d,colMiddle:u,colRight:h}=this.getColumnBounds(t);return c?u-o/2:a?s?h:d:s?d-o:h-o}return null}isColumnOutsideViewport(t){let{start:e,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(t),o=this.enableRtl,s=o?e>r:n<r,a=o?n<i:e>i;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(t){let e=this.enableRtl,n=this.visibleCols.bodyWidth,i=t.getActualWidth(),r=t.getLeft(),o=e?-1:1,s=e?n-r:r,a=s+i*o,l=s+i/2*o;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){let t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=e,i=t+e;return{start:n,end:i,width:t}}},rP=class extends he{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}postConstruct(){let t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedEventListeners({columnContainerWidthChanged:t,displayedColumnsChanged:t,leftPinnedWidthChanged:t}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:t,scrollVisibilityChanged:t,scrollbarWidthChanged:t}),this.setWidth()}setWidth(){let t=tr(this.gos,"print"),{visibleCols:e,scrollVisibleSvc:n}=this.beans,i=e.bodyWidth,r=e.getColsLeftWidth(),o=e.getDisplayedColumnsRightWidth(),s;t?s=i+r+o:(s=i,this.addSpacer&&(this.gos.get("enableRtl")?r:o)===0&&n.verticalScrollShowing&&(s+=n.getScrollbarWidth())),this.callback(s)}},rle=class extends he{constructor(t){super(),this.centerContainerCtrl=t}wireBeans(t){this.scrollVisibleSvc=t.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let{beans:t,centerContainerCtrl:e,gridBodyCtrl:n}=this,i=()=>{Ba(t,()=>{this.onCenterViewportResized()})};e.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){let{pinnedCols:t,colFlex:e}=this.beans;t?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,e?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let t=this.gridBodyCtrl.eBodyViewport,e=UF(t);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let t={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(t)}onHorizontalViewportChanged(){let t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,e)}};function oP(t,e,n,i,r,o){if(n==null&&e==null)return;let s={},a={},l=(c,d)=>{c.split(" ").forEach(u=>{u.trim()!=""&&d(u)})};if(n){let c=Object.keys(n);for(let d=0;d<c.length;d++){let u=c[d],h=n[u],f;typeof h=="string"?f=t?t.evaluate(h,i):!0:typeof h=="function"&&(f=h(i)),l(u,p=>{f?s[p]=!0:a[p]=!0})}}e&&o&&Object.keys(e).forEach(c=>l(c,d=>{s[d]||(a[d]=!0)})),o&&Object.keys(a).forEach(o),Object.keys(s).forEach(r)}function J6(t){if(t.group)return t.level;let e=t.parent;return e?e.level+1:0}var ole=class extends he{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(t,e){let n=this.gos,i=s=>{typeof s=="string"?t.push(s):Array.isArray(s)&&s.forEach(a=>t.push(a))},r=n.get("rowClass");r&&i(r);let o=n.getCallback("getRowClass");if(o){let s={data:e.data,node:e,rowIndex:e.rowIndex},a=o(s);i(a)}}preProcessRowClassRules(t,e){this.processRowClassRules(e,n=>{t.push(n)},()=>{})}processRowClassRules(t,e,n){let{gos:i,expressionSvc:r}=this.beans,o=jt(i,{data:t.data,node:t,rowIndex:t.rowIndex});oP(r,void 0,i.get("rowClassRules"),o,e,n)}processStylesFromGridOptions(t){let e=this.gos,n=e.get("rowStyle"),i=e.getCallback("getRowStyle"),r;if(i){let o={data:t.data,node:t,rowIndex:t.rowIndex};r=i(o)}if(r||n)return Object.assign({},n,r)}},sle=0,Ix="renderedRow",TF=class extends he{constructor(t,e,n,i,r){super(),this.rowNode=t,this.useAnimationFrameForCreate=i,this.printLayout=r,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=e,this.gos=e.gos,this.paginationPage=e.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+sle++,this.rowId=lx(t.id),this.initRowBusinessKey(),this.rowFocused=e.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=J6(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=e.editSvc?.createRowStyleFeature(this,e),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=lx(t)}updateGui(t,e){t==="left"?this.leftGui=e:t==="right"?this.rightGui=e:t==="fullWidth"?this.fullWidthGui=e:this.centerGui=e}setComp(t,e,n,i){let{context:r,focusSvc:o}=this.beans;i=ky(this,r,i);let s={rowComp:t,element:e,containerType:n,compBean:i};this.allRowGuis.push(s),this.updateGui(n,s),this.initialiseRowComp(s);let a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();let d=this.fullWidthGui?.element;d&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>d.focus({preventScroll:!0}),0)}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(e=>e.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let e=t?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=e)}initialiseRowComp(t){let e=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),Hd(e)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>n.toggleCss(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&dF(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),If(e,t.element,Ix,this),t.compBean.addDestroyFunc(()=>If(e,t.element,Ix,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),e.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&t.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKey!=null&&t.setRowBusinessKey(this.businessKey)}setRowCompRowId(t){let e=lx(this.rowNode.id);this.rowId=e,e!=null&&t.setRowId(e)}executeSlideAndFadeAnimations(t){let{containerType:e}=t;this.slideInAnimation[e]&&(pF(()=>{this.onTopChanged()}),this.slideInAnimation[e]=!1),this.fadeInAnimation[e]&&(pF(()=>{t.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[e]=!1)}addRowDraggerToRow(t){let e=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,t.element);if(!e)return;let n=this.createBean(e,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){let e=this.getPinnedForContainer(t.containerType),n=this.createFullWidthCompDetails(t.element,e);t.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let e={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(e)}areAllContainersReady(){let{leftGui:t,centerGui:e,rightGui:n,beans:{visibleCols:i}}=this,r=!!t||!i.isPinningLeft(),o=!!e,s=!!n||!i.isPinningRight();return r&&o&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),e=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),r=uoe(this.gos,this.rowNode,i);t?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":e?this.rowType="FullWidth":r?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,e=!1){if(this.isFullWidth())return;let{animationFrameSvc:n}=this.beans;if(!n?.active||t||this.printLayout){this.updateColumnListsImpl(e);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(t){if(!this.beans.rowSpanSvc?.isCellSpanning(t,this.rowNode))return new ux(t,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(t){return!this.beans.rowSpanSvc?.isCellSpanning(t.column,this.rowNode)}createCellCtrls(t,e,n=null){let i={list:[],map:{}},r=(c,d,u)=>{u!=null?i.list.splice(u,0,d):i.list.push(d),i.map[c]=d},o=[];for(let c of e){let d=c.getInstanceId(),u=t.map[d];u&&!this.isCorrectCtrlForSpan(u)&&(u.destroy(),u=void 0),u||(u=this.getNewCellCtrl(c)),u&&r(d,u)}for(let c of t.list){let d=c.column.getInstanceId();if(i.map[d]!=null)continue;!this.isCellEligibleToBeRemoved(c,n)?o.push([d,c]):c.destroy()}if(o.length)for(let[c,d]of o){let u=i.list.findIndex(f=>f.column.getLeft()>d.column.getLeft()),h=u===-1?void 0:Math.max(u-1,0);r(c,d,h)}let{focusSvc:s,visibleCols:a}=this.beans,l=s.getFocusedCell();if(l&&l.column.getPinned()==n){let c=l.column.getInstanceId();if(!i.map[c]&&a.allCols.includes(l.column)){let u=this.createFocusedCellCtrl();if(u){let h=i.list.findIndex(p=>p.column.getLeft()>u.column.getLeft()),f=h===-1?void 0:Math.max(h-1,0);r(c,u,f)}}}return i}createFocusedCellCtrl(){let{focusSvc:t,rowSpanSvc:e}=this.beans,n=t.getFocusedCell();if(!n)return;let i=e?.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(e=>{let n=this.getCellCtrlsForContainer(e.containerType);e.rowComp.setCellCtrls(n,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.colViewport,e=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let n=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);let i=e.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");let r=e.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,e){let{column:r}=t;if(r.getPinned()!=e||!this.isCorrectCtrlForSpan(t))return!0;let{visibleCols:o,editSvc:s}=this.beans,a=s?.isEditing(t),l=t.isCellFocused();return a||l?!(o.allCols.indexOf(r)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||tr(this.gos,"print")}listenOnDomOrder(t){let e=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],e)}setAnimateFlags(t){if(this.rowNode.sticky||!t)return;let e=Ve(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),r=n.isPinningRight();if(e){let{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=r}else{let{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=r}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(s,a)=>s?s.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(s.element,a).params):!0,e=t(this.fullWidthGui,null),n=t(this.centerGui,null),i=t(this.leftGui,"left"),r=t(this.rightGui,"right");return e&&n&&i&&r}addListeners(){let{beans:t,gos:e,rowNode:n}=this,{expansionSvc:i,eventSvc:r,context:o,rowSpanSvc:s}=t;this.addManagedListeners(this.rowNode,k({heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this)},i?.getRowExpandedListeners(this)??{})),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(r,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),s&&this.addManagedListeners(s,{spannedCellsUpdated:({pinned:a})=>{a&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(e.get("rowDragEntireRow")){this.allRowGuis.forEach(l=>{this.addRowDraggerToRow(l)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged()),cellChanged:t=>this.getAllCellCtrls().forEach(e=>e.onCellChanged(t))})}onRowPinned(){for(let t of this.allRowGuis)t.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(t){this.refreshRow({suppressFlash:!t.update,newData:!t.update})}refreshRow(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell(t)),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.beans.rowDropHighlightSvc,e=t?.row===this.rowNode?t.position:"none",n=e==="above",i=e==="inside",r=e==="below",s=this.gos.get("treeData")&&(r||n),a=this.rowNode.uiLevel.toString();this.allRowGuis.forEach(l=>{let c=l.rowComp;c.toggleCss("ag-row-highlight-above",n),c.toggleCss("ag-row-highlight-inside",i),c.toggleCss("ag-row-highlight-below",r),c.toggleCss("ag-row-highlight-indent",s),s?l.element.style.setProperty("--ag-row-highlight-level",a):l.element.style.removeProperty("--ag-row-highlight-level")})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(e=>e.rowComp.toggleCss("ag-row-dragging",t))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:ka(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){let e=this.findFullWidthInfoForEvent(t);if(!e)return;let{rowGui:n,column:i}=e;if(!(n.element===t.target))return;let s=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),d={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:c?.column??i};l?.navigateToNextCell(t,t.key,d,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Oa(t))return;let e=this.allRowGuis.find(a=>a.element.contains(t.target)),n=e?e.element:null,i=n===t.target,r=Wn(this.beans),o=!1;n&&r&&(o=n.contains(r)&&r.classList.contains("ag-cell"));let s=null;!i&&!o&&(s=Yd(this.beans,n,!1,t.shiftKey)),(this.isFullWidth()&&i||!s)&&this.beans.navigation?.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(e=>Yo(e.element))?.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){let e=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(n=>{Fs(n.element,"tabindex",e)})}onFullWidthRowFocused(t){let e=this.rowNode,n=t?this.isFullWidth()&&t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned:!1,i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{let o=this.beans.colModel.getCol(t?.column)?.pinned;o?i=o==="right"?this.rightGui?.element:this.leftGui?.element:i=this.centerGui?.element}i&&(i.classList.toggle("ag-full-width-focus",n),n&&t?.forceBrowserFocus&&i.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,e){let n={list:[],map:{}};return t.list.forEach(i=>{i!==e&&(n.list.push(i),n.map[i.column.getInstanceId()]=i)}),n}onMouseEvent(t,e){switch(t){case"dblclick":this.onRowDblClick(e);break;case"click":this.onRowClick(e);break;case"touchstart":case"mousedown":this.onRowMouseDown(e);break}}createRowEvent(t,e){let{rowNode:n}=this;return jt(this.gos,{type:t,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:e})}createRowEventWithSource(t,e){let n=this.createRowEvent(t,e);return n.source=this,n}onRowDblClick(t){Oa(t)||this.beans.eventSvc.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}findFullWidthInfoForEvent(t){if(!t)return;let e=this.findFullWidthRowGui(t.target),n=this.getColumnForFullWidth(e);if(!(!e||!n))return{rowGui:e,column:n}}findFullWidthRowGui(t){return this.allRowGuis.find(e=>e.element.contains(t))}getColumnForFullWidth(t){let{visibleCols:e}=this.beans;switch(t?.containerType){case"center":return e.centerCols[0];case"left":return e.leftCols[0];case"right":return e.rightCols[0];default:return e.allCols[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Vd(t.target,"ag-row-drag",3),!this.isFullWidth())return;let e=this.rowNode,{rangeSvc:n,focusSvc:i}=this.beans;n?.removeAllCellRanges();let r=this.findFullWidthInfoForEvent(t);if(!r)return;let{rowGui:o,column:s}=r,a=o.element,l=t.target,c=t.defaultPrevented||HF();a&&a.contains(l)&&zF(l)&&(c=!1),i.setFocusedCell({rowIndex:e.rowIndex,column:s,rowPinned:e.rowPinned,forceBrowserFocus:c})}onRowClick(t){if(Oa(t)||this.lastMouseDownOnDragger)return;let{eventSvc:n,selectionSvc:i}=this.beans;n.dispatchEvent(this.createRowEventWithSource("rowClicked",t)),i?.handleSelectionEvent(t,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(t){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,t)}createFullWidthCompDetails(t,e){let{gos:n,rowNode:i}=this,r=jt(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:t,eParentOfValue:t,pinned:e,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,a,l,c)=>this.addFullWidthRowDragging(s,a,l,c),setTooltip:(s,a)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(s,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return Ese(o,r);case"FullWidthGroup":{let{value:s,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return r.value=s,r.valueFormatted=a,xse(o,r)}case"FullWidthLoading":return Sse(o,r);default:return _se(o,r)}}setupFullWidthRowTooltip(t,e){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,t,e))}addFullWidthRowDragging(t,e,n="",i){let{rowDragSvc:r,context:o}=this.beans;if(!r||!this.isFullWidth())return;let s=r.createRowDragComp(()=>n,this.rowNode,void 0,t,e,i);this.createBean(s,o),this.addDestroyFunc(()=>{this.destroyBean(s,o)})}onUiLevelChanged(){let t=J6(this.rowNode);if(this.rowLevel!=t){let e="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(i=>{i.rowComp.toggleCss(e,!0),i.rowComp.toggleCss(n,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),e=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.toggleCss("ag-row-first",t))),this.lastRowOnPage!==e&&(this.lastRowOnPage=e,this.allRowGuis.forEach(n=>n.rowComp.toggleCss("ag-row-last",e)))}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=[];this.beans.rowStyleSvc?.processClassesFromGridOptions(t,this.rowNode),t.length&&t.forEach(e=>{this.allRowGuis.forEach(n=>n.rowComp.toggleCss(e,!0))})}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(e=>e.rowComp.toggleCss(t,!0))},t=>{this.allRowGuis.forEach(e=>e.rowComp.toggleCss(t,!1))})}setStylesFromGridOptions(t,e){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(e,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let e=this.getPinnedForContainer(t),n=this.isFullWidth(),{rowNode:i,beans:r}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[t]&&o.push("ag-opacity-zero"),o.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(o.push("ag-row-pinned"),r.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&o.push("ag-row-pinned-source"),i.isSelected()&&o.push("ag-row-selected"),i.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),i.stub&&o.push("ag-row-loading"),n&&o.push("ag-full-width-row"),r.expansionSvc?.addExpandedCss(o,i),i.dragging&&o.push("ag-row-dragging");let{rowStyleSvc:s}=r;return s&&(s.processClassesFromGridOptions(o,i),s.preProcessRowClassRules(o,i)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),n&&(e==="left"&&o.push("ag-cell-last-left-pinned"),e==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(t){this.beans.selectionSvc?.onRowCtrlSelected(this,e=>{(e===this.centerGui||e===this.fullWidthGui)&&this.announceDescription()},t)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(t){if(!this.active)return;let{element:e,compBean:n}=t,{rowNode:i,beans:r,gos:o}=this;n.addManagedListeners(e,{mouseenter:()=>i.dispatchRowEvent("mouseEnter"),mouseleave:()=>i.dispatchRowEvent("mouseLeave")}),n.addManagedListeners(i,{mouseEnter:()=>{!r.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(e)}})}resetHoveredStatus(t){let e=t?[t]:this.allRowGuis.map(n=>n.element);for(let n of e)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(t){let e=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(e.top,!0)-100,i=this.applyPaginationOffset(e.bottom,!0)+100;return Math.min(Math.max(n,t),i)}forEachGui(t,e){t?e(t):this.allRowGuis.forEach(e)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let e=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=nU(this.gos)?Wd(this.beans,this.rowNode).height:void 0,o=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(t,s=>{s.element.style.height=`${e}px`,o&&s.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(t=!1){this.active=!1;let{rowNode:e}=this;if(!t&&xf(this.gos)&&!e.sticky)if(e.rowTop!=null){let r=this.roundRowTopToBounds(e.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.toggleCss("ag-opacity-zero",!0));this.fullWidthGui?.element.contains(Wn(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),e.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;let t=e=>(e.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let{focusSvc:t}=this.beans,e=t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses())}onPaginationChanged(){let t=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,e=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let n=this.beans.pageBounds.getPixelOffset();return t+n*(e?1:-1)}setRowTop(t){if(!this.printLayout&&Ve(t)){let e=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?e:this.beans.rowContainerHeight.getRealPixelPosition(e)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let e=this.rowNode,n;if(e.sticky)n=e.stickyRowTop;else{let i=this.slideInAnimation[t]?this.roundRowTopToBounds(e.oldRowTop):e.rowTop,r=this.applyPaginationOffset(i);n=e.isRowPinned()?r:this.beans.rowContainerHeight.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(t){this.allRowGuis.forEach(e=>this.suppressRowTransform?e.rowComp.setTop(t):e.rowComp.setTransform(`translateY(${t})`))}getCellCtrl(t,e=!1){let n=null;return this.getAllCellCtrls().forEach(i=>{i.column==t&&(n=i)}),n!=null||e||this.getAllCellCtrls().forEach(i=>{i?.getColSpanningList().indexOf(t)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(t){let e=this.rowNode.getRowIndexString();if(e===null)return;let n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(t,o=>{o.rowComp.setRowIndex(e),o.rowComp.toggleCss("ag-row-even",i),o.rowComp.toggleCss("ag-row-odd",!i),Oz(o.element,r)})}};function tG(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key?.length===1}function ez(t,e,n,i,r){let o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;let s=jt(t,{event:e,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(o&&o(s))}function ale(t){let{pinnedRowModel:e,rowModel:n}=t,[i,r]=[e?.isEmpty("top")??!0,e?.isEmpty("bottom")??!0],o=i?null:"top",s,a;r?(s=null,a=n.getRowCount()-1):(s="bottom",a=e?.getPinnedBottomRowCount()??-1);let{visibleCols:l,rangeSvc:c}=t,d=l.allCols;!c||!d?.length||c.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:s})}var lle=65,cle=67,dle=86,ule=68,hle=90,fle=89;function ple(t){let{keyCode:e}=t,n;switch(e){case lle:n=ne.A;break;case cle:n=ne.C;break;case dle:n=ne.V;break;case ule:n=ne.D;break;case hle:n=ne.Z;break;case fle:n=ne.Y;break;default:n=t.code}return n}var gle=class extends he{constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){let t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",pU("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(t,e){if(!Ay(this.gos,e)||Oa(e))return;let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);t==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(e),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(e,void 0,i,n)):(n&&n.onMouseEvent(t,e),i&&i.onMouseEvent(t,e))}getControlsForEventTarget(t){let{gos:e}=this;return{cellCtrl:jU(e,t),rowCtrl:gU(e,t,Ix)}}processKeyboardEvent(t,e){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(n?this.processCellKeyboardEvent(n,t,e):i?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,t,e))}processCellKeyboardEvent(t,e,n){let i=this.editSvc?.isEditing(t,{withOpenEditor:!0})??!1;!ez(this.gos,n,t.rowNode,t.column,i)&&e==="keydown"&&(!i&&this.beans.navigation?.handlePageScrollingKey(n)||t.onKeyDown(n),this.doGridOperations(n,i),tG(n)&&t.processCharacter(n)),e==="keydown"&&this.eventSvc.dispatchEvent(t.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(t,e,n){let{rowNode:i}=t,{focusSvc:r,navigation:o}=this.beans,a=r.getFocusedCell()?.column;if(!ez(this.gos,n,i,a,!1)){let c=n.key;if(e==="keydown")switch(c){case ne.PAGE_HOME:case ne.PAGE_END:case ne.PAGE_UP:case ne.PAGE_DOWN:o?.handlePageScrollingKey(n,!0);break;case ne.LEFT:case ne.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case ne.UP:case ne.DOWN:t.onKeyboardNavigate(n);break;case ne.TAB:t.onTabKeyDown(n);break;default:}}e==="keydown"&&this.eventSvc.dispatchEvent(t.createRowEvent("cellKeyDown",n))}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!Ay(this.gos,t))return;let n=ple(t),{clipboardSvc:i,undoRedo:r}=this.beans;if(n===ne.A)return this.onCtrlAndA(t);if(n===ne.C)return this.onCtrlAndC(i,t);if(n===ne.D)return this.onCtrlAndD(i,t);if(n===ne.V)return this.onCtrlAndV(i,t);if(n===ne.X)return this.onCtrlAndX(i,t);if(n===ne.Y)return this.onCtrlAndY(r);if(n===ne.Z)return this.onCtrlAndZ(r,t)}onCtrlAndA(t){let{beans:{rowModel:e,rangeSvc:n,selectionSvc:i},gos:r}=this;n&&Ff(r)&&e.isRowsToRender()?ale(this.beans):i&&i?.selectAllRowNodes({source:"keyboardSelectAll",selectAll:dU(r)}),t.preventDefault()}onCtrlAndC(t,e){if(!t||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:n}=this.getControlsForEventTarget(e.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(e.preventDefault(),t.copyToClipboard())}onCtrlAndX(t,e){if(!t||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:n}=this.getControlsForEventTarget(e.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(e.preventDefault(),t.cutToClipboard(void 0,"ui"))}onCtrlAndV(t,e){let{cellCtrl:n}=this.getControlsForEventTarget(e.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||t&&!this.gos.get("suppressClipboardPaste")&&t.pasteFromClipboard()}onCtrlAndD(t,e){t&&!this.gos.get("suppressClipboardPaste")&&t.copyRangeDown(),e.preventDefault()}onCtrlAndZ(t,e){!this.gos.get("undoRedoCellEditing")||!t||(e.preventDefault(),e.shiftKey?t.redo("ui"):t.undo("ui"))}onCtrlAndY(t){t?.redo("ui")}},nG=class extends he{constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(t){let e=t.uiContainerHeight,n=e!=null?`${e}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},QS=t=>t.topRowCtrls,JS=t=>t.getStickyTopRowCtrls(),ex=t=>t.getStickyBottomRowCtrls(),tx=t=>t.bottomRowCtrls,nx=t=>t.allRowCtrls,GI=t=>t.getCtrls("top"),WI=t=>t.getCtrls("center"),jI=t=>t.getCtrls("bottom"),mle={center:{type:"center",name:"center-cols",getRowCtrls:nx,getSpannedRowCtrls:WI},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:nx,getSpannedRowCtrls:WI},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:nx,getSpannedRowCtrls:WI},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:nx},topCenter:{type:"center",name:"floating-top",getRowCtrls:QS,getSpannedRowCtrls:GI},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:QS,getSpannedRowCtrls:GI},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:QS,getSpannedRowCtrls:GI},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:QS},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:JS},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:JS},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:JS},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:JS},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:ex},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:ex},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:ex},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:ex},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:tx,getSpannedRowCtrls:jI},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:tx,getSpannedRowCtrls:jI},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:tx,getSpannedRowCtrls:jI},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:tx}};function iG(t){return`ag-${Ny(t).name}-viewport`}function fx(t){let e=Ny(t);return e.container??`ag-${e.name}-container`}function vle(t){return`ag-${Ny(t).name}-spanned-cells-container`}function Ny(t){return mle[t]}var yle=["topCenter","topLeft","topRight"],Cle=["bottomCenter","bottomLeft","bottomRight"],ble=["center","left","right"],wle=["center","left","right","fullWidth"],_le=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Sle=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],xle=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],rG=["stickyTopCenter","stickyTopLeft","stickyTopRight"],oG=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Ele=[...rG,"stickyTopFullWidth",...oG,"stickyBottomFullWidth"],Mle=[...yle,...Cle,...ble,...rG,...oG],Rle=class extends he{constructor(t){super(),this.name=t,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Ny(t)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new rle(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(t){this.comp.setOffsetTop(`${t.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(t,e){t.indexOf(this.name)>=0&&e()}setComp(t,e,n,i){this.comp=t,this.eContainer=e,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new gle(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let{pinnedCols:r,rangeSvc:o}=this.beans,s=()=>this.onPinnedWidthChanged();this.forContainers(Sle,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(xle,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(wle,()=>this.createManagedBean(new nG(this.eContainer,this.name==="center"?i:void 0))),o&&this.forContainers(Mle,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(_le,()=>this.createManagedBean(new rP(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}addListeners(){let{spannedRowRenderer:t,gos:e}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),t&&this.options.getSpannedRowCtrls&&e.get("enableCellSpan")&&this.addManagedListeners(t,{spannedRowsUpdated:()=>{let i=this.options.getSpannedRowCtrls(t);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(Ele.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let e=()=>{let n=this.gos.get("ensureDomOrder"),i=tr(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let{dragSvc:t}=this.beans;if(!t)return;let e=n=>{t.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(t=!1){let e=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,n,t)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return px(this.eViewport)}getCenterViewportScrollLeft(){return mx(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){let e=qd(this.beans,this.eViewport,t);this.addDestroyFunc(()=>e())}isViewportInTheDOMTree(){return jz(this.eViewport)}getViewportScrollLeft(){return mx(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Kz(this.eViewport)}setHorizontalScroll(t){this.comp.setHorizontalScroll(t)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(t){vx(this.eViewport,t,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(t=!1){let e=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||e.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=tr(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||n,o=e.filter(s=>{let a=s.isFullWidth();return this.options.fullWidth?!r&&a:r||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:t})}},sG="ag-force-vertical-scroll",Dle="ag-selectable",Tle="ag-column-moving",Ale=class extends he{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.colModel=t.colModel,this.scrollVisibleSvc=t.scrollVisibleSvc,this.pinnedRowModel=t.pinnedRowModel,this.filterManager=t.filterManager,this.rowGroupColsSvc=t.rowGroupColsSvc}setComp(t,e,n,i,r,o,s){this.comp=t,this.eGridBody=e,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=o,this.eStickyBottom=s,this.eCenterColsViewport=n.querySelector(`.${iG("center")}`),this.eFullWidthContainer=n.querySelector(`.${fx("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${fx("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${fx("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new iP(this.comp)),this.scrollFeature=this.createManagedBean(new ile(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,o,s]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){let t=this.setFloatingHeights.bind(this),e=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:t,pinnedHeightChanged:t,pinnedRowsChanged:t,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:e,columnPivotChanged:e,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",e)}toggleRowResizeStyles(t){let e=t.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",e)}onGridColumnsChanged(){let t=this.beans.colModel.getCols();this.comp.setColumnCount(t.length)}onScrollVisibilityChanged(){let{scrollVisibleSvc:t}=this,e=t.verticalScrollShowing;this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let n=e&&t.getScrollbarWidth()||0,i=zz()?16:0,r=`calc(100% + ${n+i}px)`;Ba(this.beans,()=>this.comp.setBodyViewportWidth(r)),this.updateScrollingClasses()}setGridRootRole(){let{rowGroupColsSvc:t,colModel:e}=this,n=this.gos.get("treeData");if(!n){let i=e.isPivotMode();n=(t?t.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(n?"treegrid":"grid")}addFocusListeners(t){t.forEach(e=>{this.addManagedElementListeners(e,{focusin:n=>{let{target:i}=n,r=Vd(i,"ag-root",e);e.classList.toggle("ag-has-focus",!r)},focusout:n=>{let{target:i,relatedTarget:r}=n,o=e.contains(r),s=Vd(r,"ag-root",e);Vd(i,"ag-root",e)||(!o||s)&&e.classList.remove("ag-has-focus")}})})}setColumnMovingCss(t){this.comp.setColumnMovingCss(Tle,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(Dle,t)}updateScrollingClasses(){let{eGridBody:{classList:t},scrollVisibleSvc:e}=this;t.toggle("ag-body-vertical-content-no-gap",!e.verticalScrollGap),t.toggle("ag-body-horizontal-content-no-gap",!e.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){let t=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:e}=this.beans,n=e.isLastRowIndexKnown()?e.getRowCount():-1,i=n===-1?-1:t+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){let e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){let t=this.gos.get("alwaysShowVerticalScroll"),e=t?sG:null,n=tr(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||n&&qre(this.eBodyViewport)}setupRowAnimationCssClass(){let{rowContainerHeight:t,environment:e}=this.beans,n=e.sizesMeasured,i=()=>{let r=n&&xf(this.gos)&&!t.stretching,o=r?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,r)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!n&&e.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){let{eBodyViewport:t,eStickyTop:e,eStickyBottom:n,eTop:i,eBottom:r,beans:{popupSvc:o,touchSvc:s}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(t,{contextmenu:a}),s?.mockBodyContextMenu(this,a),this.addManagedElementListeners(t,{wheel:this.onBodyViewportWheel.bind(this,o)});let l=this.onStickyWheel.bind(this);for(let d of[e,n,i,r])this.addManagedElementListeners(d,{wheel:l});let c=this.onHorizontalWheel.bind(this);for(let d of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(d).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:t=>this.onFullWidthContainerWheel(t)})}onFullWidthContainerWheel(t){let{deltaX:e,deltaY:n,shiftKey:i}=t;(i||Math.abs(e)>Math.abs(n))&&Ay(this.gos,t)&&this.scrollGridBodyToMatchEvent(t)}onStickyWheel(t){let{deltaY:e}=t;this.scrollVertically(e)>0&&t.preventDefault()}onHorizontalWheel(t){let{deltaX:e,deltaY:n,shiftKey:i}=t;(i||Math.abs(e)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(t)}scrollGridBodyToMatchEvent(t){let{deltaX:e,deltaY:n}=t;t.preventDefault(),this.eCenterColsViewport.scrollBy({left:e||n})}onBodyViewportContextMenu(t,e,n){if(!t&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(t||n).preventDefault();let{target:i}=t||e;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:t,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(t,e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&t?.hasAnchoredPopup()&&e.preventDefault()}scrollVertically(t){let e=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}setFloatingHeights(){let{pinnedRowModel:t,beans:{environment:e}}=this,n=t?.getPinnedTopTotalHeight(),i=t?.getPinnedBottomTotalHeight(),r=e.getPinnedRowBorderWidth(),o=e.getRowBorderWidth(),s=r-o,a=n?s+n:0,l=i?s+i:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}setStickyTopOffsetTop(){let e=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0,i=0;e>0&&(i+=e),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let{pinnedRowModel:t,scrollVisibleSvc:e,comp:n}=this,i=t?.getPinnedBottomTotalHeight()??0,o=e.horizontalScrollShowing&&e.getScrollbarWidth()||0,s=i+o;n.setStickyBottomBottom(`${s}px`)}},aG=class extends ln{constructor(t,e){super(),this.direction=e,this.eViewport=Fe,this.eContainer=Fe,this.hideTimeout=0,this.setTemplate(t)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",Vz()||Bd())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=zz(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let t=this.getGui(),e=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(t,{mouseenter:e,mousedown:e,touchstart:e,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Ba(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:t=>{t.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(t){let e=this.eViewport;Xre(()=>Yo(e),()=>this.setScrollPosition(t),100)}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}},Ile={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Fle=class extends aG{constructor(){super(Ile,"horizontal"),this.eLeftSpacer=Fe,this.eRightSpacer=Fe,this.setScrollVisibleDebounce=0}wireBeans(t){this.visibleCols=t.visibleCols,this.scrollVisibleSvc=t.scrollVisibleSvc}postConstruct(){super.postConstruct();let t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",t),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new rP(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;let t=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let t=this.scrollVisibleSvc.verticalScrollShowing,e=this.visibleCols.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&t,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(e+=i),Os(this.eRightSpacer,e),this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=i);let r=this.visibleCols.getColsLeftWidth();this.enableRtl&&t&&(r+=i),Os(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){let t=this.scrollVisibleSvc.horizontalScrollShowing,e=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=t&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=n?0:i===0&&e?16:i,s=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",e),Cy(this.getGui(),o),Cy(this.eViewport,o),Cy(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(t,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),t?this.setScrollVisibleDebounce=window.setTimeout(s,100):s()}getScrollPosition(){return mx(this.eViewport,this.enableRtl)}setScrollPosition(t){Yo(this.eViewport)||this.attemptSettingScrollPosition(t),vx(this.eViewport,t,this.enableRtl)}},Ple={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Fle},kle={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},Ole=class extends aG{constructor(){super(kle,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new nG(this.eContainer));let{ctrlsSvc:t}=this.beans;t.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,t)})}setScrollVisible(){let{scrollVisibleSvc:t}=this.beans,e=t.verticalScrollShowing,n=this.invisibleScrollbar,i=e&&t.getScrollbarWidth()||0,r=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),Os(this.getGui(),r),Os(this.eViewport,r),Os(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(t){let n=t.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),r=n.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(t,e){!e&&!Yo(this.eViewport)&&this.attemptSettingScrollPosition(t),this.eViewport.scrollTop=t}},Lle={selector:"AG-FAKE-VERTICAL-SCROLL",component:Ole};function Nle(t){return t.cols?t.cols.treeDepth+1:-1}function Ps(t){return t.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function sP(t){let e=[],n=t.ctrlsSvc.getHeaderRowContainerCtrls();for(let i of n){if(!i)continue;let r=i.getGroupRowCount()||0;for(let o=0;o<r;o++){let s=i.getGroupRowCtrlAtIndex(o),a=e[o];if(s){let l=Ble(t,s);(a==null||l>a)&&(e[o]=l)}}}return e}function Ble(t,e){let i=t.colModel.isPivotMode()?Hle(t):cG(t),r=e.getHeaderCellCtrls();for(let o of r){let{column:s}=o,a=s.getAutoHeaderHeight();a!=null&&a>i&&s.isAutoHeaderHeight()&&(i=a)}return i}function aP(t){let n=t.colModel.isPivotMode()?Vle(t):Hx(t);return t.colModel.forAllCols(i=>{let r=i.getAutoHeaderHeight();r!=null&&r>n&&i.isAutoHeaderHeight()&&(n=r)}),n}function Hx(t){return t.gos.get("headerHeight")??t.environment.getDefaultHeaderHeight()}function lG(t){return t.gos.get("floatingFiltersHeight")??Hx(t)}function cG(t){return t.gos.get("groupHeaderHeight")??Hx(t)}function Vle(t){return t.gos.get("pivotHeaderHeight")??Hx(t)}function Hle(t){return t.gos.get("pivotGroupHeaderHeight")??cG(t)}var zle=class extends he{setComp(t,e,n){this.comp=t,this.eGui=e;let{beans:i}=this,{headerNavigation:r,touchSvc:o,ctrlsSvc:s}=i;r&&this.createManagedBean(new Lf(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();let a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o?.mockHeaderContextMenu(this,a),s.register("gridHeaderCtrl",this)}setupHeaderHeight(){let t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t),this.addManagedEventListeners({displayedColumnsChanged:t,columnHeaderHeightChanged:t,columnGroupHeaderHeightChanged:()=>Ba(this.beans,()=>t()),gridStylesChanged:t,advancedFilterEnabledChanged:t})}setHeaderHeight(){let{beans:t}=this,e=0,n=sP(t).reduce((o,s)=>o+s,0),i=aP(t);if(t.filterManager?.hasFloatingFilters()&&(e+=lG(t)),e+=n,e+=i,this.headerHeight===e)return;this.headerHeight=e;let r=`${e+1}px`;this.comp.setHeightAndMinHeight(r),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(t){let e=t.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",e),this.comp.toggleCss("ag-pivot-off",!e)}onDisplayedColumnsChanged(t){let n=t.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(t){let e=this.gos.get("enableRtl"),n=t.shiftKey,i=n!==e?"LEFT":"RIGHT",{beans:r}=this,{headerNavigation:o,focusSvc:s}=r;(o.navigateHorizontally(i,!0,t)||!n&&s.focusOverlay(!1)||Pf(r,n,!0))&&t.preventDefault()}handleKeyDown(t){let e=null,{headerNavigation:n}=this.beans;switch(t.key){case ne.LEFT:e="LEFT";case ne.RIGHT:{Ve(e)||(e="RIGHT"),n.navigateHorizontally(e,!1,t)&&t.preventDefault();break}case ne.UP:e="UP";case ne.DOWN:{Ve(e)||(e="DOWN"),n.navigateVertically(e,t)&&t.preventDefault();break}default:return}}onFocusOut(t){let{relatedTarget:e}=t,{eGui:n,beans:i}=this;!e&&n.contains(Wn(i))||n.contains(e)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(t,e,n){let{menuSvc:i,ctrlsSvc:r}=this.beans;if(!t&&!n||!i?.isHeaderContextMenuEnabled())return;let{target:o}=t??e;(o===this.eGui||o===r.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,t,n)}},lP=class extends ln{constructor(t,e){super(t),this.ctrl=e}getCtrl(){return this.ctrl}},Ule={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},Gle=class extends lP{constructor(t){super(Ule,t),this.eResize=Fe,this.eHeaderCompWrapper=Fe,this.headerCompVersion=0}postConstruct(){let t=this.getGui(),e=(r,o)=>{o!=null&&o!=""?t.setAttribute(r,o):t.removeAttribute(r)},n=()=>{let r=this.ctrl.getSelectAllGui();r&&(this.eResize.insertAdjacentElement("afterend",r),this.addDestroyFunc(()=>r.remove()))};e("col-id",this.ctrl.column.getColId());let i={setWidth:r=>t.style.width=r,toggleCss:(r,o)=>this.toggleCss(r,o),setUserStyles:r=>Iy(t,r),setAriaSort:r=>r?Bre(t,r):Vre(t),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:n,removeSelectAllGui:()=>this.ctrl.getSelectAllGui()?.remove()};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),n()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(t){this.headerCompVersion++;let e=this.headerCompVersion;t.newAgStackInstance().then(n=>this.afterCompCreated(e,n))}afterCompCreated(t,e){if(t!=this.headerCompVersion||!this.isAlive()){this.destroyBean(e);return}this.destroyHeaderComp(),this.headerComp=e,this.headerCompGui=e.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},Wle={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},jle=class extends lP{constructor(t){super(Wle,t),this.eResize=Fe,this.eHeaderCompWrapper=Fe}postConstruct(){let t=this.getGui(),e=(i,r)=>r!=null?t.setAttribute(i,r):t.removeAttribute(i);t.setAttribute("col-id",this.ctrl.column.getUniqueId());let n={toggleCss:(i,r)=>this.toggleCss(i,r),setUserStyles:i=>Iy(t,i),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>Zn(this.eResize,i),setWidth:i=>t.style.width=i,setAriaExpanded:i=>e("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,t,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(t){t.newAgStackInstance().then(e=>this.afterHeaderCompCreated(e))}afterHeaderCompCreated(t){let e=()=>this.destroyBean(t);if(!this.isAlive()){e();return}let n=this.getGui(),i=t.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(e),this.headerGroupComp=t,this.ctrl.setDragSource(n)}addOrRemoveHeaderWrapperStyle(t,e){let{eHeaderCompWrapper:n}=this;e?n.style.setProperty(t,e):n.style.removeProperty(t)}},$le={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},qle=class extends lP{constructor(t){super($le,t),this.eFloatingFilterBody=Fe,this.eButtonWrapper=Fe,this.eButtonShowMainFilter=Fe}postConstruct(){let t=this.getGui(),e={toggleCss:(n,i)=>this.toggleCss(n,i),setUserStyles:n=>Iy(t,n),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>Zn(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>t.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(e,t,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(t){if(!t){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=t.newAgStackInstance(),this.compPromise.then(e=>this.afterCompCreated(e))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(t){if(t){if(!this.isAlive()){this.destroyBean(t);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()}}},Kle=class extends ln{constructor(t){super({tag:"div",cls:t.headerRowClass,role:"row"}),this.ctrl=t,this.headerComps={}}postConstruct(){Oz(this.getGui(),this.ctrl.getAriaRowIndex());let t={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,n)=>this.setHeaderCtrls(e,n),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(t,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(t,e){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},t.forEach(i=>{let r=i.instanceId,o=n[r];delete n[r],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[r]=o}),Object.values(n).forEach(i=>{this.getGui().removeChild(i.getGui()),this.destroyBean(i)}),e){let i=Object.values(this.headerComps);i.sort((o,s)=>{let a=o.getCtrl().column.getLeft(),l=s.getCtrl().column.getLeft();return a-l});let r=i.map(o=>o.getGui());qz(this.getGui(),r)}}createHeaderComp(t){let e;switch(this.ctrl.type){case"group":e=new jle(t);break;case"filter":e=new qle(t);break;default:e=new Gle(t);break}return this.createBean(e),e.setParentComponent(this),e}},cP=class extends he{constructor(t,e,n,i){super(),this.columnOrGroup=t,this.eCell=e,this.colsSpanning=i,this.columnOrGroup=t,this.ariaEl=e.querySelector("[role=columnheader]")||e,this.beans=n}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){let{beans:t,colsSpanning:e}=this;return t.gos.get("enableRtl")&&e?vn(e):this.columnOrGroup}postConstruct(){let t=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:t}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:t}),this.addManagedPropertyListener("domLayout",t)}setLeftFirstTime(){let{gos:t,colAnimation:e}=this.beans,n=t.get("suppressColumnMoveAnimation"),i=Ve(this.columnOrGroup.getOldLeft());e?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let t=this.getColumnOrGroup(),e=this.modifyLeftForPrintLayout(t,t.getOldLeft()),n=this.modifyLeftForPrintLayout(t,t.getLeft());this.setLeft(e),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){let t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){let{gos:n,visibleCols:i}=this.beans;if(!tr(n,"print")||t.getPinned()==="left")return e;let o=i.getColsLeftWidth();if(t.getPinned()==="right"){let s=i.bodyWidth;return o+s+e}return o+e}setLeft(t){if(Ve(t)&&(this.eCell.style.left=`${t}px`),Xn(this.columnOrGroup)){let e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&Nre(this.ariaEl,e.length)}}},Yle=0,dG="headerCtrl",dP=class extends he{constructor(t,e){super(),this.column=t,this.rowCtrl=e,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.instanceId=t.getUniqueId()+"-"+Yle++}postConstruct(){let t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){let{headerRowIndex:e,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),r=i&&i.suppressHeaderKeyboardEvent;if(!Ve(r))return!1;let o=jt(this.gos,{colDef:i,column:n,headerRowIndex:e,event:t});return!!r(o)}getWrapperHasFocus(){return Wn(this.beans)===this.eGui}setGui(t,e){this.eGui=t,this.addDomData(e),e.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),e.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){let t=this.column.getDefinition();if(!t)return;let{headerStyle:e}=t,n;if(typeof e=="function"){let i=this.getHeaderClassParams();n=e(i)}else n=e;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){let{wrapperElement:e,checkMeasuringCallback:n,compBean:i}=t,{beans:r}=this,o=u=>{if(!this.isAlive()||!i.isAlive())return;let{paddingTop:h,paddingBottom:f,borderBottomWidth:p,borderTopWidth:v}=Of(this.eGui),m=h+f+p+v,C=e.offsetHeight+m;if(u<5){let y=zi(r),w=!y||!y.contains(e),R=C==0;if(w||R){pF(()=>o(u+1),"raf",r);return}}this.setColHeaderHeight(this.column,C)},s=!1,a,l=()=>{let u=this.column.isAutoHeaderHeight();u&&!s&&c(),!u&&s&&d()},c=()=>{s=!0,o(0),this.comp.toggleCss("ag-header-cell-auto-height",!0),a=qd(this.beans,e,()=>o(0))},d=()=>{s=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),i.addDestroyFunc(()=>d()),i.addManagedListeners(this.column,{widthChanged:()=>s&&o(0)}),i.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>o(0))}}),n&&n(l)}onDisplayedColumnsChanged(){let{comp:t,column:e,beans:n,eGui:i}=this;!t||!e||!i||(UU(t,e,n.visibleCols),Lz(i,n.visibleCols.getAriaColIndex(e)))}addResizeAndMoveKeyboardListeners(t){t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let t=zd(this.beans);this.eGui&&Fs(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){let e=Wn(this.beans),n=t.key===ne.LEFT||t.key===ne.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),e!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||n)&&(t.preventDefault(),t.stopImmediatePropagation()),!n))return;let r=t.key===ne.LEFT!==this.gos.get("enableRtl")?"left":"right";if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let o=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(o,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}moveHeader(t){this.beans.colMoves?.moveHeader(t,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(t){let e=this.getResizeDiff(t),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(e,this.column):e}getResizeDiff(t){let{gos:e,column:n}=this,i=t.key===ne.LEFT!==e.get("enableRtl"),r=n.getPinned(),o=e.get("enableRtl");return r&&o!==(r==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let e=this.getWrapperHasFocus();switch(t.key){case ne.PAGE_DOWN:case ne.PAGE_UP:case ne.PAGE_HOME:case ne.PAGE_END:e&&t.preventDefault()}}addDomData(t){let e=dG,{eGui:n,gos:i}=this;If(i,n,e,this),t.addDestroyFunc(()=>If(i,n,e,null))}focus(t){let{eGui:e}=this;return e?(this.lastFocusEvent=t||null,e.focus(),!0):!1}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,e,n){let i=t??e,{menuSvc:r,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&i.preventDefault(),r?.isHeaderContextMenuEnabled(n)&&r.showHeaderContextMenu(n,t,e),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(t,e){this.eventSvc.dispatchEvent({type:t,column:e})}setColHeaderHeight(t,e){if(!t.setAutoHeaderHeight(e))return;let{eventSvc:n}=this;t.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:t,columns:[t],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:t,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Xle=class extends dP{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}setComp(t,e,n,i,r){this.comp=t;let{rowCtrl:o,column:s,beans:a}=this,{colResize:l,context:c,colHover:d,rangeSvc:u}=a,h=ky(this,c,r);this.setGui(e,h),this.updateState(),this.setupWidth(h),this.setupMovingCss(h),this.setupMenuClass(h),this.setupSortableClass(h),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:p=>this.setRefreshFunction("measuring",p),compBean:h}),this.addColumnHoverListener(h),this.setupFilterClass(h),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(h),this.setupSelectAll(h),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=h.createManagedBean(l.createResizeFeature(o.pinned,s,n,t,this)):Zn(n,!1),d?.createHoverFeature(h,[s],e),u?.createRangeHighlightFeature(h,s,t),h.createManagedBean(new cP(s,e,a)),h.createManagedBean(new Lf(e,{shouldStopEventPropagation:p=>this.shouldStopEventPropagation(p),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(h),h.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),h.addManagedListeners(s,{colDefChanged:()=>this.refresh()}),h.addManagedListeners(s,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let f=()=>this.checkDisplayName();h.addManagedEventListeners({columnValueChanged:f,columnRowGroupChanged:f,columnPivotChanged:f,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),h.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(t,e){this.beans.colResize?.resizeHeader(this.column,t,e)}getHeaderClassParams(){let{column:t,beans:e}=this,n=t.colDef;return jt(e.gos,{colDef:n,column:t,floatingFilter:!1})}setupUserComp(){let t=this.lookupUserCompDetails();t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){let t=this.createParams(),e=this.column.getColDef();return yse(this.beans.userCompFactory,e,t)}createParams(){let{menuSvc:t,sortSvc:e,colFilter:n,gos:i}=this.beans;return jt(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!t?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||Xr(this.gos)),showColumnMenu:(o,s)=>{t?.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:s})},showColumnMenuAfterMouseClick:(o,s)=>{t?.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:s})},showFilter:o=>{t?.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{e?.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,s)=>{e?.setSortForColumn(this.column,o,!!s,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,s)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,s)}})}setupSelectAll(t){let{selectionSvc:e}=this.beans;e&&(this.selectAllFeature=t.createOptionalManagedBean(e.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),t.addManagedPropertyListener("rowSelection",()=>{let n=e.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=t.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===ne.SPACE&&this.selectAllFeature?.onSpaceKeyDown(t),t.key===ne.ENTER&&this.onEnterKeyDown(t),t.key===ne.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){t.ctrlKey||t.metaKey?this.showMenuOnKeyPress(t,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,t.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(t,e){let n=this.comp.getUserCompInstance();tz(n)&&n.onMenuKeyboardShortcut(e)&&t.preventDefault()}onFocusIn(t){this.eGui.contains(t.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),uae()&&this.setActiveHeader(!0)}onFocusOut(t){this.eGui.contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,t,e)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){let t=()=>{let e=this.column.getColDef(),n=zU(e,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(r=>{i.has(r)?i.delete(r):this.comp.toggleCss(r,!0)}),i.forEach(r=>this.comp.toggleCss(r,!1))};this.setRefreshFunction("headerClasses",t),t()}setDragSource(t){this.dragSourceElement=t,this.removeDragSource(),!(!t||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(t,this.column,this.displayName)??null)}updateState(){let{menuSvc:t}=this.beans;this.menuEnabled=!!t?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!t?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(t,e){this.refreshFunctions[t]=e}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(){let t=this.lookupUserCompDetails();if(!t)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){let e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}setupWidth(t){let e=()=>{let n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};t.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(t){let e=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};t.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(t){let e=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};t.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(t){let e=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};e(),this.setRefreshFunction("updateSortable",e),t.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(t){let e=()=>{let n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};t.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){let t=()=>{let e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};t(),this.setRefreshFunction("wrapText",t)}onHeaderHighlightChanged(){let t=this.column.getHighlighted(),e=t===0,n=t===1;this.comp.toggleCss("ag-header-highlight-before",e),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:t,column:e,comp:n,beans:i}=this,r=sP(this.beans),o=r.reduce((d,u)=>d+=u,0)===0;if(n.toggleCss("ag-header-parent-hidden",o),!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",s>0);let l=aP(i);if(s===0){n.toggleCss("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${l}px`);return}n.toggleCss("ag-header-span-total",a);let c=0;for(let d=0;d<s;d++)c+=r[r.length-1-d];t.style.setProperty("top",`${-c}px`),t.style.setProperty("height",`${l+c}px`)}refreshAriaSort(){if(this.sortable){let t=this.getLocaleTextFunc(),e=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Mre(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let t=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Xr(this.gos)){let t=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let t=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(t,e){e!=null?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)}announceAriaDescription(){if(!this.eGui.contains(Wn(this.beans)))return;let t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,n)=>e==="filter"?-1:n.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnounce?.announceValue(t,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(t){this.beans.colHover?.addHeaderColumnHoverListener(t,this.comp,this.column)}addActiveHeaderMouseListeners(t){let e=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);t.addManagedListeners(this.eGui,{mouseenter:e,mouseleave:e,click:n,contextmenu:i})}handleMouseOverChange(t){this.setActiveHeader(t),this.eventSvc.dispatchEvent({type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(t){this.comp.toggleCss("ag-header-active",t)}getAnchorElementForMenu(t){let e=this.comp.getUserCompInstance();return tz(e)?e.getAnchorElementForMenu(t):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function tz(t){return typeof t?.getAnchorElementForMenu=="function"&&typeof t.onMenuKeyboardShortcut=="function"}var Zle=0,$I=class extends he{constructor(t,e,n){super(),this.rowIndex=t,this.pinned=e,this.type=n,this.instanceId=Zle++,this.allCtrls=[];let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}postConstruct(){this.isPrintLayout=tr(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(t=>t.eGui!=null):!1}setComp(t,e,n=!0){this.comp=t,e=ky(this,this.beans.context,e),n&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(e)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(t){let e=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);t.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e}),t.addManagedPropertyListener("domLayout",n),t.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),t.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}onDisplayedColumnsChanged(){this.isPrintLayout=tr(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){let t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){let{visibleCols:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){let{filterManager:t}=this.beans,e=[],n=sP(this.beans),i=aP(this.beans);e.push(...n),e.push(i),t?.hasFloatingFilters()&&e.push(lG(this.beans));let r=0;for(let s=0;s<this.rowIndex;s++)r+=e[s];let o=e[this.rowIndex];return{topOffset:r,rowHeight:o}}onVirtualColumnsChanged(t=!1){let e=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,n,t)}getUpdatedHeaderCtrls(){let t=this.ctrlsById;this.ctrlsById=new Map;let e=this.getColumnsInViewport();for(let i of e)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,t);let n=i=>{let{focusSvc:r,visibleCols:o}=this.beans;return r.isHeaderWrapperFocused(i)?o.isVisible(i.column):!1};if(t)for(let[i,r]of t)n(r)?this.ctrlsById.set(i,r):this.destroyBean(r);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(t,e,n){if(t.isEmptyGroup())return;let i=t.getUniqueId(),r;if(n&&(r=n.get(i),n.delete(i)),r&&r.column!=t&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":{r=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,t,this));break}case"group":r=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,t,this));break;default:r=this.createBean(new Xle(t,this));break}e.set(i,r)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let t=[],e=this.getActualDepth(),{colViewport:n}=this.beans;return["left",null,"right"].forEach(i=>{let r=n.getHeadersToRender(i,e);t=t.concat(r)}),t}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.colViewport.getHeadersToRender(this.pinned,this.getActualDepth())}focusHeader(t,e){let n=this.allCtrls.find(r=>r.column==t);return n?n.focus(e):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,super.destroy()}},Qle=class extends he{constructor(t){super(),this.pinned=t,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(t,e){this.comp=t,this.eViewport=e;let{pinnedCols:n,ctrlsSvc:i,colModel:r,colMoves:o,filterManager:s}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);let a=this.onDisplayedColumnsChanged.bind(this,s);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:a,advancedFilterEnabledChanged:a});let l=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(l,this),r.ready&&this.refresh()}getAllCtrls(){let t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}refresh(t=!1){let{focusSvc:e,colModel:n,filterManager:i}=this.beans,r=0,o=e.getFocusHeaderToUseAfterRefresh(),s=()=>{let d=Nle(n)-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let u=0;u<d;u++){let h=this.createBean(new $I(r++,this.pinned,"group"));this.groupsRowCtrls.push(h)}},a=()=>{let d=r++,u=!this.hidden&&(this.columnsRowCtrl==null||!t||this.columnsRowCtrl.rowIndex!==d);(u||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),u&&(this.columnsRowCtrl=this.createBean(new $I(d,this.pinned,"column")))},l=()=>{this.includeFloatingFilter=!!i?.hasFloatingFilters()&&!this.hidden;let d=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){d();return}let u=r++;if(this.filtersRowCtrl){let h=this.filtersRowCtrl.rowIndex!==u;(!t||h)&&d()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new $I(u,this.pinned,"filter")))};s(),a(),l();let c=this.getAllCtrls();this.comp.setCtrls(c),this.restoreFocusOnHeader(e,o)}getHeaderCtrlForColumn(t){let e=n=>n?.getHeaderCellCtrls().find(i=>i.column===t);if(Na(t))return e(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){let i=e(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(t){return this.getHeaderCtrlForColumn(t)?.eGui??null}getRowType(t){return this.getAllCtrls()[t]?.type}focusHeader(t,e,n){let r=this.getAllCtrls()[t];return r?r.focusHeader(e,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(t){return this.groupsRowCtrls[t]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(t,e){let n=t?.createBodyDropTarget(this.pinned,e);n&&this.createManagedBean(n)}restoreFocusOnHeader(t,e){if(!e)return;let{column:n}=e;n.getPinned()==this.pinned&&t.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(t){let e=!!t?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new rP(t=>this.comp.setCenterWidth(`${t}px`),!0))}},Jle=class extends he{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){let{enterpriseMenuFactory:t,filterMenuFactory:e}=this.beans;this.activeMenuFactory=t??e}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){let{enterpriseMenuFactory:e,filterMenuFactory:n}=this.beans,i=e&&Xr(this.gos)?e:n;this.showColumnMenuCommon(i,t,t.containerType,!0)}showHeaderContextMenu(t,e,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(t,e,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}isColumnMenuInHeaderEnabled(t){let{suppressHeaderMenuButton:e}=t.getColDef();return!e&&!!this.activeMenuFactory?.isMenuEnabled(t)&&(Xr(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){return!(t&&Na(t)?t.getColDef():t?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let t=!this.isSuppressMenuHide();return!(Bd()&&t)}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!Xr(this.gos)&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return!!this.beans.filterManager?.isFilterAllowed(t)&&!Xr(this.gos)&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isFloatingFilterButtonEnabled(t){return!t.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){let t=this.gos,e=t.get("suppressMenuHide");return Xr(t)?t.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(t,e,n,i){let{positionBy:r,onClosedCallback:o}=e,s=e.column;if(r==="button"){let{buttonElement:a}=e;t?.showMenuAfterButtonClick(s,a,n,o,i)}else if(r==="mouse"){let{mouseEvent:a}=e;t?.showMenuAfterMouseEvent(s,a,n,o,i)}else if(s){let a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(s,"auto"),Ba(a,()=>{let c=l.getHeaderRowContainerCtrl(s.getPinned())?.getHeaderCtrlForColumn(s);c&&t?.showMenuAfterButtonClick(s,c.getAnchorElementForMenu(i),n,o,i)})}}};function nz(t,e,n){t.menuVisible!==e&&(t.menuVisible=e,t.dispatchColEvent("menuVisibleChanged",n))}var ece=class extends ln{isPopup(){return!0}setParentComponent(t){t.addCss("ag-has-popup"),super.setParentComponent(t)}destroy(){let t=this.parentComponent;t&&t.isAlive()&&t.getGui().classList.remove("ag-has-popup"),super.destroy()}};var uG=class extends ln{constructor(){super()}},tce={tag:"span",cls:"ag-overlay-loading-center",attrs:{"aria-live":"polite","aria-atomic":"true"}},nce=class extends uG{init(){let t=ka(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(t??tce),!t){let e=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e("loadingOoo","Loading...")})}}},ice={tag:"span",cls:"ag-overlay-no-rows-center"},rce=class extends uG{init(){let t=ka(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(t??ice),!t){let e=this.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")})}}};function oce(t,e,n){let i=ks(t,e,n);if(i){let{className:o}=i;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return i}let r=On({tag:"span"});return r.appendChild(i),r}function ks(t,e,n){let i=null;t==="smallDown"?Ee(262):t==="smallLeft"?Ee(263):t==="smallRight"&&Ee(264);let r=n&&n.getColDef().icons;if(r&&(i=r[t]),e.gos&&!i){let o=e.gos.get("icons");o&&(i=o[t])}if(i){let o;if(typeof i=="function")o=i();else if(typeof i=="string")o=i;else{Ee(38,{iconName:t});return}if(typeof o=="string")return GF(o);if(jF(o))return o;Ee(133,{iconName:t});return}else{let o=e.registry.getIcon(t);return o||e.validation?.validateIcon(t),On({tag:"span",cls:`ag-icon ag-icon-${o??t}`,role:"presentation",attrs:{unselectable:"on"}})}}var sce=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}",ace={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},lce=class extends ln{constructor(){super(),this.dragSource=null,this.eIcon=Fe,this.eLabel=Fe,this.eGhost=Fe,this.registerCSS(sce)}postConstruct(){let t=e=>oce(e,this.beans,null);this.dropIconMap={pinned:t("columnMovePin"),hide:t("columnMoveHide"),move:t("columnMoveMove"),left:t("columnMoveLeft"),right:t("columnMoveRight"),group:t("columnMoveGroup"),aggregate:t("columnMoveValue"),pivot:t("columnMovePivot"),notAllowed:t("dropNotAllowed")}}init(t){this.dragSource=t.dragSource,this.setTemplate(ace),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(t,e){let{eIcon:n,dragSource:i,dropIconMap:r,gos:o}=this;Zr(n);let s=null;t||(t=i?.getDefaultIconName?i.getDefaultIconName():"notAllowed"),s=r[t],n.classList.toggle("ag-shake-left-to-right",e),!(s===r.hide&&o.get("suppressDragLeaveHidesColumns"))&&s&&n.appendChild(s)}setLabel(t){this.eLabel.textContent=t}},cce=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",dce=class extends ln{constructor(t,e,n){super(e,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{},this.registerCSS(cce)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:t,label:e,labelWidth:n,labelAlignment:i,disabled:r}=this.config;r!=null&&this.setDisabled(r),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){let{label:t,eLabel:e}=this;Zr(e),typeof t=="string"?e.innerText=t+this.labelSeparator:t&&e.appendChild(t),t===""?(Zn(e,!1),Kl(e,"presentation")):(Zn(e,!0),Kl(e,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){let t=this.eLabel;return t.id=t.id||`ag-${this.getCompId()}-label`,t.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){let n=this.getGui().classList;return n.toggle("ag-label-align-left",t==="left"),n.toggle("ag-label-align-right",t==="right"),n.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:(yx(this.eLabel,t),this)}setDisabled(t){t=!!t;let e=this.getGui();return xy(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}},hG=class extends dce{constructor(t,e,n,i){super(t,e,n),this.className=i}postConstruct(){super.postConstruct();let{width:t,value:e,onValueChange:n}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),n!=null&&this.onValueChange(n),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(t){return super.setLabel(t),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let t=this.getAriaElement(),e=this.getLabelId(),n=this.getLabel();n==null||n==""||Rre(t)!==null?Sy(t,""):Sy(t,e??"")}setAriaLabel(t){return Af(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListeners(this,{fieldValueChanged:()=>t(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return Os(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function uce(t){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:t,ref:"eInput",cls:"ag-input-field-input"}]}]}}var _f=class extends hG{constructor(t,e,n="text",i="input"){super(t,t?.template??uce(i),[],e),this.inputType=n,this.displayFieldTag=i,this.eLabel=Fe,this.eWrapper=Fe,this.eInput=Fe}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);let{eLabel:t,eWrapper:e,eInput:n,className:i}=this;t.classList.add(`${i}-label`),e.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;let{inputName:r,inputWidth:o}=this.config;r!=null&&this.setInputName(r),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([n])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:t=>this.setValue(t.target.value)})}setInputType(t){this.displayFieldTag==="input"&&(this.inputType=t,Fs(this.eInput,"type",t))}getInputElement(){return this.eInput}setInputWidth(t){return yx(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){let e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return Fs(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return Af(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return xy(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)Fs(this.eInput,"autocomplete",null);else{let e=typeof t=="string"?t:"off";Fs(this.eInput,"autocomplete",e)}return this}},uP=class extends _f{constructor(t,e="ag-checkbox",n="checkbox"){super(t,e,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:t,passive:e}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;let t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){let e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){if(this.isSelected()===t)return;this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0;let n=this.eInput;n.checked=t,n.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(t,e,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:t,previousValue:e,event:n});let i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:t,previousValue:e})}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;let e=this.isSelected(),n=this.selected=t.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,e,t)}refreshSelectedClass(t){let e=this.eWrapper.classList;e.toggle("ag-checked",t===!0),e.toggle("ag-indeterminate",t==null)}},fG={selector:"AG-CHECKBOX",component:uP},hce=".ag-checkbox-cell{height:100%}",fce={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},pce=class extends ln{constructor(){super(fce,[fG]),this.eCheckbox=Fe,this.registerCSS(hce)}init(t){this.refresh(t);let{eCheckbox:e,beans:n}=this,i=e.getInputElement();i.setAttribute("tabindex","-1"),Pz(i,"polite"),this.addManagedListeners(i,{click:r=>{if(jd(r),e.isDisabled())return;let o=e.getValue();this.onCheckboxChanged(o)},dblclick:r=>{jd(r)}}),this.addManagedElementListeners(t.eGridCell,{keydown:r=>{if(r.key===ne.SPACE&&!e.isDisabled()){t.eGridCell===Wn(n)&&e.toggle();let o=e.getValue();this.onCheckboxChanged(o),r.preventDefault()}}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){let e,n=!0,{value:i,column:r,node:o}=t;if(o.group&&r)if(typeof i=="boolean")e=i;else{let u=r.getColId();u.startsWith(Bx)?e=i==null||i===""?void 0:i==="true":o.aggData&&o.aggData[u]!==void 0?e=i??void 0:n=!1}else e=i??void 0;let{eCheckbox:s}=this;if(!n){s.setDisplayed(!1);return}s.setValue(e);let a=t.disabled??!r?.isCellEditable(o);s.setDisabled(a);let l=this.getLocaleTextFunc(),c=Nz(l,e),d=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;s.setInputAriaLabel(d)}onCheckboxChanged(t){let{params:e}=this,{column:n,node:i,value:r}=e;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:i.rowIndex,rowPinned:i.rowPinned,state:"changed",oldValue:r,newValue:r}],{update:!0});let o=i.setDataValue(n,t,"renderer");this.beans.editSvc?.stopEditing({rowNode:i,column:n},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"}),o||this.updateCheckbox(e)}},iz=class{constructor(t,e){this.beans=t,this.floating=e,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(t){let{all:e,visible:n,order:i}=this;e.has(t)||(e.add(t),n.add(t),i.push(t),this.sort())}delete(t){this.all.delete(t),this.visible.delete(t),this.queued.delete(t.id),Ls(this.order,t)}has(t){return this.visible.has(t)}forEach(t){this.order.forEach(t)}getByIndex(t){return this.order[t]}getById(t){for(let e of this.visible)if(e.id==t)return e}clear(){let{all:t,visible:e,order:n,queued:i}=this;t.clear(),i.clear(),e.clear(),n.length=0}sort(){let{sortSvc:t,rowNodeSorter:e,gos:n}=this.beans,i=t?.getSortOptions()??[],r=vce(this.order);if(this.order.sort((s,a)=>(s.pinnedSibling?.rowIndex??0)-(a.pinnedSibling?.rowIndex??0)),this.order=e?.doFullSort(this.order,i)??this.order,!r)return;let o=aU(n);o==="bottom"||o==="pinnedBottom"?this.order.push(r):this.order.unshift(r)}hide(t){let{all:e,visible:n}=this;e.forEach(i=>t(i)?n.delete(i):n.add(i)),this.order=Array.from(n),this.sort()}queue(t){this.queued.add(t)}unqueue(t){this.queued.delete(t)}forEachQueued(t){this.queued.forEach(t)}};function pG(t){if(t.level===-1)return!0;let e=t.parent;return e?.childrenAfterSort?.some(n=>n==t)?pG(e):!1}function qI(t,e){let{gos:n,rowModel:i,filterManager:r}=t;return Lx(n,i)?!i.getRowNode(e.id):r?.isAnyFilterPresent()?!pG(e):n.get("pivotMode")?!e.group:!1}function gce(t){return!!t.footer&&t.level===-1}function mce(t){return!!t.pinnedSibling&&gce(t.pinnedSibling)}function vce(t){let e=t.findIndex(mce);if(e>-1)return t.splice(e,1)?.[0]}var rz=class extends he{postConstruct(){let{gos:t,beans:e}=this;this.top=new iz(e,"top"),this.bottom=new iz(e,"bottom");let n=r=>qI(e,r.pinnedSibling),i=()=>{let r=t.get("isRowPinned");r&&t.get("enableRowPinning")&&e.rowModel.forEachNode(o=>this.pinRow(o,r(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:()=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(r=>r.hide(n)),this.refreshRowPositions(),this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(Cce),this.refreshRowPositions()},rowNodeDataChanged:({node:r})=>{(t.get("isRowPinnable")?.(r)??!0)||this.pinRow(r,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(r=>r.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:r})=>{this._grandTotalPinned=r==="pinnedBottom"?"bottom":r==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(t=!0){this.forContainers(e=>{let n=[];e.forEach(i=>n.push(i)),n.forEach(i=>this.pinRow(i,null)),e.clear()}),t&&this.dispatchRowPinnedEvents()}pinRow(t,e,n){if(t.footer&&t.level>-1)return;if(t.footer&&t.level===-1){this._grandTotalPinned=e,wce(this.beans);return}let i=t.rowPinned??t.pinnedSibling?.rowPinned;if(i!=null&&e!=null&&e!=i){let s=t.rowPinned?t:t.pinnedSibling,a=t.rowPinned?t.pinnedSibling:t;this.pinRow(s,null,n),this.pinRow(a,e,n);return}let o=n&&bce(this.beans,t,n);if(o){o.forEach(s=>this.pinRow(s,e));return}if(e==null){let s=t.rowPinned?t:t.pinnedSibling,a=this.findPinnedRowNode(s);if(!a)return;a.delete(s);let l=s.pinnedSibling;KI(s),this.refreshRowPositions(e),this.dispatchRowPinnedEvents(l)}else{let s=oz(this.beans,t,e),a=this.getContainer(e);a.add(s),qI(this.beans,t)&&a.hide(l=>qI(this.beans,l.pinnedSibling)),this.refreshRowPositions(e),this.dispatchRowPinnedEvents(t)}}isManual(){return!0}isEmpty(t){return this.getContainer(t).size()===0}isRowsToRender(t){return!this.isEmpty(t)}ensureRowHeightsValid(){let t=!1,e=0,n=i=>{if(i.rowHeightEstimated){let r=Wd(this.beans,i);i.setRowTop(e),i.setRowHeight(r.height),e+=r.height,t=!0}};return this.bottom.forEach(n),e=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),t}getPinnedTopTotalHeight(){return sz(this.top)}getPinnedBottomTotalHeight(){return sz(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(t){return this.top.getByIndex(t)}getPinnedBottomRow(t){return this.bottom.getByIndex(t)}getPinnedRowById(t,e){return this.getContainer(e).getById(t)}forEachPinnedRow(t,e){this.getContainer(t).forEach(e)}getPinnedState(){let t=e=>{let n=[];return this.forEachPinnedRow(e,i=>n.push(i.pinnedSibling.id)),n};return{top:t("top"),bottom:t("bottom")}}setPinnedState(t){this.forContainers((e,n)=>{for(let i of t[n]){let r=this.beans.rowModel.getRowNode(i);r?this.pinRow(r,n):e.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(t){this._grandTotalPinned=t}tryToEmptyQueues(){this.forContainers((t,e)=>{let n=new Set;t.forEachQueued(i=>{let r=this.beans.rowModel.getRowNode(i);r&&n.add(r)});for(let i of n)t.unqueue(i.id),this.pinRow(i,e)})}pinGrandTotalRow(){let{gos:t,beans:e,_grandTotalPinned:n}=this,i=e.rowModel;if(!Tr(t,i))return;let r=i.rootNode?.sibling;if(!r)return;let o=r.pinnedSibling,s=o&&this.findPinnedRowNode(o);if(n){if(s&&s.floating!==n&&(s.delete(o),KI(o)),!s||s.floating!==n){let a=oz(e,r,n);this.getContainer(n).add(a)}}else{if(!s)return;s.delete(o),KI(o)}}onGridStylesChanges(t){t.rowHeightChanged&&this.forContainers(e=>e.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(t){return t==="top"?this.top:this.bottom}findPinnedRowNode(t){if(this.top.has(t))return this.top;if(this.bottom.has(t))return this.bottom}refreshRowPositions(t){let e=n=>yce(this.beans,n);return t==null?this.forContainers(e):e(this.getContainer(t))}forContainers(t){t(this.top,"top"),t(this.bottom,"bottom")}dispatchRowPinnedEvents(t){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),t?.dispatchRowEvent("rowPinned")}};function yce(t,e){let n=0;e.forEach((i,r)=>{i.setRowTop(n),(i.rowHeightEstimated||i.rowHeight==null)&&i.setRowHeight(Wd(t,i).height),i.setRowIndex(r),n+=i.rowHeight})}function oz(t,e,n){if(e.pinnedSibling)return e.pinnedSibling;let i=Oae(e,t);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=n;let r=n==="top"?eP:tP;return i.id=`${r}${n}-${e.id}`,i.pinnedSibling=e,e.pinnedSibling=i,i}function KI(t){if(!t.pinnedSibling)return;t.rowPinned=null,t.setRowTop(null),t.setRowIndex(null);let e=t.pinnedSibling;t.pinnedSibling=void 0,e&&(e.pinnedSibling=void 0,e.rowPinned=null)}function Cce(t){let e=new Set;t.forEach(n=>{n.group&&e.add(n)}),e.forEach(n=>t.delete(n))}function bce(t,e,n){let{rowSpanSvc:i}=t,r=(n&&i?.isCellSpanning(n,e))??!1;if(n&&r)return i?.getCellSpan(n,e)?.spannedNodes}function sz(t){let e=t.size();if(e===0)return 0;let n=t.getByIndex(e-1);return n===void 0?0:n.rowTop+n.rowHeight}function wce({gos:t,rowModel:e}){Tr(t,e)&&e.refreshModel({step:"map"})}var az=class extends he{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){let t=this.gos;this.setPinnedRowData(t.get("pinnedTopRowData"),"top"),this.setPinnedRowData(t.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(t){return this.getCache(t).order.length===0}isRowsToRender(t){return!this.isEmpty(t)}isManual(){return!1}pinRow(t,e){}onGridStylesChanges(t){if(t.rowHeightChanged){let e=n=>{n.setRowHeight(n.rowHeight,!0)};hy(this.pinnedBottomRows,e),hy(this.pinnedTopRows,e)}}ensureRowHeightsValid(){let t=!1,e=0,n=i=>{if(i.rowHeightEstimated){let r=Wd(this.beans,i);i.setRowTop(e),i.setRowHeight(r.height),e+=r.height,t=!0}};return hy(this.pinnedBottomRows,n),e=0,hy(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),t}setPinnedRowData(t,e){this.updateNodesFromRowData(t,e),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(t,e){let n=this.getCache(e);if(t===void 0){n.order.length=0,n.cache={};return}let i=Cx(this.gos),r=e==="top"?eP:tP,o=new Set(n.order),s=[],a=new Set,l=0,c=-1;for(let d of t){let u=i?.({data:d,level:0,rowPinned:e})??r+this.nextId++;if(a.has(u)){Ee(96,{id:u,data:d});continue}c++,a.add(u),s.push(u);let h=_y(n,u);if(h!==void 0)h.data!==d&&h.updateData(d),l+=this.setRowTopAndRowIndex(h,l,c),o.delete(u);else{let f=new Ly(this.beans);f.id=u,f.data=d,f.rowPinned=e,l+=this.setRowTopAndRowIndex(f,l,c),n.cache[u]=f,n.order.push(u)}}o.forEach(d=>{_y(n,d)?.clearRowTopAndRowIndex(),delete n.cache[d]}),n.order=s}setRowTopAndRowIndex(t,e,n){return t.setRowTop(e),t.setRowHeight(Wd(this.beans,t).height),t.setRowIndex(n),t.rowHeight}getPinnedTopTotalHeight(){return lz(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return lz(this.pinnedBottomRows)}getPinnedTopRowCount(){return IF(this.pinnedTopRows)}getPinnedBottomRowCount(){return IF(this.pinnedBottomRows)}getPinnedTopRow(t){return AF(this.pinnedTopRows,t)}getPinnedBottomRow(t){return AF(this.pinnedBottomRows,t)}getPinnedRowById(t,e){return _y(this.getCache(e),t)}forEachPinnedRow(t,e){return hy(this.getCache(t),e)}getCache(t){return t==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function lz(t){let e=IF(t);if(e===0)return 0;let n=AF(t,e-1);return n===void 0?0:n.rowTop+n.rowHeight}function _y(t,e){return t.cache[e]}function AF(t,e){return _y(t,t.order[e])}function hy(t,e){t.order.forEach((n,i)=>{let r=_y(t,n);r&&e(r,i)})}function IF(t){return t.order.length}var _ce=class extends he{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){let{gos:t}=this,e=()=>{let n=t.get("enableRowPinning"),i=aU(t),o=!!n||(i==="pinnedBottom"||i==="pinnedTop"),s=o?this.inner instanceof az:this.inner instanceof rz;this.inner&&s&&this.destroyBean(this.inner),(s||!this.inner)&&(this.inner=this.createManagedBean(o?new rz:new az))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],e),e()}reset(){return this.inner.reset()}isEmpty(t){return this.inner.isEmpty(t)}isManual(){return this.inner.isManual()}isRowsToRender(t){return this.inner.isRowsToRender(t)}pinRow(t,e,n){return this.inner.pinRow(t,e,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(t,e){return this.inner.getPinnedRowById(t,e)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(t){return this.inner.getPinnedTopRow(t)}getPinnedBottomRow(t){return this.inner.getPinnedBottomRow(t)}forEachPinnedRow(t,e){return this.inner.forEachPinnedRow(t,e)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(t){return this.inner.setPinnedState(t)}setGrandTotalPinned(t){return this.inner.setGrandTotalPinned(t)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},Sce="ROOT_NODE_ID",xce=class extends he{constructor(){super(...arguments),this.nextId=0,this.allNodesMap={},this.rootNode=null}getRowNode(t){return this.allNodesMap[t]}extractRowData(){return this.rootNode?.allLeafChildren?.map(t=>t.data)}activate(t){this.rootNode=t,t.group=!0,t.level=-1,t.id=Sce,t.allLeafChildren=[],t.childrenAfterGroup=[],t.childrenAfterSort=[],t.childrenAfterAggFilter=[],t.childrenAfterFilter=[],this.updateRootSiblingArrays(t)}deactivate(){this.rootNode&&(this.allNodesMap={},this.rootNode=null)}destroy(){super.destroy(),this.allNodesMap={},this.rootNode=null}setNewRowData(t){let e=this.rootNode;e&&(this.dispatchRowDataUpdateStartedEvent(t),e.childrenAfterFilter=null,e.childrenAfterGroup=null,e.childrenAfterAggFilter=null,e.childrenAfterSort=null,e.childrenMapped=null,e.updateHasChildren(),this.allNodesMap={},this.nextId=0,this.loadNewRowData(t),this.updateRootSiblingArrays(e))}updateRootSiblingArrays(t){let e=t.sibling;e&&(e.childrenAfterFilter=t.childrenAfterFilter,e.childrenAfterGroup=t.childrenAfterGroup,e.childrenAfterAggFilter=t.childrenAfterAggFilter,e.childrenAfterSort=t.childrenAfterSort,e.childrenMapped=t.childrenMapped,e.allLeafChildren=t.allLeafChildren)}loadNewRowData(t){this.rootNode.allLeafChildren=t?.map((e,n)=>this.createRowNode(e,n))??[]}setImmutableRowData(t,e){let n=Cx(this.gos),i=!this.gos.get("suppressMaintainUnsortedOrder"),r=t.changedRowNodes,o=new Set,s=this.rootNode,a=s.allLeafChildren,l=a.length,c=!1,d=!1,u=!1,h=!1;for(let p=0,v=-1,m=e.length;p<m;p++){let g=e[p],C=this.getRowNode(n({data:g,level:0}));if(!C)c=!0,C=this.createRowNode(g,-1),r.add(C);else{if(i){let y=C.sourceRowIndex;h||(h=y<=v||c),v=y}C.data!==g&&(u=!0,C.updateData(g),r.update(C))}o.add(C)}let f=[];for(let p=0;p<l;p++){let v=a[p];o.has(v)||(d=!0,v.isSelected()&&f.push(v),v.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(v.pinnedSibling,null),this.rowNodeDeleted(v),r.remove(v))}if(c||d||h){let p=new Array(o.size),v=0;if(!i)for(let g=0;g<l;++g){let C=a[g];o.delete(C)&&(C.sourceRowIndex=v,p[v++]=C)}for(let g of o)g.sourceRowIndex=v,p[v++]=g;s.allLeafChildren=p;let m=s.sibling;m&&(m.allLeafChildren=p),t.rowNodesOrderChanged||(t.rowNodesOrderChanged=h)}(c||d||h||u)&&(this.deselectNodes(f),t.rowDataUpdated=!0)}rowNodeDeleted(t){t.clearRowTopAndRowIndex();let e=t.id,n=this.allNodesMap;n[e]===t&&delete n[e]}updateRowData(t,e){this.dispatchRowDataUpdateStartedEvent(t.add);let n={changedRowNodes:e,rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[],r=Cx(this.gos);return this.executeRemove(r,t,n,i),this.executeUpdate(r,t,n,i),this.executeAdd(t,n),this.deselectNodes(i),n}executeAdd(t,e){let n=t.add;if(!n?.length)return;let i=this.rootNode.allLeafChildren,r=i.length;if(typeof t.addIndex=="number"&&(r=this.sanitizeAddIndex(t.addIndex),r>0&&this.gos.get("treeData")&&this.gos.get("getDataPath"))){for(let u=0;u<i.length;u++)if(i[u]?.rowIndex==r-1){r=u+1;break}}let o=n.length,s=e.changedRowNodes,a=new Array(o);for(let d=0;d<o;d++){let u=this.createRowNode(n[d],r+d);s.add(u),a[d]=u}let l=this.rootNode;if(r<i.length){let d=i.slice(0,r),u=i.slice(r,i.length),h=d.length+a.length;for(let f=0,p=u.length;f<p;++f)u[f].sourceRowIndex=h+f;i=[...d,...a,...u],e.rowsInserted=!0}else i=i.concat(a);l.allLeafChildren=i;let c=l.sibling;c&&(c.allLeafChildren=i),e.rowNodeTransaction.add=a}executeRemove(t,e,{changedRowNodes:n,rowNodeTransaction:i},r){let{remove:o}=e;if(!o?.length)return;let s={};o.forEach(c=>{let d=this.lookupRowNode(t,c);d&&(d.isSelected()&&r.push(d),d.pinnedSibling&&this.beans.pinnedRowModel?.pinRow(d.pinnedSibling,null),d.clearRowTopAndRowIndex(),s[d.id]=!0,delete this.allNodesMap[d.id],i.remove.push(d),n.remove(d))});let a=this.rootNode;a.allLeafChildren=a.allLeafChildren?.filter(c=>!s[c.id])??null,a.allLeafChildren?.forEach((c,d)=>{c.sourceRowIndex=d});let l=a.sibling;l&&(l.allLeafChildren=a.allLeafChildren)}executeUpdate(t,e,{changedRowNodes:n,rowNodeTransaction:i},r){let{update:o}=e;o?.length&&o.forEach(s=>{let a=this.lookupRowNode(t,s);a&&(a.updateData(s),!a.selectable&&a.isSelected()&&r.push(a),i.update.push(a),n.update(a))})}dispatchRowDataUpdateStartedEvent(t){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:t?.length?t[0]:null})}deselectNodes(t){let e="rowDataChanged",n=this.beans.selectionSvc,i=t.length>0;i&&n?.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),n?.updateGroupsFromChildrenSelections?.(e),i&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}sanitizeAddIndex(t){let e=this.rootNode.allLeafChildren?.length??0;return t<0||t>=e||Number.isNaN(t)?e:Math.ceil(t)}createRowNode(t,e){let n=new Ly(this.beans);return n.parent=this.rootNode,n.level=0,n.group=!1,n.expanded=!1,n.sourceRowIndex=e,n.setDataAndId(t,String(this.nextId)),this.allNodesMap[n.id]&&Ee(2,{nodeId:n.id}),this.allNodesMap[n.id]=n,this.nextId++,n}lookupRowNode(t,e){let n;if(t){let i=t({data:e,level:0});if(n=this.allNodesMap[i],!n)return In(4,{id:i}),null}else if(n=this.rootNode?.allLeafChildren?.find(i=>i.data===e),!n)return In(5,{data:e}),null;return n||null}};var Ece={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},Mce=class extends ln{constructor(){super(Ece,[fG]),this.eCheckbox=Fe}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let t=this.getLocaleTextFunc(),{rowNode:e,eCheckbox:n}=this,i=e.isSelected(),r=Nz(t,i),[o,s]=e.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=t(o,s);n.setValue(i,!0),n.setInputAriaLabel(`${a} (${r})`)}init(t){if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:jd,click:i=>{jd(i),this.beans.selectionSvc?.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:r})=>{let o=typeof i=="object"?BI(i):void 0,s=typeof r=="object"?BI(r):void 0;o!==s&&this.onSelectableChanged()}),CF(this.gos)||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){let{column:t,rowNode:e,overrides:n,gos:i}=this,r=e.selectable,o=this.getIsVisible(),s;if(typeof o=="function"){let u=n?.callbackParams;if(!t)s=o(ae(k({},u),{node:e,data:e.data}));else{let h=t.createColumnFunctionCallbackParams(e);s=o(k(k({},u),h))}}else s=o??!1;let a=r&&!s||!r&&s,l=r||s,c=i.get("rowSelection"),d=c&&typeof c!="string"?!BI(c):!!t?.getColDef().showDisabledCheckboxes;if(this.setVisible(l&&(a?d:!0)),this.setDisplayed(l&&(a?d:!0)),l&&this.eCheckbox.setDisabled(a),n?.removeHidden){this.setDisplayed(l);return}}getIsVisible(){let t=this.overrides;if(t)return t.isVisible;let e=this.gos.get("rowSelection");return e&&typeof e!="string"?Ef(e):this.column?.getColDef()?.checkboxSelection}},Rce=class{constructor(t,e){this.rowModel=t,this.pinnedRowModel=e,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(t){this.rootId=t.id,this.endId=null,this.cachedRange.length=0}setEndRange(t){this.endId=t.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let t=this.getRoot(),e=this.getEnd();if(t==null||e==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(t,e)??[]}return this.cachedRange}isInRange(t){return this.rootId===null?!1:this.getRange().some(e=>e.id===t.id)}getRoot(t){if(this.rootId)return this.getRowNode(this.rootId);if(t)return this.setRoot(t),t}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(t){let e,{rowModel:n,pinnedRowModel:i}=this;return e??(e=n.getRowNode(t)),i?.isManual()&&(e??(e=i.getPinnedRowById(t,"top")),e??(e=i.getPinnedRowById(t,"bottom"))),e}truncate(t){let e=this.getRange();if(e.length===0)return{keep:[],discard:[]};let n=e[0].id===this.rootId,i=e.findIndex(r=>r.id===t.id);if(i>-1){let r=e.slice(0,i),o=e.slice(i+1);return this.setEndRange(t),n?{keep:r,discard:o}:{keep:o,discard:r}}else return{keep:e,discard:[]}}extend(t,e=!1){let n=this.getRoot();if(n==null){let r=this.getRange().slice();return e&&t.depthFirstSearch(o=>!o.group&&r.push(o)),r.push(t),this.setRoot(t),{keep:r,discard:[]}}let i=this.getNodesInRange(n,t);if(!i)return this.setRoot(t),{keep:[t],discard:[]};if(i.find(r=>r.id===this.endId))return this.setEndRange(t),{keep:this.getRange(),discard:[]};{let r=this.getRange().slice();return this.setEndRange(t),{keep:this.getRange(),discard:r}}}getNodesInRange(t,e){let{pinnedRowModel:n,rowModel:i}=this;if(!n?.isManual())return i.getNodesInRangeForSelection(t,e);if(t.rowPinned==="top"&&!e.rowPinned)return mo(n,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(t.rowPinned==="bottom"&&!e.rowPinned){let r=mo(n,"bottom",void 0,t),o=i.getRowCount(),s=i.getRow(o-1);return(i.getNodesInRangeForSelection(e,s)??[]).concat(r)}if(!t.rowPinned&&!e.rowPinned)return i.getNodesInRangeForSelection(t,e);if(t.rowPinned==="top"&&e.rowPinned==="top")return mo(n,"top",t,e);if(t.rowPinned==="bottom"&&e.rowPinned==="top"){let r=mo(n,"top",e,void 0),o=mo(n,"bottom",void 0,t),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return r.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(!t.rowPinned&&e.rowPinned==="top")return mo(n,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(t.rowPinned==="top"&&e.rowPinned==="bottom"){let r=mo(n,"top",t,void 0),o=mo(n,"bottom",void 0,e),s=i.getRow(0),a=i.getRow(i.getRowCount()-1);return r.concat(i.getNodesInRangeForSelection(s,a)??[]).concat(o)}if(t.rowPinned==="bottom"&&e.rowPinned==="bottom")return mo(n,"bottom",t,e);if(!t.rowPinned&&e.rowPinned==="bottom"){let r=mo(n,"bottom",void 0,e),o=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(t,o)??[]).concat(r)}return null}},Dce=class extends he{constructor(t){super(),this.column=t,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(t){let e=this.cbSelectAll;e.isDisplayed()&&!e.getGui().contains(Wn(this.beans))&&(t.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t;let e=this.createManagedBean(new uP);this.cbSelectAll=e,e.addCss("ag-header-select-all"),Kl(e.getGui(),"presentation"),this.showOrHideSelectAll();let n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:r})=>{let o=s=>typeof s=="string"||!s||s.mode==="singleRow"?void 0:s.selectAll;o(i)!==o(r)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(e,{fieldValueChanged:this.onCbSelectAll.bind(this)}),e.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(t){this.isAlive()&&this.showOrHideSelectAll(t.source==="uiColumnMoved")}showOrHideSelectAll(t=!1){let e=this.isCheckboxSelection();this.cbSelectAllVisible=e,this.cbSelectAll.setDisplayed(e),e&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(t)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let t=this.getSelectAllMode(),e=this.beans.selectionSvc,n=this.cbSelectAll,i=e.getSelectAllState(t);n.setValue(i);let r=e.hasNodesToSelect(t);n.setDisabled(!r),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(t=!1){let e=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:i,cbSelectAllVisible:r}=this,s=i.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),a=e("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",r?`${a} (${s})`:null),i.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),t||n.announceAriaDescription()}checkSelectionType(t){return Ry(this.gos)?!0:(Ee(128,{feature:t}),!1)}checkRightRowModelType(t){let{gos:e,rowModel:n}=this.beans;return Tr(e)||Lx(e)?!0:(Ee(129,{feature:t,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let t=this.cbSelectAll.getValue(),e=this.getSelectAllMode(),n="uiSelectAll";e==="currentPage"?n="uiSelectAllCurrentPage":e==="filtered"&&(n="uiSelectAllFiltered");let i={source:n,selectAll:e},r=this.beans.selectionSvc;t?r.selectAllRowNodes(i):r.deselectAllRowNodes(i)}isCheckboxSelection(){let{column:t,gos:e,beans:n}=this,o=typeof e.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return gG(n,t)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){let t=dU(this.gos,!1);if(t)return t;let{headerCheckboxSelectionCurrentPageOnly:e,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return e?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function gG({gos:t,selectionColSvc:e},n){let i=t.get("rowSelection"),r=n.getColDef(),{headerCheckboxSelection:o}=r,s=!1;if(typeof i=="object"){let l=Py(n),c=bU(n);(bx(i)==="autoGroupColumn"&&c||l&&e?.isSelectionColumnEnabled())&&(s=ax(i))}else typeof o=="function"?s=o(jt(t,{column:n,colDef:r})):s=!!o;return s}var Tce=class extends he{postConstruct(){let{gos:t,beans:e}=this;this.selectionCtx=new Rce(e.rowModel,e.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{let n=CF(t);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=CF(t),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new Mce}createSelectAllFeature(t){if(gG(this.beans,t))return new Dce(t)}isMultiSelect(){return Ry(this.gos)}onRowCtrlSelected(t,e,n){let i=!!t.rowNode.isSelected();t.forEachGui(n,r=>{r.rowComp.toggleCss("ag-row-selected",i);let o=r.element;uF(o,i),o.contains(Wn(this.beans))&&e(r)})}announceAriaRowSelection(t){if(this.isRowSelectionBlocked(t))return;let e=t.isSelected();if(!t.selectable)return;let i=this.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(i,"rowSelection")}isRowSelectionBlocked(t){return!t.selectable||t.rowPinned&&!Oy(t)||!Hd(this.gos)}updateRowSelectable(t,e){let n=t.rowPinned&&t.pinnedSibling?t.pinnedSibling.selectable:this.isRowSelectable?.(t)??!0;return this.setRowSelectable(t,n,e),n}setRowSelectable(t,e,n){if(t.selectable!==e){if(t.selectable=e,t.dispatchRowEvent("selectableChanged"),n)return;if(Dy(this.gos)){let r=this.calculateSelectedFromChildren(t);this.setNodesSelected({nodes:[t],newValue:r??!1,source:"selectableChanged"});return}t.isSelected()&&!t.selectable&&this.setNodesSelected({nodes:[t],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(t){let e=!1,n=!1;if(!t.childrenAfterGroup?.length)return t.selectable?t.__selected:null;for(let i=0;i<t.childrenAfterGroup.length;i++){let r=t.childrenAfterGroup[i],o=r.isSelected();if(!r.selectable){let s=this.calculateSelectedFromChildren(r);if(s===null)continue;o=s}switch(o){case!0:e=!0;break;case!1:n=!0;break;default:return}}if(!(e&&n))return e?!0:n?!1:t.selectable?t.__selected:null}selectRowNode(t,e,n,i="api"){let r=!t.selectable&&e,o=t.__selected===e;if(r||o)return!1;t.__selected=e,t.dispatchRowEvent("rowSelected");let s=t.sibling;s&&s.footer&&s.__localEventService&&s.dispatchRowEvent("rowSelected");let a=t.pinnedSibling;return a&&a.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent(ae(k({},Pae(t,this.gos,"rowSelected")),{event:n||null,source:i})),!0}isCellCheckboxSelection(t,e){let n=this.gos.get("rowSelection");if(n&&typeof n!="string"){let i=Py(t)&&Ef(n);return t.isColumnFunc(e,i)}else return t.isColumnFunc(e,t.colDef.checkboxSelection)}inferNodeSelections(t,e,n,i){let{gos:r,selectionCtx:o}=this,s=t.isSelected(),a=Dy(r),l=foe(r),c=poe(r),d=this.isMultiSelect(),u=i==="rowClicked";if(u&&!(l||c))return null;if(e&&n&&d){let h=o.getRoot();if(h)if(h.isSelected()){let f=o.isInRange(t)?o.truncate(t):o.extend(t,a);return{deselect:f.discard,select:f.keep,reset:!1}}else{let f=o.extend(t,a);return{select:[],deselect:f.keep,reset:!1}}else return null}else if(e&&d){let h=o.selectAll?this.beans.rowModel.getRow(0):void 0,f=o.getRoot(h),p=o.isInRange(t)?o.truncate(t):o.extend(t,a);return{select:p.keep,deselect:p.discard,reset:o.selectAll||!!(f&&!f.isSelected())}}else if(n){if(u){let h=!s;return h&&!l||!h&&!c?null:(o.setRoot(t),{node:t,newValue:h,clearSelection:!1})}return o.setRoot(t),{node:t,newValue:!s,clearSelection:!d}}else{o.setRoot(t);let h=goe(r),f=_x(r)==="filteredDescendants",p=u&&(!h||!l);if(f&&s===void 0&&Tr(r))return{node:t,newValue:!1,clearSelection:!d||p};if(u){let v=s?!h:l;return v===s&&!p||v&&!l||!v&&!c?null:{node:t,newValue:v,clearSelection:!d||p,keepDescendants:t.group&&a}}return{node:t,newValue:!s,clearSelection:!d||p}}}},Ace=class extends uP{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(t){let e=this.eInput;t.selected&&t.name&&e.name&&e.name===t.name&&t.id&&e.id!==t.id&&this.setValue(!1,!0)}};var Nf=class extends _f{constructor(t,e="ag-text-field",n="text"){super(t,e,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(t,e){let n=this.eInput;return n.value!==t&&(n.value=Ve(t)?t:""),super.setValue(t,e)}setStartValue(t){this.setValue(t,!0)}preventDisallowedCharacters(){let t=new RegExp(`[${this.config.allowedCharPattern}]`),e=n=>{tG(n)&&n.key&&!t.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:e,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(r=>!t.test(r))&&n.preventDefault()}})}},Ice={selector:"AG-INPUT-TEXT-FIELD",component:Nf};var mG=class extends Nf{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct();let t=this.eInput;this.addManagedListeners(t,{blur:()=>{let o=parseFloat(t.value),s=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==s&&this.setValue(s)},wheel:this.onWheel.bind(this)}),t.step="any";let{precision:e,min:n,max:i,step:r}=this.config;typeof e=="number"&&this.setPrecision(e),typeof n=="number"&&this.setMin(n),typeof i=="number"&&this.setMax(i),typeof r=="number"&&this.setStep(r)}onWheel(t){Wn(this.beans)===this.eInput&&t.preventDefault()}normalizeValue(t){return t===""?"":(this.precision!=null&&(t=this.adjustPrecision(t)),t)}adjustPrecision(t,e){let n=this.precision;if(n==null)return t;if(e){let r=parseFloat(t).toFixed(n);return parseFloat(r).toString()}let i=String(t).split(".");if(i.length>1){if(i[1].length<=n)return t;if(n>0)return`${i[0]}.${i[1].slice(0,n)}`}return i[0]}setMin(t){return this.min===t?this:(this.min=t,Fs(this.eInput,"min",t),this)}setMax(t){return this.max===t?this:(this.max=t,Fs(this.eInput,"max",t),this)}setPrecision(t){return this.precision=t,this}setStep(t){return this.step===t?this:(this.step=t,Fs(this.eInput,"step",t),this)}setValue(t,e){return this.setValueOrInputValue(n=>super.setValue(n,e),()=>this,t)}setStartValue(t){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},t)}setValueOrInputValue(t,e,n){if(Ve(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return t(n);if(!i){n=this.adjustPrecision(n);let r=this.normalizeValue(n);i=n!=r}if(i)return e(n)}return t(n)}getValue(){let t=this.eInput;if(!t.validity.valid)return;let e=t.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(t){return typeof t=="string"&&t.includes("e")}};var Fce=class extends ln{constructor(t="default",e=!1){super({tag:"div",cls:`ag-list ag-${t}-list`}),this.cssIdentifier=t,this.unFocusable=e,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let t=this.getGui();this.addManagedElementListeners(t,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(t,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(t){let e=t.key;switch(e){case ne.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case ne.DOWN:case ne.UP:t.preventDefault(),this.navigate(e);break;case ne.PAGE_DOWN:case ne.PAGE_UP:case ne.PAGE_HOME:case ne.PAGE_END:t.preventDefault(),this.navigateToPage(e);break}}navigate(t){let e=t===ne.DOWN,n,{itemEls:i,highlightedEl:r}=this;if(!r)n=i[e?0:i.length-1];else{let s=i.indexOf(r)+(e?1:-1);s=Math.min(Math.max(s,0),i.length-1),n=i[s]}this.highlightItem(n)}navigateToPage(t){let{itemEls:e,highlightedEl:n}=this;if(!n||e.length===0)return;let i=e.indexOf(n),r=this.options.length-1,o=e[0].clientHeight,s=Math.floor(this.getGui().clientHeight/o),a=-1;t===ne.PAGE_HOME?a=0:t===ne.PAGE_END?a=r:t===ne.PAGE_DOWN?a=Math.min(i+s,r):t===ne.PAGE_UP&&(a=Math.max(i-s,0)),a!==-1&&this.highlightItem(e[a])}addOptions(t){return t.forEach(e=>this.addOption(e)),this}addOption(t){let{value:e,text:n}=t,i=n??e;return this.options.push({value:e,text:i}),this.renderOption(e,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(t=>{yr(t)}),this.itemEls=[],this.refreshAriaRole()}refreshAriaRole(){let t=this.getGui();Kl(t,this.options.length===0?"presentation":"listbox")}updateIndices(){let t=this.getGui().querySelectorAll(".ag-list-item");this.refreshAriaRole(),t.forEach((e,n)=>{Pre(e,n+1),Fre(e,t.length)})}renderOption(t,e){let n=On({tag:"div",cls:`ag-list-item ag-${this.cssIdentifier}-list-item`,attrs:{role:"option"}}),i=On({tag:"span",children:e});n.appendChild(i),this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(t)}}),this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getTooltipValue:()=>e,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>i.scrollWidth>i.clientWidth})),this.getGui().appendChild(n)}setValue(t,e){if(this.value===t)return this.fireItemSelected(),this;if(t==null)return this.reset(e),this;let n=this.options.findIndex(i=>i.value===t);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),e||this.fireChangeEvent()}return this}setValueByIndex(t){return this.setValue(this.options[t].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let t=this.options.findIndex(e=>e.value===this.value);t!==-1&&this.highlightItem(this.itemEls[t])}reset(t){this.value=null,this.displayValue=null,this.clearHighlighted(),t||this.fireChangeEvent()}highlightItem(t){if(!Yo(t))return;this.clearHighlighted(),this.highlightedEl=t,t.classList.add(this.activeClass),uF(t,!0);let e=this.getGui(),{scrollTop:n,clientHeight:i}=e,{offsetTop:r,offsetHeight:o}=t;(r+o>n+i||r<n)&&t.scrollIntoView({block:"nearest"}),this.unFocusable||t.focus()}clearHighlighted(){let t=this.highlightedEl;!t||!Yo(t)||(t.classList.remove(this.activeClass),uF(t,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Pce=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.ag-picker-has-focus:not(.invalid)),&:where(:focus-within:not(.invalid)){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow)}&:disabled{opacity:.5}}",kce={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Oce=class extends hG{constructor(t){if(super(t,t?.template||kce,t?.agComponents||[],t?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Fe,this.eWrapper=Fe,this.eDisplayField=Fe,this.eIcon=Fe,this.registerCSS(Pce),this.ariaRole=t?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!t)return;let{pickerGap:e,maxPickerHeight:n,variableWidth:i,minPickerWidth:r,maxPickerWidth:o}=t;e!=null&&(this.pickerGap=e),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),r!=null&&this.setPickerMinWidth(r),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();let t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);let e=this.getAriaElement();this.addManagedElementListeners(e,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let r=ks(n,this.beans);r&&this.eIcon.appendChild(r)}i!=null&&this.setInputWidth(i)}setupAria(){let t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString()),dF(t,!1),this.ariaRole&&Kl(t,this.ariaRole)}onLabelOrWrapperMouseDown(t){if(t){let e=this.getFocusableElement();if(e!==this.eWrapper&&t?.target===e)return;t.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(t){switch(t.key){case ne.UP:case ne.DOWN:case ne.ENTER:case ne.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case ne.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let e=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:r=!0},maxPickerHeight:o,minPickerWidth:s,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:d}=this,u={modal:r,eChild:t,closeOnEsc:!0,closedCallback:()=>{let v=oU(c);this.beforeHidePicker(),v&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:e(n,i),anchorToElement:d};t.style.position="absolute";let h=c.popupSvc,f=h.addPopup(u);l?(s&&(t.style.minWidth=s),t.style.width=WF(gx(d)),a&&(t.style.maxWidth=a)):yx(t,a??gx(d));let p=o??`${UF(h.getPopupParent())}px`;return t.style.setProperty("max-height",p),this.alignPickerToComponent(),f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerGap:t,config:{pickerType:e},beans:{popupSvc:n,gos:i},eWrapper:r,pickerComponent:o}=this,s=i.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:e,eventSource:r,ePopup:o.getGui(),position:"under",alignSide:s,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive())return;let e=this.getAriaElement();dF(e,t);let n=this.eWrapper.classList;n.toggle("ag-picker-expanded",t),n.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(t){this.pickerComponent?.getGui().contains(t.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(t){return yx(this.eWrapper,t),this}getFocusableElement(){return this.eWrapper}setPickerGap(t){return this.pickerGap=t,this}setPickerMinWidth(t){return typeof t=="number"&&(t=`${t}px`),this.minPickerWidth=t??void 0,this}setPickerMaxWidth(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerWidth=t??void 0,this}setPickerMaxHeight(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerHeight=t??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Lce=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}",vG=class extends Oce{constructor(t){super(k({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox"},t)),this.registerCSS(Lce)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:sx(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:t,value:e,placeholder:n}=this.config;t!=null&&this.addOptions(t),e!=null&&this.setValue(e,!0),n&&e==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}createListComponent(){let t=this.createBean(new Fce("select",!0));this.listComponent=t,t.setParentComponent(this);let e=t.getAriaElement(),n=`ag-select-list-${t.getCompId()}`;e.setAttribute("id",n),zre(this.getAriaElement(),e),t.addManagedElementListeners(t.getGui(),{mousedown:i=>{i?.preventDefault()}}),t.addManagedListeners(t,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(t){let{key:e}=t;switch(e===ne.TAB&&this.hidePicker(),e){case ne.ENTER:case ne.UP:case ne.DOWN:case ne.PAGE_UP:case ne.PAGE_DOWN:case ne.PAGE_HOME:case ne.PAGE_END:t.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(t):super.onKeyDown(t);break;case ne.ESCAPE:super.onKeyDown(t);break;case ne.SPACE:this.isPickerDisplayed?t.preventDefault():super.onKeyDown(t);break}}showPicker(){let t=this.listComponent;t&&(super.showPicker(),t.refreshHighlighted())}addOptions(t){return t.forEach(e=>this.addOption(e)),this}addOption(t){return this.listComponent.addOption(t),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(t,e,n){let{listComponent:i,config:{placeholder:r},eDisplayField:o,tooltipFeature:s}=this;if(this.value===t||!i)return this;if(n||i.setValue(t,!0),i.getValue()===this.getValue())return this;let l=i.getDisplayValue();return l==null&&r&&(l=r),o.textContent=l,s?.setTooltipAndRefresh(l??null),super.setValue(t,e)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}};var YI={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},Nce=class extends he{constructor(t){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:e,eTopGuard:n,eBottomGuard:i,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:d,onTabKeyDown:u,handleKeyDown:h,isEmpty:f,eFocusableElement:p}=t;this.comp=e,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=h,this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new Lf(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(t=>this.addManagedElementListeners(t,{focus:this.onFocus.bind(this)}))}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.isFocusableContainer&&!this.eFocusableElement.contains(t.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Df(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(t.relatedTarget))return;let e=t.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard)}findNextElementOutsideAndFocus(t){let e=zi(this.beans),n=Df(e.body,null,!0),i=n.indexOf(t?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let r,o;t?(r=0,o=i):(r=i+1,o=n.length);let s=n.slice(r,o),a=this.gos.get("tabIndex");s.sort((l,c)=>{let d=parseInt(l.getAttribute("tabindex")||"0"),u=parseInt(c.getAttribute("tabindex")||"0");return u===a?1:d===a?-1:d===0?1:u===0?-1:d-u}),s[t?s.length-1:0]?.focus()}onFocusIn(t){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(t),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;let e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();let n=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),t.preventDefault())}focusInnerElement(t=!1){let e=Df(this.eFocusableElement);return this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length?(e[t?e.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(t){return Yd(this.beans,this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;let e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t,e){return t===this.eTopGuard&&!e||t===this.eBottomGuard&&(e??!0)}setAllowFocus(t){this.allowFocus=t}},Bce=class extends he{constructor(t){super(),this.comp=t}initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:e,eBottomGuard:n,eFocusableElement:i}=this,r=[e,n],o={setTabIndex:m=>{r.forEach(g=>m!=null?g.setAttribute("tabindex",m):g.removeAttribute("tabindex"))}};this.addTabGuards(e,n);let{focusTrapActive:s=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:u,shouldStopEventPropagation:h,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:v}=t;this.tabGuardCtrl=this.createManagedBean(new Nce({comp:o,focusTrapActive:s,eTopGuard:e,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:u,shouldStopEventPropagation:h,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:v}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(t){let e=zi(this.beans).createElement("div"),n=t==="top"?YI.TAB_GUARD_TOP:YI.TAB_GUARD_BOTTOM;return e.classList.add(YI.TAB_GUARD,n),Kl(e,"presentation"),e}addTabGuards(t,e){let n=this.eFocusableElement;n.insertAdjacentElement("afterbegin",t),n.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){let t=[this.eTopGuard,this.eBottomGuard];Zr(this.comp.getFocusableElement()),this.addTabGuards(...t)}forceFocusOutOfContainer(t=!1){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,e,n){jF(e)||(e=e.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):t(e,n)}destroy(){let{eTopGuard:t,eBottomGuard:e}=this;yr(t),yr(e),super.destroy()}},yG=class extends ln{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new Bce(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,e){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,e)}},bf=class{constructor(t,e=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Gd,this.preventMouseClick=e;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);t.addEventListener("touchstart",n,{passive:!0}),t.addEventListener("touchmove",i,{passive:!0}),t.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(()=>{t.removeEventListener("touchstart",n,{passive:!0}),t.removeEventListener("touchmove",i,{passive:!0}),t.removeEventListener("touchend",r,{passive:!1})})}getActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}addEventListener(t,e){this.localEventService.addEventListener(t,e)}removeEventListener(t,e){this.localEventService.removeEventListener(t,e)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;let e=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===e;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:t};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(t){if(!this.touching)return;let e=this.getActiveTouch(t.touches);if(!e)return;!WU(e,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(this.touching){if(!this.moved){let e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){let t=Date.now();if(this.lastTapTime&&this.lastTapTime>0)if(t-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=t;else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}};var hP=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${Zz}/${this.frameworkName}-data-grid`,Jre(this.baseDocLink)}setInterval(t,e){return new Gn(n=>{n(window.setInterval(t,e))})}addEventListener(t,e,n,i){let r={};if(typeof i=="object"?r=i:typeof i=="boolean"&&(r={capture:i}),r.passive==null){let o=mU(e);o!=null&&(r.passive=o)}t.addEventListener(e,n,r)}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return`${this.baseDocLink}${t?`/${t}`:""}`}};function Vce(t){return{beanName:"gridApi",bean:t.getBean("apiFunctionSvc").api}}var Hce=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","funcColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],cz=Object.fromEntries(Hce.map((t,e)=>[t,e]));function zce(t,e){let n=(t.beanName?cz[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(e.beanName?cz[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function Uce(t,e){return t?.beanName==="gridDestroySvc"?-1:e?.beanName==="gridDestroySvc"?1:0}var Gce={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},Wce={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},jce={tag:"div",cls:"ag-header-viewport",role:"presentation",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"rowgroup"}]},XI=class extends ln{constructor(t){super(),this.eCenterContainer=Fe,this.headerRowComps={},this.rowCompsList=[],this.pinned=t}postConstruct(){this.selectAndSetTemplate();let t={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new Qle(this.pinned)).setComp(t,this.getGui())}selectAndSetTemplate(){let t=this.pinned=="left",e=this.pinned=="right",n=t?Gce:e?Wce:jce;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==Fe?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())}setCtrls(t){let e=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=r=>{let o=r.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),n&&$z(this.eRowContainer,o,n),n=o};t.forEach(r=>{let o=r.instanceId,s=e[o];delete e[o];let a=s||this.createBean(new Kle(r));this.headerRowComps[o]=a,this.rowCompsList.push(a),i(a)}),Object.values(e).forEach(r=>this.destroyRowComp(r))}},$ce={tag:"div",cls:"ag-header",role:"presentation"},qce=class extends ln{constructor(){super($ce)}postConstruct(){let t={toggleCss:(i,r)=>this.toggleCss(i,r),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new zle).setComp(t,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new XI("left")),n(new XI(null)),n(new XI("right"))}},Kce={selector:"AG-HEADER-ROOT",component:qce},Yce=class extends ln{constructor(t,e,n,i,r){super(),this.cellCtrl=e,this.rendererVersion=0,this.editorVersion=0,this.beans=t,this.gos=t.gos,this.column=e.column,this.rowNode=e.rowNode,this.eRow=i;let o=On({tag:"div",role:e.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":e.column.colIdSanitised}});this.eCell=o;let s;e.isCellSpanning()?(s=On({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),s.appendChild(o),this.setTemplateFromElement(s)):this.setTemplateFromElement(o),this.cellCssManager=new TU(()=>o),this.forceWrapper=e.isForceWrapper(),this.refreshWrapper(!1);let a={toggleCss:(l,c)=>this.cellCssManager.toggleCss(l,c),setUserStyles:l=>Iy(o,l),getFocusableElement:()=>o,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,d)=>this.setRenderDetails(l,c,d),setEditDetails:(l,c,d)=>this.setEditDetails(l,c,d),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(l,c)=>this.refreshEditStyles(l,c)};e.setComp(a,o,s,this.eCellWrapper,n,r,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(t,e,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),t?!(n||r)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(e))}setEditDetails(t,e,n){t?this.createCellEditorInstance(t,e,n):this.destroyEditor()}removeControls(){let t=this.beans.context;this.checkboxSelectionComp=t.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=t.destroyBean(this.dndSourceComp),this.rowDraggingComp=t.destroyBean(this.rowDraggingComp)}refreshWrapper(t){let e=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=e||this.forceWrapper,i=n&&this.eCellWrapper==null;i&&(this.eCellWrapper=On({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));let r=!n&&this.eCellWrapper!=null;r&&(yr(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!n);let o=!t&&n,s=o&&this.eCellValue==null;s&&(this.eCellValue=On({tag:"span",cls:"ag-cell-value",role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue));let a=!o&&this.eCellValue!=null;a&&(yr(this.eCellValue),this.eCellValue=void 0);let l=i||r||s||a;return l&&this.removeControls(),!t&&e&&this.addControls(),l}addControls(){let{cellCtrl:t,eCellWrapper:e,eCellValue:n,includeRowDrag:i,includeDndSource:r,includeSelection:o}=this,s=a=>{a&&e.insertBefore(a.getGui(),n)};i&&this.rowDraggingComp==null&&(this.rowDraggingComp=t.createRowDragComp(),s(this.rowDraggingComp)),r&&this.dndSourceComp==null&&(this.dndSourceComp=t.createDndSource(),s(this.dndSourceComp)),o&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=t.createSelectionCheckbox(),s(this.checkboxSelectionComp))}createCellEditorInstance(t,e,n){let i=this.editorVersion,r=t.newAgStackInstance(),{params:o}=t;r.then(a=>this.afterCellEditorCreated(i,a,o,e,n)),di(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(t){let e=this.getParentOfValue();Zr(e);let n=Fy(t);n!=null&&(e.textContent=n)}destroyRenderer(){let{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer),yr(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:t}=this.beans;(this.cellEditorPopupWrapper?.getGui().contains(Wn(this.beans))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),this.hideEditorPopup?.(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),yr(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer?.refresh==null||this.cellRendererClass!==t.componentClass)return!1;let e=this.cellRenderer.refresh(t.params);return e===!0||e===void 0}createCellRendererInstance(t){let e=this.rendererVersion,n=o=>s=>{if(this.rendererVersion!==e||!this.isAlive())return;let l=o.newAgStackInstance(),c=this.afterCellRendererCreated.bind(this,e,o.componentClass);l?.then(c)},{animationFrameSvc:i}=this.beans,r;if(i?.active&&this.firstRender?r=(o,s=!1)=>{i.createTask(n(o),this.rowNode.rowIndex,"p2",o.componentFromFramework,s)}:r=o=>n(o)(),t.params?.deferRender&&!this.cellCtrl.rowNode.group){let{loadingComp:o,onReady:s}=this.cellCtrl.getDeferLoadingCellRenderer();o&&(r(o),s.then(()=>r(t,!0)))}else r(t)}afterCellRendererCreated(t,e,n){if(!this.isAlive()||t!==this.rendererVersion){this.beans.context.destroyBean(n);return}this.cellRenderer=n,this.cellRendererClass=e;let r=n.getGui();if(this.cellRendererGui=r,r!=null){let o=this.getParentOfValue();Zr(o),o.appendChild(r)}}afterCellEditorCreated(t,e,n,i,r){let o=t!==this.editorVersion,{context:s}=this.beans;if(o){s.destroyBean(e);return}if(e.isCancelBeforeStart&&e.isCancelBeforeStart()){s.destroyBean(e),this.cellCtrl.stopEditing(!0);return}if(!e.getGui){Ee(97,{colId:this.column.getId()}),s.destroyBean(e);return}this.cellEditor=e,this.cellEditorGui=e.getGui();let l=i||e.isPopup!==void 0&&e.isPopup();l?this.addPopupCellEditor(n,r):this.addInCellEditor(),this.refreshEditStyles(!0,l),e.afterGuiAttached?.(),this.cellCtrl.enableEditorTooltipFeature(e),this.cellCtrl.cellEditorAttached()}refreshEditStyles(t,e){let{cellCssManager:n}=this;n.toggleCss("ag-cell-inline-editing",t&&!e),n.toggleCss("ag-cell-popup-editing",t&&!!e),n.toggleCss("ag-cell-not-inline-editing",!t||!!e)}addInCellEditor(){let{eCell:t}=this;t.contains(Wn(this.beans))&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Zr(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(t,e){let{gos:n,context:i,popupSvc:r,localeSvc:o,editSvc:s}=this.beans;n.get("editType")==="fullRow"&&Ee(98);let a=this.cellEditor;this.cellEditorPopupWrapper=i.createBean(s.createPopupEditorWrapper(t));let l=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&l.appendChild(this.cellEditorGui);let c=n.get("stopEditingWhenCellsLoseFocus"),d=e??a.getPopupPosition?.()??"over",u=n.get("enableRtl"),h={ePopup:l,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.eCell,position:d,alignSide:u?"right":"left",keepWithinBounds:!0},f=r.positionPopupByComponent.bind(r,h),p=VF(o),v=r.addPopup({modal:c,eChild:l,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.eCell,positionCallback:f,ariaLabel:p("ariaLabelCellEditor","Cell Editor")});v&&(this.hideEditorPopup=v.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},Xce=class extends ln{constructor(t,e,n){super(),this.cellComps=new Map,this.beans=e,this.rowCtrl=t;let i=On({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(i,n),this.setTemplateFromElement(i);let r=i.style;this.domOrder=this.rowCtrl.getDomOrder();let o={setDomOrder:s=>this.domOrder=s,setCellCtrls:s=>this.setCellCtrls(s),showFullWidth:s=>this.showFullWidth(s),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,toggleCss:(s,a)=>this.toggleCss(s,a),setUserStyles:s=>Iy(i,s),setTop:s=>r.top=s,setTransform:s=>r.transform=s,setRowIndex:s=>i.setAttribute("row-index",s),setRowId:s=>i.setAttribute("row-id",s),setRowBusinessKey:s=>i.setAttribute("row-business-key",s),refreshFullWidth:s=>this.fullWidthCellRenderer?.refresh?.(s())??!1};t.setComp(o,this.getGui(),n,void 0),this.addDestroyFunc(()=>{t.unsetComp(n)})}setInitialStyle(t,e){let n=this.rowCtrl.getInitialTransform(e);if(n)t.style.setProperty("transform",n);else{let i=this.rowCtrl.getInitialRowTop(e);i&&t.style.setProperty("top",i)}}showFullWidth(t){let e=i=>{if(this.isAlive()){let r=i.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)};t.newAgStackInstance().then(e)}setCellCtrls(t){let e=new Map(this.cellComps);for(let n of t){let i=n.instanceId;this.cellComps.has(i)?e.delete(i):this.newCellComp(n)}this.destroyCells(e),this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder)return;let e=[];for(let n of t){let i=this.cellComps.get(n.instanceId);i&&e.push(i.getGui())}qz(this.getGui(),e)}newCellComp(t){let e=this.beans.editSvc?.isEditing(t,{withOpenEditor:!0})??!1,n=new Yce(this.beans,t,this.rowCtrl.printLayout,this.getGui(),e);this.cellComps.set(t.instanceId,n),this.getGui().appendChild(n.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(t){this.fullWidthCellRenderer=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(t){for(let e of t.values()){if(!e)return;let n=e.cellCtrl.instanceId;if(this.cellComps.get(n)!==e)return;e.detach(),e.destroy(),this.cellComps.delete(n)}}};function Zce(t,e,n){let i=!!n.gos.get("enableCellSpan")&&!!e.getSpannedRowCtrls,r={tag:"div",ref:"eContainer",cls:fx(t),role:"rowgroup"};if(e.type==="center"||i){let o={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${vle(t)}`,role:"rowgroup"};return{tag:"div",ref:"eViewport",cls:`ag-viewport ${iG(t)}`,role:"presentation",children:[r,i?o:null]}}return r}var Qce=class extends ln{constructor(t){super(),this.eViewport=Fe,this.eContainer=Fe,this.eSpannedContainer=Fe,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=t?.name,this.options=Ny(this.name)}postConstruct(){this.setTemplate(Zce(this.name,this.options,this.beans));let t={setHorizontalScroll:n=>this.eViewport.scrollLeft=n,setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setSpannedRowCtrls:n=>this.setRowCtrls(n,!0),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>{this.eContainer.style.width=n,this.eSpannedContainer&&(this.eSpannedContainer.style.width=n)},setOffsetTop:n=>{let i=`translateY(${n})`;this.eContainer.style.transform=i,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=i)}};this.createManagedBean(new Rle(this.name)).setComp(t,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(t,e){let{beans:n,options:i}=this,r=e?this.eSpannedContainer:this.eContainer,o=e?k({},this.rowCompsWithSpan):k({},this.rowCompsNoSpan),s={};e?this.rowCompsWithSpan=s:this.rowCompsNoSpan=s,this.lastPlacedElement=null;let a=[];for(let l of t){let c=l.instanceId,d=o[c],u;if(d)u=d,delete o[c];else{if(!l.rowNode.displayed)continue;u=new Xce(l,n,i.type)}s[c]=u,a.push([u,!d])}this.removeOldRows(Object.values(o),r),this.addRowNodes(a,r)}addRowNodes(t,e){let{domOrder:n}=this;for(let[i,r]of t){let o=i.getGui();n?this.ensureDomOrder(o,e):r&&e.appendChild(o)}}removeOldRows(t,e){for(let n of t)e.removeChild(n.getGui()),n.destroy()}ensureDomOrder(t,e){$z(e,t,this.lastPlacedElement),this.lastPlacedElement=t}},Jce={selector:"AG-ROW-CONTAINER",component:Qce};function fy(t,e){return e.map(n=>{let i=`e${n[0].toUpperCase()+n.substring(1)}RowContainer`;return t[i]={name:n},{tag:"ag-row-container",ref:i,attrs:{name:n}}})}function ede(t){let e={},n={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:fy(e,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:fy(e,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:fy(e,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:fy(e,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:fy(e,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},t?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:e,elementParams:n}}var tde=class extends ln{constructor(){super(...arguments),this.eGridRoot=Fe,this.eBodyViewport=Fe,this.eStickyTop=Fe,this.eStickyBottom=Fe,this.eTop=Fe,this.eBottom=Fe,this.eBody=Fe}postConstruct(){let{overlays:t,rangeSvc:e}=this.beans,n=t?.getOverlayWrapperSelector(),{paramsMap:i,elementParams:r}=ede(!!n);this.setTemplate(r,[...n?[n]:[],Ple,Lle,Kce,Jce],i);let o=(a,l)=>{let c=`${a}px`;l.style.minHeight=c,l.style.height=c},s={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>Lre(this.getGui(),a),setRowCount:a=>Ore(this.getGui(),a),setTopHeight:a=>o(a,this.eTop),setBottomHeight:a=>o(a,this.eBottom),setTopInvisible:a=>this.eTop.classList.toggle("ag-invisible",a),setBottomInvisible:a=>this.eBottom.classList.toggle("ag-invisible",a),setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.toggleCss(a,l),updateLayoutClasses:(a,l)=>{let c=[this.eBodyViewport.classList,this.eBody.classList];for(let d of c)d.toggle(Ko.AUTO_HEIGHT,l.autoHeight),d.toggle(Ko.NORMAL,l.normal),d.toggle(Ko.PRINT,l.print);this.toggleCss(Ko.AUTO_HEIGHT,l.autoHeight),this.toggleCss(Ko.NORMAL,l.normal),this.toggleCss(Ko.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(sG,l),registerBodyViewportResizeListener:a=>{let l=qd(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(c=>c.classList.toggle(a,l))},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>Kl(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new Ale),this.ctrl.setComp(s,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(e&&Ff(this.gos)||Ry(this.gos))&&kre(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(t,e){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",e),n.toggle("ag-row-no-animation",!e)}},nde={selector:"AG-GRID-BODY",component:tde},ide=class extends he{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(t,e,n){this.view=t,this.eGridHostDiv=e,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());let{dragAndDrop:i,ctrlsSvc:r}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),qU(this.gos,e),this.createManagedBean(new iP(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");let o=qd(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),r.register("gridCtrl",this)}isDetailGrid(){return GU(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let t=this.beans;return{paginationSelector:t.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:t.registry.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:t.sideBar?.getSelector(),statusBarSelector:t.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:t.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){this.view.setCursor(t?"ew-resize":null)}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){let e=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(e,t);if(i<0||i>=e.length)return!1;if(i===0){if(n>0){let{visibleCols:r,focusSvc:o}=this.beans,s=r.allCols,a=vn(s);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(e[i],t)}focusInnerElement(t){let e=this.gos.getCallback("focusGridInnerElement");if(e&&e({fromBottom:!!t}))return!0;let n=this.getFocusableContainers(),{focusSvc:i,visibleCols:r}=this.beans,o=r.allCols;if(t){if(n.length>1)return this.focusContainer(vn(n),t);let s=vn(o);if(i.focusGridView({column:s,backwards:t}))return!0}if(this.gos.get("headerHeight")===0||zd(this.beans)){if(i.focusGridView({column:o[0],backwards:t}))return!0;for(let s=1;s<n.length;s++)if($d(n[s].getGui(),t))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}addFocusableContainer(t){this.additionalFocusableContainers.add(t)}removeFocusableContainer(t){this.additionalFocusableContainers.delete(t)}allowFocusForNextCoreContainer(t){let e=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:i}=this.getNextFocusableIndex(e,t);if(i===-1||n<0||n>=e.length)return;let r=e[n];r.setAllowFocus?.(!0),setTimeout(()=>{r.setAllowFocus?.(!1)})}isFocusable(){let t=this.beans;return!JF(t)||!zd(t)||!!t.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(t,e){let n=Wn(this.beans),i=t.findIndex(o=>o.getGui().contains(n)),r=i+(e?-1:1);return{indexWithFocus:i,nextIndex:r}}focusContainer(t,e){t.setAllowFocus?.(!0);let n=$d(t.getGui(),e,!1,!0);return t.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},rde=class extends yG{constructor(t){super(),this.gridBody=Fe,this.sideBar=Fe,this.pagination=Fe,this.rootWrapperBody=Fe,this.eGridDiv=t}postConstruct(){let t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCss(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},e=this.createManagedBean(new ide),n=e.getOptionalSelectors(),i=this.createTemplate(n),r=[nde,...Object.values(n).filter(o=>!!o)];this.setTemplate(i,r),e.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>e.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!e.isFocusable()})}insertGridIntoDom(){let t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(t),Ey(this.gos,"Grid removed from DOM")})}updateLayoutClasses(t,e){let n=this.rootWrapperBody.classList,{AUTO_HEIGHT:i,NORMAL:r,PRINT:o}=Ko,{autoHeight:s,normal:a,print:l}=e;n.toggle(i,s),n.toggle(r,a),n.toggle(o,l),this.toggleCss(i,s),this.toggleCss(r,a),this.toggleCss(o,l)}createTemplate(t){let e=t.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,n=t.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,i=t.statusBarSelector?{tag:"ag-status-bar"}:null,r=t.watermarkSelector?{tag:"ag-watermark"}:null,o=t.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[e,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},n]},i,o,r]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(t=!1){if(!t&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(t);return}super.forceFocusOutOfContainer(t)}getFocusableContainers(){let t=[this.gridBody];return[this.sideBar,this.pagination].forEach(e=>{e&&t.push(e)}),t.filter(e=>Yo(e.getGui()))}},gt=(t,e)=>{for(let n of Object.keys(e))e[n]=t;return e},dz=k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k({dispatchEvent:"CommunityCore"},gt("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0})),gt("GridState",{getState:0,setState:0})),gt("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0})),gt("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0})),gt("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0})),gt("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0})),gt("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0})),gt("ValueCache",{expireValueCache:0})),gt("CellApi",{getCellValue:0})),gt("SharedMenu",{showColumnMenu:0,hidePopupMenu:0})),gt("Sort",{onSortChanged:0})),gt("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0})),gt("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0})),gt("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0})),gt("HighlightChanges",{flashCells:0})),gt("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0})),gt("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0})),gt("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0})),gt("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0})),gt("ColumnMove",{moveColumnByIndex:0,moveColumns:0})),gt("ColumnResize",{setColumnWidths:0})),gt("ColumnHover",{isColumnHovered:0})),gt("EditCore",{getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0})),gt("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0})),gt("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0})),gt("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0})),gt("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0})),gt("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0})),gt("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0})),gt("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0})),gt("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0,onRowHeightChanged:0})),gt("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),gt("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),gt("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0})),gt("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),gt("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),gt("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),gt("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),gt("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),gt("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),gt("ContextMenu",{showContextMenu:0})),gt("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0})),gt("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),gt("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0})),gt("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0})),gt("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),gt("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),gt("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),gt("StatusBar",{getStatusPanel:0})),ZI={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},ode=(t,e)=>t.eventSvc.dispatchEvent(e),CG=class{};Reflect.defineProperty(CG,"name",{value:"GridApi"});var sde=class extends he{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new CG,this.fns=ae(k({},ZI),{dispatchEvent:ode}),this.preDestroyLink="";let{api:t}=this;for(let e of Object.keys(dz))t[e]=this.makeApi(e)[e]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(t,e){let{fns:n,beans:i}=this;n!==ZI&&(n[t]=i?.validation?.validateApiFunction(t,e)??e)}makeApi(t){return{[t]:(...e)=>{let{beans:n,fns:{[t]:i}}=this;return i?i(n,...e):this.apiNotFound(t)}}}apiNotFound(t){let{beans:e,gos:n,preDestroyLink:i}=this;if(!e)Ee(26,{fnName:t,preDestroyLink:i});else{let r=dz[t];n.assertModuleRegistered(r,`api.${t}`)&&Ee(27,{fnName:t,module:r})}}destroy(){super.destroy(),this.fns=ZI,this.beans=null}};function ade(t){return t.context.getGridId()}function lde(t){t.gridDestroySvc.destroy()}function cde(t){return t.gridDestroySvc.destroyCalled}function dde(t,e){return t.gos.get(e)}function ude(t,e,n){bG(t,{[e]:n})}function bG(t,e){t.gos.updateGridOptions({options:e})}function hde(t,e){let n=e.replace(/Module$/,"");return t.gos.isModuleRegistered(n)}var fde=class extends he{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(t){let e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),onDragCancel:this.onDragStop.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(e),()=>n.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();let n=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(n)}setResizeIcons(){let t=this.beans.ctrlsSvc.get("gridCtrl");t.setResizeCursor(!0),t.disableUserSelect(!0)}onDragStop(t){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let t=this.beans.ctrlsSvc.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}};var Fx=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}depthFirstSearchChangedPath(t,e){let{rowNode:n,children:i}=t;if(i)for(let r=0;r<i.length;++r)this.depthFirstSearchChangedPath(i[r],e);e(n)}depthFirstSearchEverything(t,e,n){let i=t.childrenAfterGroup;if(i)for(let r=0,o=i.length;r<o;++r){let s=i[r];s.childrenAfterGroup?this.depthFirstSearchEverything(s,e,n):n&&e(s)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,n=0;for(;!this.mapToItems[e.id];){let i={rowNode:e,children:null};this.mapToItems[e.id]=i,n++,e=e.parent}return n}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let n=t;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(t,e){let n=t;for(let i=0;i<e;i++){let r=this.mapToItems[n.id],o=this.mapToItems[n.parent.id];o.children||(o.children=[]),o.children.push(r),n=n.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;let n=this.createPathItems(t);this.linkPathItems(t,n),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;let n=this.nodeIdsToColumns[t.id];return e.filter(r=>n[r.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[t.id];return e.filter(r=>!n[r.getId()])}};var wG={moduleName:"Drag",version:Rt,beans:[Iae]};var pde={moduleName:"SharedDragAndDrop",version:Rt,beans:[Aae],dependsOn:[wG],userComponents:{agDragAndDropImage:lce},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}};var gde={moduleName:"HorizontalResize",version:Rt,beans:[fde],dependsOn:[wG]},mde=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",vde=class extends he{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){if(this.active)return;let{gos:t}=this;t.get("suppressColumnMoveAnimation")||t.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(t){this.activeNext?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let t=this.animationThreadCount,{gridBodyCtrl:e}=this;e.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&e.setColumnMovingCss(!1)})}flush(t,e){let{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){t(),e();return}let r=o=>{for(;o.length;){let s=o.pop();s&&s()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{t(),r(n)},0),window.setTimeout(()=>{e(),r(i)},200)})}};function yde(t,e,n){t.colMoves?.moveColumnByIndex(e,n,"api")}function Cde(t,e,n){t.colMoves?.moveColumns(e,n,"api")}var bde=class extends he{constructor(t){super(),this.pinned=t,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let e=t.dragItem.columns;e&&e.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){let{valueColsSvc:e,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&e?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function wde(t,e){!e||e.length<=1||e.filter(i=>t.indexOf(i)<0).length>0||e.sort((i,r)=>{let o=t.indexOf(i),s=t.indexOf(r);return o-s})}function _G(t){let{isFromHeader:e,fromLeft:n,xPosition:i,fromEnter:r,fakeEvent:o,pinned:s,gos:a,colModel:l,colMoves:c,visibleCols:d}=t,{allMovingColumns:u}=t;if(e){let R=[];u.forEach(b=>{let _=null,M=b.getParent();for(;M!=null&&M.getDisplayedLeafColumns().length===1;)_=M,M=M.getParent();_!=null?(!!_.getColGroupDef()?.marryChildren?_.getProvidedColumnGroup().getLeafColumns():_.getLeafColumns()).forEach(I=>{R.includes(I)||R.push(I)}):R.includes(b)||R.push(b)}),u=R}let h=u.slice();wde(l.getCols(),h);let f=Ede({movingCols:h,draggingRight:n,xPosition:i,pinned:s,gos:a,colModel:l,visibleCols:d}),p=_de(h,l);if(f.length===0)return;let v=f[0],m=p!==null&&!r;if(e&&(m=p!==null),m&&!o&&(!n&&v>=p||n&&v<=p))return;let g=d.allCols,C=[],y=null;for(let R=0;R<f.length;R++){let b=f[R],_=c.getProposedColumnOrder(h,b);if(!c.doesOrderPassRules(_))continue;let M=_.filter(S=>g.includes(S));if(y===null)y=M;else if(!Kd(M,y))break;let x=Sde(_);C.push({move:b,fragCount:x})}if(C.length===0)return;C.sort((R,b)=>R.fragCount-b.fragCount);let w=C[0].move;if(!(w>l.getCols().length-u.length))return{columns:u,toIndex:w}}function SG(t){let{columns:e,toIndex:n}=_G(t)||{},{finished:i,colMoves:r}=t;return!e||n==null?null:(r.moveColumns(e,n,"uiColumnMoved",i),i?null:{columns:e,toIndex:n})}function _de(t,e){let n=e.getCols(),i=t.map(l=>n.indexOf(l)).sort((l,c)=>l-c),r=i[0];return vn(i)-r!==i.length-1?null:r}function Sde(t){function e(i){let r=[],o=i.getOriginalParent();for(;o!=null;)r.push(o),o=o.getOriginalParent();return r}let n=0;for(let i=0;i<t.length-1;i++){let r=e(t[i]),o=e(t[i+1]);[r,o]=r.length>o.length?[r,o]:[o,r],r.forEach(s=>{o.indexOf(s)===-1&&n++})}return n}function xde(t,e){switch(e){case"left":return t.leftCols;case"right":return t.rightCols;default:return t.centerCols}}function Ede(t){let{movingCols:e,draggingRight:n,xPosition:i,pinned:r,gos:o,colModel:s,visibleCols:a}=t;if(o.get("suppressMovableColumns")||e.some(y=>y.getColDef().suppressMovable))return[];let c=xde(a,r),d=s.getCols(),u=c.filter(y=>e.includes(y)),h=c.filter(y=>!e.includes(y)),f=d.filter(y=>!e.includes(y)),p=0,v=i;if(n){let y=0;u.forEach(w=>y+=w.getActualWidth()),v-=y}if(v>0){for(let y=0;y<h.length;y++){let w=h[y];if(v-=w.getActualWidth(),v<0)break;p++}n&&p++}let m;if(p>0){let y=h[p-1];m=f.indexOf(y)+1}else m=f.indexOf(h[0]),m===-1&&(m=0);let g=[m],C=(y,w)=>y-w;if(n){let y=m+1,w=d.length-1;for(;y<=w;)g.push(y),y++;g.sort(C)}else{let y=m,w=d.length-1,R=d[y];for(;y<=w&&c.indexOf(R)<0;)y++,g.push(y),R=d[y];y=m-1;let b=0;for(;y>=b;)g.push(y),y--;g.sort(C).reverse()}return g}function FF(t){let{pinned:e,fromKeyboard:n,gos:i,ctrlsSvc:r,useHeaderRow:o,skipScrollPadding:s}=t,a=r.getHeaderRowContainerCtrl(e)?.eViewport,{x:l}=t;return a?(n&&(l-=a.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),e==null&&!s&&(l+=r.get("center").getCenterViewportScrollLeft()),l):0}function QI(t,e){for(let n of t)n.moving=e,n.dispatchColEvent("movingChanged","uiColumnMoved")}var uz=7,PF=100,ix=PF/2,Mde=5,Rde=100,Dde=class extends he{constructor(t){super(),this.pinned=t,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Ve(t)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){let{pinned:t,lastDraggingEvent:e}=this,{dragItem:n}=e||{},i=n?.columns??[];for(let r of i){let o=r.getPinned();if(r.getColDef().lockPinned){if(o==t)return"move";continue}let s=n?.containerType;if(s===t||!t)return"move";if(t&&(!o||s!==t))return"pinned"}return"notAllowed"}onDragEnter(t){let e=t.dragItem,n=e.columns;if(t.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{let r=e.visibleState,o=(n||[]).filter(s=>r[s.getId()]);this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(t,!0,!0)}onDragging(t=this.lastDraggingEvent,e=!1,n=!1,i=!1){let{gos:r,ctrlsSvc:o}=this.beans,s=r.get("suppressMoveWhenColumnDragging");if(i&&!s){this.finishColumnMoving();return}if(this.lastDraggingEvent=t,!t||!i&&di(t.hDirection))return;let a=FF({x:t.x,pinned:this.pinned,gos:r,ctrlsSvc:o});e||this.checkCenterForScrolling(a),s?this.handleColumnDragWhileSuppressingMovement(t,e,n,a,i):this.handleColumnDragWhileAllowingMovement(t,e,n,a,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,n){if(!t)return;let i=t.filter(r=>!r.getColDef().lockVisible);this.beans.colModel.setColsVisible(i,e,n)}finishColumnMoving(){this.clearHighlighted();let t=this.lastMovedInfo;if(!t)return;let{columns:e,toIndex:n}=t;this.beans.colMoves.moveColumns(e,n,"uiColumnMoved",!0)}updateDragItemContainerType(){let{lastDraggingEvent:t}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!t)return;let e=t.dragItem;e&&(e.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(t,e,n,i,r){let o=this.getAllMovingColumns(t,!0);if(r){let s=this.isAttemptingToPin(o);s&&this.attemptToPinColumns(o,void 0,!0);let{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,s)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:e,fakeEvent:n,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(t))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(t,e,n,i,r){let o=this.getAllMovingColumns(t),s=this.normaliseDirection(t.hDirection)==="right",a=t.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:i,fromLeft:s,fromEnter:e,fakeEvent:n}),c=SG(ae(k({},l),{finished:r}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(t,e=!1){let n=t.dragSource.getDragItem(),i=null;e?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;let r=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(r):[]}getMoveColumnParams(t){let{allMovingColumns:e,isFromHeader:n,xPosition:i,fromLeft:r,fromEnter:o,fakeEvent:s}=t,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:e,isFromHeader:n,fromLeft:r,xPosition:i,pinned:this.pinned,fromEnter:o,fakeEvent:s,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(t,e){let{gos:n,colModel:i}=this.beans,r=n.get("enableRtl"),o=i.getCols().filter(d=>d.isVisible()&&d.getPinned()===this.pinned),s=null,a=null,l=null;for(let d of o){if(a=d.getActualWidth(),s=this.getNormalisedColumnLeft(d,0,r),s!=null){let u=s+a;if(s<=e&&u>=e){l=d;break}}s=null,a=null}if(l)t.indexOf(l)!==-1&&(l=null);else{for(let d=o.length-1;d>=0;d--){let u=o[d],h=o[d].getParent();if(!h){l=u;break}let f=h?.getDisplayedLeafColumns();if(f.length){l=vn(f);break}}if(!l)return;s=this.getNormalisedColumnLeft(l,0,r),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||s==null||a==null)return;let c;e-s<a/2!==r?c=0:c=1,hz(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(t,e){let{gos:n,visibleCols:i}=this.beans,r=n.get("enableRtl"),{firstMovingCol:o,column:s,position:a}=this.getColumnMoveAndTargetInfo(t,e,r);if(!o||!s||a==null)return;let l=i.allCols,c=l.indexOf(o),d=l.indexOf(s),u=a===0!==r,h=c<d||c===d&&!u,f=0;if(u?h&&(f-=1):h||(f+=1),d+f===c)return;let p=l[d+f];if(!p)return;let v=this.getNormalisedColumnLeft(p,20,r);return{fromLeft:h,xPosition:v}}getColumnMoveAndTargetInfo(t,e,n){let i=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:o}=Tde(t);if(!r||!o||i.column||!e)return k({firstMovingCol:r},i);let a=this.getPinDirection()==="left";return{firstMovingCol:r,position:a?1:0,column:a!==n?r:o}}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case"left":return"right";case"right":return"left"}return t}getNormalisedColumnLeft(t,e,n){let{gos:i,ctrlsSvc:r}=this.beans,o=t.getLeft();if(o==null)return null;let s=t.getActualWidth();return FF({x:n?o+s-e:o+e,pinned:t.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:r})}isAttemptingToPin(t){let e=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>uz;return e&&n||t.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(t){let{allMovingColumns:e,xPosition:n,fromEnter:i,fakeEvent:r,fromLeft:o}=t,s=this.getMoveColumnParams({allMovingColumns:e,isFromHeader:!0,xPosition:n,fromLeft:o,fromEnter:i,fakeEvent:r}),{columns:a,toIndex:l}=_G(s)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){let{lastHighlightedColumn:t}=this;t&&(hz(t.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(t){if(!this.isCenterContainer)return;let e=this.beans.ctrlsSvc.get("center"),n=e.getCenterViewportScrollLeft(),i=n+e.getCenterWidth(),r,o;this.gos.get("enableRtl")?(r=t<n+ix,o=t>i-ix):(o=t<n+ix,r=t>i-ix),this.needToMoveRight=r,this.needToMoveLeft=o,o||r?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),Rde),this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.getDragAndDropImageComponent()?.setIcon(this.getIconName(),!1))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*Mde,t>PF&&(t=PF);let e=null,n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?e=n.scrollHorizontally(-t):this.needToMoveRight&&(e=n.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let{pinnedCols:i,dragAndDrop:r,gos:o}=this.beans;if(this.failedMoveAttempts<=uz+1||!i)return;if(r.getDragAndDropImageComponent()?.setIcon("pinned",!1),!o.get("suppressMoveWhenColumnDragging")){let s=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(s,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(t,e,n=!1){let i=(t||[]).filter(s=>!s.getColDef().lockPinned);if(!i.length)return 0;n&&(e=this.getPinDirection());let{pinnedCols:r,dragAndDrop:o}=this.beans;return r?.setColsPinned(i,e,"uiColumnDragged"),n&&o.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function hz(t,e){t.highlighted!==e&&(t.highlighted=e,t.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function Tde(t){let e=t.length,n,i;for(let r=0;r<e;r++){if(!n){let o=t[r];o.getLeft()!=null&&(n=o)}if(!i){let o=t[e-1-r];o.getLeft()!=null&&(i=o)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var Ade=class extends he{constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){let{ctrlsSvc:t,dragAndDrop:e}=this.beans,n=this.pinned;t.whenReady(this,i=>{let r,o=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":r=[[o,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":r=[[o,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:r=[[o,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=r}),this.moveColumnFeature=this.createManagedBean(new Dde(n)),this.bodyDropPivotTarget=this.createManagedBean(new bde(n)),e.addDropTarget(this),this.addDestroyFunc(()=>e.removeDropTarget(this))}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.beans.colModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}onDragCancel(){this.currentDropListener.onDragCancel()}},Ide=class extends he{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(t,e,n){let i=this.beans.colModel.getCols();if(!i)return;let r=i[t];this.moveColumns([r],e,n)}moveColumns(t,e,n,i=!0){let{colModel:r,colAnimation:o,visibleCols:s,eventSvc:a}=this.beans,l=r.getCols();if(!l)return;if(e>l.length-t.length){Ee(30,{toIndex:e});return}o?.start();let c=r.getColsForKeys(t);this.doesMovePassRules(c,e)&&(V6(r.getCols(),c,e),s.refresh(n),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:e,finished:i,source:n})),o?.finish()}doesMovePassRules(t,e){let n=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(n)}doesOrderPassRules(t){let{colModel:e,gos:n}=this.beans;return!(!EU(t,e.getColTree())||!(r=>{let o=c=>c?c==="left"||c===!0?-1:1:0,s=n.get("enableRtl"),a=s?1:-1,l=!0;return r.forEach(c=>{let d=o(c.getColDef().lockPosition);s?d>a&&(l=!1):d<a&&(l=!1),a=d}),l})(t))}getProposedColumnOrder(t,e){let i=this.beans.colModel.getCols().slice();return V6(i,t,e),i}createBodyDropTarget(t,e){return new Ade(t,e)}moveHeader(t,e,n,i,r){let{ctrlsSvc:o,gos:s,colModel:a,visibleCols:l,focusSvc:c}=this.beans,d=e.getBoundingClientRect(),u=d.left,h=Xn(n),f=h?d.width:n.getActualWidth(),p=t==="left"!==s.get("enableRtl"),v=FF({x:p?u-20:u+f+20,pinned:i,fromKeyboard:!0,gos:s,ctrlsSvc:o}),m=c.focusedHeader;SG({allMovingColumns:h?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:t==="right",xPosition:v,pinned:i,fromEnter:!1,fakeEvent:!1,gos:s,colModel:a,colMoves:this,visibleCols:l,finished:!0});let g;if(h){let C=n.getDisplayedLeafColumns();g=p?C[0]:vn(C)}else g=n;if(o.getScrollFeature().ensureColumnVisible(g,"auto"),(!r.isAlive()||s.get("ensureDomOrder"))&&m){let C;if(h){let y=n.getGroupId(),w=n.getLeafColumns();if(!w.length)return;let R=w[0].getParent();if(!R)return;C=Fde(R,y)}else C=n;C&&c.focusHeaderPosition({headerPosition:ae(k({},m),{column:C})})}}setDragSourceForHeader(t,e,n){let{gos:i,colModel:r,dragAndDrop:o,visibleCols:s}=this.beans,a=!i.get("suppressDragLeaveHidesColumns"),l=Xn(e),c=l?e.getProvidedColumnGroup().getLeafColumns():[e],u={type:1,eElement:t,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>kde(e,s.allCols):()=>Pde(e),dragItemName:n,onDragStarted:()=>{a=!i.get("suppressDragLeaveHidesColumns"),QI(c,!0)},onDragStopped:()=>QI(c,!1),onDragCancelled:()=>QI(c,!1),onGridEnter:h=>{if(a){let{columns:f=[],visibleState:p}=h??{},v=l?g=>!p||p[g.getColId()]:()=>!0,m=f.filter(g=>!g.getColDef().lockVisible&&v(g));r.setColsVisible(m,!0,"uiColumnMoved")}},onGridExit:h=>{if(a){let f=h?.columns?.filter(p=>!p.getColDef().lockVisible)||[];r.setColsVisible(f,!1,"uiColumnMoved")}}};return o.addDragSource(u,!0),u}};function Fde(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}}function Pde(t){let e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e,containerType:t.pinned}}function kde(t,e){let n=t.getProvidedColumnGroup().getLeafColumns(),i={};n.forEach(a=>i[a.getId()]=a.isVisible());let r=[];e.forEach(a=>{n.indexOf(a)>=0&&(r.push(a),Ls(n,a))}),n.forEach(a=>r.push(a));let o=[],s=t.getLeafColumns();for(let a of r)s.indexOf(a)!==-1&&o.push(a);return{columns:r,columnsInSplit:o,visibleState:i,containerType:o[0]?.pinned}}var Ode={moduleName:"ColumnMove",version:Rt,beans:[Ide,vde],apiFunctions:{moveColumnByIndex:yde,moveColumns:Cde},dependsOn:[pde],css:[mde]},Lde=class extends he{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){let n=this.getHeaderCellForColumn(t);if(!n)return-1;let i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(t);return e||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(t){let e=this.getHeaderCellForColumn(t);return e?this.getPreferredWidthForElements([e]):-1}getPreferredWidthForElements(t,e){let n=document.createElement("form");n.style.position="fixed";let i=this.centerRowContainerCtrl.eContainer;t.forEach(o=>this.cloneItemIntoDummy(o,n)),i.appendChild(n);let r=n.offsetWidth;return i.removeChild(n),e=e??this.gos.get("autoSizePadding"),r+e}getHeaderCellForColumn(t){let e=null;return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(t);i!=null&&(e=i)}),e}cloneItemIntoDummy(t,e){let n=t.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let s=t.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){let c=s.classList[l];c!="ag-row-position-absolute"&&r.add(c)}break}s=s.parentElement}i.appendChild(n),e.appendChild(i)}},Nde={moduleName:"AutoWidth",version:Rt,beans:[Lde]};function Bde(t,e,n=!0,i="api"){t.colResize?.setColumnWidths(e,!1,n,i)}var Vde=class extends he{constructor(t,e,n,i){super(),this.comp=t,this.eResize=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let{horizontalResizeSvc:t,gos:e,colAutosize:n}=this.beans,i=t.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!e.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(t){let{columnsToResize:e,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:s}=this.getInitialValues(t);this.resizeCols=e,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s,this.toggleColumnResizing(!0)}onResizing(t,e,n="uiColumnResized"){let i=this.normaliseDragChange(e),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,t)}getInitialValues(t){let e=l=>l.reduce((c,d)=>c+d.getActualWidth(),0),n=(l,c)=>l.map(d=>d.getActualWidth()/c),i=this.getColumnsToResize(),r=e(i),o=n(i,r),s={columnsToResize:i,resizeStartWidth:r,resizeRatios:o},a=null;if(t&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){let l=a.getDisplayedLeafColumns(),c=s.groupAfterColumns=l.filter(u=>u.isResizable()),d=s.groupAfterStartWidth=e(c);s.groupAfterRatios=n(c,d)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}resizeLeafColumnsToFit(t){let e=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();e>n.resizeStartWidth&&this.resizeColumns(n,e,t,!0)}resizeColumnsFromLocalValues(t,e,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,t,e,n)}resizeColumns(t,e,n,i=!0){let{columnsToResize:r,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=t,d=[];if(d.push({columns:r,ratios:s,width:e}),a){let u=e-o;d.push({columns:a,ratios:c,width:l-u})}this.beans.colResize?.resizeColumnSets({resizeSets:d,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.toggleCss("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},Hde=class extends he{constructor(t,e,n,i,r){super(),this.pinned=t,this.column=e,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){let t=[],e,n,i=()=>{if(Zn(this.eResize,e),!e)return;let{horizontalResizeSvc:s,colAutosize:a}=this.beans,l=s.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});t.push(l),n&&a&&t.push(a.addColumnAutosize(this.eResize,this.column))},r=()=>{t.forEach(s=>s()),t.length=0},o=()=>{let s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==e||a!==n)&&(e=s,n=a,r(),i())};o(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",o)}onResizing(t,e){let{column:n,lastResizeAmount:i,resizeStartWidth:r,beans:o}=this,s=this.normaliseResizeAmount(e),a=r+s,l=[{key:n,newWidth:a}],{pinnedCols:c,ctrlsSvc:d,colResize:u}=o;if(this.column.getPinned()){let h=c?.leftWidth??0,f=c?.rightWidth??0,p=px(d.getGridBodyCtrl().eBodyViewport)-50;if(h+f+(s-i)>p)return}this.lastResizeAmount=s,u?.setColumnWidths(l,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.comp.toggleCss("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(e*=-1):i&&(e*=-1),e}},zde=class extends he{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(t,e,n,i){let r=[],{colModel:o,gos:s,visibleCols:a}=this.beans;t.forEach(l=>{let c=o.getColDefCol(l.key)||o.getCol(l.key);if(!c)return;if(r.push({width:l.newWidth,ratios:[1],columns:[c]}),s.get("colResizeDefault")==="shift"&&(e=!e),e){let u=a.getColAfter(c);if(!u)return;let h=c.getActualWidth()-l.newWidth,f=u.getActualWidth()+h;r.push({width:f,ratios:[1],columns:[u]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}resizeColumnSets(t){let{resizeSets:e,finished:n,source:i}=t;if(!(!e||e.every(d=>Ude(d)))){if(n){let d=e&&e.length>0?e[0].columns:null;Ex(this.eventSvc,d,n,i)}return}let o=[],s=[];e.forEach(d=>{let{width:u,columns:h,ratios:f}=d,p={},v={};h.forEach(C=>s.push(C));let m=!0,g=0;for(;m;){if(g++,g>1e3){In(31);break}m=!1;let C=[],y=0,w=u;h.forEach((b,_)=>{if(v[b.getId()])w-=p[b.getId()];else{C.push(b);let x=f[_];y+=x}});let R=1/y;C.forEach((b,_)=>{let M=_===C.length-1,x;M?x=w:(x=Math.round(f[_]*u*R),w-=x);let S=b.getMinWidth(),I=b.getMaxWidth();x<S?(x=S,v[b.getId()]=!0,m=!0):I>0&&x>I&&(x=I,v[b.getId()]=!0,m=!0),p[b.getId()]=x})}h.forEach(C=>{let y=p[C.getId()];C.getActualWidth()!==y&&(C.setActualWidth(y,i),o.push(C))})});let a=o.length>0,l=[];if(a){let{colFlex:d,visibleCols:u,colViewport:h}=this.beans;l=d?.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0})??[],u.setLeftValues(i),u.updateBodyWidths(),h.checkViewportColumns()}let c=s.concat(l);(a||n)&&Ex(this.eventSvc,c,n,i,l)}resizeHeader(t,e,n){if(!t.isResizable())return;let i=t.getActualWidth(),r=t.getMinWidth(),o=t.getMaxWidth(),s=Math.min(Math.max(i+e,r),o);this.setColumnWidths([{key:t,newWidth:s}],n,!0,"uiColumnResized")}createResizeFeature(t,e,n,i,r){return new Hde(t,e,n,i,r)}createGroupResizeFeature(t,e,n,i){return new Vde(t,e,n,i)}};function Ude(t){let{columns:e,width:n}=t,i=0,r=0,o=!0;e.forEach(l=>{let c=l.getMinWidth();i+=c||0;let d=l.getMaxWidth();d>0?r+=d:o=!1});let s=n>=i,a=!o||n<=r;return s&&a}var Gde={moduleName:"ColumnResize",version:Rt,beans:[zde],apiFunctions:{setColumnWidths:Bde},dependsOn:[gde,Nde]},Wde=class extends he{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.__addEventListener("widthChanged",t),e.__addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.__removeEventListener("widthChanged",t),e.__removeEventListener("visibleChanged",t)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(t=>t()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.toggleCss("ag-hidden",t===0)}},jde=class extends dP{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}setComp(t,e,n,i,r){let{column:o,beans:s}=this,{context:a,colNames:l,colHover:c,rangeSvc:d,colResize:u}=s;this.comp=t,r=ky(this,a,r),this.setGui(e,r),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:r}),this.setupUserComp(),this.addHeaderMouseListeners(r),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let h=this.rowCtrl.pinned,f=o.getProvidedColumnGroup().getLeafColumns();c?.createHoverFeature(r,f,e),d?.createRangeHighlightFeature(r,o,t),r.createManagedBean(new cP(o,e,s)),r.createManagedBean(new Wde(t,o)),u?this.resizeFeature=r.createManagedBean(u.createGroupResizeFeature(t,n,h,o)):t.setResizableDisplayed(!1),r.createManagedBean(new Lf(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,f),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){let{column:t,beans:e}=this,n=t.getDefinition();return jt(e.gos,{colDef:n,columnGroup:t,floatingFilter:!1})}refreshMaxHeaderHeight(){let{gos:t,comp:e}=this,n=t.get("groupHeaderHeight");n!=null?n===0?e.setHeaderWrapperHidden(!0):e.setHeaderWrapperMaxHeight(n):(e.setHeaderWrapperHidden(!1),e.setHeaderWrapperMaxHeight(null))}addHighlightListeners(t,e){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let n of e)t.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(t){let e=this.column.getDisplayedLeafColumns(),n=e[0]===t,i=vn(e)===t;if(!n&&!i)return;let r=t.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving()),s=!1,a=!1;if(o){let l=this.beans.gos.get("enableRtl"),c=r===1,d=r===0;n&&(l?a=c:s=d),i&&(l?s=d:a=c)}this.comp.toggleCss("ag-header-highlight-before",s),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(t,e){let{resizeFeature:n}=this;if(!n)return;let i=n.getInitialValues(e);n.resizeColumns(i,i.resizeStartWidth+t,"uiColumnResized",!0)}resizeLeafColumnsToFit(t){this.resizeFeature?.resizeLeafColumnsToFit(t)}setupUserComp(){let{colGroupSvc:t,userCompFactory:e,gos:n,enterpriseMenuFactory:i}=this.beans,r=this.column,o=r.getProvidedColumnGroup(),s=jt(n,{displayName:this.displayName,columnGroup:r,setExpanded:l=>{t.setColumnGroupOpened(o,l,"gridInitializing")},setTooltip:(l,c)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>i?.showMenuAfterButtonClick(o,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>i?.showMenuAfterMouseEvent(o,l,"columnMenu",c),eGridHeader:this.eGui}),a=bse(e,s);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(t){let e=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup());t.addManagedListeners(this.eGui,{mouseenter:e,mouseleave:e,click:n,contextmenu:i})}handleMouseOverChange(t){this.eventSvc.dispatchEvent({type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(t,e){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,t,e)}setupExpandable(t){let e=this.column.getProvidedColumnGroup();this.refreshExpanded();let n=this.refreshExpanded.bind(this);t.addManagedListeners(e,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){let{column:t}=this;this.expandable=t.isExpandable();let e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){let{column:t}=this,e=t.getColGroupDef(),n=zU(e,this.gos,null,t);t.isPadding()?(n.push("ag-header-group-cell-no-group"),t.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&n.push("ag-header-cell-wrap-text")),n.forEach(i=>this.comp.toggleCss(i,!0))}setupMovingCss(t){let{column:e}=this,i=e.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss("ag-header-cell-moving",e.isMoving());i.forEach(o=>{t.addManagedListeners(o,{movingChanged:r})}),r()}onFocusIn(t){this.eGui.contains(t.relatedTarget)||this.focusThis()}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&t.key===ne.ENTER){let n=this.column,i=!n.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(t){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),t&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(t,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(t=>t.getColDef().suppressMovable||t.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function $de(t,e,n){t.colGroupSvc?.setColumnGroupOpened(e,n,"api")}function qde(t,e,n){return t.colGroupSvc?.getColumnGroup(e,n)??null}function Kde(t,e){return t.colGroupSvc?.getProvidedColGroup(e)??null}function Yde(t,e,n){return t.colNames.getDisplayNameForColumnGroup(e,n)||""}function Xde(t){return t.colGroupSvc?.getColumnGroupState()??[]}function Zde(t,e){t.colGroupSvc?.setColumnGroupState(e,"api")}function Qde(t){t.colGroupSvc?.resetColumnGroupState("api")}function Jde(t){return t.visibleCols.treeLeft}function eue(t){return t.visibleCols.treeCenter}function tue(t){return t.visibleCols.treeRight}function nue(t){return t.visibleCols.getAllTrees()}function iue(t,e){for(let n=0;n<e.length;n++){let i=t.indexOf(e[n]);i>=0&&(t[i]=t[t.length-1],t.pop())}}var rue=class extends he{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(t,e=!1){let{colFlex:n,colModel:i,colGroupSvc:r,colViewport:o,selectionColSvc:s}=this.beans;e||this.buildTrees(i,r),r?.updateOpenClosedVisibility(),this.leftCols=JI(this.treeLeft),this.centerCols=JI(this.treeCenter),this.rightCols=JI(this.treeRight),s?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.setLeftValues(t),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),o.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,t),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:t})}updateBodyWidths(){let t=Cf(this.centerCols),e=Cf(this.leftCols),n=Cf(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==t,(this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==n)&&(this.bodyWidth=t,this.leftWidth=e,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(t){this.setLeftValuesOfCols(t),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(t,e,n,i){let r,o;this.gos.get("enableRtl")?(r=e?e[0]:null,o=n?vn(n):null):(r=e?vn(e):null,o=n?n[0]:null),t.getCols().forEach(s=>{s.setLastLeftPinned(s===r,i),s.setFirstRightPinned(s===o,i)})}buildTrees(t,e){let n=t.getColsToShow(),i=n.filter(l=>l.getPinned()=="left"),r=n.filter(l=>l.getPinned()=="right"),o=n.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),s=new Qoe,a=l=>e?e.createColumnGroups(l):l.columns;this.treeLeft=a({columns:i,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:r,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(t){let e=t.getCols(),n=[],i=[],r=[];for(let o of e){let s=o.getPinned();s?s===!0||s==="left"?n.push(o):r.push(o):i.push(o)}this.ariaOrderColumns=n.concat(i).concat(r)}getAriaColIndex(t){let e;return Xn(t)?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(t=>{t.forEach(e=>{Xn(e)&&e.checkLeft()})})}setLeftValuesOfCols(t){let{colModel:e}=this.beans;if(!e.getColDefCols())return;let i=e.getCols().slice(0),r=this.gos.get("enableRtl");[this.leftCols,this.rightCols,this.centerCols].forEach(o=>{if(r){let s=Cf(o);o.forEach(a=>{s-=a.getActualWidth(),a.setLeft(s,t)})}else{let s=0;o.forEach(a=>{a.setLeft(s,t),s+=a.getActualWidth()})}iue(i,o)}),i.forEach(o=>{o.setLeft(null,t)})}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(t){return this.allCols.indexOf(t)>=0}getLeftColsForRow(t){let{leftCols:e,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(t,e):e}getRightColsForRow(t){let{rightCols:e,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(t,e):e}getColsForRow(t,e,n,i){let r=[],o=null;for(let s=0;s<e.length;s++){let a=e[s],l=e.length-s,c=Math.min(a.getColSpan(t),l),d=[a];if(c>1){let h=c-1;for(let f=1;f<=h;f++)d.push(e[s+f]);s+=h}let u;n?(u=!1,d.forEach(h=>{n(h)&&(u=!0)})):u=!0,u&&(r.length===0&&o&&(i&&i(a))&&r.push(o),r.push(a)),o=a}return r}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(t){let e=this.allCols,n=e.indexOf(t);return n>0?e[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let t=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Ud(this.treeCenter,!1,t),Ud(this.treeLeft,!1,t),Ud(this.treeRight,!1,t)}isVisible(t){return this.colsAndGroupsMap[t.getUniqueId()]===t}getFirstColumn(){let t=this.gos.get("enableRtl"),e=["leftCols","centerCols","rightCols"];t&&e.reverse();for(let n=0;n<e.length;n++){let i=this[e[n]];if(i.length)return t?vn(i):i[0]}return null}getColAfter(t){let e=this.allCols,n=e.indexOf(t);return n<e.length-1?e[n+1]:null}getColsLeftWidth(){return Cf(this.leftCols)}getDisplayedColumnsRightWidth(){return Cf(this.rightCols)}isColAtEdge(t,e){let n=this.allCols;if(!n.length)return!1;let i=e==="first",r;if(Xn(t)){let o=t.getDisplayedLeafColumns();if(!o.length)return!1;r=i?o[0]:vn(o)}else r=t;return(i?n[0]:vn(n))===r}};function Ud(t,e,n){if(t)for(let i=0;i<t.length;i++){let r=t[i];if(Xn(r)){let o=e?r.getDisplayedChildren():r.getChildren();Ud(o,e,n)}n(r)}}function JI(t){let e=[];return Ud(t,!0,n=>{Na(n)&&e.push(n)}),e}var oue=class extends he{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){let t=[],e=this.beans.colModel.getColTree();return La(null,e,n=>{er(n)&&t.push({groupId:n.getGroupId(),open:n.isExpanded()})}),t}resetColumnGroupState(t){let e=this.beans.colModel.getColDefColTree();if(!e)return;let n=[];La(null,e,i=>{if(er(i)){let r=i.getColGroupDef(),o={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(o)}}),this.setColumnGroupState(n,t)}setColumnGroupState(t,e){let{colModel:n,colAnimation:i,visibleCols:r,eventSvc:o}=this.beans;if(!n.getColTree().length)return;i?.start();let a=[];t.forEach(l=>{let c=l.groupId,d=l.open,u=this.getProvidedColGroup(c);u&&u.isExpanded()!==d&&(u.setExpanded(d),a.push(u))}),r.refresh(e,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),i?.finish()}setColumnGroupOpened(t,e,n){let i;er(t)?i=t.getId():i=t||"",this.setColumnGroupState([{groupId:i,open:e}],n)}getProvidedColGroup(t){let e=null;return La(null,this.beans.colModel.getColTree(),n=>{er(n)&&n.getId()===t&&(e=n)}),e}getGroupAtDirection(t,e){let n=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),i=t.getDisplayedLeafColumns(),r=e==="After"?vn(i):i[0],o=`getCol${e}`;for(;;){let s=this.beans.visibleCols[o](r);if(!s)return null;let a=this.getColGroupAtLevel(s,n);if(a!==t)return a}}getColGroupAtLevel(t,e){let n=t.getParent(),i,r;for(;i=n.getProvidedColumnGroup().getLevel(),r=n.getPaddingLevel(),!(i+r<=e);)n=n.getParent();return n}updateOpenClosedVisibility(){let t=this.beans.visibleCols.getAllTrees();Ud(t,!1,e=>{Xn(e)&&e.calculateDisplayedColumns()})}getColumnGroup(t,e){if(!t)return null;if(Xn(t))return t;let n=this.beans.visibleCols.getAllTrees(),i=typeof e=="number",r=null;return Ud(n,!1,o=>{if(Xn(o)){let s=o,a;i?a=t===s.getGroupId()&&e===s.getPartId():a=t===s.getGroupId(),a&&(r=s)}}),r}createColumnGroups(t){let{columns:e,idCreator:n,pinned:i,oldDisplayedGroups:r,isStandaloneStructure:o}=t,s=this.mapOldGroupsById(r),a=[],l=e;for(;l.length;){let c=l;l=[];let d=0,u=h=>{let f=d;d=h;let p=c[f],m=(Xn(p)?p.getProvidedColumnGroup():p).getOriginalParent();if(m==null){for(let C=f;C<h;C++)a.push(c[C]);return}let g=this.createColumnGroup(m,n,s,i,o);for(let C=f;C<h;C++)g.addChild(c[C]);l.push(g)};for(let h=1;h<c.length;h++){let f=c[h],v=(Xn(f)?f.getProvidedColumnGroup():f).getOriginalParent(),m=c[d],C=(Xn(m)?m.getProvidedColumnGroup():m).getOriginalParent();v!==C&&u(h)}d<c.length&&u(c.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(t,e,n,i,r,o,s){let a=r.getUniqueKey(e.groupId||null,null),l=N6(this.beans,e,a),c=new cx(l,a,!1,n);this.createBean(c);let d=this.findExistingGroup(e,o);d&&o.splice(d.idx,1);let u=d?.group;u&&c.setExpanded(u.isExpanded());let h=_U(this.beans,l.children,n+1,t,i,r,o,s);return c.setChildren(h),c}balanceColumnTree(t,e,n,i){let r=[];for(let o=0;o<t.length;o++){let s=t[o];if(er(s)){let a=s,l=this.balanceColumnTree(a.getChildren(),e+1,n,i);a.setChildren(l),r.push(a)}else{let a,l;for(let c=n-1;c>=e;c--){let d=i.getUniqueKey(null,null),u=N6(this.beans,null,d),h=new cx(u,d,!0,e);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(r.push(a),t.some(d=>er(d))){l.setChildren([s]);continue}else{l.setChildren(t);break}r.push(s)}}return r}findDepth(t){let e=0,n=t;for(;n&&n[0]&&er(n[0]);)e++,n=n[0].getChildren();return e}findMaxDepth(t,e){let n=e;for(let i=0;i<t.length;i++){let r=t[i];if(er(r)){let o=r,s=this.findMaxDepth(o.getChildren(),e+1);n<s&&(n=s)}}return n}balanceTreeForAutoCols(t,e){let n=[];return t.forEach(i=>{let r=i;for(let o=e-1;o>=0;o--){let s=new cx(null,`FAKE_PATH_${i.getId()}}_${o}`,!0,o);this.createBean(s),s.setChildren([r]),r.originalParent=s,r=s}e===0&&(i.originalParent=null),n.push(r)}),n}findExistingGroup(t,e){if(t.groupId!=null)for(let i=0;i<e.length;i++){let r=e[i];if(r.getColGroupDef()&&r.getId()===t.groupId)return{idx:i,group:r}}}createColumnGroup(t,e,n,i,r){let o=t.getGroupId(),s=e.getInstanceIdForKey(o),a=KU(o,s),l=n[a];return l&&l.getProvidedColumnGroup()!==t&&(l=null),Ve(l)?l.reset():(l=new YU(t,o,s,i),r||this.createBean(l)),l}mapOldGroupsById(t){let e={},n=i=>{i.forEach(r=>{if(Xn(r)){let o=r;e[r.getUniqueId()]=o,n(o.getChildren())}})};return t&&n(t),e}setupParentsIntoCols(t,e){t.forEach(n=>{if(n.parent=e,Xn(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}},sue={moduleName:"ColumnGroup",version:Rt,dynamicBeans:{headerGroupCellCtrl:jde},beans:[oue],apiFunctions:{getAllDisplayedColumnGroups:nue,getCenterDisplayedColumnGroups:eue,getColumnGroup:qde,getColumnGroupState:Xde,getDisplayNameForColumnGroup:Yde,getLeftDisplayedColumnGroups:Jde,getProvidedColumnGroup:Kde,getRightDisplayedColumnGroups:tue,resetColumnGroupState:Qde,setColumnGroupOpened:$de,setColumnGroupState:Zde}},aue={tag:"div",cls:"ag-skeleton-container"},lue=class extends ln{constructor(){super(aue)}init(t){let e=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",e),this.addDestroyFunc(()=>Sy(t.eParentOfValue)),Sy(t.eParentOfValue,e),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){let t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");let e=t("ariaSkeletonCellLoadingFailed","Row failed to load");Af(this.getGui(),e)}setupLoading(t){let e=On({tag:"div",cls:"ag-skeleton-effect"}),n=t.node.rowIndex;if(n!=null){let o=75+25*(n%2===0?Math.sin(n):Math.cos(n));e.style.width=`${o}%`}this.getGui().appendChild(e);let i=this.getLocaleTextFunc(),r=t.deferRender?i("ariaDeferSkeletonCellLoading","Cell is loading"):i("ariaSkeletonCellLoading","Row data is loading");Af(this.getGui(),r)}refresh(t){return!1}},cue={moduleName:"CheckboxCellRenderer",version:Rt,userComponents:{agCheckboxCellRenderer:pce}},due={moduleName:"SkeletonCellRenderer",version:Rt,userComponents:{agSkeletonCellRenderer:lue}};var uue=class extends he{constructor(){super(...arguments),this.beanName="colFlex"}refreshFlexedColumns(t={}){let e=t.source??"flex";t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth);let n=this.flexViewportWidth;if(!n)return[];let{visibleCols:i}=this.beans,r=i.centerCols,o=-1;if(t.resizingCols){let p=new Set(t.resizingCols);for(let v=r.length-1;v>=0;v--)if(p.has(r[v])){o=v;break}}let s=!1,a=r.map((p,v)=>{let m=p.getFlex(),g=m!=null&&m>0&&v>o;return s||(s=g),{col:p,isFlex:g,flex:Math.max(0,m??0),initialSize:p.getActualWidth(),min:p.getMinWidth(),max:p.getMaxWidth(),targetSize:0}});if(!s)return[];let l=a.length,c=a.reduce((p,v)=>p+v.flex,0),d=n,u=(p,v)=>{p.frozenSize=v,p.col.setActualWidth(v,e),d-=v,c-=p.flex,l-=1},h=p=>p.frozenSize!=null;for(let p of a)p.isFlex||u(p,p.initialSize);for(;l>0;){let p=Math.round(c<1?d*c:d),v,m=0,g=0;for(let w of a){if(h(w))continue;v=w,g+=p*(w.flex/c);let R=g-m,b=Math.round(R);w.targetSize=b,m+=b}v&&(v.targetSize+=p-m);let C=0;for(let w of a){if(h(w))continue;let R=w.targetSize,b=Math.min(Math.max(R,w.min),w.max);C+=b-R,w.violationType=b===R?void 0:b<R?"max":"min",w.targetSize=b}let y=C===0?"all":C>0?"min":"max";for(let w of a)h(w)||(y==="all"||w.violationType===y)&&u(w,w.targetSize)}t.skipSetLeft||i.setLeftValues(e),t.updateBodyWidths&&i.updateBodyWidths();let f=a.filter(p=>p.isFlex&&!p.violationType).map(p=>p.col);if(t.fireResizedEvent){let p=a.filter(m=>m.initialSize!==m.frozenSize).map(m=>m.col),v=a.filter(m=>m.flex).map(m=>m.col);Ex(this.eventSvc,p,!0,e,v)}return f}initCol(t){let{flex:e,initialFlex:n}=t.colDef;e!==void 0?t.flex=e:n!==void 0&&(t.flex=n)}setColFlex(t,e){t.flex=e??null,t.dispatchStateUpdatedEvent("flex")}},hue=["dateTimeString","dateString","text","number","boolean","date"],fue=class extends he{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:t=>!!t.colDef.editable&&t.event.key===ne.SPACE}},date({formatValue:t}){return{cellEditor:"agDateCellEditor",keyCreator:t}},dateString({formatValue:t}){return{cellEditor:"agDateStringCellEditor",keyCreator:t}},dateTime(t){return this.date(t)},dateTimeString(t){return this.dateString(t)},object({formatValue:t,colModel:e,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,r)=>{let o=e.getColDefCol(n),s=o?.getColDef();if(!o||!s)return 0;let a=i==null?"":t({column:o,node:null,value:i}),l=r==null?"":t({column:o,node:null,value:r});return a===l?0:a>l?1:-1},keyCreator:t}},text(){return{}}}}wireBeans(t){this.colModel=t.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(t)})}processDataTypeDefinitions(){let t=this.getDefaultDataTypes(),e={},n={},i=d=>u=>{let{column:h,node:f,value:p}=u,v=h.getColDef().valueFormatter;return v===d.groupSafeValueFormatter&&(v=d.valueFormatter),this.beans.valueSvc.formatValue(h,f,p,v)};for(let d of Object.keys(t)){let u=t[d],h=ae(k({},u),{groupSafeValueFormatter:gz(u,this.gos)});e[d]=h,n[d]=i(h)}let r=this.gos.get("dataTypeDefinitions")??{},o={};for(let d of Object.keys(r)){let u=r[d],h=this.processDataTypeDefinition(u,r,[d],t);h&&(e[d]=h,u.dataTypeMatcher&&(o[d]=u.dataTypeMatcher),n[d]=i(h))}let{valueParser:s,valueFormatter:a}=t.object,{valueParser:l,valueFormatter:c}=e.object;this.hasObjectValueParser=l!==s,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=n,this.dataTypeDefinitions=e,this.dataTypeMatchers=this.sortKeysInMatchers(o,t)}sortKeysInMatchers(t,e){let n=k({},t);for(let i of hue)delete n[i],n[i]=t[i]??e[i].dataTypeMatcher;return n}processDataTypeDefinition(t,e,n,i){let r,o=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let s=i[o],a=e[o];if(s&&a&&(s=a),!pz(t,s,o))return;r=fz(s,t)}else{if(n.includes(o)){Ee(44);return}let s=e[o];if(!pz(t,s,o))return;let a=this.processDataTypeDefinition(s,e,[...n,o],i);if(!a)return;r=fz(a,t)}return ae(k({},r),{groupSafeValueFormatter:gz(r,this.gos)})}updateColDefAndGetColumnType(t,e,n){let{cellDataType:i}=e,{field:r}=e;if(i===void 0&&(i=t.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(t,e)?this.inferCellDataType(r,n):!1),!i){t.cellDataType=!1;return}let o=this.dataTypeDefinitions[i];if(!o){Ee(47,{cellDataType:i});return}return t.cellDataType=i,o.groupSafeValueFormatter&&(t.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(t.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,i,o,n),o.columnTypes}addColumnListeners(t){if(!this.isPendingInference)return;let e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;let n=i=>{e.add(i.key)};t.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(t,e){let{gos:n}=this;if(!Tr(n))return!1;let i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(eF(e,i))return!1;let r=e.type===null?t.type:e.type;if(r){let o=n.get("columnTypes")??{};if(xx(r).some(a=>{let l=o[a.trim()];return l&&eF(l,i)}))return!1}return!eF(t,i)}inferCellDataType(t,e){if(!t)return;let n,i=this.getInitialData();if(i){let o=t.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=yy(i,t,o)}else this.initWaitForRowData(e);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](n))??"object"}getInitialData(){let t=this.gos.get("rowData");if(t?.length)return t[0];if(this.initialData)return this.initialData;{let e=this.beans.rowModel.rootNode?.allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isPendingInference)return;this.isPendingInference=!0;let e=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;e&&n&&(n.shouldQueueResizeOperations=!0);let[r]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{let{firstRowData:s}=o;s&&(r?.(),this.isPendingInference=!1,this.processColumnsPendingInference(s,e),this.columnStateUpdatesPendingInference={},e&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(t,e){this.initialData=t;let n=[];this.destroyColumnStateUpdateListeners();let i={},r={};for(let o of Object.keys(this.columnStateUpdatesPendingInference)){let s=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;let l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(e&&c.type&&c.type!==l.type){let d=gue(a,s);d.rowGroup&&d.rowGroupIndex==null&&(i[o]=d),d.pivot&&d.pivotIndex==null&&(r[o]=d),n.push(d)}}e&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&XF(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(t,e){let n={},{rowGroupColsSvc:i,pivotColsSvc:r}=this.beans;return i?.restoreColumnOrder(n,t),r?.restoreColumnOrder(n,e),Object.values(n)}resetColDefIntoCol(t,e){let n=t.getUserProvidedColDef();if(!n)return!1;let i=bF(this.beans,n,t.getColId());return t.setColDef(i,n,e),!0}getDateStringTypeDefinition(t){let{dateString:e}=this.dataTypeDefinitions;return t?this.getDataTypeDefinition(t)??e:e}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDateIncludesTimeFlag(t){return t==="dateTime"||t==="dateTimeString"}getDataTypeDefinition(t){let e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){return this.getDataTypeDefinition(t)?.baseDataType}checkType(t,e){if(e==null)return!0;let n=this.getDataTypeDefinition(t)?.dataTypeMatcher;return n?n(e):!0}validateColDef(t){let e=n=>Ee(48,{property:n});if(t.cellDataType==="object"){let{object:n}=this.dataTypeDefinitions;t.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&e("Formatter"),t.editable&&t.valueParser===n.valueParser&&!this.hasObjectValueParser&&e("Parser")}}postProcess(t){let e=t.cellDataType;if(!e||typeof e!="string")return;let{dataTypeDefinitions:n,beans:i,formatValueFuncs:r}=this,o=n[e];i.colFilter?.setColDefPropsForDataType(t,o,r[e])}getFormatValue(t){return this.formatValueFuncs[t]}isColPendingInference(t){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[t]}setColDefPropertiesForBaseDataType(t,e,n,i){let r=this.formatValueFuncs[e],o=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:t,cellDataType:e,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:r});Object.assign(t,o)}getDateObjectTypeDef(t){let e=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(t);return{baseDataType:t,valueParser:i=>MF(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?e("invalidDate","Invalid Date"):q6(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(t){let e=this.getDateIncludesTimeFlag(t);return{baseDataType:t,dateParser:n=>MF(n)??void 0,dateFormatter:n=>q6(n??null,e)??void 0,valueParser:n=>hx(String(n.newValue))?n.newValue:null,valueFormatter:n=>hx(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&hx(n)}}getDefaultDataTypes(){let t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>e.newValue?.trim?.()===""?null:Number(e.newValue),valueFormatter:e=>e.value==null?"":typeof e.value!="number"||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>typeof e=="number"},text:{baseDataType:"text",valueParser:e=>e.newValue===""?null:cF(e.newValue),dataTypeMatcher:e=>typeof e=="string"},boolean:{baseDataType:"boolean",valueParser:e=>e.newValue==null?e.newValue:e.newValue?.trim?.()===""?null:String(e.newValue).toLowerCase()==="true",valueFormatter:e=>e.value==null?"":String(e.value),dataTypeMatcher:e=>typeof e=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:ae(k({},this.getDateStringTypeDef("dateTimeString")),{dataTypeMatcher:e=>typeof e=="string"&&jae(e)}),object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>cF(e.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(t=>t()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function fz(t,e){let n=k(k({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(n.columnTypes=[...xx(t.columnTypes),...xx(e.columnTypes)]),n}function pz(t,e,n){return e?e.baseDataType!==t.baseDataType?(Ee(46),!1):!0:(Ee(45,{parentCellDataType:n}),!1)}function gz(t,e){if(t.valueFormatter)return n=>{if(n.node?.group){let i=(n.colDef.pivotValueColumn??n.column).getAggFunc();if(i){if(i==="first"||i==="last")return t.valueFormatter(n);if(t.baseDataType==="number"&&i!=="count"){if(typeof n.value=="number")return t.valueFormatter(n);if(typeof n.value=="object"){if(!n.value)return;if("toNumber"in n.value)return t.valueFormatter(ae(k({},n),{value:n.value.toNumber()}));if("value"in n.value)return t.valueFormatter(ae(k({},n),{value:n.value.value}))}}return}}else if(e.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!t.dataTypeMatcher?.(n.value))return;return t.valueFormatter(n)}}function pue(t,e,n,i){if(!e[n])return!1;let r=t[n];return r===null?(e[n]=!1,!1):i===void 0?!!r:r===i}function eF(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>pue(t,e,n,i))}function gue(t,e){let n=qoe(t);return e.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}var mue={moduleName:"DataType",version:Rt,beans:[fue],dependsOn:[cue]},vue={moduleName:"ColumnFlex",version:Rt,beans:[uue]};function yue(t){if(!t||t==null)return null;let e=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}var Cue=class extends he{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(t,e,n=!1){if(!t)return null;let i=this.getHeaderName(t.getColDef(),t,null,null,e),{aggColNameSvc:r}=this.beans;return n&&r?r.getHeaderName(t,i):i}getDisplayNameForProvidedColumnGroup(t,e,n){let i=e?.getColGroupDef();return i?this.getHeaderName(i,null,t,e,n):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,n,i,r){let o=t.headerValueGetter;if(o){let s=jt(this.gos,{colDef:t,column:e,columnGroup:n,providedColumnGroup:i,location:r});return typeof o=="function"?o(s):typeof o=="string"?this.beans.expressionSvc?.evaluate(o,s)??null:""}else{if(t.headerName!=null)return t.headerName;if(t.field)return yue(t.field)}return""}},bue=class extends he{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(t){this.visibleCols=t.visibleCols,this.colModel=t.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(t,e,n=!1){let{visibleCols:i}=this,r=i.isBodyWidthDirty;if(!(t===this.scrollWidth&&e===this.scrollPosition&&!r)){if(this.scrollWidth=t,this.scrollPosition=e,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){let s=i.bodyWidth;this.viewportLeft=s-e-t,this.viewportRight=s-e}else this.viewportLeft=e,this.viewportRight=t+e;this.colModel.ready&&this.checkViewportColumns(n)}}getHeadersToRender(t,e){let n;switch(t){case"left":n=this.rowsOfHeadersToRenderLeft[e];break;case"right":n=this.rowsOfHeadersToRenderRight[e];break;default:n=this.rowsOfHeadersToRenderCenter[e];break}return n||[]}extractViewportColumns(){let t=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=t,this.headerColsWithinViewport=t):(this.colsWithinViewport=t.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=t.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(t){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},t||(this.colsWithinViewportHash="")}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()||wue(t)?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;let e=t.getLeft()||0,n=e+t.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200,o=e<i&&n<i,s=e>r&&n>r;return!o&&!s}getViewportColumns(){let{leftCols:t,rightCols:e}=this.visibleCols;return this.colsWithinViewport.concat(t).concat(e)}getColsWithinViewport(t){if(!this.colModel.colSpanActive)return this.colsWithinViewport;let e=o=>{let s=o.getLeft();return Ve(s)&&s>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,r=i.centerCols;return i.getColsForRow(t,r,n,e)}checkViewportColumns(t=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:t})}calculateHeaderRows(){this.clear(!0);let t={},{leftCols:e,rightCols:n,treeLeft:i,treeRight:r,treeCenter:o}=this.visibleCols;this.headerColsWithinViewport.concat(e).concat(n).forEach(l=>t[l.getId()]=!0);let a=(l,c,d)=>{let u=!1;for(let h=0;h<l.length;h++){let f=l[h],p=!1;if(Na(f))p=t[f.getId()]===!0;else{let m=f.getDisplayedChildren();m&&(p=a(m,c,d+1))}p&&(u=!0,c[d]||(c[d]=[]),c[d].push(f))}return u};a(i,this.rowsOfHeadersToRenderLeft,0),a(r,this.rowsOfHeadersToRenderRight,0),a(o,this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let t=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let e=this.getViewportColumns().map(t).join("#"),n=this.colsWithinViewportHash!==e;return n&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),n}};function wue(t){for(;t;){if(t.isAutoHeaderHeight())return!0;t=t.getParent()}return!1}var _ue=class extends he{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(t,e){if(!t.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(r){let o=e(r),s=typeof o;if(s==="string"||s==="number"||s==="boolean"){this.eGui=GF("<span>"+o+"</span>");return}if(o==null){this.eGui=On({tag:"span"});return}this.eGui=o}}return n}},Sue={moduleName:"CellRendererFunction",version:Rt,beans:[_ue]},xue=class extends he{constructor(){super(...arguments),this.beanName="registry",this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){let t=this.gos.get("components");if(t!=null)for(let e of Object.keys(t))this.jsComps[e]=t[e]}registerModule(t){let{icons:e,userComponents:n,dynamicBeans:i,selectors:r}=t;if(n){let o=(s,a,l,c)=>{this.agGridDefaults[s]=a,(l||c)&&(this.agGridDefaultOverrides[s]={params:l,processParams:c})};for(let s of Object.keys(n)){let a=n[s];if(Hse(a)&&(a=a.getComp(this.beans)),typeof a=="object"){let{classImp:l,params:c,processParams:d}=a;o(s,l,c,d)}else o(s,a)}}if(i){this.dynamicBeans??(this.dynamicBeans={});for(let o of Object.keys(i))this.dynamicBeans[o]=i[o]}if(r?.forEach(o=>{this.selectors[o.selector]=o}),e)for(let o of Object.keys(e))this.icons[o]=e[o]}getUserComponent(t,e){let n=(a,l,c,d)=>({componentFromFramework:l,component:a,params:c,processParams:d}),{frameworkOverrides:i}=this.beans,r=i.frameworkComponent(e,this.gos.get("components"));if(r!=null)return n(r,!0);let o=this.jsComps[e];if(o){let a=i.isFrameworkComponent(o);return n(o,a)}let s=this.agGridDefaults[e];if(s){let a=this.agGridDefaultOverrides[e];return n(s,!1,a?.params,a?.processParams)}return this.beans.validation?.missingUserComponent(t,e,this.agGridDefaults,this.jsComps),null}createDynamicBean(t,e,...n){if(!this.dynamicBeans)throw new Error(mF(279,{name:t}));let i=this.dynamicBeans[t];if(i==null){if(e)throw new Error(this.beans.validation?.missingDynamicBean(t)??mF(256));return}return new i(...n)}getSelector(t){return this.selectors[t]}getIcon(t){return this.icons[t]}},Eue=23,Mue=class extends he{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(t=>t(this.params)),this.readyCallbacks.length=0)},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){let t=Object.values(this.params);this.ready=t.length===Eue&&t.every(e=>e?.isAlive()??!1)}whenReady(t,e){this.ready?e(this.params):this.readyCallbacks.push(e),t.addDestroyFunc(()=>{let n=this.readyCallbacks.indexOf(e);n>=0&&this.readyCallbacks.splice(n,1)})}register(t,e){this.params[t]=e,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),e.addDestroyFunc(()=>{this.updateReady()})}get(t){return this.params[t]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:t,centerHeader:e,rightHeader:n}=this.params;return[t,n,e]}getHeaderRowContainerCtrl(t){let e=this.params;switch(t){case"left":return e.leftHeader;case"right":return e.rightHeader;default:return e.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},Rue=':where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&.invalid{box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value,.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-large-text-input{display:block}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{opacity:1}50%{opacity:.4}to{opacity:1}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-chart,.ag-dnd-ghost,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab}.ag-list-item,.ag-virtual-list-item{height:var(--ag-list-item-height)}.ag-virtual-list-item{position:absolute;width:100%}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-list-item{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-column-select-column-group-readonly,.ag-column-select-column-readonly,.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-column-select-column-readonly{&.ag-icon-grip,.ag-icon-grip{opacity:.35}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-accent-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto}.ag-menu,.ag-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-resizer{pointer-events:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',fP=typeof window!="object"||!window?.document?.fonts?.forEach,kf=(t,e,n,i,r,o)=>{if(fP||OF)return;i&&(t=`@layer ${CSS.escape(i)} { ${t} }`);let s=Tf.map.get(e);if(s||(s=[],Tf.map.set(e,s)),s.find(d=>d.css===t))return;let a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=n,a.textContent=t;let l={css:t,el:a,priority:r},c;for(let d of s){if(d.priority>r)break;c=d}if(c){c.el.insertAdjacentElement("afterend",a);let d=s.indexOf(c);s.splice(d+1,0,l)}else e.insertBefore(a,e.querySelector(":not(title, meta)")),s.push(l)},xG=(t,e,n)=>{kf(Rue,t,"core",e,0,n),Array.from(Lse()).sort((i,r)=>i.moduleName.localeCompare(r.moduleName)).forEach(i=>i.css?.forEach(r=>kf(r,t,`module-${i.moduleName}`,e,0,n)))},Due=t=>{Tf.grids.add(t)},Tue=t=>{if(Tf.grids.delete(t),Tf.grids.size===0){Tf.map=new WeakMap;for(let e of document.head.querySelectorAll("style[data-ag-global-css]"))e.remove()}},mz,Tf=(mz=typeof window=="object"?window:{}).agStyleInjectionState??(mz.agStyleInjectionState={map:new WeakMap,grids:new Set}),nr=t=>new EG(t),$l="$default",Aue=0,EG=class{constructor({feature:t,params:e,modeParams:n={},css:i,cssImports:r}){this.feature=t,this.css=i,this.cssImports=r,this.modeParams=k({[$l]:k(k({},n[$l]??{}),e??{})},n)}use(t,e,n){let i=this._inject;if(i==null){let{css:r}=this;if(r){let o=`ag-theme-${this.feature??"part"}-${++Aue}`;typeof r=="function"&&(r=r()),r=`:where(.${o}) {
${r}
}
`;for(let s of this.cssImports??[])r=`@import url(${JSON.stringify(s)});
${r}`;i={css:r,class:o}}else i=!1;this._inject=i}return i&&t&&kf(i.css,t,i.class,e,1,n),i?i.class:!1}},Iue=t=>t.replace(/[A-Z]/g,e=>`-${e}`).toLowerCase(),MG=t=>`--ag-${Iue(t)}`,Ns=t=>`var(${MG(t)})`,Fue=(t,e,n)=>Math.max(e,Math.min(n,t)),Pue=t=>{let e=new Map;return n=>{let i=n;return e.has(i)||e.set(i,t(n)),e.get(i)}},Ts=t=>({ref:"accentColor",mix:t}),ki=t=>({ref:"foregroundColor",mix:t}),vr=t=>({ref:"foregroundColor",mix:t,onto:"backgroundColor"}),kue=t=>({ref:"foregroundColor",mix:t,onto:"headerBackgroundColor"}),mr={ref:"backgroundColor"},Is={ref:"foregroundColor"},Fa={ref:"accentColor"},Px={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:ki(.15),chromeBackgroundColor:vr(.02),browserColorScheme:"light"},Oue=ae(k({},Px),{textColor:Is,accentColor:"#2196f3",invalidColor:"#e02525",wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:mr,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},subtleTextColor:{ref:"textColor",mix:.5},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Fa,rangeSelectionBackgroundColor:Ts(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Ts(.5),rangeHeaderHighlightColor:kue(.08),rowNumbersSelectedColor:Ts(.5),rowHoverColor:Ts(.08),columnHoverColor:Ts(.05),selectedRowBackgroundColor:Ts(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},oddRowBackgroundColor:mr,borderWidth:1,borderRadius:4,wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",spacing:8,fontSize:14,rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},dragAndDropImageBackgroundColor:mr,dragAndDropImageBorder:!0,dragAndDropImageShadow:{ref:"popupShadow"},dragHandleColor:ki(.7),focusShadow:{spread:3,color:Ts(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},iconSize:16,iconColor:"inherit",iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:ki(.1),iconButtonActiveColor:Fa,iconButtonActiveBackgroundColor:Ts(.28),iconButtonActiveIndicatorColor:Fa,toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Fa,toggleButtonOffBackgroundColor:vr(.3),toggleButtonSwitchBackgroundColor:mr,toggleButtonSwitchInset:2,menuBorder:{color:ki(.2)},menuBackgroundColor:vr(.03),menuTextColor:vr(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:ki(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Fa},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:ki(.2)},panelBackgroundColor:mr,panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},columnDropCellBackgroundColor:ki(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:ki(.13)},selectCellBackgroundColor:ki(.07),selectCellBorder:{color:ki(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:mr,filterPanelApplyButtonBackgroundColor:Fa,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Is,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Is,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:ki(.15),statusBarLabelColor:Is,statusBarLabelFontWeight:500,statusBarValueColor:Is,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"backgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"backgroundColor"},pinnedRowTextColor:{ref:"textColor"}}),Lue=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",RG={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},Nue=ae(k({},RG),{cellBatchEditTextColor:"#f3d0b3"}),Bue=()=>nr({feature:"batchEditStyle",params:RG,css:Lue}),Vue=Bue(),DG=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",TG={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},Hue=()=>nr({feature:"buttonStyle",params:TG,css:DG}),zue=Hue(),Uue=()=>nr({feature:"buttonStyle",params:ae(k({},TG),{buttonBackgroundColor:mr,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Fa}}),css:DG}),Gue=Uue();var Wue=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",jue=".ag-column-drop-vertical-empty-message{color:var(--ag-subtle-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600;padding-top:var(--ag-spacing)}:where(.ag-ltr) .ag-column-drop-vertical-empty-message{padding-left:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing));padding-right:var(--ag-spacing)}:where(.ag-rtl) .ag-column-drop-vertical-empty-message{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-icon-size) + var(--ag-spacing) + var(--ag-widget-horizontal-spacing))}",$ue=()=>nr({feature:"columnDropStyle",css:Wue}),AG=$ue(),que=()=>nr({feature:"columnDropStyle",css:jue}),Kue=que(),Yue=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],Xue=Pue(t=>(t=t.toLowerCase(),Yue.find(e=>t.endsWith(e.toLowerCase()))??"length")),zx=t=>typeof t=="object"&&t?.ref?Ns(t.ref):typeof t=="string"?t:typeof t=="number"?String(t):!1,pP=t=>{if(typeof t=="string")return t;if(t&&"ref"in t){let e=Ns(t.ref);return t.mix==null?e:`color-mix(in srgb, ${t.onto?Ns(t.onto):"transparent"}, ${e} ${Fue(t.mix*100,0,100)}%)`}return!1},Zue=zx,Sf=t=>typeof t=="string"?t:typeof t=="number"?`${t}px`:t&&"calc"in t?`calc(${t.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:` ${Ns(n)} `)})`:t&&"ref"in t?Ns(t.ref):!1,Que=zx,kF=(t,e)=>typeof t=="string"?t:t===!0?kF({},e):t===!1?e==="columnBorder"?kF({color:"transparent"},e):"none":t&&"ref"in t?Ns(t.ref):IG(t.style??"solid")+" "+Sf(t.width??{ref:"borderWidth"})+" "+pP(t.color??{ref:"borderColor"}),Jue=t=>typeof t=="string"?t:t===!1?"none":t&&"ref"in t?Ns(t.ref):[Sf(t.offsetX??0),Sf(t.offsetY??0),Sf(t.radius??0),Sf(t.spread??0),pP(t.color??{ref:"foregroundColor"})].join(" "),IG=zx,FG=t=>typeof t=="string"?t.includes(",")?t:vz(t):t&&"googleFont"in t?FG(t.googleFont):t&&"ref"in t?Ns(t.ref):Array.isArray(t)?t.map(e=>(typeof e=="object"&&"googleFont"in e&&(e=e.googleFont),vz(e))).join(", "):!1,vz=t=>/^[\w-]+$|\w\(/.test(t)?t:JSON.stringify(t),ehe=zx,PG=t=>typeof t=="string"?t:t&&"url"in t?`url(${JSON.stringify(t.url)})`:t&&"svg"in t?PG({url:`data:image/svg+xml,${encodeURIComponent(t.svg)}`}):t&&"ref"in t?Ns(t.ref):!1,the=(t,e)=>typeof t=="string"?t:typeof t=="number"?(t>=10&&In(104,{value:t,param:e}),`${t}s`):t&&"ref"in t?Ns(t.ref):!1,nhe={color:pP,colorScheme:Zue,length:Sf,scale:Que,border:kF,borderStyle:IG,shadow:Jue,image:PG,fontFamily:FG,fontWeight:ehe,duration:the},ihe=(t,e)=>{let n=Xue(t);return nhe[n](e,t)},OF=!1;var kG=()=>new OG().withPart(Gue).withPart(AG).withPart(Vue),OG=class LG{constructor(e=[]){this.parts=e}withPart(e){return typeof e=="function"&&(e=e()),e instanceof EG?new LG([...this.parts,e]):(my(259,{part:e},"Invalid part"),this)}withoutPart(e){return this.withPart(nr({feature:e}))}withParams(e,n=$l){return this.withPart(nr({modeParams:{[n]:e}}))}_startUse({styleContainer:e,cssLayer:n,nonce:i,loadThemeGoogleFonts:r}){if(fP||OF)return;ohe(),xG(e,n,i);let o=rhe(this);if(o.length>0)for(let s of o)r&&ahe(s,i);for(let s of this.parts)s.use(e,n,i)}_getCssClass(){return OF?"ag-theme-quartz":this._cssClassCache??(this._cssClassCache=yz(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let e=this._paramsCache;if(!e){let n={[$l]:k({},Oue)};for(let i of yz(this.parts))for(let r of Object.keys(i.modeParams)){let o=i.modeParams[r];if(o){let s=n[r]??(n[r]={}),a=new Set;for(let l of Object.keys(o)){let c=o[l];c!==void 0&&(s[l]=c,a.add(l))}if(r===$l)for(let l of Object.keys(n)){let c=n[l];if(l!==$l)for(let d of a)delete c[d]}}}this._paramsCache=e=n}return e}_getPerGridCss(e){let n="##SELECTOR##",i=this._paramsCssCache;if(!i){let r="",o="",s=this._getModeParams();for(let l of Object.keys(s)){let c=s[l];if(l!==$l){let u=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;r+=u,o+=u}for(let d of Object.keys(c).sort()){let u=c[d],h=ihe(d,u);if(h===!1)In(107,{key:d,value:u});else{let f=MG(d),p=f.replace("--ag-","--ag-inherited-");r+=`	${f}: var(${p}, ${h});
`,o+=`	${p}: var(${f});
`}}l!==$l&&(r+=`}
`,o+=`}
`)}let a=`${n} {
${r}}
`;a+=`:has(> ${n}):not(${n}) {
${o}}
`,this._paramsCssCache=i=a}return i.replaceAll(n,`:where(.${e})`)}},yz=t=>{let e=new Map;for(let i of t)e.set(i.feature,i);let n=[];for(let i of t)(!i.feature||e.get(i.feature)===i)&&n.push(i);return n},rhe=t=>{let e=new Set,n=o=>{if(Array.isArray(o))o.forEach(n);else{let s=o?.googleFont;typeof s=="string"&&e.add(s)}};return Object.values(t._getModeParams()).flatMap(o=>Object.values(o)).forEach(n),Array.from(e).sort()},Cz=!1,ohe=()=>{if(!Cz){Cz=!0;for(let t of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))t.remove()}},she=new Set,ahe=(t,e)=>oi(null,null,function*(){she.add(t);let n=`@import url('https://${lhe}/css2?family=${encodeURIComponent(t)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;kf(n,document.head,`googleFont:${t}`,void 0,0,e)}),lhe="fonts.googleapis.com",che='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',dhe=()=>nr({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:mr,checkboxUncheckedBorderColor:vr(.3),checkboxCheckedBackgroundColor:Fa,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:mr,checkboxIndeterminateBackgroundColor:vr(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:mr,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:che}),NG=dhe();var BG=()=>ae(k(k({},Px),Nue),{backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:vr(.05),rowHoverColor:Ts(.15),selectedRowBackgroundColor:Ts(.2),menuBackgroundColor:vr(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Is,findMatchColor:mr,findActiveMatchColor:mr,checkboxUncheckedBorderColor:vr(.4),toggleButtonOffBackgroundColor:vr(.4),rowBatchEditBackgroundColor:vr(.1)});var uhe=()=>ae(k({},BG()),{backgroundColor:"#1f2836"});var hhe=()=>nr({feature:"colorScheme",params:Px,modeParams:{light:Px,dark:BG(),"dark-blue":uhe()}}),VG=hhe();var fhe=`.ag-icon-aggregation:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eaggregation%3C/title%3E%3Cpath d='M24 5.333H8V8l8.667 8L8 24v2.667h16v-4h-9.333L21.334 16l-6.667-6.667H24z'/%3E%3C/svg%3E")}.ag-icon-arrows:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Earrows%3C/title%3E%3Cpath d='M13.333 11.556h5.333V8h3.556L16 1.778 9.778 8h3.556zm-1.777 1.777H8V9.777l-6.222 6.222L8 22.221v-3.556h3.556zM30.222 16 24 9.778v3.556h-3.556v5.333H24v3.556l6.222-6.222zm-11.555 4.444h-5.333V24H9.778L16 30.222 22.222 24h-3.556z'/%3E%3C/svg%3E")}.ag-icon-asc:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E")}.ag-icon-cancel:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecancel%3C/title%3E%3Cpath d='M16 2.667C8.627 2.667 2.667 8.627 2.667 16S8.627 29.333 16 29.333 29.333 23.373 29.333 16 23.373 2.667 16 2.667m6.667 18.12-1.88 1.88L16 17.88l-4.787 4.787-1.88-1.88L14.12 16l-4.787-4.787 1.88-1.88L16 14.12l4.787-4.787 1.88 1.88L17.88 16z'/%3E%3C/svg%3E")}.ag-icon-chart:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Echart%3C/title%3E%3Cpath d='M6.667 12.267h4v13.067h-4zm7.466-5.6h3.733v18.667h-3.733zM21.6 17.333h3.733v8H21.6z'/%3E%3C/svg%3E")}.ag-icon-color-picker:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolor-picker%3C/title%3E%3Cpath d='M23.907 17.587 10.574 4.254l-1.88 1.88 3.173 3.173-8.28 8.28 10.16 10.16zm-16.547 0 6.387-6.387 6.387 6.387H7.361zm18.387 2s-2.667 2.893-2.667 4.667c0 1.467 1.2 2.667 2.667 2.667s2.667-1.2 2.667-2.667c0-1.773-2.667-4.667-2.667-4.667'/%3E%3C/svg%3E")}.ag-icon-columns:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecolumns%3C/title%3E%3Cpath d='M5.333 10.667h5.333V5.334H5.333zm8 16h5.333v-5.333h-5.333zm-8 0h5.333v-5.333H5.333zm0-8h5.333v-5.333H5.333zm8 0h5.333v-5.333h-5.333zm8-13.334v5.333h5.333V5.333zm-8 5.334h5.333V5.334h-5.333zm8 8h5.333v-5.333h-5.333zm0 8h5.333v-5.333h-5.333z'/%3E%3C/svg%3E")}.ag-icon-contracted:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Econtracted%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E")}.ag-icon-copy:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecopy%3C/title%3E%3Cpath d='M22 1.333H6A2.675 2.675 0 0 0 3.333 4v18.667H6V4h16zm4 5.334H11.333a2.675 2.675 0 0 0-2.667 2.667v18.667c0 1.467 1.2 2.667 2.667 2.667H26c1.467 0 2.667-1.2 2.667-2.667V9.334c0-1.467-1.2-2.667-2.667-2.667M26 28H11.333V9.333H26z'/%3E%3C/svg%3E")}.ag-icon-cross:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Ecross%3C/title%3E%3Cpath d='m25.333 8.547-1.88-1.88L16 14.12 8.547 6.667l-1.88 1.88L14.12 16l-7.453 7.453 1.88 1.88L16 17.88l7.453 7.453 1.88-1.88L17.88 16z'/%3E%3C/svg%3E")}.ag-icon-csv:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='M.688-.226a.2.2 0 0 1-.017.074.28.28 0 0 1-.145.14.412.412 0 0 1-.234.013.28.28 0 0 1-.202-.168.468.468 0 0 1-.04-.19q0-.086.025-.155a.319.319 0 0 1 .182-.191.4.4 0 0 1 .134-.025q.087 0 .155.035a.3.3 0 0 1 .104.085.17.17 0 0 1 .036.097.06.06 0 0 1-.018.044.06.06 0 0 1-.042.019.06.06 0 0 1-.042-.013.2.2 0 0 1-.031-.046.2.2 0 0 0-.066-.079.16.16 0 0 0-.095-.027.17.17 0 0 0-.142.068.3.3 0 0 0-.053.193.4.4 0 0 0 .023.139.2.2 0 0 0 .067.083.2.2 0 0 0 .1.027q.063 0 .106-.031a.2.2 0 0 0 .065-.091.2.2 0 0 1 .023-.046q.014-.018.044-.018a.06.06 0 0 1 .044.018.06.06 0 0 1 .019.045' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 7.122 25.977)'/%3E%3Cpath d='M.622-.215a.2.2 0 0 1-.033.117.23.23 0 0 1-.098.081.4.4 0 0 1-.153.029.34.34 0 0 1-.175-.04.23.23 0 0 1-.079-.077.17.17 0 0 1-.031-.093q0-.027.019-.045a.06.06 0 0 1 .046-.019.06.06 0 0 1 .039.014.1.1 0 0 1 .027.044.3.3 0 0 0 .03.057q.015.023.044.038.03.015.076.015.065 0 .105-.03a.09.09 0 0 0 .04-.075.08.08 0 0 0-.022-.058.14.14 0 0 0-.056-.034 1 1 0 0 0-.092-.025.7.7 0 0 1-.129-.042.2.2 0 0 1-.083-.066.17.17 0 0 1-.03-.104q0-.058.032-.105a.2.2 0 0 1 .093-.07.4.4 0 0 1 .144-.025q.066 0 .114.016a.3.3 0 0 1 .08.044.2.2 0 0 1 .046.057q.015.03.015.058a.07.07 0 0 1-.018.046.06.06 0 0 1-.046.021q-.025 0-.038-.012a.2.2 0 0 1-.028-.041.2.2 0 0 0-.047-.063Q.387-.625.326-.625a.15.15 0 0 0-.09.025q-.035.024-.035.059 0 .021.012.037a.1.1 0 0 0 .032.027.4.4 0 0 0 .111.036q.06.015.11.031.048.018.083.042a.2.2 0 0 1 .054.062.2.2 0 0 1 .019.091' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 13.339 25.977)'/%3E%3Cpath d='m.184-.633.162.48.163-.483q.013-.038.019-.053a.062.062 0 0 1 .061-.039q.018 0 .034.009a.1.1 0 0 1 .025.025q.009.015.009.031L.654-.64l-.007.025-.009.024-.173.468-.019.051a.2.2 0 0 1-.021.042.1.1 0 0 1-.033.03.1.1 0 0 1-.049.012.1.1 0 0 1-.05-.011A.1.1 0 0 1 .26-.03a.2.2 0 0 1-.021-.042L.22-.123.05-.587.041-.612.033-.638.03-.662q0-.025.02-.046a.07.07 0 0 1 .05-.02q.037 0 .053.023.015.023.031.072' style='fill-rule:nonzero' transform='matrix(8.39799 0 0 12.455 18.94 25.977)'/%3E%3C/svg%3E")}.ag-icon-cut:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='m19 3-6 6 2 2 7-7V3m-10 9.5a.503.503 0 0 1-.5-.5c0-.274.226-.5.5-.5s.5.226.5.5-.226.5-.5.5M6 20c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2M6 8c-1.097 0-2-.903-2-2a2 2 0 0 1 2-2c1.097 0 2 .903 2 2a2 2 0 0 1-2 2m3.64-.36c.23-.5.36-1.05.36-1.64 0-2.194-1.806-4-4-4S2 3.806 2 6s1.806 4 4 4c.59 0 1.14-.13 1.64-.36L10 12l-2.36 2.36C7.14 14.13 6.59 14 6 14c-2.194 0-4 1.806-4 4s1.806 4 4 4 4-1.806 4-4c0-.59-.13-1.14-.36-1.64L12 14l7 7h3v-1z' style='fill-rule:nonzero' transform='translate(4 4)'/%3E%3C/svg%3E")}.ag-icon-desc:before,.ag-icon-down:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Edesc%3C/title%3E%3Cpath d='m26.667 16-1.88-1.88-7.453 7.44V5.333h-2.667V21.56l-7.44-7.453L5.334 16l10.667 10.667L26.668 16z'/%3E%3C/svg%3E")}.ag-icon-excel:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M384 131.9c-7.753-8.433-110.425-128.473-114.9-133L48-.1C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48zm-35.9 2.1H257V27.9zM30 479V27h200l1 105c0 13.3-1.3 29 12 29h111l1 318z' style='fill-rule:nonzero' transform='matrix(.06285 0 0 .06285 3.934 -.054)'/%3E%3Cpath d='m.052-.139.16-.234-.135-.208a.4.4 0 0 1-.028-.052.1.1 0 0 1-.01-.042.05.05 0 0 1 .018-.037.07.07 0 0 1 .045-.016q.03 0 .047.018a1 1 0 0 1 .047.066l.107.174.115-.174.024-.038.019-.026.021-.015a.1.1 0 0 1 .027-.005.06.06 0 0 1 .044.016.05.05 0 0 1 .018.039q0 .033-.038.089l-.141.211.152.234a.3.3 0 0 1 .03.051.1.1 0 0 1 .009.038.1.1 0 0 1-.008.031.1.1 0 0 1-.024.023.1.1 0 0 1-.034.008.1.1 0 0 1-.035-.008.1.1 0 0 1-.023-.022L.427-.067.301-.265l-.134.204-.022.034-.016.019a.1.1 0 0 1-.022.015.1.1 0 0 1-.03.005.06.06 0 0 1-.044-.016.06.06 0 0 1-.017-.047q0-.036.036-.088' style='fill-rule:nonzero' transform='matrix(17.82892 0 0 16.50777 10.371 25.928)'/%3E%3C/svg%3E")}.ag-icon-expanded:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eexpanded%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E")}.ag-icon-eye-slash:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye-slash%3C/title%3E%3Cpath d='M21.106 15.088A5.19 5.19 0 0 0 16 10.814a5.17 5.17 0 0 0-3.668 1.522L9.866 9.868a12.2 12.2 0 0 1 6.133-1.646c5.186 0 9.614 3.225 11.408 7.778a12.34 12.34 0 0 1-5.276 6.133l-2.468-2.466a5.17 5.17 0 0 0 1.449-2.802h-2.123c-.148.508-.42.964-.782 1.33l-1.33-1.33h-2.514l2.196 2.196q-.272.049-.56.05a3.11 3.11 0 0 1-2.99-2.245h-2.123a5.19 5.19 0 0 0 7.3 3.836l2.247 2.247a12.2 12.2 0 0 1-4.434.828c-5.186 0-9.614-3.225-11.408-7.778a12.3 12.3 0 0 1 3.781-5.111l2.924 2.924a5.1 5.1 0 0 0-.404 1.275h4.206l-1.296-1.296a3.1 3.1 0 0 1 2.196-.903c1.404 0 2.587.924 2.976 2.199h2.13z'/%3E%3C/svg%3E")}.ag-icon-eye:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eeye%3C/title%3E%3Cpath d='M16 8.222c-5.186 0-9.614 3.225-11.408 7.778 1.794 4.553 6.222 7.778 11.408 7.778S25.614 20.553 27.408 16C25.614 11.447 21.186 8.222 16 8.222m0 12.964c-2.862 0-5.186-2.324-5.186-5.186s2.324-5.186 5.186-5.186 5.186 2.324 5.186 5.186-2.324 5.186-5.186 5.186m0-8.297c-1.721 0-3.111 1.39-3.111 3.111s1.39 3.111 3.111 3.111 3.111-1.39 3.111-3.111-1.39-3.111-3.111-3.111'/%3E%3C/svg%3E")}.ag-icon-filter:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efilter%3C/title%3E%3Cpath d='M13.333 24h5.333v-2.667h-5.333zM4 8v2.667h24V8zm4 9.333h16v-2.667H8z'/%3E%3C/svg%3E")}.ag-icon-first:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Efirst%3C/title%3E%3Cpath d='M24.273 22.12 18.153 16l6.12-6.12L22.393 8l-8 8 8 8zM7.727 8h2.667v16H7.727z'/%3E%3C/svg%3E")}.ag-icon-group:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egroup%3C/title%3E%3Cpath d='M18.667 21.333h8.889A3.555 3.555 0 0 1 24 24.889h-5.333zm8.888-7.111v3.556h-8.889v-3.556zM24 7.111a3.555 3.555 0 0 1 3.556 3.556h-16V7.111zm-8.889 17.778h-3.556v-3.556h3.556zm0-7.111h-3.556v-3.556h3.556zM8 10.667H4.444A3.555 3.555 0 0 1 8 7.111z'/%3E%3C/svg%3E")}.ag-icon-last:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elast%3C/title%3E%3Cpath d='m7.727 9.88 6.12 6.12-6.12 6.12L9.607 24l8-8-8-8zM21.607 8h2.667v16h-2.667z'/%3E%3C/svg%3E")}.ag-icon-left:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eleft%3C/title%3E%3Cpath d='M26.667 14.667H10.44l7.453-7.453L16 5.334 5.333 16.001 16 26.668l1.88-1.88-7.44-7.453h16.227v-2.667z'/%3E%3C/svg%3E")}.ag-icon-linked:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Elinked%3C/title%3E%3Cpath d='M5.2 16a4.136 4.136 0 0 1 4.133-4.133h5.333V9.334H9.333c-3.68 0-6.667 2.987-6.667 6.667s2.987 6.667 6.667 6.667h5.333v-2.533H9.333A4.136 4.136 0 0 1 5.2 16.002zm5.467 1.333h10.667v-2.667H10.667zm12-8h-5.333v2.533h5.333c2.28 0 4.133 1.853 4.133 4.133s-1.853 4.133-4.133 4.133h-5.333v2.533h5.333c3.68 0 6.667-2.987 6.667-6.667s-2.987-6.667-6.667-6.667z'/%3E%3C/svg%3E")}.ag-icon-loading:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eloading%3C/title%3E%3Cpath d='m17.778 11.708 3.25-3.251 2.516 2.516-3.251 3.25h4.597v3.556h-4.597l3.251 3.25-2.516 2.516-3.25-3.251v4.597h-3.556v-4.597l-3.25 3.251-2.516-2.516 3.251-3.25H7.11v-3.556h4.597l-3.251-3.25 2.516-2.516 3.25 3.251V7.111h3.556zm-3.251 7.847h2.944l2.084-2.084v-2.944l-2.084-2.084h-2.944l-2.084 2.084v2.944z'/%3E%3C/svg%3E")}.ag-icon-maximize:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emaximize%3C/title%3E%3Cpath d='M4 4h24v2.667H4z'/%3E%3C/svg%3E")}.ag-icon-menu:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Emenu%3C/title%3E%3Cpath d='M4 24h24v-2.667H4zm0-6.667h24v-2.667H4zM4 8v2.667h24V8z'/%3E%3C/svg%3E")}.ag-icon-menu-alt:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M16 26.667a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 24q0-1.1.784-1.883A2.57 2.57 0 0 1 16 21.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 16q0-1.1.784-1.883A2.57 2.57 0 0 1 16 13.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784m0-8a2.57 2.57 0 0 1-1.883-.784A2.57 2.57 0 0 1 13.333 8q0-1.1.784-1.883A2.57 2.57 0 0 1 16 5.333q1.1 0 1.883.784.784.783.784 1.883t-.784 1.883a2.57 2.57 0 0 1-1.883.784'/%3E%3C/svg%3E")}.ag-icon-minimize:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eminimize%3C/title%3E%3Cpath d='M8 25.333h16V28H8z'/%3E%3C/svg%3E")}.ag-icon-minus:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658H7.901v-2.658z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-next:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enext%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E")}.ag-icon-none:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enone%3C/title%3E%3Cpath d='M4 24h16v-2.667H4zM4 8v2.667h24V8zm0 9.333h24v-2.667H4z'/%3E%3C/svg%3E")}.ag-icon-not-allowed:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Enot-allowed%3C/title%3E%3Cpath d='M16 2.667C8.64 2.667 2.667 8.64 2.667 16S8.64 29.333 16 29.333 29.333 23.36 29.333 16 23.36 2.667 16 2.667M5.333 16c0-5.893 4.773-10.667 10.667-10.667 2.467 0 4.733.84 6.533 2.253L7.586 22.533A10.54 10.54 0 0 1 5.333 16M16 26.667c-2.467 0-4.733-.84-6.533-2.253L24.414 9.467A10.54 10.54 0 0 1 26.667 16c0 5.893-4.773 10.667-10.667 10.667'/%3E%3C/svg%3E")}.ag-icon-paste:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epaste%3C/title%3E%3Cpath d='M25.333 4H19.76C19.2 2.453 17.733 1.333 16 1.333S12.8 2.453 12.24 4H6.667A2.675 2.675 0 0 0 4 6.667V28c0 1.467 1.2 2.667 2.667 2.667h18.667c1.467 0 2.667-1.2 2.667-2.667V6.667C28.001 5.2 26.801 4 25.334 4zM16 4c.733 0 1.333.6 1.333 1.333s-.6 1.333-1.333 1.333-1.333-.6-1.333-1.333S15.267 4 16 4m9.333 24H6.666V6.667h2.667v4h13.333v-4h2.667z'/%3E%3C/svg%3E")}.ag-icon-pin:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epin%3C/title%3E%3Cpath d='m11.106 22.093-4.444 4.444-1.259-1.259 4.444-4.444zm5.872-16.63 9.618 9.62-.962.962-.962-.962-7.694 3.847 1.924 1.924-2.74 2.74-7.696-7.696 2.741-2.74 1.924 1.925 3.847-7.696-.962-.962z'/%3E%3C/svg%3E")}.ag-icon-pivot:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Epivot%3C/title%3E%3Cpath d='M26.667 30.223H5.334a3.556 3.556 0 0 1-3.556-3.556V5.334a3.556 3.556 0 0 1 3.556-3.556h21.333a3.556 3.556 0 0 1 3.556 3.556v21.333a3.556 3.556 0 0 1-3.556 3.556m-16-8.89H5.334v5.333h5.333zm16-7.11H12.444v12.444h14.223zm-9.15 6.85-2.039 2.037 2.039 2.039-1.257 1.257-3.295-3.296 3.295-3.295q.63.628 1.257 1.257zm-6.85-6.85H5.334v5.333h5.333zm15.74 3.816-1.257 1.256-2.039-2.037-2.037 2.037-1.257-1.256 3.295-3.296zM10.667 5.333H5.334v5.333h5.333zm8.889 0h-7.112v5.333h7.112zm7.111 0h-5.333v5.333h5.333z'/%3E%3C/svg%3E")}.ag-icon-plus:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2' viewBox='0 0 32 32'%3E%3Cpath d='M6.572 6.572a13.32 13.32 0 0 0 0 18.856 13.32 13.32 0 0 0 18.856 0 13.32 13.32 0 0 0 0-18.856 13.32 13.32 0 0 0-18.856 0m17.527 8.099v2.658h-6.77v6.77h-2.658v-6.77h-6.77v-2.658h6.77v-6.77h2.658v6.77z' style='fill-rule:nonzero'/%3E%3C/svg%3E")}.ag-icon-previous:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eprevious%3C/title%3E%3Cpath d='M20.94 9.88 19.06 8l-8 8 8 8 1.88-1.88L14.833 16z'/%3E%3C/svg%3E")}.ag-icon-right:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eright%3C/title%3E%3Cpath d='m16 5.333-1.88 1.88 7.44 7.453H5.333v2.667H21.56l-7.44 7.453 1.88 1.88 10.667-10.667L16 5.332z'/%3E%3C/svg%3E")}.ag-icon-save:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esave%3C/title%3E%3Cpath d='M25.333 16v9.333H6.666V16H3.999v9.333C3.999 26.8 5.199 28 6.666 28h18.667C26.8 28 28 26.8 28 25.333V16zm-8 .893 3.453-3.44 1.88 1.88L15.999 22l-6.667-6.667 1.88-1.88 3.453 3.44V4h2.667v12.893z'/%3E%3C/svg%3E")}.ag-icon-small-down:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-down%3C/title%3E%3Cpath d='M9.333 12.667 16 19.334l6.667-6.667H9.334z'/%3E%3C/svg%3E")}.ag-icon-small-left:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-left%3C/title%3E%3Cpath d='M19.333 9.333 12.666 16l6.667 6.667V9.334z'/%3E%3C/svg%3E")}.ag-icon-small-right:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-right%3C/title%3E%3Cpath d='M12.667 22.667 19.334 16l-6.667-6.667v13.333z'/%3E%3C/svg%3E")}.ag-icon-small-up:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Esmall-up%3C/title%3E%3Cpath d='M9.333 19.333 16 12.666l6.667 6.667H9.334z'/%3E%3C/svg%3E")}.ag-icon-tick:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etick%3C/title%3E%3Cpath d='m11.727 21.167-5.56-5.56-1.893 1.88 7.453 7.453 16-16-1.88-1.88z'/%3E%3C/svg%3E")}.ag-icon-tree-closed:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-closed%3C/title%3E%3Cpath d='m12.94 8-1.88 1.88L17.167 16l-6.107 6.12L12.94 24l8-8z'/%3E%3C/svg%3E")}.ag-icon-tree-indeterminate:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-indeterminate%3C/title%3E%3Cpath d='M6.667 14.667h18.667v2.667H6.667z'/%3E%3C/svg%3E")}.ag-icon-tree-open:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Etree-open%3C/title%3E%3Cpath d='M22.12 11.06 16 17.167 9.88 11.06 8 12.94l8 8 8-8z'/%3E%3C/svg%3E")}.ag-icon-unlinked:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Eunlinked%3C/title%3E%3Cpath d='M22.667 9.333h-5.333v2.533h5.333a4.136 4.136 0 0 1 4.133 4.133c0 1.907-1.307 3.507-3.08 3.973l1.947 1.947c2.173-1.107 3.667-3.32 3.667-5.92a6.67 6.67 0 0 0-6.667-6.667zm-1.334 5.334h-2.92l2.667 2.667h.253zM2.667 5.693 6.814 9.84A6.65 6.65 0 0 0 2.667 16a6.67 6.67 0 0 0 6.667 6.667h5.333v-2.533H9.334a4.136 4.136 0 0 1-4.133-4.133c0-2.12 1.613-3.867 3.68-4.093l2.76 2.76h-.973v2.667h3.64l3.027 3.027v2.307h2.307l5.347 5.333 1.68-1.68L4.362 4.002 2.669 5.695z'/%3E%3C/svg%3E")}.ag-icon-up:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Easc%3C/title%3E%3Cpath d='m5.333 16 1.88 1.88 7.453-7.44v16.227h2.667V10.44l7.44 7.453L26.666 16 15.999 5.333z'/%3E%3C/svg%3E")}.ag-icon-grip:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctitle%3Egrip%3C/title%3E%3Cpath d='M26.667 12H5.334v2.667h21.333zM5.333 20h21.333v-2.667H5.333z'/%3E%3C/svg%3E")}.ag-icon-settings:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='%23000' d='M30 8h-4.1c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2v2h14.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30zm-9 4c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3M2 24h4.1c.5 2.3 2.5 4 4.9 4s4.4-1.7 4.9-4H30v-2H15.9c-.5-2.3-2.5-4-4.9-4s-4.4 1.7-4.9 4H2zm9-4c1.7 0 3 1.3 3 3s-1.3 3-3 3-3-1.3-3-3 1.3-3 3-3'/%3E%3C/svg%3E")}.ag-icon-column-arrow:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M11 4a1 1 0 0 1 1 1v22a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 13a1 1 0 0 1 1-1h23.5a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1' clip-rule='evenodd'/%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M2 4h18v24H2zm2 2v20h14V6zM26.793 13 23 9.207l1.414-1.414L29.621 13l-5.207 5.207L23 16.793z' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-un-pin:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' d='M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11'/%3E%3Cpath fill='currentColor' d='M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28zM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972z'/%3E%3C/svg%3E")}.ag-icon-pinned-top:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' d='M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22M3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536'/%3E%3C/svg%3E")}.ag-icon-pinned-bottom:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' d='M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22M12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536'/%3E%3C/svg%3E")}.ag-icon-chevron-up:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M3.479 10.521a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1-1.06 1.06l-3.47-3.47-3.47 3.47a.75.75 0 0 1-1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-chevron-down:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M12.521 5.461a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l3.47 3.47 3.47-3.47a.75.75 0 0 1 1.06 0' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-chevron-left:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M10.53 12.512a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-3.47 3.47 3.47 3.47a.75.75 0 0 1 0 1.06' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-chevron-right:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' viewBox='0 0 16 16'%3E%3Cpath fill='currentColor' fill-rule='evenodd' d='M5.47 3.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06L8.94 8 5.47 4.53a.75.75 0 0 1 0-1.06' clip-rule='evenodd'/%3E%3C/svg%3E")}.ag-icon-filter-add:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M18.666 24h-5.333v-2.667h5.333zM24 17.333H8v-2.667h16zm3.59-9.344h3.221v2.657h-3.22v3.22h-2.656v-3.22h-3.221V7.989h3.22V4.77h2.657zm-8.582 2.678H4V8h15.008z'/%3E%3C/svg%3E")}.ag-icon-edit:before{mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' fill='none' viewBox='0 0 32 32'%3E%3Cpath fill='currentColor' d='M6.222 25.778h1.611l14.834-14.811-1.611-1.611-14.834 14.81zM4 28v-4.733L22.644 4.656a2.26 2.26 0 0 1 1.567-.634q.423 0 .833.167.412.166.734.478l1.589 1.6q.333.322.483.733t.15.822q0 .423-.161.839-.162.416-.472.728L8.733 28zm17.856-17.833-.8-.811 1.61 1.61z'/%3E%3C/svg%3E")}`,gP=nr({feature:"iconSet",css:fhe});var HG={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},zG={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},phe=(t={})=>{let e="";for(let n of[...Object.keys(HG),...Object.keys(zG)]){let i=ghe(n,t.strokeWidth);e+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return e},ghe=(t,e=1.5)=>{let n=zG[t];if(n)return n;let i=HG[t];if(!i)throw new Error(`Missing icon data for ${t}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${e}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},mhe=(t={})=>nr({feature:"iconSet",css:()=>phe(t)});var vhe=mhe();var UG=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',yhe=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",Che=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){border-left:none;border-right:none;border-top:none}",GG={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"}};var bhe=()=>nr({feature:"inputStyle",params:ae(k({},GG),{inputBackgroundColor:mr,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Fa},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:vr(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0}),css:()=>UG+yhe}),whe=bhe(),_he=()=>nr({feature:"inputStyle",params:ae(k({},GG),{inputBackgroundColor:"transparent",inputBorder:{width:2,color:ki(.3)},inputPaddingStart:{ref:"spacing"},inputFocusBorder:"solid 2px var(--ag-accent-color)",inputDisabledTextColor:{ref:"textColor",mix:.5},inputDisabledBorder:"solid 1px var(--ag-border-color)",inputInvalidBorder:{width:2,color:{ref:"invalidColor",mix:.3}}}),css:()=>UG+Che}),She=_he(),WG='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}';var jG={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1};var xhe=()=>nr({feature:"tabStyle",params:ae(k({},jG),{tabBarBorder:!0,tabBarBackgroundColor:ki(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:mr}),css:WG}),Ehe=xhe(),Mhe=()=>nr({feature:"tabStyle",params:ae(k({},jG),{tabBarBackgroundColor:{ref:"chromeBackgroundColor"},tabSelectedUnderlineColor:{ref:"primaryColor"},tabSelectedUnderlineWidth:2,tabSelectedUnderlineTransitionDuration:0}),css:WG}),Rhe=Mhe();var Dhe=".ag-dnd-ghost,.ag-filter-toolpanel-header,.ag-filter-toolpanel-search,.ag-multi-filter-group-title-bar,.ag-panel-title-bar-title,.ag-status-bar{color:var(--ag-header-text-color);font-size:calc(var(--ag-font-size) - 1px);font-weight:600}.ag-column-drop-horizontal{background-color:color-mix(in srgb,var(--ag-background-color),var(--ag-foreground-color) 8%)}.ag-cell.ag-cell-inline-editing{background-color:var(--ag-background-color);background-image:linear-gradient(0deg,var(--ag-input-background-color),var(--ag-input-background-color));border:var(--ag-input-border)!important;border-width:1px!important;height:calc(var(--ag-row-height) + var(--ag-spacing)*3);padding:var(--ag-spacing);:where(.ag-row-last:not(.ag-row-first)) &{bottom:0}:where(.ag-has-focus) &{border:var(--ag-input-focus-border)!important;border-width:1px!important}}.ag-advanced-filter-builder-button,.ag-standard-button{text-transform:uppercase}.ag-status-bar{border:solid var(--ag-border-width) var(--ag-border-color)}.ag-list-item-hovered:after{background-color:var(--ag-primary-color)}.ag-pill-button:hover{color:var(--ag-primary-color)}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-primary-color)}.ag-filter-add-button,.ag-filter-add-button:hover{border-bottom:2px solid var(--ag-primary-color)}",The=()=>kG().withPart(NG).withPart(VG).withPart(vhe).withPart(Ehe).withPart(whe).withPart(AG).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),Ahe=The();var Ihe=()=>{let t={tabSelectedUnderlineColor:{ref:"primaryColor"},sideButtonSelectedUnderlineColor:{ref:"primaryColor"},buttonTextColor:{ref:"primaryColor"},rangeSelectionBackgroundColor:{ref:"primaryColor",mix:.2},rangeSelectionBorderColor:{ref:"primaryColor"},rangeSelectionHighlightColor:{ref:"primaryColor",mix:.5},rangeHeaderHighlightColor:{ref:"foregroundColor",mix:.08},rowNumbersSelectedColor:{ref:"primaryColor",mix:.5},inputFocusBorder:{width:2,color:{ref:"primaryColor"}},pickerButtonFocusBorder:{width:1,color:{ref:"primaryColor"}},cellEditingBorder:{color:{ref:"primaryColor"}},menuBackgroundColor:{ref:"backgroundColor"},sideButtonBarBackgroundColor:mr,sideButtonSelectedBackgroundColor:"transparent",sideButtonBarTopPadding:{calc:"spacing * 4"},headerColumnResizeHandleColor:"none",headerBackgroundColor:{ref:"backgroundColor"},rowHoverColor:ki(.08),columnHoverColor:ki(.08),headerCellHoverBackgroundColor:ki(.05),statusBarLabelColor:ki(.63),statusBarLabelFontWeight:600,statusBarValueFontWeight:600,valueChangeValueHighlightBackgroundColor:"#00acc1",panelTitleBarIconColor:Is,advancedFilterBuilderButtonBarBorder:!1,filterPanelApplyButtonColor:{ref:"buttonTextColor"},filterPanelApplyButtonBackgroundColor:{ref:"buttonBackgroundColor"}},e=ae(k({},t),{primaryColor:"#3f51b5",foregroundColor:"#000D",headerTextColor:"#0008",accentColor:"#ff4081",checkboxUncheckedBorderColor:Is,checkboxIndeterminateBackgroundColor:Is,toggleButtonOffBackgroundColor:Is,selectedRowBackgroundColor:"rgba(33, 150, 243, 0.3)"}),n=ae(k({},t),{primaryColor:"#3f51b5",foregroundColor:"#fffD",headerTextColor:"#fff8",accentColor:"#bb86fc",checkboxUncheckedBorderColor:vr(.5),checkboxIndeterminateBackgroundColor:vr(.5),toggleButtonOffBackgroundColor:vr(.5),selectedRowBackgroundColor:"#bb86fc33"});return nr({feature:"styleMaterial",css:Dhe,params:e,modeParams:{light:e,dark:n,"dark-blue":n}})},Fhe=Ihe(),Phe=()=>kG().withPart(zue).withPart(NG).withPart(VG).withPart(gP).withPart(Rhe).withPart(She).withPart(Kue).withPart(Fhe).withParams({rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.75 * rowVerticalPaddingScale"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4.75 * headerVerticalPaddingScale"},widgetVerticalSpacing:{calc:"spacing * 1.75"},cellHorizontalPadding:{calc:"spacing * 3"},buttonHorizontalPadding:{ref:"spacing"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 2"},fontSize:13,iconSize:18,borderRadius:0,wrapperBorderRadius:0,wrapperBorder:!1,menuBorder:!1,dialogBorder:!1,panelTitleBarBorder:!1,tabSelectedBorderWidth:0,tabSelectedUnderlineTransitionDuration:.3,sidePanelBorder:!1,sideButtonSelectedBorder:!1,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineTransitionDuration:.3,sideButtonBorder:!1,buttonBorder:!1,buttonDisabledBorder:!1,focusShadow:{spread:4,color:ki(.16)},fontFamily:[{googleFont:"Roboto"},"-apple-system","BlinkMacSystemFont","Segoe UI","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],inputHeight:{calc:"max(iconSize, fontSize) + spacing * 3"},pickerButtonBorder:{width:1,color:"transparent"},headerFontWeight:600,headerFontSize:{calc:"fontSize - 1px"},checkboxBorderWidth:2,checkboxBorderRadius:2,toggleButtonWidth:34,toggleButtonSwitchInset:1,cardShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",popupShadow:"5px 5px 10px rgba(0, 0, 0, 0.3)"}),$G=Phe(),khe={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},Ohe={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},Lhe={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},bz={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},wz={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},_z={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},tF={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},Sz={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0},Nhe=0,Bhe=class extends he{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.paramsClass=`ag-theme-params-${++Nhe}`,this.globalCSS=[]}wireBeans(t){let{eGridDiv:e,gridOptions:n}=t;this.eGridDiv=e,this.eStyleContainer=n.themeStyleContainer??(e.getRootNode()===document?document.head:e),this.cssLayer=n.themeCssLayer,this.styleNonce=n.styleNonce}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(bz),this.getSizeEl(wz),this.getSizeEl(_z),this.getSizeEl(tF),this.getSizeEl(Sz),this.refreshRowBorderWidthVariable(),this.addDestroyFunc(()=>Tue(this)),this.mutationObserver=new MutationObserver(()=>{this.fireGridStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(Sz)}getRowBorderWidth(){return this.getCSSVariablePixelValue(tF)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(bz)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(wz)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(khe)}getCellPaddingLeft(){let t=this.getDefaultCellHorizontalPadding(),e=this.getCSSVariablePixelValue(Ohe),n=this.getCSSVariablePixelValue(Lhe);return t-1+n*e}getCellPadding(){let t=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+t}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(_z)}applyThemeClasses(t){let{gridTheme:e}=this,n="";if(e)n=`${this.paramsClass} ${e._getCssClass()}`;else{this.mutationObserver.disconnect();let i=this.eGridDiv;for(;i;){let r=!1;for(let o of Array.from(i.classList))o.startsWith("ag-theme-")&&(r=!0,n=n?`${n} ${o}`:o);r&&this.mutationObserver.observe(i,{attributes:!0,attributeFilter:["class"]}),i=i.parentElement}}for(let i of Array.from(t.classList))i.startsWith("ag-theme-")&&t.classList.remove(i);if(n){let i=t.className;t.className=i+(i?" ":"")+n}}refreshRowHeightVariable(){let{eGridDiv:t}=this,e=t.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return e!==null&&t.style.setProperty("--ag-line-height",null),-1;let i=`${n}px`;return e!=i?(t.style.setProperty("--ag-line-height",i),n):e!=""?parseFloat(e):-1}addGlobalCSS(t,e){this.gridTheme?kf(t,this.eStyleContainer,e,this.cssLayer,0,this.styleNonce):this.globalCSS.push([t,e])}getCSSVariablePixelValue(t){let e=this.lastKnownValues.get(t);if(e!=null)return e;let n=this.measureSizeEl(t);return n==="detached"||n==="no-styles"?(t.cacheDefault&&this.lastKnownValues.set(t,t.defaultValue),t.defaultValue):(this.lastKnownValues.set(t,n),n)}measureSizeEl(t){let e=this.getSizeEl(t);if(e.offsetParent==null)return"detached";let n=e.offsetWidth;return n===nF?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let t=this.eMeasurementContainer;return t||(t=this.eMeasurementContainer=On({tag:"div",cls:"ag-measurement-container"}),this.eGridDiv.appendChild(t)),t}getSizeEl(t){let e=this.sizeEls.get(t);if(e)return e;let n=this.getMeasurementContainer();e=On({tag:"div"});let{border:i,noWarn:r}=t;i?(e.className="ag-measurement-element-border",e.style.setProperty("--ag-internal-measurement-border",`var(${t.cssName}, solid ${nF}px)`)):e.style.width=`var(${t.cssName}, ${nF}px)`,n.appendChild(e),this.sizeEls.set(t,e);let o=this.measureSizeEl(t);o==="no-styles"&&!r&&Ee(9,{variable:t});let s=qd(this.beans,e,()=>{let a=this.measureSizeEl(t);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(t,a),a!==o&&(o=a,this.fireGridStylesChangedEvent(t.changeKey)))});return this.addDestroyFunc(()=>s()),e}fireGridStylesChangedEvent(t){t==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[t]:!0})}refreshRowBorderWidthVariable(){let t=this.getCSSVariablePixelValue(tF);this.eGridDiv.style.setProperty("--ag-internal-row-border-width",`${t}px`)}handleThemeGridOptionChange(){let{gos:t,eGridDiv:e,globalCSS:n,gridTheme:i}=this,r=t.get("theme"),o;if(r==="legacy")o=void 0;else{let s=r??Ahe;s instanceof OG?o=s:In(240,{theme:s})}if(o!==i){if(o){Due(this),xG(this.eStyleContainer,this.cssLayer,this.styleNonce);for(let[a,l]of n)kf(a,this.eStyleContainer,l,this.cssLayer,0,this.styleNonce);n.length=0}this.gridTheme=o,o?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce});let s=this.eParamsStyle;if(!s){s=this.eParamsStyle=On({tag:"style"});let a=this.gos.get("styleNonce");a&&s.setAttribute("nonce",a),e.appendChild(s)}fP||(s.textContent=o?._getPerGridCss(this.paramsClass)||""),this.applyThemeClasses(e),this.fireGridStylesChangedEvent("themeChanged")}o&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&In(r?106:239)}},nF=15538,Vhe=class extends he{constructor(){super(...arguments),this.beanName="eventSvc",this.globalSvc=new Gd}postConstruct(){let{globalListener:t,globalSyncListener:e}=this.beans;t&&this.addGlobalListener(t,!0),e&&this.addGlobalListener(e,!1)}addEventListener(t,e,n){this.globalSvc.addEventListener(t,e,n)}removeEventListener(t,e,n){this.globalSvc.removeEventListener(t,e,n)}addGlobalListener(t,e=!1){this.globalSvc.addGlobalListener(t,e)}removeGlobalListener(t,e=!1){this.globalSvc.removeGlobalListener(t,e)}dispatchLocalEvent(){}dispatchEvent(t){this.globalSvc.dispatchEvent(jt(this.gos,t))}dispatchEventOnce(t){this.globalSvc.dispatchEventOnce(jt(this.gos,t))}};function qG(t){return t?t.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}function LF(t,e){let n;if(Xn(t)&&qG(t)&&t.isPadding()){let i=t;n=i.getLeafColumns()[0];let r=n;for(;r!==i;)e++,r=r.getParent()}return{column:n||t,headerRowIndex:e}}var Hhe=class extends he{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){let t=this.beans;t.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});let e=zi(t);this.addManagedElementListeners(e,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(t,e){let n,{colModel:i,colGroupSvc:r,ctrlsSvc:o}=this.beans;if(typeof t=="string"?(n=i.getCol(t),n||(n=r?.getColumnGroup(t)??null)):n=t,!n)return null;let a=o.getHeaderRowContainerCtrl()?.getAllCtrls(),l=vn(a||[]).type==="filter",c=Ps(this.beans)-1,d=-1,u=n;for(;u;)d++,u=u.getParent();let h=d;return e&&l&&h===c-1&&h++,h===-1?null:{headerRowIndex:h,column:n}}navigateVertically(t,e){let n=this.beans.focusSvc,i=n.focusedHeader;if(!i)return!1;let{headerRowIndex:r}=i,o=i.column,s=Ps(this.beans),a=t==="UP",l=this.getHeaderRowType(r),{headerRowIndex:c,column:d,headerRowIndexWithoutSpan:u}=a?zhe(l,o,r):Uhe(l,o,r),h=!1;return c<0&&(c=0,d=o,h=!0),c>=s?(c=-1,this.currentHeaderRowWithoutSpan=-1):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!h&&!d?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:d},allowUserOverride:!0,event:e})}navigateHorizontally(t,e=!1,n){let{focusSvc:i,gos:r}=this.beans,o=k({},i.focusedHeader),s,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,t==="LEFT"!==r.get("enableRtl")?(a="Before",s=this.findHeader(o,a)):(a="After",s=this.findHeader(o,a));let l=r.getCallback("tabToNextHeader");if(e&&l){let c=i.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a});if(c){let{headerRowIndex:d}=i.focusedHeader||{};d!=null&&d!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=d)}return c}return s||!e?i.focusHeaderPosition({headerPosition:s,direction:a,fromTab:e,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(o,a,n)}focusNextHeaderRow(t,e,n){let i=t.headerRowIndex,r=null,o,s=this.beans;if(e==="Before"?i>0&&(o=i-1,this.currentHeaderRowWithoutSpan-=1,r=this.findColAtEdgeForHeaderRow(o,"end")):(o=i+1,this.currentHeaderRowWithoutSpan<Ps(s)?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1,r=this.findColAtEdgeForHeaderRow(o,"start")),!r)return!1;let{column:a,headerRowIndex:l}=LF(r.column,r?.headerRowIndex);return s.focusSvc.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:l},direction:e,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(t,e="After"){if(t.getPinned())return;let n;if(Xn(t)){let i=t.getDisplayedLeafColumns();n=e==="Before"?vn(i):i[0]}else n=t;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(t,e){let n,i,{colGroupSvc:r,visibleCols:o}=this.beans;if(Xn(t.column)?n=r?.getGroupAtDirection(t.column,e)??void 0:(i=`getCol${e}`,n=o[i](t.column)),!n)return;let{headerRowIndex:s}=t;if(this.getHeaderRowType(s)!=="filter"){let c=[n];for(;n.getParent();)n=n.getParent(),c.push(n);n=c[Math.max(0,c.length-1-s)]}let{column:a,headerRowIndex:l}=LF(n,s);return{column:a,headerRowIndex:l}}getHeaderRowType(t){let e=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}findColAtEdgeForHeaderRow(t,e){let{visibleCols:n,ctrlsSvc:i,colGroupSvc:r}=this.beans,o=n.allCols,s=o[e==="start"?0:o.length-1];if(!s)return;let l=i.getHeaderRowContainerCtrl(s.getPinned())?.getRowType(t);if(l=="group"){let c=r?.getColGroupAtLevel(s,t);return{headerRowIndex:t,column:c}}return{headerRowIndex:l==null?-1:t,column:s}}};function zhe(t,e,n){let i=t==="filter",r=t==="column",o=i?e:e.getParent(),s=n-1,a=s;if(r&&qG(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),s--;a=s,s<0&&(o=e,s=n,a=void 0)}return{column:o,headerRowIndex:s,headerRowIndexWithoutSpan:a}}function Uhe(t,e,n,i="After"){let r=e,o=n+1,s=o;if(t==="group"){let a=e.getDisplayedLeafColumns(),l=i==="After"?a[0]:vn(a),c=[],d=l;for(;d.getParent()!==e;)d=d.getParent(),c.push(d);if(r=l,l.isSpanHeaderHeight())for(let u=c.length-1;u>=0;u--){let h=c[u];if(!h.isPadding()){r=h;break}o++}else r=vn(c),r||(r=l)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:s}}var Ghe=class extends he{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(t){this.colModel=t.colModel,this.visibleCols=t.visibleCols,this.rowRenderer=t.rowRenderer,this.navigation=t.navigation,this.filterManager=t.filterManager,this.overlays=t.overlays}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.addDestroyFunc(dae(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;let t=this.focusedCell.column,e=this.colModel.getCol(t.getId());t!==e&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){let{gos:t,focusedCell:e}=this;return t.get("suppressFocusAfterRefresh")||t.get("suppressCellFocus")||!e||!this.doesRowOrCellHaveBrowserFocus()?null:e}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(Wn(this.beans),dG)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){let t=Wn(this.beans);return this.isDomDataPresentInHierarchy(t,Ax)?!0:this.isDomDataPresentInHierarchy(t,Ix)}isDomDataPresentInHierarchy(t,e){let n=t;for(;n;){if(iU(this.gos,n,e))return!0;n=n.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(t){let{rowIndex:e,rowPinned:n,column:i}=t,r={rowIndex:e,rowPinned:n,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:n});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.focusedCell==null)return;let t=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent(k({type:"cellFocusCleared"},t))}setFocusedCell(t){this.setFocusRecovered();let{column:e,rowIndex:n,rowPinned:i,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:s}=t,a=this.colModel.getCol(e);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:ka(i),column:a};let l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent(ae(k(k({type:"cellFocused"},l),this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams}),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o,sourceEvent:s})),this.previousCellFocusParams=l}isCellFocused(t){return this.focusedCell==null?!1:Wse(t,this.focusedCell)}isHeaderWrapperFocused(t){if(this.focusedHeader==null)return!1;let{column:e,rowCtrl:{rowIndex:n,pinned:i}}=t,{column:r,headerRowIndex:o}=this.focusedHeader;return e===r&&n===o&&i==r.getPinned()}focusHeaderPosition(t){if(this.setFocusRecovered(),zd(this.beans))return!1;let{direction:e,fromTab:n,allowUserOverride:i,event:r,fromCell:o,rowWithoutSpanValue:s}=t,{headerPosition:a}=t;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(a);if(i){let l=this.focusedHeader,c=Ps(this.beans);if(n){let d=this.gos.getCallback("tabToNextHeader");d&&(a=this.getHeaderPositionFromUserFunc({userFunc:d,direction:e,currentPosition:l,headerPosition:a,headerRowCount:c}))}else{let d=this.gos.getCallback("navigateToNextHeader");if(d&&r){let u={key:r.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:c,event:r};a=d(u)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:e,event:r,fromCell:o,rowWithoutSpanValue:s}):!1}focusHeaderPositionFromUserFunc(t){if(zd(this.beans))return!1;let{userFunc:e,headerPosition:n,direction:i,event:r}=t,o=this.focusedHeader,s=Ps(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:e,direction:i,currentPosition:o,headerPosition:n,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:e,direction:n,currentPosition:i,headerPosition:r,headerRowCount:o}=t,a=e({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:r,headerRowCount:o});return a===!0?i:a===!1?null:a}focusProvidedHeaderPosition(t){let{headerPosition:e,direction:n,fromCell:i,rowWithoutSpanValue:r,event:o}=t,{column:s,headerRowIndex:a}=e,{filterManager:l,ctrlsSvc:c,headerNavigation:d}=this.beans;if(a===-1)return l?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(e):this.focusGridView({column:s,event:o});d?.scrollToColumn(s,n);let h=c.getHeaderRowContainerCtrl(s.getPinned())?.focusHeader(e.headerRowIndex,s,o)||!1;return d&&h&&(r!=null||i)&&(d.currentHeaderRowWithoutSpan=r??-1),h}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleCols.allCols[0];if(!t)return!1;let{colGroupSvc:e}=this.beans;e&&t.getParent()&&(t=e.getColGroupAtLevel(t,0));let n=LF(t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;let e=Ps(this.beans)-1,n=vn(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:n},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(t,e){return this.focusedCell==null?!1:this.focusedCell.rowIndex===t&&this.focusedCell.rowPinned===ka(e)}focusOverlay(t){let e=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!e&&$d(e,t)}focusGridView(t){let{backwards:e=!1,canFocusOverlay:n=!0,event:i}=t;if(this.overlays?.isExclusive())return n&&this.focusOverlay(e);if(JF(this.beans))return e&&!zd(this.beans)?this.focusLastHeader():n&&this.focusOverlay(e)?!0:e?!1:Pf(this.beans,e);let r=e?qse(this.beans):$se(this.beans);if(r){let o=t.column??this.focusedHeader?.column,{rowIndex:s,rowPinned:a}=r,l=BU(this.beans,r);if(!o||!l||s==null)return!1;if(o.isSuppressNavigable(l)){let c=this.gos.get("enableRtl"),d;return!i||i.key===ne.TAB?d=c?ne.LEFT:ne.RIGHT:d=i.key,this.beans.navigation?.navigateToNextCell(null,d,{rowIndex:s,column:o,rowPinned:a||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:s,column:o,rowPinned:a}),e&&this.rowRenderer.getRowByPosition(r)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(r,e)||(this.setFocusedCell({rowIndex:s,column:o,rowPinned:ka(a),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:s,rowPinned:a,column:o})),!0}return!!(n&&this.focusOverlay(e)||e&&this.focusLastHeader())}focusAdvancedFilter(t){return this.advFilterFocusColumn=t?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,e){let n=(e?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return t?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Ps(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},Whe=class extends he{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.colAnimation=t.colAnimation}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){let{colAnimation:t}=this;t?.isActive()?t.executeLaterVMTurn(()=>{t.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let t=this.ctrlsSvc.get("center");if(!t||this.colAnimation?.isActive())return;let e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(e),this.updateScrollGap()}updateScrollGap(){let t=this.ctrlsSvc.get("center"),e=t.hasHorizontalScrollGap(),n=t.hasVerticalScrollGap();(this.horizontalScrollGap!==e||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=e,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(t){(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing)&&(this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){let t=this.gos.get("scrollbarWidth"),n=typeof t=="number"&&t>=0?t:Gre();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},jhe=class extends he{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;let{stateSvc:t,ctrlsSvc:e,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:t?.getState()??{}}),this.destroyCalled=!0,e.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},$he=new Set(["gridPreDestroyed","fillStart","pasteStart"]),qhe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset"];var KG=qhe.reduce((t,e)=>(t[e]=yoe(e),t),{}),py=(t,e)=>({tag:"span",ref:`eSort${t}`,cls:`ag-sort-indicator-icon ag-sort-${e} ag-hidden`,attrs:{"aria-hidden":"true"}}),Khe={tag:"span",cls:"ag-sort-indicator-container",children:[py("Order","order"),py("Asc","ascending-icon"),py("Desc","descending-icon"),py("Mixed","mixed-icon"),py("None","none-icon")]},mP=class extends ln{constructor(t){super(),this.eSortOrder=Fe,this.eSortAsc=Fe,this.eSortDesc=Fe,this.eSortMixed=Fe,this.eSortNone=Fe,t||this.setTemplate(Khe)}attachCustomElements(t,e,n,i,r){this.eSortOrder=t,this.eSortAsc=e,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r}setupSort(t,e=!1){if(this.column=t,this.suppressOrder=e,this.setupMultiSortIndicator(),!t.isSortable()&&!t.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t);let n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(t,e,n){if(e==null)return;let i=ks(t,this.beans,n);i&&e.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let{eSortAsc:t,eSortDesc:e,eSortNone:n,column:i,gos:r,beans:o}=this,s=o.sortSvc.getDisplaySortForColumn(i);if(t&&Zn(t,s==="asc",{skipAriaHidden:!0}),e&&Zn(e,s==="desc",{skipAriaHidden:!0}),n){let a=!i.getColDef().unSortIcon&&!r.get("unSortIcon"),l=s==null;Zn(n,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){let{eSortMixed:t,column:e,gos:n}=this;this.addInIcon("sortUnSort",t,e);let i=e.getColDef().showRowGroup;As(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){let{eSortMixed:t,beans:e,column:n}=this;if(t){let i=e.sortSvc.getDisplaySortForColumn(n)==="mixed";Zn(t,i,{skipAriaHidden:!0})}}updateSortOrder(){let{eSortOrder:t,column:e,beans:{sortSvc:n}}=this;if(!t)return;let i=n.getColumnsWithSortingOrdered(),r=n.getDisplaySortIndexForColumn(e)??-1,o=i.some(a=>n.getDisplaySortIndexForColumn(a)??!1),s=r>=0&&o;Zn(t,s,{skipAriaHidden:!0}),r>=0?t.textContent=(r+1).toString():Zr(t)}},Yhe={selector:"AG-SORT-INDICATOR",component:mP},Xhe=["asc","desc",null],Zhe=class extends he{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(t,e,n){let i=this.getNextSortDirection(t);this.setSortForColumn(t,i,e,n)}progressSortFromEvent(t,e){let i=this.gos.get("multiSortKey")==="ctrl"?e.ctrlKey||e.metaKey:e.shiftKey;this.progressSort(t,i,"uiColumnSorted")}setSortForColumn(t,e,n,i){e!=="asc"&&e!=="desc"&&(e=null);let{gos:r,showRowGroupCols:o}=this.beans,s=As(r),a=[t];if(s&&t.getColDef().showRowGroup){let u=o?.getSourceColumnsForGroupColumn?.(t)?.filter(h=>h.isSortable());u&&(a=[t,...u])}a.forEach(d=>this.setColSort(d,e,i));let l=(n||r.get("alwaysMultiSort"))&&!r.get("suppressMultiSort"),c=[];if(!l){let d=this.clearSortBarTheseColumns(a,i);c.push(...d)}this.updateSortIndex(t),c.push(...a),this.dispatchSortChangedEvents(i,c)}updateSortIndex(t){let{gos:e,colModel:n,showRowGroupCols:i}=this.beans,r=As(e),o=i?.getShowRowGroupCol(t.getId()),s=r&&o||t,a=this.getColumnsWithSortingOrdered();n.forAllCols(d=>this.setColSortIndex(d,null));let l=a.filter(d=>r&&d.getColDef().showRowGroup?!1:d!==s);(s.getSort()?[...l,s]:l).forEach((d,u)=>this.setColSortIndex(d,u))}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){let t=!1;return this.beans.colModel.forAllCols(e=>{e.getSort()&&(t=!0)}),t}dispatchSortChangedEvents(t,e){let n={type:"sortChanged",source:t};e&&(n.columns=e),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(t,e){let n=[];return this.beans.colModel.forAllCols(i=>{t.includes(i)||(i.getSort()&&n.push(i),this.setColSort(i,void 0,e))}),n}getNextSortDirection(t){let e=t.getColDef().sortingOrder??this.gos.get("sortingOrder")??Xhe,n=e.indexOf(t.getSort()),i=n<0,r=n==e.length-1;return i||r?e[0]:e[n+1]}getIndexedSortMap(){let{gos:t,colModel:e,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans,r=[];if(e.forAllCols(c=>{c.getSort()&&r.push(c)}),e.isPivotMode()){let c=As(t);r=r.filter(d=>{let u=!!d.getAggFunc(),h=!d.isPrimary(),f=c?n?.getShowRowGroupCol(d.getId()):d.getColDef().showRowGroup;return u||h||f})}let o=i?.columns.filter(c=>!!c.getSort())??[],s={};r.forEach((c,d)=>s[c.getId()]=d),r.sort((c,d)=>{let u=c.getSortIndex(),h=d.getSortIndex();if(u!=null&&h!=null)return u-h;if(u==null&&h==null){let f=s[c.getId()],p=s[d.getId()];return f>p?1:-1}else return h==null?-1:1});let a=As(t)&&!!o.length;a&&(r=[...new Set(r.map(c=>n?.getShowRowGroupCol(c.getId())??c))]);let l=new Map;return r.forEach((c,d)=>l.set(c,d)),a&&o.forEach(c=>{let d=n.getShowRowGroupCol(c.getId());l.set(c,l.get(d))}),l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,t],[,e])=>t-e).map(([t])=>t)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),colId:t.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),column:t}))}canColumnDisplayMixedSort(t){let e=As(this.gos),n=!!t.getColDef().showRowGroup;return e&&n}getDisplaySortForColumn(t){let e=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!e?.length)return t.getSort();let i=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,r=i[0].getSort();return i.every(s=>s.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}setupHeader(t,e,n){let i=0;t.addManagedListeners(e,{movingChanged:()=>{i=Date.now()}}),n&&t.addManagedElementListeners(n,{click:o=>{let s=e.isMoving(),l=Date.now()-i<50;s||l||this.progressSortFromEvent(e,o)}});let r=()=>{let o=e.getSort();if(t.toggleCss("ag-header-cell-sorted-asc",o==="asc"),t.toggleCss("ag-header-cell-sorted-desc",o==="desc"),t.toggleCss("ag-header-cell-sorted-none",!o),e.getColDef().showRowGroup){let l=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e)?.every(c=>e.getSort()==c.getSort());t.toggleCss("ag-header-cell-sorted-mixed",l)}};t.addManagedEventListeners({sortChanged:r,columnRowGroupChanged:r})}initCol(t){let{sort:e,initialSort:n,sortIndex:i,initialSortIndex:r}=t.colDef;e!==void 0?(e==="asc"||e==="desc")&&(t.sort=e):(n==="asc"||n==="desc")&&(t.sort=n),i!==void 0?i!==null&&(t.sortIndex=i):r!==null&&(t.sortIndex=r)}updateColSort(t,e,n){e!==void 0&&(e==="desc"||e==="asc"?this.setColSort(t,e,n):this.setColSort(t,void 0,n))}setColSort(t,e,n){t.sort!==e&&(t.sort=e,t.dispatchColEvent("sortChanged",n)),t.dispatchStateUpdatedEvent("sort")}setColSortIndex(t,e){t.sortIndex=e,t.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(t){return new mP(t)}getSortIndicatorSelector(){return Yhe}},iF={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};var Qhe={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:t,editable:e})=>e?typeof t=="string"?iF[t]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:t})=>typeof t!="string"?null:iF[t],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:t,cellEditor:e})=>t&&!e?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:t})=>t&&typeof t!="string"&&typeof t!="boolean"?"CustomFilter":typeof t=="string"?iF[t]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:t=>{let e=["columnsMenuTab","generalMenuTab"];return t.menuTabs?.some(n=>e.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",spanRows:"CellSpan"};var YG=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"];var Jhe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"SharedRowGrouping",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"};var efe=0,tfe=0,nfe=class extends he{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.gridInstanceId=tfe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new Gd,this.globalEventHandlerFactory=t=>(e,n)=>{if(!this.isAlive())return;let i=$he.has(e);if(i&&!t||!i&&t||!ife(e))return;let r=(o,s)=>{let a=KG[o],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(s))};if(this.gridReadyFired)r(e,n);else if(e==="gridReady"){r(e,n),this.gridReadyFired=!0;for(let o of this.queueEvents)r(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:e,event:n})}}wireBeans(t){this.gridOptions=t.gridOptions,this.validation=t.validation,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:t})=>{this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(t){return this.gridOptions[t]??Ere[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return Ve(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(n=>t(this.addGridCommonParams(n)))}updateGridOptions({options:t,force:e,source:n="api"}){let i={id:efe++,properties:[]},r=[],{gridOptions:o,validation:s}=this;for(let a of Object.keys(t)){let l=t[a];s?.warnOnInitialPropertyUpdate(n,a);let c=e||typeof l=="object"&&n==="api",d=o[a];if(c||d!==l){o[a]=l;let u={type:a,currentValue:l,previousValue:d,changeSet:i,source:n};r.push(u)}}this.validateGridOptions(this.gridOptions),i.properties=r.map(a=>a.type),r.forEach(a=>{Ey(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)})}addPropertyEventListener(t,e){this.propEventSvc.addEventListener(t,e)}removePropertyEventListener(t,e){this.propEventSvc.removeEventListener(t,e)}getDomDataKey(){return this.domDataKey}addGridCommonParams(t){return t.api=this.api,t.context=this.gridOptionsContext,t}validateOptions(t,e){for(let n of Object.keys(t)){let i=t[n];if(i==null||i===!1)continue;let r=e[n];typeof r=="function"&&(r=r(t,this.gridOptions,this.beans)),r&&this.assertModuleRegistered(r,n)}}validateGridOptions(t){this.validateOptions(t,Jhe),this.validation?.processGridOptions(t)}validateColDef(t,e,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(e))&&(this.validateOptions(t,Qhe),this.validation?.validateColDef(t))}assertModuleRegistered(t,e){let n=Array.isArray(t)?t.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(t);return n||In(200,ae(k({},this.getModuleErrorParams()),{moduleName:t,reasonOrId:e})),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:LU(),rowModelType:this.get("rowModelType"),isUmd:Bse()}}isModuleRegistered(t){return _F(t,this.gridId,this.get("rowModelType"))}};function ife(t){return!!KG[t]}function XG(t){let e={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:e},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:e},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:e},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var rfe=XG(!0),ofe=XG(!1),sfe=class extends ln{constructor(){super(...arguments),this.eFilter=Fe,this.eFilterButton=Fe,this.eSortIndicator=Fe,this.eMenu=Fe,this.eLabel=Fe,this.eText=Fe,this.eSortOrder=Fe,this.eSortAsc=Fe,this.eSortDesc=Fe,this.eSortMixed=Fe,this.eSortNone=Fe,this.isLoadingInnerComponent=!1}refresh(t){let e=this.params;if(this.params=t,this.workOutTemplate(t,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||t.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||e.enableFilterButton!=t.enableFilterButton||e.enableFilterIcon!=t.enableFilterIcon)return!1;if(this.innerHeaderComponent){let n=k({},t);Ar(n,t.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(t);return!0}workOutTemplate(t,e){let n=t.template;return n?n?.trim?n.trim():n:e?rfe:ofe}init(t){this.params=t;let{sortSvc:e,touchSvc:n,rowNumbersSvc:i,userCompFactory:r}=this.beans,o=e?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(t,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),n?.setupForHeader(this),this.setMenu(),this.setupSort(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(r,t),this.setDisplayName(t)}workOutInnerHeaderComponent(t,e){let n=Cse(t,e,e);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(t){let{displayName:e}=t,n=this.currentDisplayName;this.currentDisplayName=e,!(!this.eText||n===e||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=Fy(e))}addInIcon(t,e,n){let i=ks(t,this.beans,n);i&&e.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){yr(this.eMenu),this.eMenu=void 0;return}let{gos:t,eMenu:e,params:n}=this,i=Xr(t);this.addInIcon(i?"menu":"menuAlt",e,n.column),e.classList.toggle("ag-header-menu-icon",!i);let r=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=r,this.addManagedElementListeners(e,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(r)}toggleMenuAlwaysShow(t){this.eMenu?.classList.toggle("ag-header-menu-always-show",t)}showColumnMenu(t){let{currentSuppressMenuHide:e,params:n}=this;e||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(t,()=>{e||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(t){let{params:e,gos:n,beans:i,eMenu:r,eFilterButton:o}=this,s=e.column,a=Xr(n);if(t&&!a){if(i.menuSvc?.isFilterMenuInHeaderEnabled(s))return e.showFilter(o??r??this.getGui()),!0}else if(e.enableMenu)return this.showColumnMenu(r??o??this.getGui()),!0;return!1}setupSort(){let{sortSvc:t}=this.beans;if(!t)return;let{enableSorting:e,column:n}=this.params;if(this.currentSort=e,!this.eSortIndicator){this.eSortIndicator=this.createBean(t.createSortIndicator(!0));let{eSortIndicator:i,eSortOrder:r,eSortAsc:o,eSortDesc:s,eSortMixed:a,eSortNone:l}=this;i.attachCustomElements(r,o,s,a,l)}this.eSortIndicator.setupSort(n),this.currentSort&&t.setupHeader(this,n,this.eLabel)}setupFilterIcon(){let{eFilter:t,params:e}=this;if(!t)return;let n=()=>{let i=e.column.isFilterActive();Zn(t,i,{skipAriaHidden:!0})};this.configureFilter(e.enableFilterIcon,t,n,"filterActive")}setupFilterButton(){let{eFilterButton:t,params:e}=this;if(!t)return;this.configureFilter(e.enableFilterButton,t,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(t,{click:()=>e.showFilter(t)}):this.eFilterButton=void 0}configureFilter(t,e,n,i){if(!t)return yr(e),!1;let r=this.params.column;return this.addInIcon(i,e,r),this.addManagedListeners(r,{filterChanged:n}),n(),!0}onFilterChangedButton(){let t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){let{eFilterButton:e,eMenu:n}=this;return t?e??n??this.getGui():n??e??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},afe={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},lfe=class extends ln{constructor(){super(afe),this.agOpened=Fe,this.agClosed=Fe,this.agLabel=Fe,this.isLoadingInnerComponent=!1}init(t){let{userCompFactory:e,touchSvc:n}=this.beans;this.params=t,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(e,t),this.setupLabel(t),this.addGroupExpandIcon(t),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&Ee(89)}workOutInnerHeaderGroupComponent(t,e){let n=wse(t,e,e);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){let{agOpened:t,agClosed:e,params:{columnGroup:n},beans:i}=this;this.addInIcon("columnGroupOpened",t),this.addInIcon("columnGroupClosed",e);let r=l=>{if(Oa(l))return;let c=!n.isExpanded();i.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(i,e,r),this.addTouchAndClickListeners(i,t,r);let o=l=>{jd(l)};this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:r}),this.updateIconVisibility();let s=n.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(s,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(t,e,n){t.touchSvc?.setupForHeaderGroupElement(this,e,n),this.addManagedElementListeners(e,{click:n})}updateIconVisibility(){let{agOpened:t,agClosed:e,params:{columnGroup:n}}=this;if(n.isExpandable()){let i=n.isExpanded();Zn(t,i),Zn(e,!i)}else Zn(t,!1),Zn(e,!1)}addInIcon(t,e){let n=ks(t,this.beans,null);n&&e.appendChild(n)}addGroupExpandIcon(t){if(!t.columnGroup.isExpandable()){let{agOpened:e,agClosed:n}=this;Zn(e,!1),Zn(n,!1);return}}setupLabel(t){let{displayName:e,columnGroup:n}=t,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Ve(e)&&!i&&(this.agLabel.textContent=Fy(e)),this.toggleCss("ag-sticky-label",!n.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},cfe={moduleName:"ColumnHeaderComp",version:Rt,userComponents:{agColumnHeader:sfe},icons:{menu:"menu",menuAlt:"menu-alt"}},dfe={moduleName:"ColumnGroupHeaderComp",version:Rt,userComponents:{agColumnGroupHeader:lfe},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},ufe=class extends he{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(t){this.scrollGoingDown=t>=this.lastScrollTop,t===0&&(this.scrollGoingDown=!0),this.lastScrollTop=t}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&Ee(92)}createTask(t,e,n,i,r=!1){this.verify();let o=n;i&&this.batchFrameworkComps&&(o="f1");let s={task:t,index:e,createOrder:++this.taskCount,deferred:r};this.addTaskToList(this[o],s),this.schedule()}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;let e=this.scrollGoingDown?1:-1;t.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?e*(i.index-n.index):i.createOrder-n.createOrder),t.sorted=!0}addDestroyTask(t){this.verify(),this.destroyTasks.push(t),this.schedule()}executeFrame(t){let{p1:e,p2:n,f1:i,destroyTasks:r,beans:o}=this,{ctrlsSvc:s,frameworkOverrides:a}=o,l=e.list,c=n.list,d=i.list,u=Date.now(),h=0,f=t<=0,p=s.getScrollFeature();for(;f||h<t;){if(!p.scrollGridIfNeeded()){let m;if(l.length)this.sortTaskList(e),m=l.pop().task;else if(c.length)this.sortTaskList(n),m=c.pop().task;else if(d.length)a.wrapOutgoing(()=>{for(;(f||h<t)&&!p.scrollGridIfNeeded();){if(d.length)this.sortTaskList(i),m=d.pop().task,m();else break;h=Date.now()-u}}),m=()=>{};else if(r.length)m=r.pop();else break;m()}h=Date.now()-u}l.length||c.length||d.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let t=this.executeFrame.bind(this,60);Ba(this.beans,t)}isQueueEmpty(){return!this.ticking}},hfe={moduleName:"AnimationFrame",version:Rt,beans:[ufe]},ffe=class extends he{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(t,e){this.mockContextMenu(t,t.eBodyViewport,e)}mockHeaderContextMenu(t,e){this.mockContextMenu(t,t.eGui,e)}mockRowContextMenu(t){if(!Bd())return;let e=(n,i,r)=>{let{rowCtrl:o,cellCtrl:s}=t.getControlsForEventTarget(r?.target??null);s?.column&&s.dispatchCellContextMenuEvent(r??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,r,o,s)};this.mockContextMenu(t,t.element,e)}handleCellDoubleClick(t,e){return(()=>{if(!Bd()||pU("dblclick"))return!1;let i=Date.now(),r=i-t.lastIPadMouseClickEvent<200;return t.lastIPadMouseClickEvent=i,r})()?(t.onCellDoubleClicked(e),e.preventDefault(),!0):!1}setupForHeader(t){let{gos:e,sortSvc:n,menuSvc:i}=this.beans;if(e.get("suppressTouch"))return;let{params:r,eMenu:o,eFilterButton:s}=t,a=new bf(t.getGui(),!0),l=t.shouldSuppressMenuHide(),c=l&&Ve(o)&&r.enableMenu,d=c?new bf(o,!0):a;if(r.enableMenu||i?.isHeaderContextMenuEnabled(r.column)){let u=c?"tap":"longTap",h=f=>r.showColumnMenuAfterMouseClick(f.touchStart);t.addManagedListeners(d,{[u]:h})}if(r.enableSorting){let u=h=>{let f=h.touchStart.target;l&&(o?.contains(f)||s?.contains(f))||n?.progressSort(r.column,!1,"uiColumnSorted")};t.addManagedListeners(a,{tap:u})}if(r.enableFilterButton&&s){let u=new bf(s,!0);t.addManagedListeners(u,{tap:()=>r.showFilter(s)}),t.addDestroyFunc(()=>u.destroy())}t.addDestroyFunc(()=>a.destroy()),c&&t.addDestroyFunc(()=>d.destroy())}setupForHeaderGroup(t){let e=t.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(e.columnGroup.getProvidedColumnGroup())){let n=new bf(e.eGridHeader,!0),i=r=>e.showColumnMenuAfterMouseClick(r.touchStart);t.addManagedListeners(n,{longTap:i}),t.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(t,e,n){let i=new bf(e,!0);t.addManagedListeners(i,{tap:n}),t.addDestroyFunc(()=>i.destroy())}mockContextMenu(t,e,n){if(!Bd())return;let i=new bf(e),r=o=>{Ay(this.gos,o.touchEvent)&&n(void 0,o.touchStart,o.touchEvent)};t.addManagedListeners(i,{longTap:r}),t.addDestroyFunc(()=>i.destroy())}},pfe={moduleName:"Touch",version:Rt,beans:[ffe]},gfe=class extends he{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(t){this.rowSpanSvc=t.rowSpanSvc}getNextCellToFocus(t,e,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){let n=t===ne.UP,i=t===ne.DOWN,r=t===ne.LEFT,o,s,{pageBounds:a,gos:l,visibleCols:c}=this.beans;if(n||i)s=n?a.getFirstRow():a.getLastRow(),o=e.column;else{let d=l.get("enableRtl");s=e.rowIndex,o=(r!==d?c.allCols:[...c.allCols].reverse()).find(h=>this.isCellGoodToFocusOn({rowIndex:s,rowPinned:null,column:h}))}return o?{rowIndex:s,rowPinned:null,column:o}:null}getNextCellToFocusWithoutCtrlPressed(t,e){let n=e,i=!1;for(;!i;){switch(t){case ne.UP:n=this.getCellAbove(n);break;case ne.DOWN:n=this.getCellBelow(n);break;case ne.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case ne.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,Ee(8,{key:t});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(t){let e=t.column,n,{pinnedRowModel:i,rowModel:r}=this.beans;switch(t.rowPinned){case"top":n=i?.getPinnedTopRow(t.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(t.rowIndex);break;default:n=r.getRow(t.rowIndex);break}return n?!this.isSuppressNavigable(e,n):!1}getCellToLeft(t){if(!t)return null;let e=this.beans.visibleCols.getColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;let e=this.beans.visibleCols.getColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellBelow(t){if(!t)return null;let e=this.rowSpanSvc?.getCellEnd(t)??t,n=W6(this.beans,e);return n?{rowIndex:n.rowIndex,column:t.column,rowPinned:n.rowPinned}:null}getCellAbove(t){if(!t)return null;let e=this.rowSpanSvc?.getCellStart(t)??t,n=Rx(this.beans,{rowIndex:e.rowIndex,rowPinned:e.rowPinned});return n?{rowIndex:n.rowIndex,column:t.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){let{visibleCols:e,pagination:n}=this.beans,i=e.allCols,r=t.rowIndex,o=t.rowPinned,s=e.getColAfter(t.column);if(!s){s=i[0];let a=W6(this.beans,t);if(di(a)||!a.rowPinned&&!(n?.isRowInPage(a.rowIndex)??!0))return null;r=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:r,column:s,rowPinned:o}}getNextTabbedCellBackwards(t){let{beans:e}=this,{visibleCols:n,pagination:i}=e,r=n.allCols,o=t.rowIndex,s=t.rowPinned,a=n.getColBefore(t.column);if(!a){a=vn(r);let l=Rx(e,{rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(di(l)||!l.rowPinned&&!(i?.isRowInPage(l.rowIndex)??!0))return null;o=l?l.rowIndex:null,s=l?l.rowPinned:null}return{rowIndex:o,column:a,rowPinned:s}}isSuppressNavigable(t,e){let{suppressNavigable:n}=t.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){let i=t.createColumnFunctionCallbackParams(e);return n(i)}return!1}};function mfe(t){return t.focusSvc.getFocusedCell()}function vfe(t){return t.focusSvc.clearFocusedCell()}function yfe(t,e,n,i){t.focusSvc.setFocusedCell({rowIndex:e,column:n,rowPinned:i,forceBrowserFocus:!0})}function Cfe(t,e){return t.navigation?.tabToNextCell(!1,e)??!1}function bfe(t,e){return t.navigation?.tabToNextCell(!0,e)??!1}function wfe(t,e,n=!1){let i=t.headerNavigation?.getHeaderPositionForColumn(e,n);i&&t.focusSvc.focusHeaderPosition({headerPosition:i})}var _fe=class extends he{constructor(){super(),this.beanName="navigation",this.onPageDown=P6(this.onPageDown,100),this.onPageUp=P6(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){let n=t.key,i=t.altKey,r=t.ctrlKey||t.metaKey,o=!!this.beans.rangeSvc&&t.shiftKey,s=Tae(this.gos,t),a=!1;switch(n){case ne.PAGE_HOME:case ne.PAGE_END:!r&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case ne.LEFT:case ne.RIGHT:case ne.UP:case ne.DOWN:if(!s)return!1;r&&!i&&!o&&(this.onCtrlUpDownLeftRight(n,s),a=!0);break;case ne.PAGE_DOWN:case ne.PAGE_UP:!r&&!i&&(a=this.handlePageUpDown(n,s,e));break}return a&&t.preventDefault(),a}handlePageUpDown(t,e,n){return n&&(e=this.beans.focusSvc.getFocusedCell()),e?(t===ne.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(t){let{scrollIndex:e,scrollType:n,scrollColumn:i,focusIndex:r,focusColumn:o}=t,{scrollFeature:s}=this.gridBodyCon;Ve(i)&&!i.isPinned()&&s.ensureColumnVisible(i),Ve(e)&&s.ensureIndexVisible(e,n),t.isAsync||s.ensureIndexVisible(r);let{focusSvc:a,rangeSvc:l}=this.beans;a.setFocusedCell({rowIndex:r,column:o,rowPinned:null,forceBrowserFocus:!0}),l?.setRangeToCell({rowIndex:r,rowPinned:null,column:o})}onPageDown(t){let e=this.beans,n=rF(e),i=this.getViewportHeight(),{pageBounds:r,rowModel:o,rowAutoHeight:s}=e,a=r.getPixelOffset(),l=n.top+i,c=o.getRowIndexAtPixel(l+a);s?.active?this.navigateToNextPageWithAutoHeight(t,c):this.navigateToNextPage(t,c)}onPageUp(t){let e=this.beans,n=rF(e),{pageBounds:i,rowModel:r,rowAutoHeight:o}=e,s=i.getPixelOffset(),a=n.top,l=r.getRowIndexAtPixel(a+s);o?.active?this.navigateToNextPageWithAutoHeight(t,l,!0):this.navigateToNextPage(t,l,!0)}navigateToNextPage(t,e,n=!1){let{pageBounds:i,rowModel:r}=this.beans,o=this.getViewportHeight(),s=i.getFirstRow(),a=i.getLastRow(),l=i.getPixelOffset(),c=r.getRow(t.rowIndex),d=n?c?.rowHeight-o-l:o-l,u=c?.rowTop+d,h=r.getRowIndexAtPixel(u+l);if(h===t.rowIndex){let p=n?-1:1;e=h=t.rowIndex+p}let f;n?(f="bottom",h<s&&(h=s),e<s&&(e=s)):(f="top",h>a&&(h=a),e>a&&(e=a)),this.isRowTallerThanView(r.getRow(h))&&(e=h,f="top"),this.navigateTo({scrollIndex:e,scrollType:f,scrollColumn:null,focusIndex:h,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,n=!1){this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(t,n);this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){let n=e?-1:1,i=this.getViewportHeight(),{pageBounds:r,rowModel:o}=this.beans,s=r.getLastRow(),a=0,l=t.rowIndex;for(;l>=0&&l<=s;){let c=o.getRow(l);if(c){let d=c.rowHeight??0;if(a+d>i)break;a+=d}l+=n}return Math.max(0,Math.min(l,s))}getViewportHeight(){let t=this.beans,e=rF(t),n=this.beans.scrollVisibleSvc.getScrollbarWidth(),i=e.bottom-e.top;return t.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(t){if(!t)return!1;let e=t.rowHeight;return typeof e!="number"?!1:e>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){let n=this.beans.cellNavigation.getNextCellToFocus(t,e,!0),{rowIndex:i}=n,r=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:r,focusIndex:i,focusColumn:r})}onHomeOrEndKey(t){let e=t===ne.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:r}=this.beans,o=n.allCols,s=e?i.getFirstRow():i.getLastRow(),a=r.getRow(s);if(!a)return;let l=(e?o:[...o].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:l,focusIndex:s,focusColumn:l})}onTabKeyDown(t,e){let n=e.shiftKey,i=this.tabToNextCellCommon(t,n,e),r=this.beans,{ctrlsSvc:o,pageBounds:s,focusSvc:a,gos:l}=r;if(i!==!1){i?e.preventDefault():i===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){let{rowIndex:c,rowPinned:d}=t.getRowPosition();(d?c===0:c===s.getFirstRow())&&(l.get("headerHeight")===0||zd(r)?Pf(r,!0,!0):(e.preventDefault(),a.focusPreviousFromFirstCell(e)))}else t instanceof ux&&t.focusCell(!0),(!n&&a.focusOverlay(!1)||Pf(r,n))&&e.preventDefault()}tabToNextCell(t,e){let n=this.beans,{focusSvc:i,rowRenderer:r}=n,o=i.getFocusedCell();if(!o)return!1;let s=XS(n,o);return!s&&(s=r.getRowByPosition(o),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,t,e,"api")}tabToNextCellCommon(t,e,n,i="ui"){let{editSvc:r,focusSvc:o}=this.beans,s,a=t instanceof ux?t:t.getAllCellCtrls()?.[0];return r?.isEditing()?s=r?.moveToNextCell(a,e,n,i):s=this.moveToNextCellNotEditing(t,e,n),s===null?s:s||!!o.focusedHeader}moveToNextCellNotEditing(t,e,n){let i=this.beans.visibleCols.allCols,r;if(t instanceof TF){if(r=ae(k({},t.getRowPosition()),{column:e?i[0]:vn(i)}),this.gos.get("embedFullWidthRows")&&n){let s=t.findFullWidthInfoForEvent(n);s&&(r.column=s.column)}}else r=t.getFocusedCellPosition();let o=this.findNextCellToFocusOn(r,{backwards:e,startEditing:!1});if(o===!1)return null;if(o instanceof ux)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,e);return Ve(o)}findNextCellToFocusOn(t,{backwards:e,startEditing:n,skipToNextEditableCell:i}){let r=t,o=this.beans,{cellNavigation:s,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:d}=o;for(;;){t!==r&&(t=r),e||(r=this.getLastCellOfColSpan(r)),r=s.getNextTabbedCell(r,e);let u=a.getCallback("tabToNextCell");if(Ve(u)){let v=u({backwards:e,editing:n,previousCellPosition:t,nextCellPosition:r||null});if(v===!0)r=t;else{if(v===!1)return!1;r={rowIndex:v.rowIndex,column:v.column,rowPinned:v.rowPinned}}}if(!r)return null;if(r.rowIndex<0){let p=Ps(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:p+r.rowIndex,column:r.column},fromCell:!0}),null}let h=a.get("editType")==="fullRow";if(n&&(!h||i)&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);let f=XS(o,r);if(!f){let p=c.getRowByPosition(r);if(!p||!p.isFullWidth()||n)continue;return ae(k({},p.getRowPosition()),{column:r?.column})}if(!s.isSuppressNavigable(f.column,f.rowNode))return f.setFocusedCellPosition(r),d?.setRangeToCell(r),f}}isCellEditable(t){let e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}lookupRowNodeForCell({rowIndex:t,rowPinned:e}){let{pinnedRowModel:n,rowModel:i}=this.beans;return e==="top"?n?.getPinnedTopRow(t):e==="bottom"?n?.getPinnedBottomRow(t):i.getRow(t)}navigateToNextCell(t,e,n,i){let r=n,o=!1,s=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=s;for(;r&&(r===n||!this.isValidNavigateCell(r));)c.get("enableRtl")?e===ne.LEFT&&(r=this.getLastCellOfColSpan(r)):e===ne.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=a.getNextCellToFocus(e,r),o=di(r);if(o&&t&&t.key===ne.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){let u=c.getCallback("navigateToNextCell");if(Ve(u)){let f=u({key:e,previousCellPosition:n,nextCellPosition:r||null,event:t});Ve(f)?r={rowPinned:f.rowPinned,rowIndex:f.rowIndex,column:f.column}:r=null}}if(!r)return;if(r.rowIndex<0){let u=Ps(s);l.focusHeaderPosition({headerPosition:{headerRowIndex:u+r.rowIndex,column:n.column},event:t||void 0,fromCell:!0});return}let d=this.getNormalisedPosition(r);d?this.focusPosition(d):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(t){if(!!this.beans.spannedRowRenderer?.getCellByPosition(t))return t;this.ensureCellVisible(t);let n=XS(this.beans,t);return n?(t=n.getFocusedCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e){let{visibleCols:n,rowRenderer:i,focusSvc:r,eventSvc:o}=this.beans,s=n.allCols,a=i.getRowByPosition(t);if(!a||!a.isFullWidth())return!1;let l=r.getFocusedCell(),c={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?vn(s):s[0])};this.focusPosition(c);let d=e??(l!=null&&jse(c,l));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:d}),!0}focusPosition(t){let{focusSvc:e,rangeSvc:n}=this.beans;e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(t)}isValidNavigateCell(t){return!!BU(this.beans,t)}getLastCellOfColSpan(t){let e=XS(this.beans,t);if(!e)return t;let n=e.getColSpanningList();return n.length===1?t:{rowIndex:t.rowIndex,column:vn(n),rowPinned:t.rowPinned}}ensureCellVisible(t){let e=sU(this.gos),n=this.beans.rowModel.getRow(t.rowIndex),i=e&&n?.sticky,{scrollFeature:r}=this.gridBodyCon;!i&&di(t.rowPinned)&&r.ensureIndexVisible(t.rowIndex),t.column.isPinned()||r.ensureColumnVisible(t.column)}};function rF(t){return t.ctrlsSvc.getScrollFeature().getVScrollPosition()}var Sfe={moduleName:"KeyboardNavigation",version:Rt,beans:[_fe,gfe,Hhe],apiFunctions:{getFocusedCell:mfe,clearFocusedCell:vfe,setFocusedCell:yfe,setFocusedHeader:wfe,tabToNextCell:Cfe,tabToPreviousCell:bfe}},xfe=class extends he{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(t){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:t?.animate??!1,newData:t?.newData??!1,newPage:t?.newPage??!1,newPageSize:t?.newPageSize??!1,keepRenderedRows:t?.keepRenderedRows??!1})}calculatePages(){let{pageBounds:t,pagination:e,rowModel:n}=this.beans;e?e.calculatePages():t.calculateBounds(0,n.getRowCount()-1)}},Efe=class extends he{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){let{topRowBounds:t,bottomRowBounds:e}=this;return!t||!e?0:Math.max(e.rowTop+e.rowHeight-t.rowTop,0)}getCurrentPagePixelRange(){let{topRowBounds:t,bottomRowBounds:e}=this,n=t?.rowTop??0,i=e?e.rowTop+e.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(t,e){let{rowModel:n}=this.beans,i=n.getRowBounds(t);i&&(i.rowIndex=t),this.topRowBounds=i;let r=n.getRowBounds(e);r&&(r.rowIndex=e),this.bottomRowBounds=r,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let t=this.topRowBounds?.rowTop??0;this.pixelOffset!==t&&(this.pixelOffset=t,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Mfe=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",Rfe=class extends he{constructor(t,e){super(),this.isLeft=t,this.elements=e,this.getWidth=t?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){let t=this.getWidth(),e=t>0;for(let n of this.elements)n&&(Zn(n,e),Os(n,t))}},Dfe=class extends he{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});let t=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t}),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){let{gos:t,visibleCols:e,eventSvc:n}=this.beans,i=tr(t,"print"),r=i?0:e.getColsLeftWidth(),o=i?0:e.getDisplayedColumnsRightWidth();r!=this.leftWidth&&(this.leftWidth=r,n.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){let t=this.gridBodyCtrl.eBodyViewport,e=px(t);if(e<=50)return;let n=this.getPinnedColumnsOverflowingViewport(e-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:o}=n,s=r;!s.length&&!o||(i&&(s=i({columns:s,viewportWidth:e})),!(!s||!s.length)&&(s=s.filter(a=>!wy(a)),this.setColsPinned(s,null,"viewportSizeFeature")))}createPinnedWidthFeature(t,...e){return new Rfe(t,e)}setColsPinned(t,e,n){let{colModel:i,colAnimation:r,visibleCols:o,gos:s}=this.beans;if(!i.cols||!t?.length)return;if(tr(s,"print")){Ee(37);return}r?.start();let a;e===!0||e==="left"?a="left":e==="right"?a="right":a=null;let l=[];t.forEach(c=>{if(!c)return;let d=i.getCol(c);d&&d.getPinned()!==a&&(this.setColPinned(d,a),l.push(d))}),l.length&&(o.refresh(n),RU(this.eventSvc,l,n)),r?.finish()}initCol(t){let{pinned:e,initialPinned:n}=t.colDef;e!==void 0?this.setColPinned(t,e):this.setColPinned(t,n)}setColPinned(t,e){e===!0||e==="left"?t.pinned="left":e==="right"?t.pinned="right":t.pinned=null,t.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(t){let{scrollVisibleSvc:e}=this.beans;if(t.pinned==null)return;let n=t.pinned==="left",i=t.pinned==="right";t.hidden=!0;let r=()=>{let o=n?this.leftWidth:this.rightWidth;if(o==null)return;let s=o==0,a=t.hidden!==s,l=this.gos.get("enableRtl"),c=e.getScrollbarWidth(),u=e.verticalScrollShowing&&(l&&n||!l&&i)?o+c:o;t.comp.setPinnedContainerWidth(`${u}px`),t.comp.setDisplayed(!s),a&&(t.hidden=s,t.refresh())};t.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}getHeaderResizeDiff(t,e){if(e.getPinned()){let{leftWidth:i,rightWidth:r}=this,o=px(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+r+t>o)if(o>i+r)t=o-i-r;else return 0}return t}getPinnedColumnsOverflowingViewport(t){let e=this.rightWidth??0,n=this.leftWidth??0,i=e+n,r=!1;if(i<t)return{columns:[],hasLockedPinned:r};let{visibleCols:o}=this.beans,s=[...o.leftCols],a=[...o.rightCols],l=0,c=0,d=0,u=[],h=i-d-t;for(;(c<s.length||l<a.length)&&h>0;){if(l<a.length){let f=a[l++];if(f.colDef.lockPinned){r=!0;continue}h-=f.getActualWidth(),u.push(f)}if(c<s.length&&h>0){let f=s[c++];if(f.colDef.lockPinned){r=!0;continue}h-=f.getActualWidth(),u.push(f)}}return{columns:u,hasLockedPinned:r}}},Tfe={moduleName:"PinnedColumn",version:Rt,beans:[Dfe],css:[Mfe]},Afe=class extends he{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Pa(this,this.updateAnnouncement.bind(this),200)}postConstruct(){let t=this.beans,e=zi(t),n=this.descriptionContainer=e.createElement("div");n.classList.add("ag-aria-description-container"),Pz(n,"polite"),Tre(n,"additions text"),Dre(n,!0),t.eGridDiv.appendChild(n)}announceValue(t,e){this.pendingAnnouncements.set(e,t),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let t=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(t)},50)}handleAnnouncementUpdate(t){if(!this.isAlive()||!this.descriptionContainer)return;let e=t;if(e==null||e.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===e&&(e=`${e}\u200B`),this.lastAnnouncement=e,this.descriptionContainer.textContent=e}destroy(){super.destroy();let{descriptionContainer:t}=this;t&&(Zr(t),t.parentElement?.removeChild(t)),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},Ife={moduleName:"Aria",version:Rt,beans:[Afe]};function Ffe(t){t.overlays?.showLoadingOverlay()}function Pfe(t){t.overlays?.showNoRowsOverlay()}function kfe(t){t.overlays?.hideOverlay()}var Ofe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",Lfe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},ZG=class extends ln{constructor(){super(Lfe),this.eOverlayWrapper=Fe,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(Ofe)}handleKeyDown(t){if(t.key!==ne.TAB||t.defaultPrevented||Oa(t))return;let e=this.beans;if(Yd(e,this.eOverlayWrapper,!1,t.shiftKey))return;let i=!1;t.shiftKey?i=e.focusSvc.focusGridView({column:vn(e.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=Pf(e,!1),i&&t.preventDefault()}updateLayoutClasses(t,e){let n=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:r,PRINT:o}=Ko;n.toggle(i,e.autoHeight),n.toggle(r,e.normal),n.toggle(o,e.print)}postConstruct(){this.createManagedBean(new iP(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(t){let e=this.eOverlayWrapper.classList;this.activeCssClass&&e.toggle(this.activeCssClass,!1),this.activeCssClass=t,e.toggle(t,!0)}showOverlay(t,e,n,i){if(this.setWrapperTypeClass(e),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=t,!!t){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.isGridFocused()){let r=Wn(this.beans);r&&!oU(this.beans)&&(this.elToFocusAfter=r)}t.then(r=>{if(this.activePromise!==t){this.activeOverlay!==r&&(this.destroyBean(r),r=null);return}if(this.activePromise=null,!!r){if(this.activeOverlay!==r&&(this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,i)){let o=r;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:s})=>{o.refresh?.(jt(this.gos,k({},s??{})))})}n&&this.isGridFocused()&&$d(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(t){this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`)}destroyActiveOverlay(){this.activePromise=null;let t=this.activeOverlay;if(!t)return;let e=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,e&&!this.isGridFocused()&&(e=null);let n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(t),Zr(this.eOverlayWrapper),e?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){let t=Wn(this.beans);return!!t&&this.beans.eGridDiv.contains(t)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},Nfe={selector:"AG-OVERLAY-WRAPPER",component:ZG},Bfe=class extends he{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=Tr(this.gos),this.isServerSide=!this.isClientSide&&Lx(this.gos);let t=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:t,rowDataUpdated:t,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",t)}setOverlayWrapperComp(t){this.eWrapper=t,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;let t=this.gos,e=t.get("loading");!e&&(e!==void 0||t.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;let t=this.gos;t.get("loading")||t.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){Ee(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return Nfe}getOverlayWrapperCompClass(){return ZG}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}let{state:t,isClientSide:e,isServerSide:n,beans:{gos:i,colModel:r,rowModel:o}}=this,s=this.gos.get("loading");s!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&s===void 0&&!i.get("suppressLoadingOverlay")&&(s=!i.get("columnDefs")||!r.ready||!i.get("rowData")&&e),s?t!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,e&&o.isEmpty()&&!i.get("suppressNoRowsOverlay")?t!==2&&this.doShowNoRowsOverlay():(t===1||!n&&t!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(Rse(this.beans.userCompFactory,jt(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(Dse(this.beans.userCompFactory,jt(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(t,e,n){let i=t?.newAgStackInstance()??null;this.eWrapper?.showOverlay(i,e,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){let t=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==t&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){let t=this.eWrapper;if(!t)return;let e=0;this.state===2?e=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0:this.wrapperPadding!==0&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,t.updateOverlayWrapperPaddingTop(e))}},Vfe={moduleName:"Overlay",version:Rt,userComponents:{agLoadingOverlay:nce,agNoRowsOverlay:rce},apiFunctions:{showLoadingOverlay:Ffe,showNoRowsOverlay:Pfe,hideOverlay:kfe},beans:[Bfe]},Hfe=class extends he{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=Ure(),Ey(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;let t=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,e=this.getUiBodyHeight();(t!==this.scrollY||e!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=e,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;Ey(this.gos,`RowContainerHeightService - Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){let e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){let t=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;let e=this.modelHeight-this.getUiBodyHeight(),n=t/e;return this.maxScrollY*n}},zfe=400,Ufe=class extends he{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let t=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},n=()=>{this.eventSvc.addEventListener("cellSelectionChanged",t),this.eventSvc.addEventListener("columnMoved",e),this.eventSvc.addEventListener("columnPinned",e),this.eventSvc.addEventListener("columnVisible",e)},i=()=>{this.eventSvc.removeEventListener("cellSelectionChanged",t),this.eventSvc.removeEventListener("columnMoved",e),this.eventSvc.removeEventListener("columnPinned",e),this.eventSvc.removeEventListener("columnVisible",e)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Ff(this.gos)?n():i()}),Ff(this.gos)&&n()}}wireBeans(t){this.pageBounds=t.pageBounds,this.colModel=t.colModel,this.pinnedRowModel=t.pinnedRowModel,this.rowModel=t.rowModel,this.focusSvc=t.focusSvc,this.rowContainerHeight=t.rowContainerHeight,this.ctrlsSvc=t.ctrlsSvc,this.editSvc=t.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:r})=>{(!r&&i||r&&!i)&&this.redrawRows()});let{stickyRowSvc:t,gos:e,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{let i=n.getShowRowGroupCols();i.length&&this.refreshCells({columns:i,force:!0})}),t)this.stickyRowFeature=t.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{let i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=tr(e,"print"),this.embedFullWidthRows=this.printLayout||e.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new Gfe(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){let t=Object.values(this.rowCtrlsByRowIndex),e=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];e.length>0||n.length>0?this.allRowCtrls=[...t,...e,...n]:this.allRowCtrls=t}isCellBeingRendered(t,e){let n=this.rowCtrlsByRowIndex[t];return!e||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:t,column:e,rowPinned:null})||!!n.getCellCtrl(e)||!n.isRowRendered()}updateCellFocus(t){this.getAllCellCtrls().forEach(e=>e.onCellFocused(t)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(t))}onCellFocusChanged(t){if(t&&t.rowIndex!=null&&!t.rowPinned){let e=this.beans.colModel.getCol(t.column)??void 0;this.isCellBeingRendered(t.rowIndex,e)||this.redraw()}this.updateCellFocus(t)}onSuppressCellFocusChanged(t){this.getAllCellCtrls().forEach(e=>e.onSuppressCellFocusChanged(t)),this.getFullWidthRowCtrls().forEach(e=>e.onSuppressCellFocusChanged(t))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:t=>this.onCellFocusChanged(t),cellFocusCleared:()=>this.updateCellFocus(),flashCells:t=>{let{cellFlashSvc:e}=this.beans;e&&this.getAllCellCtrls().forEach(n=>e.onFlashCells(n,t))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(t=>t()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.colModel.getCols().forEach(e=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.column===e&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},r=()=>{n(l=>l.onWidthChanged())},o=()=>{n(l=>l.onFirstRightPinnedChanged())},s=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};e.__addEventListener("leftChanged",i),e.__addEventListener("widthChanged",r),e.__addEventListener("firstRightPinnedChanged",o),e.__addEventListener("lastLeftPinnedChanged",s),e.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{e.__removeEventListener("leftChanged",i),e.__removeEventListener("widthChanged",r),e.__removeEventListener("firstRightPinnedChanged",o),e.__removeEventListener("lastLeftPinnedChanged",s),e.__removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let t=tr(this.gos,"print"),e=t||this.gos.get("embedFullWidthRows"),n=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){let e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsNotSpanningForColumn(t){let e=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellCtrl(t,!0)?.eGui;i&&e.push(i)}),e}refreshFloatingRowComps(t=!0){this.refreshFloatingRows(this.topRowCtrls,"top",t),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",t)}refreshFloatingRows(t,e,n){let{pinnedRowModel:i,beans:r,printLayout:o}=this,s=Object.fromEntries(t.map(l=>[l.rowNode.id,l]));i?.forEachPinnedRow(e,(l,c)=>{let d=t[c];d&&i.getPinnedRowById(d.rowNode.id,e)===void 0&&(d.destroyFirstPass(),d.destroySecondPass()),l.id in s&&n?(t[c]=s[l.id],delete s[l.id]):t[c]=new TF(l,r,!1,!1,o)});let a=(e==="top"?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;t.length=a}onPinnedRowDataChanged(){let t={recycleRows:!0};this.redrawAfterModelUpdate(t)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(t,e=!1){if(t.sticky)this.stickyRowFeature?.refreshStickyNode(t);else if(this.cachedRowCtrls?.has(t)){this.cachedRowCtrls.removeRow(t);return}else{let n=i=>{let r=i[t.rowIndex];r&&r.rowNode===t&&(r.destroyFirstPass(),r.destroySecondPass(),i[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){let{editSvc:e}=this.beans;if(e?.isEditing()&&(e.isBatchEditing()?e.cleanupEditors():e.stopEditing(void 0,{source:"api"})),t!=null){t?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();let e=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(t);let n=!t.domLayoutChanged&&!!t.recycleRows,i=t.animate&&xf(this.gos),r=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();let{stickyRowFeature:o,gos:s}=this;if(o){o.checkStickyRows();let a=o.extraTopHeight+o.extraBottomHeight;a&&this.updateContainerHeights(a)}this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(s.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){let e=t.newData||t.newPage,n=this.gos.get("suppressScrollOnNewData");e&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(t=0){let{rowContainerHeight:e}=this;if(this.printLayout){e.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),e.setModelHeight(n+t)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(mF(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){if(!t)return;let e=this.beans.focusSvc,n=this.findPositionToFocus(t);if(!n){e.focusHeaderPosition({headerPosition:{headerRowIndex:Ps(this.beans)-1,column:t.column}});return}if(t.rowIndex!==n.rowIndex||t.rowPinned!=n.rowPinned){e.setFocusedCell(ae(k({},n),{preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0}));return}e.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(jt(this.gos,ae(k({},n),{forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"})))}findPositionToFocus(t){let{pagination:e,pageBounds:n}=this.beans,i=t;for(i.rowPinned==null&&e&&n&&!e.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=Rx(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});let r=this.getRowByPosition(i);if(r?.isAlive())return ae(k({},r.getRowPosition()),{column:t.column});i=Rx(this.beans,i)}return null}getAllCellCtrls(){let t=[],e=this.getAllRowCtrls(),n=e.length;for(let i=0;i<n;i++){let r=e[i].getAllCellCtrls(),o=r.length;for(let s=0;s<o;s++)t.push(r[s])}return t}getAllRowCtrls(){let{spannedRowRenderer:t}=this.beans,e=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...e,...n,...t?.getCtrls("top")??[],...t?.getCtrls("bottom")??[],...t?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(t,e,n){let i=this.rowCtrlsByRowIndex[e];i&&i.addEventListener(t,n)}refreshCells({rowNodes:t,columns:e,force:n,suppressFlash:i}={}){let r={force:n,newData:!1,suppressFlash:i};for(let o of this.getCellCtrls(t,e))o.refreshOrDestroyCell(r);this.refreshFullWidth(t)}refreshRows(t={}){this.getRowCtrls(t.rowNodes).forEach(e=>e.refreshRow(t)),this.refreshFullWidth(t.rowNodes)}refreshFullWidth(t){if(!t)return;let e=!1;for(let n of this.getRowCtrls(t)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(e=!0,this.redrawRow(n.rowNode,!0))}e&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(t){let e=xz(t),n=this.getAllRowCtrls();return!t||!e?n:n.filter(i=>{let r=i.rowNode;return Ez(r,e)})}getCellCtrls(t,e){let n;Ve(e)&&(n={},e.forEach(r=>{let o=this.colModel.getCol(r);Ve(o)&&(n[o.getId()]=!0)}));let i=[];return this.getRowCtrls(t).forEach(r=>{r.getAllCellCtrls().forEach(o=>{let s=o.column.getId();n&&!n[s]||i.push(o)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(t=!1){let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e,t),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){let t=[];for(let n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&t.push(n);this.removeRowCtrls(t);let e={};for(let n of Object.values(this.rowCtrlsByRowIndex)){let i=n.rowNode;e[i.id]=n}return this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){t.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(e),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){let{focusSvc:e,animationFrameSvc:n}=this.beans,{afterScroll:i}=t,r,o=this.stickyRowFeature;o&&(r=e?.getFocusCellToUseAfterRefresh()||void 0);let s=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();let d=o.extraTopHeight+o.extraBottomHeight;d&&this.updateContainerHeights(d)}let c=this.firstRenderedRow!==s||this.lastRenderedRow!==a;if(!(i&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!l),r!=null)){let d=e?.getFocusCellToUseAfterRefresh();r!=null&&d==null&&(n?.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(t,e){let n={};t.forEach(o=>n[o]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!n[o]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(t){let e=[];for(let s=this.firstRenderedRow;s<=this.lastRenderedRow;s++)e.push(s);let n=this.beans.pagination,i=this.beans.focusSvc?.getFocusedCell()?.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&e.push(i);let r=s=>{let a=s.rowNode.rowIndex;a==null||a===i||(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(s)&&e.push(a)};for(let s of Object.values(this.rowCtrlsByRowIndex))r(s);if(t)for(let s of Object.values(t))r(s);e.sort((s,a)=>s-a);let o=[];for(let s=0;s<e.length;s++){let a=e[s],l=this.rowModel.getRow(a);l&&!l.sticky&&o.push(a)}return o}recycleRows(t,e=!1,n=!1){let i=this.calculateIndexesToDraw(t);(this.printLayout||n)&&(e=!1),this.removeRowCompsNotToDraw(i,!e);let r=[];if(i.forEach(o=>{let s=this.createOrUpdateRowCtrl(o,t,e,n);Ve(s)&&r.push(s)}),t){let{animationFrameSvc:o}=this.beans;o?.active&&n&&!this.printLayout?o.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:t})}onDisplayedColumnsChanged(){let{visibleCols:t}=this.beans,e=t.isPinningLeft(),n=t.isPinningRight();(this.pinningLeft!==e||n!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let t=[];this.getFullWidthRowCtrls().forEach(e=>{let n=e.rowNode.rowIndex;t.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){let e=xz(t);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.rowNode;return!(e!=null&&!Ez(i,e))})}createOrUpdateRowCtrl(t,e,n,i){let r,o=this.rowCtrlsByRowIndex[t];if(o||(r=this.rowModel.getRow(t),Ve(r)&&Ve(e)&&e[r.id]&&r.alreadyRendered&&(o=e[r.id],e[r.id]=null)),!o)if(r||(r=this.rowModel.getRow(t)),Ve(r))o=this.createRowCon(r,n,i);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=o,o}destroyRowCtrls(t,e){let n=[];if(t){for(let i of Object.values(t))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!e),e){let r=i.instanceId;this.zombieRowCtrls[r]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[r]})}else i.destroySecondPass()}}e&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),window.setTimeout(()=>n.forEach(i=>i()),zfe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let t=this.getRowBuffer(),e=KF(this.beans);return t*e}workOutFirstAndLastRowsToRender(){let{rowContainerHeight:t,pageBounds:e,rowModel:n}=this;t.updateOffset();let i,r;if(!n.isRowsToRender())i=0,r=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=e.getFirstRow(),r=e.getLastRow();else{let d=this.getRowBufferInPixels(),u=this.ctrlsSvc.getScrollFeature(),h=this.gos.get("suppressRowVirtualisation"),f=!1,p,v;do{let w=e.getPixelOffset(),{pageFirstPixel:R,pageLastPixel:b}=e.getCurrentPagePixelRange(),_=t.divStretchOffset,M=u.getVScrollPosition(),x=M.top,S=M.bottom;h?(p=R+_,v=b+_):(p=Math.max(x+w-d,R)+_,v=Math.min(S+w+d,b)+_),this.firstVisibleVPixel=Math.max(x+w,R)+_,this.lastVisibleVPixel=Math.min(S+w,b)+_,f=this.ensureAllRowsInRangeHaveHeightsCalculated(p,v)}while(f);let m=n.getRowIndexAtPixel(p),g=n.getRowIndexAtPixel(v),C=e.getFirstRow(),y=e.getLastRow();m<C&&(m=C),g>y&&(g=y),i=m,r=g}let o=tr(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!s&&r-i>a&&(r=i+a);let l=i!==this.firstRenderedRow,c=r!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=i,this.lastRenderedRow=r,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:r}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Ba(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(t,e){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:r,rowModel:o}=this,s=o.ensureRowHeightsValid(t,e,r.getFirstRow(),r.getLastRow());return(s||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(t){let i=t.rowNode,r=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),o=this.editSvc?.isEditing(t),s=i.detail;return r||o||s?!!this.isRowPresent(i):!1}isRowPresent(t){return this.rowModel.isRowPresent(t)?this.beans.pagination?.isRowInPage(t.rowIndex)??!0:!1}createRowCon(t,e,n){let i=this.cachedRowCtrls?.getRow(t)??null;if(i)return i;let r=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new TF(t,this.beans,e,r,this.printLayout)}getRenderedNodes(){let t=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),e=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...e,...t,...n]}getRowByPosition(t){let e,{rowIndex:n}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[n];break;case"bottom":e=this.bottomRowCtrls[n];break;default:e=this.rowCtrlsByRowIndex[n],e||(e=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,e||(e=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;let i=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!i}},Gfe=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.rowNode.id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){let e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t==null||t.id==null)return null;let e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.rowNode!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){let e=t.id,n=this.entriesMap[e];delete this.entriesMap[e],Ls(this.entriesList,n)}removeFromCache(t){let e=t.rowNode.id;delete this.entriesMap[e],Ls(this.entriesList,t)}getEntries(){return this.entriesList}};function xz(t){if(!t)return;let e={top:{},bottom:{},normal:{}};return t.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":e.top[i]=n;break;case"bottom":e.bottom[i]=n;break;default:e.normal[i]=n;break}}),e}function Ez(t,e){let n=t.id;switch(t.rowPinned){case"top":return e.top[n]!=null;case"bottom":return e.bottom[n]!=null;default:return e.normal[n]!=null}}var Wfe=class extends he{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){let{gos:t}=this;this.isAccentedSort=t.get("accentedSort"),this.primaryColumnsSortGroups=As(t),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=As(t))}doFullSort(t,e){let n=t.map((i,r)=>({currentPos:r,rowNode:i}));return n.sort(this.compareRowNodes.bind(this,e)),n.map(i=>i.rowNode)}compareRowNodes(t,e,n){let i=e.rowNode,r=n.rowNode;for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.sort==="desc",c=this.getValue(i,a.column),d=this.getValue(r,a.column),u,h=this.getComparator(a,i);if(h?u=h(c,d,i,r,l):u=bre(c,d,this.isAccentedSort),!isNaN(u)&&u!==0)return a.sort==="asc"?u:u*-1}return e.currentPos-n.currentPos}getComparator(t,e){let n=t.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let r=!e.group&&n.getColDef().field;if(!r)return;let o=this.beans.colModel.getColDefCol(r);if(o)return o.getColDef().comparator}getValue(t,e){let{valueSvc:n,colModel:i,showRowGroupCols:r,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return n.getValue(e,t,!1);if(t.rowGroupColumn===e){if(lU(o,i.isPivotActive())){let c=t.allLeafChildren?.[0];return c?n.getValue(e,c,!1):void 0}let l=r?.getShowRowGroupCol(e.getId());return l?t.groupData?.[l.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return n.getValue(e,t,!1)}};function jfe(t){t.sortSvc?.onSortChanged("api")}var QG={moduleName:"Sort",version:Rt,beans:[Zhe,Wfe],apiFunctions:{onSortChanged:jfe},userComponents:{agSortIndicator:mP},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},$fe=class extends he{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{let t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){let{colModel:e,rowModel:n}=this.beans;e.setColumnDefs(t??[],"gridInitializing"),n.start()}gridReady(){let{eventSvc:t,gos:e}=this;t.dispatchEvent({type:"gridReady"}),Ey(e,`initialised successfully, enterprise = ${e.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(t){let e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.beans.colModel.setColumnDefs(e,Mf(t.source))}}};var qfe="paste",Kfe=class extends he{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){let{gos:t,rowModel:e}=this.beans;Tr(t,e)&&(this.clientSideRowModel=e),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(t){let{gos:e,rowRenderer:n}=this.beans;if(t.source===qfe||e.get("suppressChangeDetection"))return;let i=t.node,r=[i],o=this.clientSideRowModel,s=o?.rootNode;if(s&&!i.isRowPinned()){let a=e.get("aggregateOnlyChangedColumns"),l=new Fx(a,s);l.addParentNode(i.parent,[t.column]),o.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{r.push(c),c.sibling&&r.push(c.sibling)})}n.refreshCells({rowNodes:r})}},Yfe=class extends he{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);In(15,{expression:t})}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.getValue,e.column,e.columnGroup)}catch(n){return In(16,{expression:t,params:e,e:n}),null}}createExpressionFunction(t){let e=this.cache;if(e[t])return e[t];let n=this.createFunctionBody(t),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return e[t]=i,i}createFunctionBody(t){return t.indexOf("return")>=0?t:"return "+t+";"}};var Xfe={moduleName:"Expression",version:Rt,beans:[Yfe]},Zfe={moduleName:"ChangeDetection",version:Rt,beans:[Kfe]};var rx={checkSiblings:!0},Qfe=class extends he{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEdit=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(t){this.expressionSvc=t.expressionSvc,this.colModel=t.colModel,this.valueCache=t.valueCache,this.dataTypeSvc=t.dataTypeSvc,this.editSvc=t.editSvc,this.hasEdit=!!t.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Lx(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let t=e=>this.callColumnCellValueChangedHandler(e);this.eventSvc.addEventListener("cellValueChanged",t,!0),this.addDestroyFunc(()=>this.eventSvc.removeEventListener("cellValueChanged",t,!0)),this.addManagedPropertyListener("treeData",e=>this.isTreeData=e.currentValue)}getValueForDisplay(t,e,n=!1,i=!1,r="ui"){let{showRowGroupColValueSvc:o}=this.beans,s=!t&&e.group,a=t?.colDef.showRowGroup,l=!this.isTreeData||e.footer;if(o&&l&&(s||a)){let v=o.getGroupValue(e,t);if(v==null)return{value:null,valueFormatted:null};if(!n)return{value:v.value,valueFormatted:null};let m=o.formatAndPrefixGroupColValue(v,t,i);return{value:v.value,valueFormatted:m}}if(!t)return{value:e.key,valueFormatted:null};let c=e.leafGroup&&this.colModel.isPivotMode(),d=e.group&&e.expanded&&!e.footer&&!c,u=this.gos.get("groupSuppressBlankHeader")||!e.sibling,h=d&&!u,f=this.getValue(t,e,h,r),p=n&&!(i&&t.colDef.useValueFormatterForExport===!1);return{value:f,valueFormatted:p?this.formatValue(t,e,f):null}}getValue(t,e,n=!1,i="ui"){if(this.initialised||this.init(),!e)return;let r=t.getColDef(),o=r.field,s=t.getColId(),a=e.data;if(this.hasEdit&&i==="ui"){let v=this.editSvc;if(v.isRowEditing(e,rx)&&(a=v.getRowDataValue(e,rx)),v.isEditing()){let m=v.getCellDataValue({rowNode:e,column:t});if(m!==void 0)return m}}let l,c=r.showRowGroup;if(typeof c=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(c)??-1)>e.level)return null;let d=typeof c!="string"||!e.group,u=e.groupData&&s in e.groupData,h=!n&&e.aggData&&e.aggData[s]!==void 0,f=this.isSsrm&&n&&!!r.aggFunc,p=this.isSsrm&&e.footer&&e.field&&(r.showRowGroup===!0||r.showRowGroup===e.field);if(this.isTreeData&&h)l=e.aggData[s];else if(this.isTreeData&&r.valueGetter)l=this.executeValueGetter(r.valueGetter,a,t,e);else if(this.isTreeData&&o&&a)l=yy(a,o,t.isFieldContainsDots());else if(u)l=e.groupData[s];else if(h)l=e.aggData[s];else if(r.valueGetter&&!f){if(!d)return l;l=this.executeValueGetter(r.valueGetter,a,t,e)}else if(p)l=yy(a,e.field,t.isFieldContainsDots());else if(o&&a&&!f){if(!d)return l;l=yy(a,o,t.isFieldContainsDots())}if(this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let v=l.substring(1);l=this.executeValueGetter(v,a,t,e)}return l}parseValue(t,e,n,i){let r=t.getColDef(),o=r.valueParser;if(Ve(o)){let s=jt(this.gos,{node:e,data:e?.data,oldValue:i,newValue:n,colDef:r,column:t});return typeof o=="function"?o(s):this.expressionSvc?.evaluate(o,s)}return n}getDeleteValue(t,e){return Ve(t.getColDef().valueParser)?this.parseValue(t,e,"",this.getValueForDisplay(t,e).value)??null:null}formatValue(t,e,n,i,r=!0){let{expressionSvc:o}=this.beans,s=null,a,l=t.getColDef();if(i?a=i:r&&(a=l.valueFormatter),a){let c=e?e.data:null;if(e){let u={rowNode:e};if(this.hasEdit){let h=this.editSvc;h.isEditing(u,rx)&&(c=h.getRowDataValue(e,rx))}}let d=jt(this.gos,{value:n,node:e,data:c,colDef:l,column:t});typeof a=="function"?s=a(d):s=o?o.evaluate(a,d):null}else if(l.refData)return l.refData[n]||"";return s==null&&Array.isArray(n)&&(s=n.join(", ")),s}setValue(t,e,n,i){let r=this.colModel.getColDefCol(e);if(!t||!r)return!1;di(t.data)&&(t.data={});let{field:o,valueSetter:s}=r.getColDef();if(di(o)&&di(s))return Ee(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(r,n))return Ee(135),!1;let a=jt(this.gos,{node:t,data:t.data,oldValue:this.getValue(r,t,void 0,i),newValue:n,colDef:r.getColDef(),column:r});a.newValue=n;let l;if(Ve(s)?typeof s=="function"?l=s(a):l=this.expressionSvc?.evaluate(s,a):l=this.setValueUsingField(t.data,o,n,r.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;t.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();let c=this.getValue(r,t);return this.dispatchCellValueChangedEvent(t,a,c,i),t.pinnedSibling&&this.dispatchCellValueChangedEvent(t.pinnedSibling,a,c,i),!0}dispatchCellValueChangedEvent(t,e,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e.column,colDef:e.colDef,data:t.data,node:t,oldValue:e.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(t){let e=t.colDef.onCellValueChanged;typeof e=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,context:t.context})})}setValueUsingField(t,e,n,i){if(!e)return!1;let r=!1;if(!i)r=t[e]===n,r||(t[e]=n);else{let o=e.split("."),s=t;for(;o.length>0&&s;){let a=o.shift();o.length===0?(r=s[a]===n,r||(s[a]=n)):s=s[a]}}return!r}executeValueGetterWithValueCache(t,e,n,i){let r=n.getColId(),o=this.valueCache.getValue(i,r);if(o!==void 0)return o;let s=this.executeValueGetterWithoutValueCache(t,e,n,i);return this.valueCache.setValue(i,r,s),s}executeValueGetterWithoutValueCache(t,e,n,i){let r=jt(this.gos,{data:e,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),o;return typeof t=="function"?o=t(r):o=this.expressionSvc?.evaluate(t,r),o}getValueCallback(t,e){let n=this.colModel.getColDefCol(e);return n?this.getValue(n,t):null}getKeyForNode(t,e){let n=this.getValue(t,e),i=t.getColDef().keyCreator,r=n;if(i){let o=jt(this.gos,{value:n,colDef:t.getColDef(),column:t,node:e,data:e.data});r=i(o)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&Ee(121)),r}},Jfe={moduleName:"CommunityCore",version:Rt,beans:[jhe,sde,xue,tse,Hfe,rue,Vhe,nfe,Zoe,Efe,xfe,Ufe,Qfe,Ghe,Bhe,Whe,Mue,$fe,Cue,bue],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:ade,destroy:lde,isDestroyed:cde,getGridOption:dde,setGridOption:ude,updateGridOptions:bG,isModuleRegistered:hde},dependsOn:[mue,Ode,Gde,QG,cfe,sue,dfe,Vfe,Zfe,hfe,Sfe,Tfe,Ife,pfe,Sue,vue,Xfe,due]};var oF=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],GNe={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:oF,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...oF,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...oF,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]};var epe=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `;function tpe({moduleName:t,rowModelType:e}){return`To use the ${t}Module you must set the gridOption "rowModelType='${e}'"`}function JG(t,e,n){if(!e)return In(11),{};let i=n,r;if(!i?.setThemeOnGridDiv){let s=On({tag:"div"});s.style.height="100%",t.appendChild(s),t=s,r=()=>t.remove()}return new ipe().create(t,e,s=>{let a=new rde(t);s.createBean(a)},void 0,n,r)}var npe=1,ipe=class{create(t,e,n,i,r,o){let s=xre.applyGlobalGridOptions(e),a=s.gridId??String(npe++),l=this.getRegisteredModules(r,a,s.rowModelType),c=this.createBeansList(s.rowModelType,l,a),d=this.createProvidedBeans(t,s,r);if(!c)return;let u={providedBeanInstances:d,beanClasses:c,gridId:a,beanInitComparator:zce,beanDestroyComparator:Uce,derivedBeans:[Vce],destroyCallback:o},h=new zse(u);return this.registerModuleFeatures(h,l),n(h),h.getBean("syncSvc").start(),i&&i(h),h.getBean("gridApi")}getRegisteredModules(t,e,n){return Ty(Jfe,void 0,!0),t?.modules?.forEach(i=>Ty(i,e)),Ose(e,Mz(n))}registerModuleFeatures(t,e){let n=t.getBean("registry"),i=t.getBean("apiFunctionSvc");e.forEach(r=>{n.registerModule(r);let o=r.apiFunctions;o&&Object.keys(o).forEach(a=>{i?.addFunction(a,o[a])})})}createProvidedBeans(t,e,n){let i=n?n.frameworkOverrides:null;di(i)&&(i=new hP);let r={gridOptions:e,eGridDiv:t,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createBeansList(t,e,n){let i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},r=Mz(t),o=i[r];if(!o){my(201,{rowModelType:r},`Unknown rowModelType ${r}.`);return}if(!Nse()){my(272,void 0,epe());return}if(!t){let a=Object.entries(i).filter(([l,c])=>_F(c,n,l));if(a.length==1){let[l,c]=a[0];if(l!==r){let d={moduleName:c,rowModelType:l};my(275,d,tpe(d));return}}}if(!_F(o,n,r)){my(200,{reasonOrId:`rowModelType = '${r}'`,moduleName:o,gridScoped:LU(),gridId:n,rowModelType:r},`Missing module ${o}Module for rowModelType ${r}.`);return}let s=new Set;return e.forEach(a=>a.beans?.forEach(l=>s.add(l))),Array.from(s)}};function Mz(t){return t??"clientSide"}var e8=class{wrap(t,e,n,i){let r=this.createWrapper(t,i);return e?.forEach(o=>{this.createMethod(r,o,!0)}),n?.forEach(o=>{this.createMethod(r,o,!1)}),r}createMethod(t,e,n){t.addMethod(e,this.createMethodProxy(t,e,n))}createMethodProxy(t,e,n){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(n&&Ee(49,{methodName:e}),null)}}},rpe={tag:"div",cls:"ag-tooltip"},ope=class extends ece{constructor(){super(rpe)}init(t){let{value:e}=t,n=this.getGui();n.textContent=Fy(e);let i=t.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${i}-tooltip`)}},spe=1e3,ape=1e3,Rz=100,Dz,ox=!1,lpe=class extends he{constructor(t,e){super(),this.tooltipCtrl=t,this.getTooltipValue=e,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupSvc=t.popupSvc,this.userCompFactory=t.userCompFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let e=this.gos.get(t);return Math.max(200,e)}getTooltipDelay(t){return t==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Bd()&&(ox?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},Rz):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let e=t.relatedTarget,n=this.tooltipCtrl.getGui(),i=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(e)||this.interactionEnabled&&i?.contains(e)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||ox)return;let e=0;t&&(e=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),e),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-Dz<spe}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=this.getTooltipValue(),e=this.tooltipCtrl;if(!Ve(t)||e.shouldDisplayTooltip&&!e.shouldDisplayTooltip()){this.setToDoNothing();return}let n=e.getRowNode?.(),i=jt(this.gos,k({location:e.getLocation?.()??"UNKNOWN",colDef:e.getColDef?.(),column:e.getColumn?.(),rowIndex:e.getRowIndex?.(),node:n,data:n?.data,value:t,valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.hideTooltip(!0)},e.getAdditionalParams?.()??{}));this.state=2,this.tooltipInstanceCount++;let r=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);Tse(this.userCompFactory,i)?.newAgStackInstance().then(r)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Dz=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,e){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(e);return}let i=e.getGui();this.tooltipComp=e,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");let r=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:i,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let s=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:s,columnMoved:s})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(zi(this.beans),{keydown:s=>{i.contains(s?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let t=this.tooltipComp?.getGui(),e=Wn(this.beans);return!!t&&t.contains(e)}onTooltipFocusOut(t){let e=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,e.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent(ae(k({},t),{mouseEvent:this.lastMouseEvent})):this.popupSvc?.positionPopupByComponent(ae(k({},t),{eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,e=this.tooltipComp,n=this.tooltipTrigger===0?ape:0;window.setTimeout(()=>{t(),this.destroyBean(e)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){ox=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},Rz)}unlockService(){ox=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};function sF(t){return t.get("tooltipShowMode")==="whenTruncated"}var cpe=class extends he{constructor(t,e){super(),this.ctrl=t,e&&(this.beans=e)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(t,e){let n="title",i=this.ctrl.getGui();i&&(t!=null&&(t!=""||e)?i.setAttribute(n,t):i.removeAttribute(n))}updateTooltipText(){let{getTooltipValue:t}=this.ctrl;t&&(this.tooltip=t())}createTooltipFeatureIfNeeded(){this.tooltipManager==null&&(this.tooltipManager=this.createBean(new lpe(this.ctrl,()=>this.tooltip),this.beans.context))}setTooltipAndRefresh(t){this.tooltip=t,this.refreshTooltip()}refreshTooltip(t){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(t?"":null,t),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}};function dpe(t,e){if(typeof t!="number")return"";let n=e(),i=n("thousandSeparator",","),r=n("decimalSeparator",".");return t.toString().replace(".",r).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}function t8(t){t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)}var upe=class extends he{constructor(){super(...arguments),this.beanName="filterStage",this.refreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),this.step="filter"}wireBeans(t){this.filterManager=t.filterManager}execute(t){let{changedPath:e}=t;this.filter(e)}filter(t){let e=!!this.filterManager?.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){let n=(i,r)=>{i.hasChildren()&&t&&!r?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{let s=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return s||a}):i.childrenAfterFilter=i.childrenAfterGroup,t8(i)};if(this.doingTreeDataFiltering()){let i=(o,s)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){let l=o.childrenAfterGroup[a],c=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(o.childrenAfterGroup[a],c):n(l,c)}n(o,s)},r=o=>i(o,!1);e.executeFromRootNode(r)}else{let i=r=>n(r,!1);e.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},hpe=class extends dP{constructor(){super(...arguments),this.iconCreated=!1}setComp(t,e,n,i,r){this.comp=t;let o=ky(this,this.beans.context,r);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(e,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);let s=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:s}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&s()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){let{column:t,beans:e}=this,n=t.colDef;return jt(e.gos,{colDef:n,column:t,floatingFilter:!0})}setupActive(){let t=this.column.getColDef(),e=!!t.filter,n=!!t.floatingFilter;this.active=e&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let t=ks("filter",this.beans,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}setupFocus(t){t.createManagedBean(new Lf(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let t=this.getLocaleTextFunc();Af(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){let{beans:e}=this;if(Wn(e)===this.eGui)return;let r=Yd(e,this.eGui,null,t.shiftKey);if(r){e.headerNavigation?.scrollToColumn(this.column),t.preventDefault(),r.focus();return}let o=this.findNextColumnWithFloatingFilter(t.shiftKey);o&&e.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:t})&&t.preventDefault()}findNextColumnWithFloatingFilter(t){let e=this.beans.visibleCols,n=this.column;do if(n=t?e.getColBefore(n):e.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();switch(t.key){case ne.UP:case ne.DOWN:case ne.LEFT:case ne.RIGHT:if(e)return;jd(t);case ne.ENTER:e&&$d(this.eGui)&&t.preventDefault();break;case ne.ESCAPE:e||this.eGui.focus()}}onFocusIn(t){if(this.eGui.contains(t.relatedTarget))return;let n=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),i=!!t.relatedTarget&&Vd(t.relatedTarget,"ag-floating-filter");if(n&&i&&t.target===this.eGui){let r=this.lastFocusEvent,o=!!(r&&r.key===ne.TAB);if(r&&o){let s=r.shiftKey;$d(this.eGui,s)}}this.focusThis()}setupHover(t){this.beans.colHover?.addHeaderFilterColumnHoverListener(t,this.comp,this.column,this.eGui)}setupLeft(t){let e=new cP(this.column,this.eGui,this.beans);t.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!Xr(this.gos)}setupUserComp(){if(!this.active)return;let t=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setCompDetails(t)}showParentFilter(){let t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(t){if(!this.active)return;let{beans:{colFilter:e},column:n,gos:i}=this,r=o=>{if(o?.source==="filterDestroyed"&&(!this.isAlive()||!e?.isAlive()))return;let s=this.comp.getFloatingFilterComp();s&&s.then(a=>{if(a){if(i.get("enableFilterHandlers")){let d=o,u="filter";d?.afterFloatingFilter?u="ui":d?.afterDataChange?u="dataChanged":o?.source==="api"&&(u="api"),this.updateFloatingFilterParams(this.userCompDetails,u);return}let l=e?.getCurrentFloatingFilterParentModel(n),c=o?ae(k({},o),{columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}):null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=t.addManagedListeners(n,{filterChanged:r}),e?.isFilterActive(n)&&r(null)}setupWidth(t){let e=()=>{let n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};t.addManagedListeners(this.column,{widthChanged:e}),e()}setupFilterChangedListener(t){this.active&&([this.destroyFilterChangedListener]=t.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let t=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(t){let e=this.active;this.setupActive();let n=!e&&this.active;e&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let i=this.beans.colFilter,r=this.active?i?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!r?this.updateCompDetails(t,r,n):o.then(s=>{!s||i?.areFilterCompsDifferent(this.userCompDetails??null,r)?this.updateCompDetails(t,r,n):this.updateFloatingFilterParams(r,"colDef")})}updateCompDetails(t,e,n){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(t),this.setupFilterChangedListener(t)))}updateFloatingFilterParams(t,e){if(!t)return;let n=t.params;this.comp.getFloatingFilterComp()?.then(i=>{typeof i?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(n=ae(k({},n),{model:Pi(this.beans.colFilter?.model??{},this.column.getColId()),source:e})),i.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function fpe(t,e){let n=t.colModel.getCol(e);if(!n){In(12,{colKey:e});return}t.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function ppe(t){t.menuSvc?.hidePopupMenu()}var gpe={moduleName:"SharedMenu",version:Rt,beans:[Jle],apiFunctions:{showColumnMenu:fpe,hidePopupMenu:ppe}},mpe=0,vpe=200,ype=class extends he{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridCtrl=t.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let t=this.gos.get("popupParent");return t||this.gridCtrl.getGui()}positionPopupForMenu(t){let{eventSource:e,ePopup:n,column:i,node:r,event:o}=t,s=e.getBoundingClientRect(),a=this.getParentRect();this.setAlignedTo(e,n);let l=!1,c=()=>{let d=this.keepXYWithinBounds(n,s.top-a.top,0),u=n.clientWidth>0?n.clientWidth:200;l||(n.style.minWidth=`${u}px`,l=!0);let f=a.right-a.left-u,p;return this.gos.get("enableRtl")?(p=m(),p<0&&(p=v(),this.setAlignedStyles(n,"left")),p>f&&(p=0,this.setAlignedStyles(n,"right"))):(p=v(),p>f&&(p=m(),this.setAlignedStyles(n,"right")),p<0&&(p=0,this.setAlignedStyles(n,"left"))),{x:p,y:d};function v(){return s.right-a.left-2}function m(){return s.left-a.left-u}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:c,postProcessCallback:()=>this.callPostProcessPopup("subMenu",n,e,o instanceof MouseEvent?o:void 0,i,r)})}positionPopupUnderMouseEvent(t){let{ePopup:e,nudgeX:n,nudgeY:i,skipObserver:r}=t;this.positionPopup({ePopup:e,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)})}calculatePointerAlign(t){let e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){let{ePopup:e,nudgeX:n,nudgeY:i,keepWithinBounds:r,eventSource:o,alignSide:s="left",position:a="over",column:l,rowNode:c,type:d}=t,u=o.getBoundingClientRect(),h=this.getParentRect();this.setAlignedTo(o,e);let f=()=>{let p=u.left-h.left;s==="right"&&(p-=e.offsetWidth-u.width);let v;return a==="over"?(v=u.top-h.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,u,h,t.nudgeY||0)==="under"?v=u.top-h.top+u.height:v=u.top-e.offsetHeight-(i||0)*2-h.top),{x:p,y:v}};this.positionPopup({ePopup:e,nudgeX:n,nudgeY:i,keepWithinBounds:r,updatePosition:f,postProcessCallback:()=>this.callPostProcessPopup(d,e,o,null,l,c)})}shouldRenderUnderOrAbove(t,e,n,i){let r=n.bottom-e.bottom,o=e.top-n.top,s=t.offsetHeight+i;return r>s?"under":o>s||o>r?"above":"under"}setAlignedStyles(t,e){let n=this.getPopupIndex(t);if(n===-1)return;let i=this.popupList[n],{alignedToElement:r}=i;!r||(["right","left","over","above","under"].forEach(s=>{r.classList.remove(`ag-has-popup-positioned-${s}`),t.classList.remove(`ag-popup-positioned-${s}`)}),!e)||(r.classList.add(`ag-has-popup-positioned-${e}`),t.classList.add(`ag-popup-positioned-${e}`))}setAlignedTo(t,e){let n=this.getPopupIndex(e);if(n!==-1){let i=this.popupList[n];i.alignedToElement=t}}callPostProcessPopup(t,e,n,i,r,o){let s=this.gos.getCallback("postProcessPopup");s&&s({column:r,rowNode:o,ePopup:e,type:t,eventSource:n,mouseEvent:i})}positionPopup(t){let{ePopup:e,keepWithinBounds:n,nudgeX:i,nudgeY:r,skipObserver:o,updatePosition:s}=t,a={width:0,height:0},l=(c=!1)=>{let{x:d,y:u}=s();c&&e.clientWidth===a.width&&e.clientHeight===a.height||(a.width=e.clientWidth,a.height=e.clientHeight,i&&(d+=i),r&&(u+=r),n&&(d=this.keepXYWithinBounds(e,d,1),u=this.keepXYWithinBounds(e,u,0)),e.style.left=`${d}px`,e.style.top=`${u}px`,t.postProcessCallback&&t.postProcessCallback())};if(l(),!o){let c=qd(this.beans,e,()=>l(!0));setTimeout(()=>c(),vpe)}}getActivePopups(){return this.popupList.map(t=>t.element)}getParentRect(){let t=zi(this.beans),e=this.getPopupParent();return e===t.body?e=t.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),Wz(e)}keepXYWithinBounds(t,e,n){let i=n===0,r=i?"clientHeight":"clientWidth",o=i?"top":"left",s=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=zi(this.beans),c=l.documentElement,d=this.getPopupParent(),u=t.getBoundingClientRect(),h=d.getBoundingClientRect(),f=l.documentElement.getBoundingClientRect(),p=d===l.body,v=Math.ceil(u[s]),g=p?(i?Gz:gx)(c)+c[a]:d[r];p&&(g-=Math.abs(f[o]-h[o]));let C=g-v;return Math.min(Math.max(e,0),Math.abs(C))}addPopup(t){let e=zi(this.beans),{eChild:n,ariaLabel:i,alwaysOnTop:r,positionCallback:o,anchorToElement:s}=t;if(!e)return Ee(122),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!r),c=this.addEventListenersToPopup(ae(k({},t),{wrapperEl:l}));return o&&o(),this.addPopupToPopupList(n,l,c,s),{hideFunc:c}}initialisePopupPosition(t){let n=this.getPopupParent().getBoundingClientRect();Ve(t.style.top)||(t.style.top=`${n.top*-1}px`),Ve(t.style.left)||(t.style.left=`${n.left*-1}px`)}createPopupWrapper(t,e,n){let i=this.getPopupParent(),{environment:r,gos:o}=this.beans,s=On({tag:"div"});return r.applyThemeClasses(s),s.classList.add("ag-popup"),t.classList.add(o.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||Kl(t,"dialog"),Af(t,e),s.appendChild(t),i.appendChild(s),n?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),s}handleThemeChange(t){if(t.themeChanged){let e=this.beans.environment;for(let n of this.popupList)e.applyThemeClasses(n.wrapper)}}addEventListenersToPopup(t){let e=this.beans,n=zi(e),i=this.getPopupParent(),{wrapperEl:r,eChild:o,closedCallback:s,afterGuiAttached:a,closeOnEsc:l,modal:c}=t,d=!1,u=v=>{if(!r.contains(Wn(e)))return;v.key===ne.ESCAPE&&!Oa(v)&&p({keyboardEvent:v})},h=v=>p({mouseEvent:v}),f=v=>p({touchEvent:v}),p=(v={})=>{let{mouseEvent:m,touchEvent:g,keyboardEvent:C,forceHide:y}=v;!y&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:g},o)||d)||(d=!0,i.removeChild(r),n.removeEventListener("keydown",u),n.removeEventListener("mousedown",h),n.removeEventListener("touchstart",f),n.removeEventListener("contextmenu",h),this.eventSvc.removeEventListener("dragStarted",h),s&&s(m||g||C),this.removePopupFromPopupList(o))};return a&&a({hidePopup:p}),window.setTimeout(()=>{l&&n.addEventListener("keydown",u),c&&(n.addEventListener("mousedown",h),this.eventSvc.addEventListener("dragStarted",h),n.addEventListener("touchstart",f),n.addEventListener("contextmenu",h))},0),p}addPopupToPopupList(t,e,n,i){this.popupList.push({element:t,wrapper:e,hideFunc:n,instanceId:mpe++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(t,i)}getPopupIndex(t){return this.popupList.findIndex(e=>e.element===t)}setPopupPositionRelatedToElement(t,e){let n=this.getPopupIndex(t);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!e)return;let r=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:i.hideFunc});return i.stopAnchoringPromise=r,i.isAnchored=!0,r}removePopupFromPopupList(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(e=>e.element!==t)}keepPopupPositionedRelativeTo(t){let e=this.getPopupParent(),n=e.getBoundingClientRect(),{element:i,ePopup:r}=t,o=i.getBoundingClientRect(),s=u=>parseInt(u.substring(0,u.length-1),10),a=(u,h)=>{let f=n[u]-o[u],p=s(r.style[u]);return{initialDiff:f,lastDiff:f,initial:p,last:p,direction:h}},l=a("top",0),c=a("left",1),d=this.beans.frameworkOverrides;return new Gn(u=>{d.wrapIncoming(()=>{d.setInterval(()=>{let h=e.getBoundingClientRect(),f=i.getBoundingClientRect();if(f.top==0&&f.left==0&&f.height==0&&f.width==0){t.hidePopup();return}let v=(m,g)=>{let C=s(r.style[g]);m.last!==C&&(m.initial=C,m.last=C);let y=h[g]-f[g];if(y!=m.lastDiff){let w=this.keepXYWithinBounds(r,m.initial+m.initialDiff-y,m.direction);r.style[g]=`${w}px`,m.last=w}m.lastDiff=y};v(l,"top"),v(c,"left")},200).then(h=>{u(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(t=>t.isAnchored)}isEventFromCurrentPopup(t,e){let{mouseEvent:n,touchEvent:i}=t,r=n||i;if(!r)return!1;let o=this.getPopupIndex(e);if(o===-1)return!1;for(let s=o;s<this.popupList.length;s++){let a=this.popupList[s];if(_oe(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(t){let e=zi(this.beans);for(;t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1}getWrapper(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){let n=this.getWrapper(t);n&&(n.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(n))}bringPopupToFront(t){let e=this.getPopupParent(),n=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),i=n.length,r=this.getWrapper(t);if(!r||i<=1||!e.contains(t))return;let o=[],s=[];for(let h of n)h!==r&&(h.classList.contains("ag-always-on-top")?s.push(h):o.push(h));let a=[],l=s.length,u=r.classList.contains("ag-always-on-top")||!l?[...o,...s,r]:[...o,r,...s];for(let h=0;h<=i;h++){let f=u[h];if(n[h]===u[h]||f===r)continue;f.querySelectorAll("div").forEach(v=>{v.scrollTop!==0&&a.push([v,v.scrollTop])}),h===0?e.insertAdjacentElement("afterbegin",f):u[h-1].insertAdjacentElement("afterend",f)}for(;a.length;){let h=a.pop();h[0].scrollTop=h[1]}}},vP={moduleName:"Popup",version:Rt,beans:[ype]},Cpe=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function bpe(t){let e=t.filterManager;return!!e?.isColumnFilterPresent()||!!e?.isAggregateFilterPresent()}function wpe(t,e){return t.filterManager?.getColumnFilterInstance(e)??Promise.resolve(void 0)}function _pe(t,e){let n=t.colModel.getColDefCol(e);if(n)return t.colFilter?.destroyFilter(n,"api")}function Spe(t,e){t.frameworkOverrides.wrapIncoming(()=>t.filterManager?.setFilterModel(e))}function xpe(t){return t.filterManager?.getFilterModel()??{}}function Epe(t,e,n){let{gos:i,colModel:r,colFilter:o}=t;n&&!i.get("enableFilterHandlers")&&(Ee(288),n=!1);let s=r.getColDefCol(e);return s?o?.getModelForColumn(s,n)??null:null}function Mpe(t,e,n){return t.filterManager?.setColumnFilterModel(e,n)??Promise.resolve()}function Rpe(t,e){let n=t.colModel.getCol(e);if(!n){In(12,{colKey:e});return}t.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function Dpe(t,e){let n=t.colModel.getCol(e);if(!n){In(12,{colKey:e});return}return t.colFilter?.getHandler(n,!0)}function Tpe(t,e){let{colModel:n,colFilter:i,gos:r}=t;if(!r.get("enableFilterHandlers")){Ee(287);return}let{colId:o,action:s}=e;if(o){let a=n.getColById(o);a&&i?.updateModel(a,s)}else i?.updateAllModels(s)}var Ape={filterHandler:()=>({doesFilterPass:()=>!0})},Ipe=class extends he{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap=k({},XU),this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),beforeRefreshModel:({params:n,groupsChanged:i})=>{(i||n.rowDataUpdated)&&this.onNewRowsLoaded("rowDataUpdated")},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});let t=this.gos,e=k({},t.get("initialState")?.filter?.filterModel??{});this.initialModel=e,this.model=k({},e),t.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}setModel(t,e="api"){let{colModel:n,dataTypeSvc:i,filterManager:r}=this.beans;if(i?.isPendingInference){this.modelUpdates.push({model:t,source:e});return}let o=[],s=this.getModel(!0);if(t){let a=new Set(Object.keys(t));this.allColumnFilters.forEach((l,c)=>{let d=t[c];o.push(this.setModelOnFilterWrapper(l,d)),a.delete(c)}),a.forEach(l=>{let c=n.getColDefCol(l)||n.getCol(l);if(!c){Ee(62,{colId:l});return}if(!c.isFilterAllowed()){Ee(63,{colId:l});return}let d=this.getOrCreateFilterWrapper(c,!0);if(!d){Ee(64,{colId:l});return}o.push(this.setModelOnFilterWrapper(d,t[l],!0))})}else this.model={},this.allColumnFilters.forEach(a=>{o.push(this.setModelOnFilterWrapper(a,null))});Gn.all(o).then(()=>{let a=this.getModel(!0),l=[];this.allColumnFilters.forEach((c,d)=>{let u=s?s[d]:null,h=a?a[d]:null;Az(u,h)||l.push(c.column)}),l.length>0&&r?.onFilterChanged({columns:l,source:e})})}getModel(t){let e={},{allColumnFilters:n,initialModel:i,beans:{colModel:r}}=this;if(n.forEach((o,s)=>{let a=this.getModelFromFilterWrapper(o);Ve(a)&&(e[s]=a)}),!t)for(let o of Object.keys(i)){let s=i[o];Ve(s)&&!n.has(o)&&r.getCol(o)?.isFilterAllowed()&&(e[o]=s)}return e}setState(t,e,n="api"){if(this.state.clear(),e)for(let i of Object.keys(e)){let r=e[i];this.state.set(i,{model:Pi(this.model,i),state:r})}this.setModel(t,n)}getState(){let t=this.state;if(!t.size)return;let e={},n=!1;return t.forEach((i,r)=>{let o=i.state;o!=null&&(n=!0,e[r]=o)}),n?e:void 0}getModelFromFilterWrapper(t){let n=t.column.getColId();if(t.isHandler)return Pi(this.model,n);let i=t.filter;return i?typeof i.getModel!="function"?(Ee(66),null):i.getModel():Pi(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};let{allColumnFilters:t}=this;return t.size?(t.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){let t=c=>c?c.isFilterActive?c.isFilterActive():(Ee(67),!1):!1,{colModel:e,gos:n}=this.beans,i=!!yF(n),r=c=>{if(!c.isPrimary())return!0;let u=!e.isPivotActive();return!c.isValueActive()||!u?!1:e.isPivotMode()?!0:i},o=[],s=[],a=(c,d,u)=>{d&&(r(c)?o.push(u):s.push(u))},l=[];return this.allColumnFilters.forEach(c=>{let d=c.column,u=d.getColId();if(c.isHandler)l.push(Gn.resolve().then(()=>{a(d,this.isHandlerActive(d),{colId:u,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{let h=Gl(c);h&&l.push(h.then(f=>{a(d,t(f),{colId:u,isHandler:!1,comp:f})}))}}),Gn.all(l).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=s})}updateFilterFlagInColumns(t,e){let n=[];return this.allColumnFilters.forEach(i=>{let r=i.column;if(i.isHandler)n.push(Gn.resolve().then(()=>{this.setColFilterActive(r,this.isHandlerActive(r),t,e)}));else{let o=Gl(i);o&&n.push(o.then(s=>{this.setColFilterActive(r,s.isFilterActive(),t,e)}))}}),this.beans.groupFilter?.updateFilterFlags(t,e),Gn.all(n)}doFiltersPass(t,e,n){let{data:i,aggData:r}=t,o=n?this.activeAggregateFilters:this.activeColumnFilters,s=n?r:i,a=this.model;for(let l=0;l<o.length;l++){let c=o[l],{colId:d,isHandler:u}=c;if(d!==e)if(u){let{handler:h,handlerParams:f}=c;if(!h.doesFilterPass({node:t,data:s,model:Pi(a,d),handlerParams:f}))return!1}else{let h=c.comp;if(typeof h.doesFilterPass!="function"){In(91);continue}if(!h.doesFilterPass({node:t,data:s}))return!1}}return!0}getHandlerParams(t){let e=this.allColumnFilters.get(t.getColId());return e?.isHandler?e.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(t){let{rowRenderer:e,filterManager:n}=this.beans,i=()=>{this.isAlive()&&n?.onFilterChanged(t)};e.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(t={}){let{column:e,additionalEventAttributes:n}=t,i=e?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(r=>{let{column:o,isHandler:s}=r;i!==o.getColId()&&(s&&r.handler.onAnyFilterChanged?.(),Gl(r,s)?.then(a=>{typeof a?.onAnyFilterChanged=="function"&&a.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(t){let e=[];this.allColumnFilters.forEach(n=>{let i=n.isHandler;i&&n.handler.onNewRowsLoaded?.();let r=Gl(n,i);r&&e.push(r.then(o=>{o.onNewRowsLoaded?.()}))}),Gn.all(e).then(()=>this.updateFilterFlagInColumns(t,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createGetValue(t,e){let{filterValueSvc:n,colModel:i}=this.beans;return(r,o)=>{let s=o?i.getCol(o):t;return s?n.getValue(s,r,e):void 0}}isFilterActive(t){let e=this.cachedFilter(t);if(e?.isHandler)return this.isHandlerActive(t);let n=e?.filter;return n?n.isFilterActive():Pi(this.initialModel,t.getColId())!=null}isHandlerActive(t){let e=Ve(Pi(this.model,t.getColId()));if(e)return e;let n=this.beans.groupFilter;return n?.isGroupFilter(t)?n.isFilterActive(t):!1}getOrCreateFilterUi(t){let e=this.getOrCreateFilterWrapper(t,!0);return e?Gl(e):null}getFilterUiForDisplay(t){let e=this.getOrCreateFilterWrapper(t,!0);if(!e)return null;let n=Gl(e);return n?n.then(i=>({comp:i,params:e.filterUi.filterParams,isHandler:e.isHandler})):null}getHandler(t,e){let n=this.getOrCreateFilterWrapper(t,e);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(t,e){if(!t.isFilterAllowed())return;let n=this.cachedFilter(t);return!n&&e&&(n=this.createFilterWrapper(t),this.setColumnFilterWrapper(t,n)),n}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t,e=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(t),e)}getDefaultFilterFromDataType(t,e=!1){return moe(this.gos)?e?"agSetColumnFloatingFilter":"agSetColumnFilter":Xae(t(),e)}getDefaultFloatingFilter(t){return this.getDefaultFilter(t,!0)}createFilterComp(t,e,n,i,r,o){let s=()=>{let c=this.createFilterCompParams(t,r,o),d=i(c,r);return Mse(this.beans.userCompFactory,e,d,n)},a=s();return a?{compDetails:a,createFilterUi:c=>(c?s():a).newAgStackInstance()}:null}createFilterInstance(t,e,n,i){let r=this.beans.selectableFilter;r?.isSelectable(e)&&(e=r.getFilterDef(t,e));let{handler:o,handlerParams:s,handlerGenerator:a}=this.createHandler(t,e,n)??{},l=this.createFilterComp(t,e,n,i,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:s};let{compDetails:c,createFilterUi:d}=l;return this.isGlobalButtons&&(c.params?.buttons?.length||Ee(281,{colId:t.getColId()})),{compDetails:c,handler:o,handlerGenerator:a,handlerParams:s,createFilterUi:d}}createBaseFilterParams(t,e){let{filterManager:n,rowModel:i}=this.beans;return jt(this.gos,{column:t,colDef:t.getColDef(),getValue:this.createGetValue(t),doesRowPassOtherFilter:e?()=>!0:r=>n?.doesRowPassOtherFilters(t.getColId(),r)??!0,rowModel:i})}createFilterCompParams(t,e,n,i){let r=this.filterChangedCallbackFactory(t),o=this.createBaseFilterParams(t,i);if(o.filterChangedCallback=r,o.filterModifiedCallback=i?()=>{}:s=>this.filterModified(t,s),e){let s=o,a=t.getColId(),l=Pi(this.model,a);s.model=l,s.state=this.state.get(a)??{model:l},s.onModelChange=(c,d)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(t,c,"ui").then(()=>{r(ae(k({},d),{source:"columnFilter"}))})},s.onStateChange=c=>{this.updateState(t,c),this.updateOrRefreshFilterUi(t)},s.onAction=(c,d,u)=>{this.updateModel(t,c,d),this.dispatchLocalEvent({type:"filterAction",column:t,action:c,event:u})},s.getHandler=()=>this.getHandler(t,!0),s.onUiChange=c=>this.filterUiChanged(t,c),s.source=n}return o}createFilterUiForHandler(t,e){return e?{created:!1,create:e,filterParams:t.params,compDetails:t}:null}createFilterUiLegacy(t,e,n){let i=e(),r={created:!0,create:e,filterParams:t.params,compDetails:t,promise:i};return i.then(n),r}createFilterWrapper(t){let{compDetails:e,handler:n,handlerGenerator:i,handlerParams:r,createFilterUi:o}=this.createFilterInstance(t,t.getColDef(),this.getDefaultFilter(t),a=>a),s=t.getColId();if(n)return delete this.initialModel[s],n.init?.(ae(k({},r),{source:"init",model:Pi(this.model,s)})),{column:t,isHandler:!0,handler:n,handlerGenerator:i,handlerParams:r,filterUi:this.createFilterUiForHandler(e,o)};if(o){let a={column:t,filterUi:null,isHandler:!1};return a.filterUi=this.createFilterUiLegacy(e,o,l=>{a.filter=l??void 0}),a}return{column:t,filterUi:null,isHandler:!1}}createHandlerFunc(t,e){let{gos:n,frameworkOverrides:i,registry:r}=this.beans,o,s=u=>{let h=u.filter;if(AU(h)){let f=h.handler;return f||(o=h.doesFilterPass,o?()=>({doesFilterPass:o}):void 0)}return typeof h=="string"?h:void 0},a=n.get("enableFilterHandlers")?s(t):void 0,l=u=>()=>this.createBean(r.createDynamicBean(u,!0)),c,d;if(typeof a=="string"){let u=n.get("filterHandlers")?.[a];u!=null?c=u:Lae.has(a)&&(c=l(a),d=a)}else c=a;if(!c){let u,{compName:h,jsComp:f,fwComp:p}=FU(i,t);h?u=h:f==null&&p==null&&t.filter===!0&&(u=e),d=this.handlerMap[u],d&&(c=l(d))}if(c)return{filterHandler:c,handlerNameOrCallback:o??d}}createHandler(t,e,n){let i=this.createHandlerFunc(e,n);if(!i){let c=this.gos;if(!c.get("enableFilterHandlers"))return;Tr(c)&&Ee(277,{colId:t.getColId()}),i=Ape}let r=HI(this.beans.userCompFactory,e,this.createFilterCompParams(t,!0,"init")),{handlerNameOrCallback:o,filterHandler:s}=i,{handler:a,handlerParams:l}=this.createHandlerFromFunc(t,s,r);return{handler:a,handlerParams:l,handlerGenerator:o??s}}createHandlerFromFunc(t,e,n){let i=t.getColDef(),r=e(jt(this.gos,{column:t,colDef:i})),o=this.createHandlerParams(t,n);return{handler:r,handlerParams:o}}createHandlerParams(t,e){let n=t.getColDef(),i=t.getColId(),r=this.filterChangedCallbackFactory(t);return jt(this.gos,{colDef:n,column:t,getValue:this.createGetValue(t),doesRowPassOtherFilter:o=>this.beans.filterManager?.doesRowPassOtherFilters(i,o)??!0,onModelChange:(o,s)=>{this.updateStoredModel(i,o),this.refreshHandlerAndUi(t,o,"handler").then(()=>{r(ae(k({},s),{source:"columnFilter"}))})},filterParams:e})}onColumnsChanged(){let t=[],{colModel:e,filterManager:n,groupFilter:i}=this.beans;this.allColumnFilters.forEach((o,s)=>{let a;o.column.isPrimary()?a=e.getColDefCol(s):a=e.getCol(s),!(a&&a===o.column)&&(t.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(s))});let r=i&&t.every(o=>i.isGroupFilter(o));t.length>0&&!r&&n?.onFilterChanged({columns:t,source:"api"})}isFilterAllowed(t){if(!t.isFilterAllowed())return!1;let n=this.beans.groupFilter;return n?.isGroupFilter(t)?n.isFilterAllowed(t):!0}getFloatingFilterCompDetails(t,e){let{userCompFactory:n,frameworkOverrides:i,selectableFilter:r}=this.beans,o=h=>{let f=this.getOrCreateFilterUi(t);f?.then(p=>{h(wF(p))})},s=t.getColDef(),a=r?.isSelectable(s)?r.getFilterDef(t,s):s,l=nle(i,a,()=>this.getDefaultFloatingFilter(t))??"agReadOnlyFloatingFilter",c=this.gos.get("enableFilterHandlers"),d=HI(n,a,this.createFilterCompParams(t,c,"init",!0)),u=jt(this.gos,{column:t,filterParams:d,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:o,showParentFilter:e});if(c){let h=u,f=t.getColId(),p=this.filterChangedCallbackFactory(t);h.onUiChange=v=>this.floatingFilterUiChanged(t,v),h.model=Pi(this.model,f),h.onModelChange=(v,m)=>{this.updateStoredModel(f,v),this.refreshHandlerAndUi(t,v,"floating",!0).then(()=>{p(ae(k({},m),{source:"columnFilter"}))})},h.getHandler=()=>this.getHandler(t,!0),h.source="init"}return Ase(n,s,u,l)}getCurrentFloatingFilterParentModel(t){return this.getModelFromFilterWrapper(this.cachedFilter(t)??{column:t})}destroyFilterUi(t,e,n,i){if(t.isHandler){let r=e.getColId();delete this.initialModel[r],this.state.delete(r);let o=t.filterUi,s=this.createFilterUiForHandler(n,i);t.filterUi=s,o?.created&&o.promise.then(a=>{this.destroyBean(a),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:"paramsUpdated",column:t.column})})}else this.destroyFilter(e,"paramsUpdated")}destroyFilter(t,e="api"){let n=t.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],i&&this.disposeFilterWrapper(i,e).then(r=>{r&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[t],source:"api"})})}disposeColumnListener(t){let e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())}disposeFilterWrapper(t,e){let n=!1,{column:i,isHandler:r,filterUi:o}=t,s=i.getColId();r&&(n=this.isHandlerActive(i),this.destroyBean(t.handler),delete this.model[s],this.state.delete(s));let a=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(s),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:e,column:i})};if(o){if(o.created)return o.promise.then(l=>(n=r?n:!!l?.isFilterActive(),this.destroyBean(l),a(),n));a()}return Gn.resolve(n)}filterChangedCallbackFactory(t){return e=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:e,columns:[t],column:t,source:e?.source??"columnFilter"})}}filterParamsChanged(t,e="api"){let n=this.allColumnFilters.get(t);if(!n)return;let i=this.beans,r=n.column,o=r.getColDef(),s=r.isFilterAllowed(),a=this.getDefaultFilter(r),l=i.selectableFilter,c=l?.isSelectable(o)?l.getFilterDef(r,o):o,d=s?this.createHandlerFunc(c,this.getDefaultFilter(r)):void 0,u=!!d,h=n.isHandler;if(h!=u){this.destroyFilter(r,"paramsUpdated");return}let{compDetails:f,createFilterUi:p}=(s?this.createFilterComp(r,c,a,m=>m,u,"colDef"):null)??{compDetails:null,createFilterUi:null},v=f?.params??HI(i.userCompFactory,c,this.createFilterCompParams(r,u,"colDef"));if(h){let m=d?.handlerNameOrCallback??d?.filterHandler,g=Pi(this.model,t);if(n.handlerGenerator!=m){let C=n.handler,{handler:y,handlerParams:w}=this.createHandlerFromFunc(r,d.filterHandler,v);n.handler=y,n.handlerParams=w,n.handlerGenerator=m,delete this.model[t],y.init?.(ae(k({},w),{source:"init",model:null})),this.destroyBean(C),g!=null&&this.beans.filterManager?.onFilterChanged({columns:[r],source:e})}else{let C=this.createHandlerParams(r,f?.params);n.handlerParams=C,n.handler.refresh?.(ae(k({},C),{source:"colDef",model:g}))}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,f)||!n.filterUi||!f){this.destroyFilterUi(n,r,f,p);return}n.filterUi.filterParams=v,Gl(n,h)?.then(m=>{(m?.refresh?m.refresh(v):!0)===!1?this.destroyFilterUi(n,r,f,p):this.dispatchLocalEvent({type:"filterParamsChanged",column:r,params:v})})}refreshHandlerAndUi(t,e,n,i){let r=this.cachedFilter(t);if(!r)return i&&this.getOrCreateFilterWrapper(t,!0),Gn.resolve();if(!r.isHandler)return Gn.resolve();let{filterUi:o,handler:s,handlerParams:a}=r;return Nae(()=>{if(o){let{created:l,filterParams:c}=o;if(l)return o.promise.then(d=>d?{filter:d,filterParams:c}:void 0);o.refreshed=!0}return Gn.resolve(void 0)},s,a,e,this.state.get(t.getColId())??{model:e},n)}setColumnFilterWrapper(t,e){let n=t.getColId();this.allColumnFilters.set(n,e),this.allColumnListeners.set(n,this.addManagedListeners(t,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(t,e){if(!e||!t)return!0;let{componentClass:n}=t,{componentClass:i}=e;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(e=>e.getColDef().floatingFilter)}getFilterInstance(t){let e=this.beans.colModel.getColDefCol(t);if(!e)return Promise.resolve(void 0);let n=this.getOrCreateFilterUi(e);return n?new Promise(i=>{n.then(r=>{i(wF(r))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:t,source:e})=>this.setModel(t,e)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:t,model:e,resolve:n})=>{this.setModelForColumn(t,e).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(t,e){if(e){let{state:i,model:r}=this,o=t.getColId(),s=i.get(o);return s?s.model??null:Pi(r,o)}let n=this.cachedFilter(t);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(t,e){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{},i=new Promise(r=>{n=r});return this.columnModelUpdates.push({key:t,model:e,resolve:n}),i}return new Promise(n=>{this.setModelForColumnLegacy(t,e).then(i=>n(i))})}getStateForColumn(t){return this.state.get(t)??{model:Pi(this.model,t)}}setModelForColumnLegacy(t,e){let n=this.beans.colModel.getColDefCol(t),i=n?this.getOrCreateFilterWrapper(n,!0):null;return i?this.setModelOnFilterWrapper(i,e):Gn.resolve()}setColDefPropsForDataType(t,e,n){let i=t.filter,r=i===!0?this.getDefaultFilterFromDataType(()=>e.baseDataType):i;if(typeof r!="string")return;let o,s,a=this.beans,{filterParams:l,filterValueGetter:c}=t;r==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:s}=a.multiFilter?.getParamsForDataType(l,c,e,n)??{}:{filterParams:o,filterValueGetter:s}=qae(r,l,c,e,n,a,this.getLocaleTextFunc()),t.filterParams=o,s&&(t.filterValueGetter=s)}setColFilterActive(t,e,n,i){t.filterActive!==e&&(t.filterActive=e,t.dispatchColEvent("filterActiveChanged",n)),t.dispatchColEvent("filterChanged",n,i)}setModelOnFilterWrapper(t,e,n){return new Gn(i=>{if(t.isHandler){let o=t.column,s=o.getColId(),a=this.model[s];if(this.updateStoredModel(s,e),n&&e===a){i();return}this.refreshHandlerAndUi(o,e,"api").then(()=>i());return}let r=Gl(t);if(r){r.then(o=>{if(typeof o?.setModel!="function"){Ee(65),i();return}(o.setModel(e)||Gn.resolve()).then(()=>i())});return}i()})}updateStoredModel(t,e){Ve(e)?this.model[t]=e:delete this.model[t];let n=this.state.get(t),i={model:e,state:n?.state};this.state.set(t,i)}filterModified(t,e){this.getOrCreateFilterUi(t)?.then(n=>{this.eventSvc.dispatchEvent(k({type:"filterModified",column:t,filterInstance:n},e))})}filterUiChanged(t,e){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(k({type:"filterUiChanged",column:t},e))}floatingFilterUiChanged(t,e){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent(k({type:"floatingFilterUiChanged",column:t},e))}updateModel(t,e,n){let i=t.getColId(),r=()=>this.cachedFilter(t)?.filterUi;$6(e,r,()=>Pi(this.model,i),()=>this.state.get(i),o=>this.updateState(t,o),o=>r()?.filterParams?.onModelChange(o,n))}updateAllModels(t,e){let n=[];this.allColumnFilters.forEach((i,r)=>{let o=this.beans.colModel.getColDefCol(r);o&&$6(t,()=>i.filterUi,()=>Pi(this.model,r),()=>this.state.get(r),s=>this.updateState(o,s),s=>{this.updateStoredModel(r,s),this.dispatchLocalEvent({type:"filterAction",column:o,action:t}),n.push(this.refreshHandlerAndUi(o,s,"ui"))})}),n.length&&Gn.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:e,columns:[]})})}updateOrRefreshFilterUi(t){let e=t.getColId();QU(()=>this.cachedFilter(t)?.filterUi,()=>Pi(this.model,e),()=>this.state.get(e))}updateState(t,e){this.state.set(t.getColId(),e),this.dispatchLocalEvent({type:"filterStateChanged",column:t,state:e})}canApplyAll(){let{state:t,model:e,activeFilterComps:n}=this;for(let r of n)if(r.source==="COLUMN_MENU")return!1;let i=!1;for(let r of t.keys()){let o=t.get(r);if(o.valid===!1)return!1;(o.model??null)!==Pi(e,r)&&(i=!0)}return i}hasUnappliedModel(t){let{model:e,state:n}=this;return(n.get(t)?.model??null)!==Pi(e,t)}setGlobalButtons(t){this.isGlobalButtons=t,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:t})}shouldKeepStateOnDetach(t,e){if(e==="newFiltersToolPanel")return!0;let n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(t.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function Fpe(t){return!!t.filterManager?.isAnyFilterPresent()}function Ppe(t,e="api"){t.filterManager?.onFilterChanged({source:e})}var kpe=class extends he{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(t){this.quickFilter=t.quickFilter,this.advancedFilter=t.advancedFilter,this.colFilter=t.colFilter}postConstruct(){let t=this.refreshFiltersForAggregations.bind(this),e=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:t,columnPivotChanged:t,columnPivotModeChanged:t,newColumnsLoaded:e,columnVisible:e,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});let{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){let t=this.gos.getCallback("isExternalFilterPresent");return typeof t=="function"&&t({})}doesExternalFilterPass(t){let e=this.gos.get("doesExternalFilterPass");return typeof e=="function"&&e(t)}setFilterState(t,e,n="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(t,e,n)}setFilterModel(t,e="api",n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(t,e)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(t){t?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){yF(this.gos)&&this.onFilterChanged()}onFilterChanged(t={}){let{source:e,additionalEventAttributes:n,columns:i=[]}=t;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(t):Gn.resolve()).then(()=>{let r={source:e,type:"filterChanged",columns:i};n&&Ar(r,n),this.eventSvc.dispatchEvent(r),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!yF(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,colIdToSkip:t})}doesRowPassAggregateFilters(t){let{rowNode:e}=t;return this.alwaysPassFilter?.(e)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(e)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(e,t.colIdToSkip,!0))}doesRowPassFilter(t){let{rowNode:e}=t;return this.alwaysPassFilter?.(e)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(e)||this.externalFilterPresent&&!this.doesExternalFilterPass(e)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(e,t.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(e))}isFilterAllowed(t){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(t)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(t,e="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(t);return}this.advancedFilter.setModel(t??null),this.onFilterChanged({source:e})}}toggleAdvFilterBuilder(t,e){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:e,force:t})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(t)??Promise.resolve(void 0)}warnAdvFilters(){Ee(68)}setupAdvFilterHeaderComp(t){this.advancedFilter?.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advFilterModelUpdateQueue.forEach(t=>this.setAdvFilterModel(t)),this.advFilterModelUpdateQueue=[]}setColumnFilterModel(t,e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(t,e)??Promise.resolve()}},Ope=class extends he{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(t){this.popupSvc=t.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(t,e,n,i){t&&!t.isColumn||this.showPopup(t,r=>{this.popupSvc?.positionPopupUnderMouseEvent({column:t,type:n,mouseEvent:e,ePopup:r})},n,e.target,Xr(this.gos),i)}showMenuAfterButtonClick(t,e,n,i){if(t&&!t.isColumn)return;let r=-1,o="left",s=Xr(this.gos);!s&&this.gos.get("enableRtl")&&(r=1,o="right");let a=s?void 0:4*r,l=s?void 0:4;this.showPopup(t,c=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:e,ePopup:c,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",column:t})},n,e,s,i)}showPopup(t,e,n,i,r,o){let s=t?this.createBean(new Gae(t,"COLUMN_MENU")):void 0;if(this.activeMenu=s,!s?.hasFilter()||!t){In(57);return}let a=On({tag:"div",cls:`ag-menu${r?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:v=>this.trapFocusWithin(v,a)}),a.appendChild(s?.getGui());let l,c=()=>s?.afterGuiDetached(),d=voe(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,u=v=>{nz(t,!1,"contextMenu");let m=v instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),m&&i&&Yo(i)&&GU(i)?.focus({preventScroll:!0}),c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,t),o?.()},h=this.getLocaleTextFunc(),f=r&&n!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),p=this.popupSvc?.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:u,positionCallback:()=>e(a),anchorToElement:d,ariaLabel:f});p&&(this.hidePopup=l=p.hideFunc),s.afterInit().then(()=>{e(a),s.afterGuiAttached({container:n,hidePopup:l})}),nz(t,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,t)}trapFocusWithin(t,e){t.key!==ne.TAB||t.defaultPrevented||Yd(this.beans,e,!1,t.shiftKey)||(t.preventDefault(),$d(e,t.shiftKey))}dispatchVisibleChangedEvent(t,e,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:t,switchingTab:!1,key:e,column:n??null,columnGroup:null})}isMenuEnabled(t){return t.isFilterAllowed()&&(t.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Lpe=class extends he{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(t,e,n){if(!e)return;let i=t.getColDef(),{selectableFilter:r,valueSvc:o}=this.beans,s=n??r?.getFilterValueGetter(t.getColId())??i.filterValueGetter;return s?this.executeFilterValueGetter(s,e.data,t,e,i):o.getValue(t,e)}executeFilterValueGetter(t,e,n,i,r){let{expressionSvc:o,valueSvc:s}=this.beans,a=jt(this.gos,{data:e,node:i,column:n,colDef:r,getValue:s.getValueCallback.bind(s,i)});return typeof t=="function"?t(a):o?.evaluate(t,a)}},Npe={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},Bpe=class extends ln{constructor(){super(Npe,[Ice]),this.eFloatingFilterText=Fe}init(t){this.params=t;let e=this.beans.colNames.getDisplayNameForColumn(t.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){let n=t,i=n.getHandler();if(i.getModelAsString){let r=i.getModelAsString(n.model);this.eFloatingFilterText.setValue(r)}}}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){let n=e.getModelAsString(t);this.eFloatingFilterText.setValue(n)}})}refresh(t){this.init(t)}},yP=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions??e,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(t.defaultOption)}refresh(t,e){let n=t.filterOptions??e;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(t.defaultOption)}mapCustomOptions(){let{filterOptions:t}=this;t&&t.forEach(e=>{if(typeof e=="string")return;let n=[["displayKey"],["displayName"],["predicate","test"]],i=r=>r.some(o=>e[o]!=null)?!0:(Ee(72,{keys:r}),!1);if(!n.every(i)){this.filterOptions=t.filter(r=>r===e)||[];return}this.customFilterOptions[e.displayKey]=e})}getDefaultItem(t){let{filterOptions:e}=this;if(t)return t;if(e.length>=1){let n=e[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;Ee(73)}else Ee(74)}getCustomOption(t){return this.customFilterOptions[t]}};function Tz(t,e,n){return n==null?t.splice(e):t.splice(e,n)}function kx(t){return t==null||typeof t=="string"&&t.trim().length===0}function Vpe(t){return t==="AND"||t==="OR"?t:"AND"}function Hpe(t,e,n){if(t==null)return;let{predicate:i}=t;if(i!=null&&!e.some(r=>r==null))return i(e,n)}function zpe(t,e){let n=t.length;return n>e&&(t.splice(e),Ee(78),n=e),n}function Ox(t,e){let n=e.getCustomOption(t);if(n){let{numberOfInputs:r}=n;return r??1}return t&&["empty","notBlank","blank"].indexOf(t)>=0?0:t==="inRange"?2:1}var n8=class extends ele{constructor(t,e,n){super(t,"simple-filter"),this.mapValuesFromModel=e,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(t){super.setParams(t);let e=new yP;this.optionsFactory=e,e.init(t,this.defaultOptions),this.commonUpdateSimpleParams(t),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(t,e){this.optionsFactory.refresh(t,this.defaultOptions),super.updateParams(t,e),this.commonUpdateSimpleParams(t)}commonUpdateSimpleParams(t){this.setNumConditions(t),this.defaultJoinOperator=Vpe(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.createFilterListOptions();let e=this.getGui();this.isReadOnly()?e.setAttribute("tabindex","-1"):e.removeAttribute("tabindex")}onFloatingFilterChanged(t,e){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(e),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((e,n)=>{let i=n===0?t:this.optionsFactory.defaultOption;e.setValue(i,!0)})}getModelFromUi(){let t=this.getUiCompleteConditions();return t.length===0?null:this.maxNumConditions>1&&t.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){let{eJoinOrs:t,defaultJoinOperator:e}=this;return t.length===0?e:t[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(t,e){let n=!t.operator,i=!e.operator;if(!n&&i||n&&!i)return!1;let o;if(n){let s=t,a=e;o=this.areSimpleModelsEqual(s,a)}else{let s=t,a=e;o=s.operator===a.operator&&Kd(s.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}setModelIntoUi(t,e){if(t==null)return this.resetUiToDefaults(e),Gn.resolve();if(t.operator){let i=t,r=i.conditions;r==null&&(r=[],Ee(77));let o=zpe(r,this.maxNumConditions),s=this.getNumConditions();if(o<s)this.removeConditionsAndOperators(o);else if(o>s)for(let l=s;l<o;l++)this.createJoinOperatorPanel(),this.createOption();let a=i.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),r.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{let i=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams()),Gn.resolve()}setNumConditions(t){let e=t.maxNumConditions??2;e<1&&(Ee(79),e=1),this.maxNumConditions=e;let n=t.numAlwaysVisibleConditions??1;n<1&&(Ee(80),n=1),n>e&&(Ee(81),n=e),this.numAlwaysVisibleConditions=n}createOption(){let t=this.getGui(),e=this.createManagedBean(new vG);this.eTypes.push(e),e.addCss("ag-filter-select"),t.appendChild(e.getGui());let n=this.createEValue();this.eConditionBodies.push(n),t.appendChild(n),this.putOptionsIntoDropdown(e),this.resetType(e);let i=this.getNumConditions()-1;this.forEachPositionInput(i,r=>this.resetInput(r)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){let t=On({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(t);let e=this.createJoinOperator(this.eJoinAnds,t,"and"),n=this.createJoinOperator(this.eJoinOrs,t,"or");this.getGui().appendChild(t);let i=this.eJoinPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(e,i,r),this.resetJoinOperatorOr(n,i,r),this.isReadOnly()||(e.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(t,e,n){let i=this.createManagedBean(new Ace);t.push(i);let r="ag-filter-condition-operator";return i.addCss(r),i.addCss(`${r}-${n}`),e.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(t){let{filterListOptions:e}=this;e.forEach(n=>{t.addOption(n)}),t.setDisabled(e.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){let{displayKey:e}=t,n=this.optionsFactory.getCustomOption(t.displayKey);return{value:e,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(e)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){let t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){let t=-1,e=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?t=n:e=!1;if(this.shouldAddNewConditionAtEnd(e))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(t<n){this.removeConditionsAndOperators(n+1);let i=t+1,r=n-i;r>0&&this.removeConditionsAndOperators(i,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=t}updateConditionStatusesAndValues(t,e){this.eTypes.forEach((i,r)=>{let o=this.isConditionDisabled(r,t);i.setDisabled(o||this.filterListOptions.length<=1),r===1&&(xy(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((i,r)=>{Zn(i,this.isConditionBodyVisible(r))});let n=(e??this.getJoinOperator())==="OR";this.eJoinAnds.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOrs.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,r,o,s)=>{this.setElementDisplayed(i,r<s),this.setElementDisabled(i,this.isConditionDisabled(o,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,e){if(t>=this.getNumConditions())return;let{eTypes:n,eConditionBodies:i,eJoinPanels:r,eJoinAnds:o,eJoinOrs:s}=this;this.removeComponents(n,t,e),this.removeElements(i,t,e),this.removeEValues(t,e);let a=Math.max(t-1,0);this.removeElements(r,a,e),this.removeComponents(o,a,e),this.removeComponents(s,a,e)}removeElements(t,e,n){Tz(t,e,n).forEach(r=>yr(r))}removeComponents(t,e,n){Tz(t,e,n).forEach(r=>{yr(r.getGui()),this.destroyBean(r)})}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!t?.suppressFocus){let e;if(!this.isReadOnly()){let n=this.getInputs(0)[0];n instanceof _f&&this.isConditionBodyVisible(0)?e=n.getInputElement():e=this.eTypes[0]?.getFocusableElement()}(e??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();let t=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(t.column))return;t.onStateChange({model:t.model});let e=-1,n=-1,i=!1,r=this.getJoinOperator();for(let s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))e===-1&&(e=s,n=s);else{let a=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),l=s<e;(a||l)&&(this.removeConditionsAndOperators(s,1),i=!0,l&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,r),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(t){return this.params.getHandler()?.getModelAsString?.(t)??""}getPlaceholderText(t,e){let n=this.translate(t);if(typeof this.filterPlaceholder=="function"){let i=this.eTypes[e].getValue(),r=this.translate(i);n=this.filterPlaceholder({filterOptionKey:i,filterOption:r,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let t=this.getLocaleTextFunc();this.forEachInput((e,n,i,r)=>{if(!(e instanceof _f))return;let o=n===0&&r>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",s=n===0&&r>1?t("ariaFilterFromValue","Filter from value"):n===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");e.setInputPlaceholder(this.getPlaceholderText(o,i)),e.setInputAriaLabel(s)})}setElementValue(t,e,n){t instanceof _f&&t.setValue(e!=null?String(e):null,!0)}setElementDisplayed(t,e){t instanceof ln&&Zn(t.getGui(),e)}setElementDisabled(t,e){t instanceof ln&&xy(t.getGui(),e)}attachElementOnChange(t,e){t instanceof _f&&t.onValueChange(e)}forEachInput(t){this.getConditionTypes().forEach((e,n)=>{this.forEachPositionTypeInput(n,e,t)})}forEachPositionInput(t,e){let n=this.getConditionType(t);this.forEachPositionTypeInput(t,n,e)}forEachPositionTypeInput(t,e,n){let i=Ox(e,this.optionsFactory),r=this.getInputs(t);for(let o=0;o<r.length;o++){let s=r[o];s!=null&&n(s,o,t,i)}}isConditionDisabled(t,e){return this.isReadOnly()?!0:t===0?!1:t>e+1}isConditionBodyVisible(t){let e=this.getConditionType(t);return Ox(e,this.optionsFactory)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)==="empty"||this.getValues(t).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let t=[];for(let e=0;e<this.getNumConditions();e++)this.isConditionUiComplete(e)&&t.push(this.createCondition(e));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(e=>this.resetType(e)),this.eJoinAnds.forEach((e,n)=>this.resetJoinOperatorAnd(e,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((e,n)=>this.resetJoinOperatorOr(e,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(e=>this.resetInput(e)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams())}resetType(t){let n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,e,n){this.resetJoinOperator(t,e,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(t,e,n){this.resetJoinOperator(t,e,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(t,e,n,i,r){this.updateJoinOperatorDisabled(t.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(i),e)}updateJoinOperatorsDisabled(){let t=(e,n)=>this.updateJoinOperatorDisabled(e,n);this.eJoinAnds.forEach(t),this.eJoinOrs.forEach(t)}updateJoinOperatorDisabled(t,e){t.setDisabled(this.isReadOnly()||e>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,e){let n=this.mapValuesFromModel(t,this.optionsFactory);this.forEachInput((i,r,o)=>{o===e&&this.setElementValue(i,n[r]!=null?n[r]:null)})}setValueFromFloatingFilter(t){this.forEachInput((e,n,i)=>{this.setElementValue(e,n===0&&i===0?t:null,!0)})}addChangedListeners(t,e){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(e,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}};var i8=class extends he{constructor(t,e){super(),this.mapValuesFromModel=t,this.defaultOptions=e}init(t){let e=t.filterParams,n=new yP;this.optionsFactory=n,n.init(e,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,e)),this.updateParams(t),this.validateModel(t)}refresh(t){if(t.source==="colDef"){let e=t.filterParams,n=this.optionsFactory;n.refresh(e,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:e}),this.updateParams(t)}this.validateModel(t)}updateParams(t){this.params=t}doesFilterPass(t){let e=t.model;if(e==null)return!0;let{operator:n}=e,i=[];if(n){let s=e;i.push(...s.conditions??[])}else i.push(e);let r=n&&n==="OR"?"some":"every",o=this.params.getValue(t.node);return i[r](s=>this.individualConditionPasses(t,s,o))}getModelAsString(t,e){return this.filterModelFormatter.getModelAsString(t,e)??""}validateModel(t){let{model:e,filterParams:{filterOptions:n,maxNumConditions:i}}=t;if(e==null)return;let o=tle(e)?e.conditions:[e],s=n?.map(d=>typeof d=="string"?d:d.displayKey)??this.defaultOptions;if(!(!o||o.every(d=>s.find(u=>u===d.type)!==void 0))){this.params=ae(k({},t),{model:null}),t.onModelChange(null);return}let l=!1,c=this.filterType;if((o&&!o.every(d=>d.filterType===c)||e.filterType!==c)&&(o=o.map(d=>ae(k({},d),{filterType:c})),l=!0),typeof i=="number"&&o&&o.length>i&&(o=o.slice(0,i),l=!0),l){let d=o.length>1?ae(k({},e),{filterType:c,conditions:o}):ae(k({},o[0]),{filterType:c});this.params=ae(k({},t),{model:d}),t.onModelChange(d);return}}individualConditionPasses(t,e,n){let i=this.optionsFactory,r=this.mapValuesFromModel(e,i),o=i.getCustomOption(e.type),s=Hpe(o,r,n);return s??(n==null?this.evaluateNullValue(e.type):this.evaluateNonNullValue(r,n,e,t))}},Upe=class extends i8{evaluateNullValue(t){let{includeBlanksInEquals:e,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:i,includeBlanksInLessThan:r,includeBlanksInRange:o}=this.params.filterParams;switch(t){case"equals":if(e)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(r)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(t,e,n){let i=n.type;if(!this.isValid(e))return i==="notEqual"||i==="notBlank";let r=this.comparator(),o=t[0]!=null?r(t[0],e):0;switch(i){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{let s=r(t[1],e);return this.params.filterParams.inRangeInclusive?o>=0&&s<=0:o>0&&s<0}case"blank":return kx(e);case"notBlank":return!kx(e);default:return Ee(76,{filterModelType:i}),!0}}},Gpe={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},Wpe={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},r8=class extends he{constructor(t,e,n){super(),this.optionsFactory=t,this.filterParams=e,this.valueFormatter=n}getModelAsString(t,e){let n=this.getLocaleTextFunc(),i=e==="filterToolPanel";if(!t)return i?ql(this,"filterSummaryInactive"):null;if(t.operator!=null){let o=t,a=(o.conditions??[]).map(c=>this.getModelAsString(c,e)),l=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${ql(this,l)} `)}else{if(t.type==="blank"||t.type==="notBlank")return i?ql(this,t.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(t.type,t.type);{let o=t,s=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:l,numberOfInputs:c}=s||{};return a&&l&&c===0?n(a,l):this.conditionToString(o,i,o.type==="inRange"||c===2,a,l)}}}updateParams(t){let{optionsFactory:e,filterParams:n}=t;this.optionsFactory=e,this.filterParams=n}conditionForToolPanel(t,e,n,i,r,o){let s,a=this.getTypeKey(t);return a&&(s=ql(this,a)),r&&o&&(s=this.getLocaleTextFunc()(r,o)),s!=null?e?`${s} ${ql(this,"filterSummaryInRangeValues",[n(),i()])}`:`${s} ${n()}`:null}getTypeKey(t){let e=this.filterTypeKeys[t];return e?`filterSummary${e}`:null}formatValue(t){let e=this.valueFormatter;return e?e(t??null)??"":String(t)}};var jpe=class extends ln{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.defaultOption;return}let e=t.operator,n;e?n=t.conditions[0]:n=t,this.lastType=n.type}canWeEditAfterModelFromParentFilter(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;let n=t;return this.isTypeEditable(n.type)}init(t){this.params=t;let e=this.gos.get("enableFilterHandlers");if(this.reactive=e,this.setParams(t),e){let n=t;this.onModelUpdated(n.model)}}setParams(t){let e=new yP;this.optionsFactory=e,e.init(t.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(e,t.filterParams)),this.setSimpleParams(t,!1)}setSimpleParams(t,e=!0){let n=this.optionsFactory.defaultOption;e||(this.lastType=n),this.readOnly=!!t.filterParams.readOnly;let i=this.isTypeEditable(n);this.setEditable(i)}refresh(t){this.params=t;let e=t,n=this.reactive;if((!n||e.source==="colDef")&&this.updateParams(t),n){let{source:i,model:r}=e;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(r)}}updateParams(t){let e=this.optionsFactory;e.refresh(t.filterParams,this.defaultOptions),this.setSimpleParams(t),this.filterModelFormatter.updateParams({optionsFactory:e,filterParams:t.filterParams})}onParentModelChanged(t,e){e?.afterFloatingFilter||e?.afterDataChange||this.onModelUpdated(t)}hasSingleInput(t){let e=this.optionsFactory.getCustomOption(t)?.numberOfInputs;return e==null||e==1}isTypeEditable(t){let e=["inRange","empty","blank","notBlank"];return!!t&&!this.readOnly&&this.hasSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){return`${this.beans.colNames.getDisplayNameForColumn(t.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}};var CP=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function NF(t){let{allowedCharPattern:e}=t??{};return e??null}function BF(t){return t==null||isNaN(t)?null:t}function o8(t,e){let{filter:n,filterTo:i,type:r}=t||{};return[BF(n),BF(i)].slice(0,Ox(r,e))}var $pe=class extends n8{constructor(){super("numberFilter",o8,CP),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(t,e,n){let{numberFormatter:i}=this.params,r=!n&&i?i(e??null):e;super.setElementValue(t,r)}createEValue(){let t=NF(this.params),e=On({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(e,this.eValuesFrom,"from",t),this.createFromToElement(e,this.eValuesTo,"to",t),e}createFromToElement(t,e,n,i){let r=this.createManagedBean(i?new Nf({allowedCharPattern:i}):new mG);r.addCss(`ag-filter-${n}`),r.addCss("ag-filter-filter"),e.push(r),t.appendChild(r.getGui())}removeEValues(t,e){let n=i=>this.removeComponents(i,t,e);n(this.eValuesFrom),n(this.eValuesTo)}getValues(t){let e=[];return this.forEachPositionInput(t,(n,i,r,o)=>{i<o&&e.push(BF(this.stringToFloat(n.getValue())))}),e}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}stringToFloat(t){if(typeof t=="number")return t;let e=ka(t);e!=null&&e.trim()===""&&(e=null);let n=this.params.numberParser;return n?n(e):e==null||e.trim()==="-"?null:parseFloat(e)}createCondition(t){let e=this.getConditionType(t),n={filterType:this.filterType,type:e},i=this.getValues(t);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(t){let{eValuesFrom:e,eValuesTo:n}=this;return t>=e.length?[null,null]:[e[t],n[t]]}hasInvalidInputs(){let t=!1;return this.forEachInput(e=>{if(!e.getInputElement().validity.valid){t=!0;return}}),t}},s8=class extends r8{constructor(t,e){super(t,e,e.numberFormatter),this.filterTypeKeys=Gpe}conditionToString(t,e,n,i,r){let{filter:o,filterTo:s,type:a}=t,l=this.formatValue.bind(this);if(e){let c=this.conditionForToolPanel(a,n,()=>l(o),()=>l(s),i,r);if(c!=null)return c}return n?`${l(o)}-${l(s)}`:o!=null?l(o):`${a}`}},qpe=class extends Upe{constructor(){super(o8,CP),this.filterType="number",this.FilterModelFormatterClass=s8}comparator(){return(t,e)=>t===e?0:t<e?1:-1}isValid(t){return!isNaN(t)}},a8=class extends he{constructor(t){super(),this.params=t,this.eInput=Fe,this.onValueChanged=()=>{}}setupGui(t){this.eInput=this.createManagedBean(new Nf(this.params?.config));let e=this.eInput.getGui();t.appendChild(e);let n=i=>this.onValueChanged(i);this.addManagedListeners(e,{input:n,keydown:n})}setEditable(t){this.eInput.setDisabled(!t)}getValue(){return this.eInput.getValue()}setValue(t,e){this.eInput.setValue(t,e)}setValueChangedListener(t){this.onValueChanged=t}setParams({ariaLabel:t,autoComplete:e}){let{eInput:n}=this;n.setInputAriaLabel(t),e!==void 0&&n.setAutoComplete(e)}};function l8(t){let e=t?.trim();return e===""?t:e}function c8(t,e){let{filter:n,filterTo:i,type:r}=t||{};return[n||null,i||null].slice(0,Ox(r,e))}var Kpe={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},d8=class extends jpe{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Fe,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(Kpe)}onModelUpdated(t){this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(t))}setParams(t){this.setupFloatingFilterInputService(t),super.setParams(t),this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.inputSvc=this.createFloatingFilterInputService(t),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){let e=t.browserAutoComplete??!1,{inputSvc:n,defaultDebounceMs:i,readOnly:r}=this;if(n.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:e}),this.applyActive=Vx(t.filterParams),!r){let o=JU(t.filterParams,i),s=Pa(this,this.syncUpWithParentFilter.bind(this),o);n.setValueChangedListener(s)}}updateParams(t){super.updateParams(t),this.setTextInputParams(t)}recreateFloatingFilterInputService(t){let{inputSvc:e}=this,n=e.getValue();Zr(this.eFloatingFilterInputContainer),this.destroyBean(e),this.setupFloatingFilterInputService(t),e.setValue(n,!0)}syncUpWithParentFilter(t){let e=t.key===ne.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!e)return;let{inputSvc:i,params:r,lastType:o}=this,s=i.getValue();if(r.filterParams.trimInput&&(s=l8(s),i.setValue(s,!0)),n){let a=r,l=a.model,c=this.convertValue(s),d=c==null?null:ae(k({},l??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption}),{filter:c});a.onModelChange(d,{afterFloatingFilter:!0})}else r.parentFilterInstance(a=>{a?.onFloatingFilterChanged(o||null,s||null)})}convertValue(t){return t||null}setEditable(t){this.inputSvc.setEditable(t)}},Ype=class extends he{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(t){this.eNumberInput=this.createManagedBean(new mG),this.eTextInput=this.createManagedBean(new Nf),this.eTextInput.setDisabled(!0);let e=this.eNumberInput.getGui(),n=this.eTextInput.getGui();t.appendChild(e),t.appendChild(n),this.setupListeners(e,i=>this.onValueChanged(i)),this.setupListeners(n,i=>this.onValueChanged(i))}setEditable(t){this.numberInputActive=t,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eNumberInput.setAutoComplete(t),this.eTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(t){this.onValueChanged=t}setupListeners(t,e){this.addManagedListeners(t,{input:e,keydown:e})}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eNumberInput.setInputAriaLabel(t),this.eTextInput.setInputAriaLabel(t)}},Xpe=class extends d8{constructor(){super(...arguments),this.FilterModelFormatterClass=s8,this.filterType="number",this.defaultOptions=CP}updateParams(t){NF(t.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(t),super.updateParams(t)}createFloatingFilterInputService(t){return this.allowedCharPattern=NF(t.filterParams),this.allowedCharPattern?this.createManagedBean(new a8({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Ype)}convertValue(t){return t?Number(t):null}},bP=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Zpe=class extends n8{constructor(){super("textFilter",c8,bP),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(t){let e=this.getConditionType(t),n={filterType:this.filterType,type:e},i=this.getValuesWithSideEffects(t,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}areSimpleModelsEqual(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type}getInputs(t){let{eValuesFrom:e,eValuesTo:n}=this;return t>=e.length?[null,null]:[e[t],n[t]]}getValues(t){return this.getValuesWithSideEffects(t,!1)}getValuesWithSideEffects(t,e){let n=[];return this.forEachPositionInput(t,(i,r,o,s)=>{if(r<s){let a=ka(i.getValue());e&&this.params.trimInput&&(a=l8(a)??null,i.setValue(a,!0)),n.push(a)}}),n}createEValue(){let t=On({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:e,eValuesTo:n}=this;return this.createFromToElement(t,e,"from"),this.createFromToElement(t,n,"to"),t}createFromToElement(t,e,n){let i=this.createManagedBean(new Nf);i.addCss(`ag-filter-${n}`),i.addCss("ag-filter-filter"),e.push(i),t.appendChild(i.getGui())}removeEValues(t,e){let n=o=>this.removeComponents(o,t,e),{eValuesFrom:i,eValuesTo:r}=this;n(i),n(r)}},u8=class extends r8{constructor(){super(...arguments),this.filterTypeKeys=Wpe}conditionToString(t,e,n,i,r){let{filter:o,filterTo:s,type:a}=t;if(e){let l=d=>()=>ql(this,"filterSummaryTextQuote",[d]),c=this.conditionForToolPanel(a,n,l(o),l(s),i,r);if(c!=null)return c}return n?`${o}-${s}`:o!=null?`${o}`:`${a}`}},Qpe=({filterOption:t,value:e,filterText:n})=>{if(n==null)return!1;switch(t){case"contains":return e.indexOf(n)>=0;case"notContains":return e.indexOf(n)<0;case"equals":return e===n;case"notEqual":return e!=n;case"startsWith":return e.indexOf(n)===0;case"endsWith":{let i=e.lastIndexOf(n);return i>=0&&i===e.length-n.length}default:return!1}},Jpe=t=>t,ege=t=>t==null?null:t.toString().toLowerCase(),tge=class extends i8{constructor(){super(c8,bP),this.filterType="text",this.FilterModelFormatterClass=u8}updateParams(t){super.updateParams(t);let e=t.filterParams;this.matcher=e.textMatcher??Qpe,this.formatter=e.textFormatter??(e.caseSensitive?Jpe:ege)}evaluateNullValue(t){return t?["notEqual","notContains","blank"].indexOf(t)>=0:!1}evaluateNonNullValue(t,e,n,i){let r=t.map(h=>this.formatter(h))||[],o=this.formatter(e),{api:s,colDef:a,column:l,context:c,filterParams:{textFormatter:d}}=this.params;if(n.type==="blank")return kx(e);if(n.type==="notBlank")return!kx(e);let u={api:s,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:d};return r.some(h=>this.matcher(ae(k({},u),{filterText:h})))}},nge=class extends d8{constructor(){super(...arguments),this.FilterModelFormatterClass=u8,this.filterType="text",this.defaultOptions=bP}createFloatingFilterInputService(){return this.createManagedBean(new a8)}};function ige(t){return!!t.quickFilter?.isFilterPresent()}function rge(t){return t.quickFilter?.getText()}function oge(t){t.quickFilter?.resetCache()}var sge=class extends he{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){let t=this.resetCache.bind(this),e=this.gos;this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:t,columnRowGroupChanged:t,columnVisible:()=>{e.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(e.get("quickFilterText")),this.parser=e.get("quickFilterParser"),this.matcher=e.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){let{autoColSvc:t,colModel:e,gos:n,pivotResultCols:i}=this.beans,r=e.isPivotMode(),o=t?.getColumns(),s=e.getColDefCols(),a=(r&&!n.get("applyQuickFilterBeforePivotOrAgg")?i?.getPivotResultCols()?.list:s)??[];o&&(a=a.concat(o)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?a:a.filter(l=>l.isVisible()||l.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(t){let e=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(e,t):this.quickFilterParts.every(n=>e?this.doesRowPassCache(t,n):this.doesRowPassNoCache(t,n))}resetCache(){this.beans.rowModel.forEachNode(t=>t.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){let{quickFilter:t,parser:e}=this;t?this.quickFilterParts=e?e(t):t.split(" "):this.quickFilterParts=null}parseFilter(t){return Ve(t)?t.toUpperCase():null}setFilter(t){if(t!=null&&typeof t!="string"){Ee(70,{newFilter:t});return}let e=this.parseFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){let t=this.gos.get("quickFilterParser"),e=this.gos.get("quickFilterMatcher"),n=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(t,e){return this.colsToUse.some(n=>{let i=this.getTextForColumn(n,t);return Ve(i)&&i.indexOf(e)>=0})}doesRowPassCache(t,e){return this.checkGenerateAggText(t),t.quickFilterAggregateText.indexOf(e)>=0}doesRowPassMatcher(t,e){let n;t?(this.checkGenerateAggText(e),n=e.quickFilterAggregateText):n=this.getAggText(e);let{quickFilterParts:i,matcher:r}=this;return r(i,n)}checkGenerateAggText(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getAggText(t))}getTextForColumn(t,e){let n=this.beans.filterValueSvc.getValue(t,e),i=t.getColDef();if(i.getQuickFilterText){let r=jt(this.gos,{value:n,node:e,data:e.data,column:t,colDef:i});n=i.getQuickFilterText(r)}return Ve(n)?n.toString().toUpperCase():null}getAggText(t){let e=[];return this.colsToUse.forEach(n=>{let i=this.getTextForColumn(n,t);Ve(i)&&e.push(i)}),e.join(`
`)}},age={moduleName:"ClientSideRowModelFilter",version:Rt,rowModels:["clientSide"],beans:[upe]},h8={moduleName:"FilterCore",version:Rt,beans:[kpe],apiFunctions:{isAnyFilterPresent:Fpe,onFilterChanged:Ppe},css:[Cpe],dependsOn:[age]},f8={moduleName:"FilterValue",version:Rt,beans:[Lpe]},wP={moduleName:"ColumnFilter",version:Rt,beans:[Ipe,Ope],dynamicBeans:{headerFilterCellCtrl:hpe},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:bpe,getColumnFilterInstance:wpe,destroyFilter:_pe,setFilterModel:Spe,getFilterModel:xpe,getColumnFilterModel:Epe,setColumnFilterModel:Mpe,showColumnFilter:Rpe,getColumnFilterHandler:Dpe,doFilterAction:Tpe},dependsOn:[h8,vP,f8,gpe]},p8={moduleName:"CustomFilter",version:Rt,userComponents:{agReadOnlyFloatingFilter:Bpe},dependsOn:[wP]},g8={moduleName:"TextFilter",version:Rt,dependsOn:[wP],userComponents:{agTextColumnFilter:{classImp:Zpe,params:{useForm:!0}},agTextColumnFloatingFilter:nge},dynamicBeans:{agTextColumnFilterHandler:tge}},m8={moduleName:"NumberFilter",version:Rt,dependsOn:[wP],userComponents:{agNumberColumnFilter:{classImp:$pe,params:{useForm:!0}},agNumberColumnFloatingFilter:Xpe},dynamicBeans:{agNumberColumnFilterHandler:qpe}};var lge={moduleName:"QuickFilterCore",version:Rt,rowModels:["clientSide"],beans:[sge],dependsOn:[h8,f8]},v8={moduleName:"QuickFilter",version:Rt,apiFunctions:{isQuickFilterPresent:ige,getQuickFilter:rge,resetQuickFilter:oge},dependsOn:[lge]};var cge=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",aF=(t,e,n)=>{let{editModelSvc:i}=t,r=i?.getCellValidationModel()?.getCellValidation(e)?.errorMessages,o=i?.getRowValidationModel().getRowValidation(e)?.errorMessages,s=r||o;return s&&s.length?s.join(n("tooltipValidationErrorSeparator",". ")):void 0},dge=class extends he{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(t,e,n,i){t&&e.destroyBean(t);let r=sF(this.gos),{column:o,eGui:s}=e,a=o.getColDef();!i&&r&&!a.headerComponent&&(i=sx(()=>s.querySelector(".ag-header-cell-text")));let l={getColumn:()=>o,getColDef:()=>o.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>n??o.getColDef().headerTooltip,shouldDisplayTooltip:i},c=this.createTooltipFeature(l);return c&&(c=e.createBean(c),e.setRefreshFunction("tooltip",()=>c.refreshTooltip())),c}setupHeaderGroupTooltip(t,e,n,i){t&&e.destroyBean(t);let r=sF(this.gos),{column:o,eGui:s}=e,a=o.getColGroupDef();!i&&r&&!a?.headerGroupComponent&&(i=sx(()=>s.querySelector(".ag-header-group-text")));let l={getColumn:()=>o,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>n??(a&&a.headerTooltip),shouldDisplayTooltip:i};a&&(l.getColDef=()=>a);let c=this.createTooltipFeature(l);return c&&e.createBean(c)}enableCellTooltipFeature(t,e,n){let{beans:i}=this,{gos:r,editSvc:o}=i,{column:s,rowNode:a}=t,l="cell",c=()=>{let f=!!!o?.isEditing(t)&&aF(i,t,this.getLocaleTextFunc());if(f)return l="cellEditor",f;l="cell";let p=s.getColDef(),v=a.data;if(p.tooltipField&&Ve(v))return yy(v,p.tooltipField,s.isTooltipFieldContainsDots());let m=p.tooltipValueGetter;return m?m(jt(r,{location:"cell",colDef:s.getColDef(),column:s,rowIndex:t.cellPosition.rowIndex,node:a,data:a.data,value:t.value,valueFormatted:t.valueFormatted})):null},d=sF(r);n||(d&&!t.isCellRenderer()?n=()=>{let h=!!o?.isEditing(t);if(!h&&aF(i,t,this.getLocaleTextFunc()))return!0;if(!s.isTooltipEnabled())return!1;let v=sx(()=>{let m=t.eGui;return m.children.length===0?m:m.querySelector(".ag-cell-value")});return!h&&v()}:n=()=>!o?.isEditing(t));let u={getColumn:()=>s,getColDef:()=>s.getColDef(),getRowIndex:()=>t.cellPosition.rowIndex,getRowNode:()=>a,getGui:()=>t.eGui,getLocation:()=>l,getTooltipValue:e!=null?()=>e:c,getValueFormatted:()=>t.valueFormatted,shouldDisplayTooltip:n};return this.createTooltipFeature(u,i)}setupFullWidthRowTooltip(t,e,n,i){let r={getGui:()=>e.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},o=this.beans,s=o.context;t&&e.destroyBean(t,s);let a=this.createTooltipFeature(r,o);if(a)return e.createBean(a,s)}setupCellEditorTooltip(t,e){let{beans:n}=this,{context:i}=n,r=e.getValidationElement?.();if(!r)return;let o={getGui:()=>r,getTooltipValue:()=>aF(n,t,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{let{editModelSvc:a}=n,l=a?.getRowValidationModel()?.getRowValidationMap(),c=a?.getCellValidationModel()?.getCellValidationMap(),d=!!l&&l.size>0,u=!!c&&c.size>0;return d||u}},s=this.createTooltipFeature(o,n);if(s)return t.createBean(s,i)}initCol(t){let{colDef:e}=t;t.tooltipEnabled=Ve(e.tooltipField)||Ve(e.tooltipValueGetter)||Ve(e.tooltipComponent)}createTooltipFeature(t,e){return this.beans.registry.createDynamicBean("tooltipFeature",!1,t,e)}},y8={moduleName:"Tooltip",version:Rt,beans:[dge],dynamicBeans:{tooltipFeature:cpe},userComponents:{agTooltipComponent:ope},dependsOn:[vP],css:[cge]};var uge={paste:"ui",rangeSvc:"ui",fillHandle:"api",cellClear:"api"},WNe=new Set(Object.keys(uge));var hge=class extends he{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,Mf(t.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(t){let e=this.columns;e!=null&&(t.list=e.list.concat(t.list),t.tree=e.tree.concat(t.tree),Ooe(t))}createColumns(t,e){let n=()=>{Sx(this.beans,this.columns?.tree),this.columns=null},i=t.treeDepth,o=(this.columns?.treeDepth??-1)==i,s=this.generateSelectionCols();if(koe(s,this.columns?.list??[])&&o)return;n();let{colGroupSvc:l}=this.beans,c=l?.findDepth(t.tree)??0,d=l?.balanceTreeForAutoCols(s,c)??[];this.columns={list:s,tree:d,treeDepth:c,map:{}},e(h=>{if(!h)return null;let f=h.filter(p=>!Py(p));return[...s,...f]})}updateColumns(t){let e=Mf(t.source);this.columns?.list.forEach(n=>{let i=this.createSelectionColDef(t.currentValue);n.setColDef(i,null,e),XF(this.beans,{state:[ae(k({},i),{colId:n.getColId()})]},e)})}getColumn(t){return this.columns?.list.find(e=>wU(e,t))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){let{gos:t,beans:e}=this,n=t.get("rowSelection");if(typeof n!="object"||!Hd(t))return!1;let i=(e.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&i)return!1;let r=!!Ef(n),o=ax(n);return r||o}createSelectionColDef(t){let{gos:e}=this.beans,n=t??e.get("selectionColumnDef"),i=e.get("enableRtl"),a=n??{},{rowSpan:r,spanRows:o}=a,s=zf(a,["rowSpan","spanRows"]);return ae(k({width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(l,c,d,u){let h=d.isSelected(),f=u.isSelected();return h===f?0:h?1:-1},editable:!1,suppressFillHandle:!0,pinned:null},s),{colId:yU,chartDataType:"excluded"})}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];let t=this.createSelectionColDef(),e=t.colId;this.gos.validateColDef(t,e,!0);let n=new Nx(t,null,e,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(t,e,n){let i=e&&typeof e!="string"?Ef(e):void 0,r=t&&typeof t!="string"?Ef(t):void 0,o=i!==r,s=e&&typeof e!="string"?ax(e):void 0,a=t&&typeof t!="string"?ax(t):void 0,l=s!==a,c=bx(t),d=bx(e);(o||l||c!==d)&&this.beans.colModel.refreshAll(n)}destroy(){Sx(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(t,e,n){if(!this.columns?.list.length)return;let i=t.length+e.length+n.length;if(i===0)return;let r=this.columns.list[0];if(!r.isVisible())return;let o=()=>{let l;switch(r.pinned){case"left":case!0:l=t;break;case"right":l=n;break;default:l=e}l&&Ls(l,r)};(this.beans.rowNumbersSvc?.getColumn(CU)?2:1)===i&&o()}};function fge(t,e){if(!e.nodes.every(s=>s.rowPinned&&!Oy(s)?(Ee(59),!1):s.id===void 0?(Ee(60),!1):!0))return;let{nodes:i,source:r,newValue:o}=e;t.selectionSvc?.setNodesSelected({nodes:i,source:r??"api",newValue:o})}function pge(t,e,n="apiSelectAll"){t.selectionSvc?.selectAllRowNodes({source:n,selectAll:e})}function gge(t,e,n="apiSelectAll"){t.selectionSvc?.deselectAllRowNodes({source:n,selectAll:e})}function mge(t,e="apiSelectAllFiltered"){t.selectionSvc?.selectAllRowNodes({source:e,selectAll:"filtered"})}function vge(t,e="apiSelectAllFiltered"){t.selectionSvc?.deselectAllRowNodes({source:e,selectAll:"filtered"})}function yge(t,e="apiSelectAllCurrentPage"){t.selectionSvc?.selectAllRowNodes({source:e,selectAll:"currentPage"})}function Cge(t,e="apiSelectAllCurrentPage"){t.selectionSvc?.deselectAllRowNodes({source:e,selectAll:"currentPage"})}function bge(t){return t.selectionSvc?.getSelectedNodes()??[]}function wge(t){return t.selectionSvc?.getSelectedRows()??[]}var _ge=class extends Tce{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();let{gos:t}=this;this.mode=wx(t),this.groupSelectsDescendants=Dy(t),this.groupSelectsFiltered=_x(t)==="filteredDescendants",this.masterSelectsDetail=L6(t)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{let e=Dy(t),n=wx(t),i=_x(t)==="filteredDescendants";this.masterSelectsDetail=L6(t)==="detail",(e!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=e,this.groupSelectsFiltered=i,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(t,e,n){if(this.isRowSelectionBlocked(e))return 0;let i=this.inferNodeSelections(e,t.shiftKey,t.metaKey||t.ctrlKey,n);return i==null?0:(this.selectionCtx.selectAll=!1,"select"in i?(i.reset?this.resetNodes():this.selectRange(i.deselect,!1,n),this.selectRange(i.select,!0,n)):this.setNodesSelected({nodes:[i.node],newValue:i.newValue,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:t,source:n}))}setNodesSelected({newValue:t,clearSelection:e,suppressFinishActions:n,nodes:i,event:r,source:o,keepDescendants:s=!1}){if(!Hd(this.gos)&&t)return Ee(132),0;if(i.length===0)return 0;if(i.length>1&&!this.isMultiSelect())return Ee(130),0;let a=0;for(let l=0;l<i.length;l++){let c=i[l],d=wf(c),u=this.groupSelectsFiltered&&d.group;if(d.rowPinned&&!Oy(d)){Ee(59);continue}if(d.id===void 0){Ee(60);continue}u||this.selectRowNode(d,t,r,o)&&(this.detailSelection.delete(d.id),a++),this.groupSelectsDescendants&&d.childrenAfterGroup?.length&&(a+=this.selectChildren(d,t,o))}return n||(i.length===1&&o==="api"&&this.selectionCtx.setRoot(wf(i[0])),t&&(e||!this.isMultiSelect())&&(a+=this.clearOtherNodes(wf(i[0]),s,o)),a>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),a}selectRange(t,e,n){let i=0;return t.forEach(r=>{let o=wf(r);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,e,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(t,e,n){let i=this.groupSelectsFiltered?t.childrenAfterAggFilter:t.childrenAfterGroup;return i?this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){let t=[];return this.selectedNodes.forEach(e=>t.push(e.data)),t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){let e=new Map;this.selectedNodes.forEach((n,i)=>{t(n)&&e.set(i,n)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsDescendants)return!1;let{gos:n,rowModel:i}=this.beans;if(!Tr(n,i))return!1;let r=i.rootNode;if(!r)return!1;e||(e=new Fx(!0,r),e.active=!1);let o=!1;return e.forEachChangedNodeDepthFirst(s=>{if(s!==r){let a=this.calculateSelectedFromChildren(s);o=this.selectRowNode(s,a===null?!1:a,void 0,t)||o}}),o}clearOtherNodes(t,e,n){let i=new Map,r=0;return this.selectedNodes.forEach(o=>{let s=o.id==t.id;if((e?!xge(t,o):!0)&&!s){let l=this.selectedNodes.get(o.id);r+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(o=>{let s=this.calculateSelectedFromChildren(o);this.selectRowNode(o,s===null?!1:s,void 0,n)}),r}onRowSelected(t){let e=t.node;this.groupSelectsDescendants&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)}createDaemonNode(t){if(!t.id)return;let e=new Ly(this.beans);return e.id=t.id,e.data=t.data,e.__daemon=!0,e.__selected=t.__selected,e.level=t.level,e}syncInOldRowNode(t,e){e&&t.id!==e.id&&this.selectedNodes.get(e.id)==t&&this.selectedNodes.set(e.id,e)}syncInNewRowNode(t){this.selectedNodes.has(t.id)?(t.__selected=!0,this.selectedNodes.set(t.id,t)):t.__selected=!1}reset(t){let e=this.getSelectionCount();this.resetNodes(),e&&this.dispatchSelectionChanged(t)}resetNodes(){this.selectedNodes.forEach(t=>{this.selectRowNode(t,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){let{gos:t,rowModel:e}=this.beans;if(!Tr(t,e))return;let n=e.getTopLevelNodes();if(n===null)return;let i=[];function r(o){for(let s=0,a=o.length;s<a;s++){let l=o[s];l.isSelected()?i.push(l):l.group&&l.childrenAfterGroup&&r(l.childrenAfterGroup)}}return r(n),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:t,selectAll:e}){let n=Tr(this.gos),i=!1,r=o=>{let s=this.selectRowNode(wf(o),!1,void 0,t);i||(i=s)};if(e==="currentPage"||e==="filtered"){if(!n){In(102);return}this.getNodesToSelect(e).forEach(r)}else this.selectedNodes.forEach(r),this.reset(t);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){let o=this.updateGroupsFromChildrenSelections(t);i||(i=o)}i&&this.dispatchSelectionChanged(t)}getSelectedCounts(t){let e=0,n=0;return this.getNodesToSelect(t).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?e++:i.selectable&&n++)}),{selectedCount:e,notSelectedCount:n}}getSelectAllState(t){let{selectedCount:e,notSelectedCount:n}=this.getSelectedCounts(t);return C8(e,n)??null}hasNodesToSelect(t){return this.getNodesToSelect(t).filter(e=>e.selectable).length>0}getNodesToSelect(t){if(!this.canSelectAll())return[];let e=[],n=r=>e.push(r);if(t==="currentPage")return this.forEachNodeOnPage(r=>{if(!r.group){n(r);return}if(!r.expanded&&!r.footer){let o=s=>{n(s),s.childrenAfterFilter?.forEach(o)};o(r);return}this.groupSelectsDescendants||n(r)}),e;let i=this.beans.rowModel;return t==="filtered"?(i.forEachNodeAfterFilter(n),e):(i.forEachNode(n),e)}forEachNodeOnPage(t){let{pageBounds:e,rowModel:n}=this.beans,i=e.getFirstRow(),r=e.getLastRow();for(let o=i;o<=r;o++){let s=n.getRow(o);s&&t(s)}}selectAllRowNodes(t){let{gos:e,selectionCtx:n}=this;if(!Hd(e)){Ee(132);return}if(hoe(e)&&!Ry(e)){Ee(130);return}if(!this.canSelectAll())return;let{source:i,selectAll:r}=t,o=!1;if(this.getNodesToSelect(r).forEach(s=>{let a=this.selectRowNode(wf(s),!0,void 0,i);o||(o=a)}),n.selectAll=!0,Tr(e)&&this.groupSelectsDescendants){let s=this.updateGroupsFromChildrenSelections(i);o||(o=s)}o&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(t,e,n){if(t||(t=[]),!Array.isArray(t)){In(103);return}let i=new Set(t),r=[];this.beans.rowModel.forEachNode(o=>{i.has(o.id)&&r.push(o)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:r,source:e})}canSelectAll(){let{gos:t}=this.beans;return!!Tr(t)}updateSelectable(t){let{gos:e,rowModel:n}=this.beans;if(!Hd(e))return;let i="selectableChanged",r=t!==void 0,o=Tr(e)&&this.groupSelectsDescendants,s=[],a=l=>{if(r&&!l.group)return;if(o&&l.group){let d=l.childrenAfterGroup?.some(u=>u.selectable)??!1;this.setRowSelectable(l,d,!0);return}!this.updateRowSelectable(l,!0)&&l.isSelected()&&s.push(l)};if(o){if(t===void 0){let l=n.rootNode;t=l?new Fx(!1,l):void 0}t?.forEachChangedNodeDepthFirst(a,!r,!r)}else n.forEachNode(a);s.length&&this.setNodesSelected({nodes:s,newValue:!1,source:i}),!r&&o&&this.updateGroupsFromChildrenSelections?.(i)}updateSelectableAfterGrouping(t){this.updateSelectable(t),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",t)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(t,e){if(!this.masterSelectsDetail)return;let n=t.detailNode?.detailGridInfo?.api;if(!n)return;let i=Sge(n);if(t.isSelected()!==i&&this.selectRowNode(t,i,e,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){let o=this.detailSelection.get(t.id)??new Set;for(let s of n.getSelectedNodes())o.add(s.id);this.detailSelection.set(t.id,o)}}setDetailSelectionState(t,e,n){if(this.masterSelectsDetail){if(!Ry(e)){Ee(269);return}switch(t.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{let i=this.detailSelection.get(t.id);if(i){let r=[];for(let o of i){let s=n.getRowNode(o);s&&r.push(s)}n.setNodesSelected({nodes:r,newValue:!0,source:"masterDetail"})}break}default:break}}}dispatchSelectionChanged(t){this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function wf(t){return Oy(t)?t.pinnedSibling:t.footer?t.sibling:t}function Sge(t){let e=0,n=0;return t.forEachNode(i=>{i.isSelected()?e++:i.selectable&&n++}),C8(e,n)}function C8(t,e){if(t===0&&e===0)return!1;if(!(t>0&&e>0))return t>0}function xge(t,e){let n=e.parent;for(;n;){if(n===t)return!0;n=n.parent}return!1}var Ege={moduleName:"SharedRowSelection",version:Rt,beans:[hge],apiFunctions:{setNodesSelected:fge,selectAll:pge,deselectAll:gge,selectAllFiltered:mge,deselectAllFiltered:vge,selectAllOnCurrentPage:yge,deselectAllOnCurrentPage:Cge,getSelectedNodes:bge,getSelectedRows:wge}},b8={moduleName:"RowSelection",version:Rt,rowModels:["clientSide","infinite","viewport"],beans:[_ge],dependsOn:[Ege]};var Mge=class extends xce{constructor(){super(...arguments),this.beanName="csrmNodeSvc"}},lF=class{constructor(){this.removals=new Set,this.updates=new Set,this.adds=new Set}remove(t){this.adds.delete(t)||(this.updates.delete(t),this.removals.add(t))}update(t){this.adds.has(t)||this.updates.add(t)}add(t){this.adds.add(t)}};function Rge(t){if(di(t.childrenAfterSort))return;let e=t.childrenAfterSort;for(let n=0;n<e.length;n++){let i=e[n],r=n===0,o=n===t.childrenAfterSort.length-1;i.setFirstChild(r),i.lastChild!==o&&(i.lastChild=o,i.dispatchRowEvent("lastChildChanged")),i.childIndex!==n&&(i.childIndex=n,i.dispatchRowEvent("childIndexChanged"))}}function w8(t){t.sibling&&(t.sibling.childrenAfterSort=t.childrenAfterSort),Rge(t)}var Dge=class extends he{constructor(){super(...arguments),this.beanName="sortStage",this.refreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),this.step="sort"}execute(t){let e=this.beans,n=e.sortSvc.getSortOptions(),i=Ve(n)&&n.length>0,r=i&&!!t.changedRowNodes&&this.gos.get("deltaSort"),o=n.some(({column:s})=>As(e.gos)?s.isPrimary()&&s.isRowGroupActive():!!s.getColDef().showRowGroup);this.sort(e,n,i,r,t.changedRowNodes,t.changedPath,o)}sort(t,e,n,i,r,o,s){let{gos:a,colModel:l,rowGroupColsSvc:c,rowNodeSorter:d,rowRenderer:u,showRowGroupCols:h}=t,f=a.get("groupMaintainOrder"),p=l.getCols().some(y=>y.isRowGroupActive()),v=l.isPivotMode(),m=a.getCallback("postSortRows"),g=!1,C=y=>{let w=v&&y.leafGroup,R=f&&p&&!y.leafGroup&&!s,b;if(R){let M=c?.columns?.[y.level+1]?.getSort()===null,x=y.childrenAfterAggFilter.slice(0);if(y.childrenAfterSort&&!M){let S={};y.childrenAfterSort.forEach((I,N)=>{S[I.id]=N}),x.sort((I,N)=>(S[I.id]??0)-(S[N.id]??0))}b=x}else!n||w?b=y.childrenAfterAggFilter.slice(0):i&&r?b=Tge(d,y,r,o,e):b=d.doFullSort(y.childrenAfterAggFilter,e);if(g||(g=y.childrenAfterSort?.[0]!==b[0]),y.childrenAfterSort=b,w8(y),m){let _={nodes:y.childrenAfterSort};m(_)}};if(o?.forEachChangedNodeDepthFirst(C),g&&this.gos.get("groupHideOpenParents")){let y=h?.getShowRowGroupCols();y?.length&&u.refreshCells({columns:y,force:!0})}}};function Tge(t,e,n,i,r){let o=e.childrenAfterAggFilter,s=e.childrenAfterSort;if(!s)return t.doFullSort(o,r);let a=new Set,l=[],{updates:c,adds:d}=n;for(let h=0,f=o.length;h<f;++h){let p=o[h];c.has(p)||d.has(p)||i&&!i.canSkip(p)?l.push({currentPos:l.length,rowNode:p}):a.add(p.id)}let u=s.filter(h=>a.has(h.id)).map((h,f)=>({currentPos:f,rowNode:h}));return l.sort((h,f)=>t.compareRowNodes(r,h,f)),Age(t,r,l,u)}function Age(t,e,n,i){let r=[],o=0,s=0,a=n.length,l=i.length;for(;o<a&&s<l;){let c=n[o],d=i[s],u=t.compareRowNodes(e,c,d),h;u<0?(h=c,++o):(h=d,++s),r.push(h.rowNode)}for(;o<a;)r.push(n[o++].rowNode);for(;s<l;)r.push(i[s++].rowNode);return r}var Ige=class extends he{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowsToDisplay=[],this.lastHighlightedRow=null,this.started=!1,this.isRefreshingModel=!1,this.rowNodesCountReady=!1,this.rowCountReady=!1,this.onRowHeightChanged_debounced=Pa(this,this.onRowHeightChanged.bind(this),100)}wireBeans(t){this.colModel=t.colModel,this.valueCache=t.valueCache,this.filterStage=t.filterStage,this.sortStage=t.sortStage,this.flattenStage=t.flattenStage,this.groupStage=t.groupStage,this.aggStage=t.aggStage,this.pivotStage=t.pivotStage,this.filterAggStage=t.filterAggStage}postConstruct(){this.orderedStages=[this.groupStage,this.filterStage,this.pivotStage,this.aggStage,this.sortStage,this.filterAggStage,this.flattenStage].filter(i=>!!i);let t=this.refreshModel.bind(this,{step:"group"}),e=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:e,columnRowGroupChanged:t,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:t,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Ly(this.beans);let n=this.getNewNodeManager();this.nodeManager=n,n.activate(this.rootNode)}getNewNodeManager(){let{gos:t,beans:e}=this;return Coe(t)==="treeNested"&&e.csrmChildrenTreeNodeSvc||e.csrmNodeSvc}addPropertyListeners(){let t=["treeData","treeDataChildrenField",...this.orderedStages.flatMap(({refreshProps:e})=>[...e])];this.addManagedPropertyListeners(t,e=>{let n=e.changeSet?.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(t,e,n,i){let r,o=!1;do{r=!1;let s=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(s,n),c=Math.min(a,i);for(let d=l;d<=c;d++){let u=this.getRow(d);if(u.rowHeightEstimated){let h=Wd(this.beans,u);u.setRowHeight(h.height),r=!0,o=!0}}r&&this.setRowTopAndRowIndex()}while(r);return o}onPropChange(t){if(!this.rootNode)return;let e=this.gos,n=new Set(t),i={step:"nothing",changedProps:n},r=n.has("rowData"),o=this.nodeManager,s=this.getNewNodeManager(),a=o!==s||r&&n.has("treeData")&&e.get("treeData")||n.has("treeDataChildrenField")&&e.get("treeData"),l;if((a||r)&&(l=e.get("rowData"),l!=null&&!Array.isArray(l)&&(l=null,Ee(1))),a&&(r||(l=o?.extractRowData()??l),o!==s&&(o?.deactivate(),this.nodeManager=s),s.activate(this.rootNode)),l)if(!a&&!this.isEmpty()&&l.length>0&&e.exists("getRowId")&&!e.get("resetRowDataOnUpdate"))i.keepRenderedRows=!0,i.animate=!this.gos.get("suppressAnimationFrame"),i.changedRowNodes=new lF,s.setImmutableRowData(i,l);else{i.rowDataUpdated=!0,i.newData=!0;let{selectionSvc:d,pinnedRowModel:u}=this.beans;d?.reset("rowDataChanged"),u?.isManual()&&u.reset(),this.rowNodesCountReady=!0,s.setNewRowData(l)}if(i.rowDataUpdated)i.step="group";else if(i.step==="nothing"){for(let{refreshProps:c,step:d}of this.orderedStages)if(t.some(u=>c.has(u))){i.step=d;break}}i.step!=="nothing"&&this.refreshModel(i)}setRowTopAndRowIndex(){let{beans:t,rowsToDisplay:e}=this,n=t.environment.getDefaultRowHeight(),i=0,r=new Set,o=tr(this.gos,"normal");for(let s=0,a=e.length;s<a;++s){let l=e[s];if(l.id!=null&&r.add(l.id),l.rowHeight==null){let c=Wd(t,l,o,n);l.setRowHeight(c.height,c.estimated)}l.setRowTop(i),l.setRowIndex(s),i+=l.rowHeight}return r}clearRowTopAndRowIndex(t,e){let n=t.active,i=o=>{o&&o.id!=null&&!e.has(o.id)&&o.clearRowTopAndRowIndex()},r=o=>{if(o!==null&&(i(o),i(o.detailNode),i(o.sibling),o.hasChildren()&&o.childrenAfterGroup)){let s=o.level==-1;n&&!s&&!o.expanded||o.childrenAfterGroup.forEach(r)}};r(this.rootNode)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){let t=this.rootNode;if(!t||this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===t)return 1;let n=t.childrenAfterSort,i=t.sibling?1:0;return(n?n.length:0)+i}getTopLevelRowDisplayedIndex(t){let{rootNode:e,rowsToDisplay:n}=this;if(!e||!n.length||n[0]===e)return t;let{childrenAfterSort:r}=e,o=a=>{let l=r[a];if(this.gos.get("groupHideOpenParents"))for(;l.expanded&&l.childrenAfterSort&&l.childrenAfterSort.length>0;)l=l.childrenAfterSort[0];return l.rowIndex},{footerSvc:s}=this.beans;return s?s.getTopDisplayIndex(n,t,r,o):o(t)}getTopLevelIndexFromDisplayedIndex(t){let{rootNode:e,rowsToDisplay:n}=this;if(!e||!n.length||n[0]===e)return t;let r=this.getRow(t);for(r.footer&&(r=r.sibling);r.parent&&r.parent!==e;)r=r.parent;let o=e.childrenAfterSort?.findIndex(s=>s===r);return o===-1?t:o??t}getRowBounds(t){let e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){let t=xf(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;let e=xf(this.gos),i=t.columns.length===0||t.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:e})}onSortChanged(){let t=xf(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:t})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(t){let e=new Fx(!1,this.rootNode);return t||(e.active=!1),e}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;let{changedRowNodes:e,newData:n,rowDataUpdated:i}=t;return!(!e||n||!i||e.removals.size||e.adds.size)}beforeRefreshModel(t,e=!1){this.eventSvc.dispatchEvent({type:"beforeRefreshModel",params:t,groupsChanged:e}),this.started&&t.rowDataUpdated&&this.eventSvc.dispatchEvent({type:"rowDataUpdated"})}refreshModel(t){if(!this.rootNode)return;let e=t.changedPath??(t.changedPath=this.createChangePath(!t.newData&&!!t.rowDataUpdated));if(!this.started||this.isRefreshingModel||this.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(t)){this.beforeRefreshModel(t);return}switch(this.isRefreshingModel=!0,t.step!=="group"&&this.beforeRefreshModel(t),t.step){case"group":{let i=this.doRowGrouping(t);this.beforeRefreshModel(t,i),t.step==="group"&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}case"filter":this.doFilter(e);case"pivot":this.doPivot(e);case"aggregate":this.doAggregate(e);case"filter_aggregates":this.doFilterAggregates(e);case"sort":this.doSort(t.changedRowNodes,e);case"map":this.doRowsToDisplay()}let n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(e,n),this.isRefreshingModel=!1,this.eventSvc.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){return!this.rootNode?.allLeafChildren?.length||!this.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let n=!1,i=!1,r=[],o=Dy(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(i)return;if(n&&(s===e||s===t)&&(i=!0,s.group&&o)){r.push(...s.allLeafChildren);return}if(!n){if(s!==e&&s!==t)return;n=!0}if(!s.group||!o){r.push(s);return}}),r}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){let e=this.rowsToDisplay;if(this.isEmpty()||e.length===0)return-1;let n=0,i=e.length-1;if(t<=0)return 0;if(vn(e).rowTop<=t)return e.length-1;let o=-1,s=-1;for(;;){let a=Math.floor((n+i)/2),l=e[a];if(this.isRowInPixel(l,t)||(l.rowTop<t?n=a+1:l.rowTop>t&&(i=a-1),o===n&&s===i))return a;o=n,s=i}}isRowInPixel(t,e){let n=t.rowTop,i=t.rowTop+t.rowHeight;return n<=e&&i>e}forEachLeafNode(t){this.rootNode?.allLeafChildren?.forEach((e,n)=>t(e,n))}forEachNode(t,e=!1){this.depthFirstSearchRowNodes(t,e)}forEachDisplayedNode(t){this.rowsToDisplay.forEach(t)}forEachNodeAfterFilter(t,e=!1){this.depthFirstSearchRowNodes(t,e,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(t,e=!1){this.depthFirstSearchRowNodes(t,e,n=>n.childrenAfterSort)}forEachPivotNode(t,e=!1,n=!1){let{colModel:i,rowGroupColsSvc:r}=this.beans;if(!i.isPivotMode())return;if(!r?.columns.length){t(this.rootNode,0);return}let o=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(t,e,s=>s.leafGroup?null:s[o])}depthFirstSearchRowNodes(t,e=!1,n=o=>o.childrenAfterGroup,i=this.rootNode,r=0){let o=r;if(!i)return o;let s=i===this.rootNode;s||t(i,o++);let{footerSvc:a}=this.beans;if(i.hasChildren()&&!i.footer){let l=n(i);if(l){o=a?.addTotalRows(o,i,t,e,s,"top")??o;for(let c of l)o=this.depthFirstSearchRowNodes(t,e,n,c,o);return a?.addTotalRows(o,i,t,e,s,"bottom")??o}}return o}doAggregate(t){let e=this.rootNode;e&&this.aggStage?.execute({rowNode:e,changedPath:t})}doFilterAggregates(t){let e=this.rootNode;this.filterAggStage?this.filterAggStage.execute({rowNode:e,changedPath:t}):e.childrenAfterAggFilter=e.childrenAfterFilter}doSort(t,e){this.sortStage?this.sortStage.execute({rowNode:this.rootNode,changedRowNodes:t,changedPath:e}):e.forEachChangedNodeDepthFirst(n=>{n.childrenAfterSort=n.childrenAfterAggFilter.slice(0),w8(n)})}doRowGrouping(t){let e=this.rootNode,n=this.groupStage?.execute({rowNode:e,changedRowNodes:t.changedRowNodes,changedPath:t.changedPath,rowNodesOrderChanged:!!t.rowNodesOrderChanged,afterColumnsChanged:!!t.afterColumnsChanged});if(n!==void 0)return n;let i=e.sibling;return e.childrenAfterGroup=e.allLeafChildren,i&&(i.childrenAfterGroup=e.childrenAfterGroup),e.updateHasChildren(),!1}doFilter(t){this.filterStage?this.filterStage.execute({rowNode:this.rootNode,changedPath:t}):t.forEachChangedNodeDepthFirst(e=>{e.childrenAfterFilter=e.childrenAfterGroup,t8(e)},!0)}doPivot(t){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:t})}getRowNode(t){let e=this.nodeManager.getRowNode(t);return typeof e=="object"?e:typeof t=="string"&&t.indexOf(EF)===0?this.groupStage?.getNode(t):void 0}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache?.onDataChanged();let t=[],e=[],n=new lF,i=!1;this.rowDataTransactionBatch?.forEach(r=>{this.rowNodesCountReady=!0;let{rowNodeTransaction:o,rowsInserted:s}=this.nodeManager.updateRowData(r.rowDataTransaction,n);s&&(i=!0),e.push(o),r.callback&&t.push(r.callback.bind(null,o))}),this.commitTransactions(i,n),t.length>0&&window.setTimeout(()=>{t.forEach(r=>r())},0),e.length>0&&this.eventSvc.dispatchEvent({type:"asyncTransactionsFlushed",results:e}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t){this.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;let e=new lF,{rowNodeTransaction:n,rowsInserted:i}=this.nodeManager.updateRowData(t,e);return this.commitTransactions(i,e),n}commitTransactions(t,e){this.refreshModel({step:"group",rowDataUpdated:!0,rowNodesOrderChanged:t,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){let{flattenStage:t,rootNode:e}=this,n;if(t)n=t.execute({rowNode:e});else{n=e?.childrenAfterSort??[];for(let i of n)i.setUiLevel(0)}this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){let t=this.rootNode;if(!t)return;let e=this.resetRowHeightsForAllRowNodes();t.setRowHeight(t.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);let n=e.detailNode;n&&n.setRowHeight(n.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(t){if(t.rowHeightChanged){if(this.beans.rowAutoHeight?.active)return;this.resetRowHeights()}}onGridReady(){this.started||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.started=!1,this.rootNode=null,this.nodeManager=null,this.rowDataTransactionBatch=null,this.orderedStages=B6,this.rowsToDisplay=B6}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}};var _8={moduleName:"ClientSideRowModel",version:Rt,rowModels:["clientSide"],beans:[Mge,Ige,Dge],dependsOn:[QG]};function Fge(t){return t.rowModel.isLastRowIndexKnown()}function Pge(t){return t.pagination?.getPageSize()??100}function kge(t){return t.pagination?.getCurrentPage()??0}function Oge(t){return t.pagination?.getTotalPages()??1}function Lge(t){return t.pagination?t.pagination.getMasterRowCount():t.rowModel.getRowCount()}function Nge(t){t.pagination?.goToNextPage()}function Bge(t){t.pagination?.goToPreviousPage()}function Vge(t){t.pagination?.goToFirstPage()}function Hge(t){t.pagination?.goToLastPage()}function zge(t,e){t.pagination?.goToPage(e)}var Uge=class extends he{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.centerRowsCtrl=t.center;let e=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:e,scrollVisibilityChanged:e}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let t=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(t>0){let e=this.beans,n=()=>{let i=Math.max(KF(e),1),r=Math.floor(t/i);e.pagination.setPageSize(r,"autoCalculated")};this.isBodyRendered?Pa(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},gy="paginationPageSizeSelector",Gge={tag:"span",cls:"ag-paging-page-size"},Wge=class extends ln{constructor(){super(Gge),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let t=this.selectPageSizeComp.getValue();if(!t)return;let e=Number(t);isNaN(e)||e<1||e===this.pagination.getPageSize()||(this.pagination.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(t){this.pagination=t.pagination}postConstruct(){this.addManagedPropertyListener(gy,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:t=>this.handlePaginationChanged(t)})}handlePaginationChanged(t){if(!this.selectPageSizeComp||!t?.newPageSize)return;let e=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(t){this.selectPageSizeComp&&!t&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Zr(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(gy)!==!1}reloadPageSizesSelector(){let t=this.getPageSizeSelectorValues(),e=this.pagination.getPageSize(),n=!e||!t.includes(e);if(n){let r=this.gos.exists("paginationPageSize"),o=this.gos.get(gy)!==!0;Ee(94,{pageSizeSet:r,pageSizesSet:o,pageSizeOptions:t,paginationPageSizeOption:e}),o||Ee(95,{paginationPageSizeOption:e,paginationPageSizeSelector:gy}),t.unshift("")}let i=String(n?"":e);this.selectPageSizeComp?(Kd(this.pageSizeOptions,t)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(t)),this.pageSizeOptions=t),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(t,i),this.hasEmptyOption=n}createPageSizeSelectOptions(t){return t.map(e=>({value:String(e)}))}createPageSizeSelectorComp(t,e){let n=this.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),r=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new vG).addOptions(this.createPageSizeSelectOptions(t)).setValue(e).setAriaLabel(r).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let t=[20,50,100],e=this.gos.get(gy);return!Array.isArray(e)||!e?.length?t:[...e].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},jge={selector:"AG-PAGE-SIZE-SELECTOR",component:Wge},$ge=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",qge=class extends yG{constructor(){super(),this.btFirst=Fe,this.btPrevious=Fe,this.btNext=Fe,this.btLast=Fe,this.lbRecordCount=Fe,this.lbFirstRowOnPage=Fe,this.lbLastRowOnPage=Fe,this.lbCurrent=Fe,this.lbTotal=Fe,this.pageSizeComp=Fe,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS($ge)}wireBeans(t){this.rowModel=t.rowModel,this.pagination=t.pagination,this.ariaAnnounce=t.ariaAnnounce}postConstruct(){let t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[jge]);let{btFirst:e,btPrevious:n,btNext:i,btLast:r}=this;this.activateTabIndex([e,n,i,r]),e.insertAdjacentElement("afterbegin",ks(t?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",ks(t?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",ks(t?"previous":"next",this.beans)),r.insertAdjacentElement("afterbegin",ks(t?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):fae(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(t){this.allowFocusInnerElement=t}onPaginationChanged(){let e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(t=>{let{el:e,fn:n}=t;this.addManagedListeners(e,{click:n,keydown:i=>{(i.key===ne.ENTER||i.key===ne.SPACE)&&(i.preventDefault(),n())}})}),hae(this.beans,this,this.getGui()),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(t){let e=this.gos.getCallback("paginationNumberFormatter");return e?e({value:t}):dpe(t,this.getLocaleTextFunc.bind(this))}getTemplate(){let t=this.getLocaleTextFunc(),e=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${e}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${e}-first-row`}},{tag:"span",attrs:{id:`${e}-to`},children:t("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${e}-last-row`}},{tag:"span",attrs:{id:`${e}-of`},children:t("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${e}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${e}-start-page`},children:t("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${e}-start-page-number`}},{tag:"span",attrs:{id:`${e}-of-page`},children:t("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${e}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":t("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){let t=this.pagination.getCurrentPage(),e=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=t===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),r=t===n-1;this.nextButtonDisabled=r||i,this.lastButtonDisabled=!e||i||t===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){Ire(t,e),t.classList.toggle("ag-disabled",e)}isZeroPagesToDisplay(){let t=this.rowModel.isLastRowIndexKnown(),e=this.pagination.getTotalPages();return t&&e===0}updateLabels(){let t=this.rowModel.isLastRowIndexKnown(),e=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),i=t?n:null,r=this.pagination.getCurrentPage(),o=this.pagination.getPageSize(),s,a;this.isZeroPagesToDisplay()?s=a=0:(s=o*r+1,a=s+o-1,t&&a>i&&(a=i));let l=s+o-1,c=!t&&n<l,d=this.formatNumber(s);this.lbFirstRowOnPage.textContent=d;let u,h=this.getLocaleTextFunc();c?u=h("pageLastRowUnknown","?"):u=this.formatNumber(a),this.lbLastRowOnPage.textContent=u;let p=e>0?r+1:0,v=this.formatNumber(p);this.lbCurrent.textContent=v;let m,g;if(t)m=this.formatNumber(e),g=this.formatNumber(i);else{let C=h("more","more");m=C,g=C}this.lbTotal.textContent=m,this.lbRecordCount.textContent=g,this.announceAriaStatus(d,u,g,v,m)}announceAriaStatus(t,e,n,i,r){let o=this.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${t} ${a} ${e} ${l} ${n}`,d=`${s} ${i} ${l} ${r}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnounce?.announceValue(d,"paginationPage"))}setTotalLabelsToZero(){let t=this.formatNumber(0);this.lbFirstRowOnPage.textContent=t,this.lbCurrent.textContent=t,this.lbLastRowOnPage.textContent=t,this.lbTotal.textContent=t,this.lbRecordCount.textContent=t,this.announceAriaStatus(t,t,t,t,t)}},Kge={selector:"AG-PAGINATION",component:qge},Yge=class extends he{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){let t=this.gos;this.active=t.get("pagination"),this.pageSizeFromGridOptions=t.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Kge}isPaginateChildRows(){let t=this.gos;return t.get("groupHideParentOfSingleChild")||t.get("groupRemoveSingleChildren")||t.get("groupRemoveLowestSingleChildren")?!0:t.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){let e=this.currentPage;if(!this.active||e===t||typeof e!="number")return;let{editSvc:n}=this.beans;n?.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=t,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(t){if(!this.active)return;let e=t;this.paginateChildRows||(e=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(t)??t),this.goToPage(Math.floor(e/this.pageSize))}isRowInPage(t){return this.active?t>=this.topDisplayedRowIndex&&t<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let t=this.beans.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){return Ve(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Ve(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Ve(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Ve(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let t=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==t&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(t,e){let n=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){let t=this.totalPages;this.currentPage>=t&&(this.currentPage=t-1);let e=this.currentPage;(!isFinite(e)||isNaN(e)||e<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){let t=this.beans.rowModel,e=t.getTopLevelRowCount();if(this.masterRowCount=e,e<=0){this.setZeroRows();return}let n=this.pageSize,i=e-1;this.totalPages=Math.floor(i/n)+1,this.adjustCurrentPageIfInvalid();let r=this.currentPage,o=n*r,s=n*(r+1)-1;if(s>i&&(s=i),this.topDisplayedRowIndex=t.getTopLevelRowDisplayedIndex(o),s===i)this.bottomDisplayedRowIndex=t.getRowCount()-1;else{let a=t.getTopLevelRowDisplayedIndex(s+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){let t=this.beans.rowModel.getRowCount();if(this.masterRowCount=t,t===0){this.setZeroRows();return}let{pageSize:e,currentPage:n}=this,i=t-1;this.totalPages=Math.floor(i/e)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=e*n,this.bottomDisplayedRowIndex=e*(n+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(t){let{keepRenderedRows:e=!1,newPage:n=!1,newPageSize:i=!1}=t;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:e})}},S8={moduleName:"Pagination",version:Rt,beans:[Yge,Uge],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:Fge,paginationGetPageSize:Pge,paginationGetCurrentPage:kge,paginationGetTotalPages:Oge,paginationGetRowCount:Lge,paginationGoToNextPage:Nge,paginationGoToPreviousPage:Bge,paginationGoToFirstPage:Vge,paginationGoToLastPage:Hge,paginationGoToPage:zge},dependsOn:[vP]};function Xge(t,e={}){let n=e?e.rowNodes:void 0;t.frameworkOverrides.wrapIncoming(()=>t.rowRenderer.redrawRows(n))}function x8(t,e,n,i,r){e&&(i&&e.parent&&e.parent.level!==-1&&x8(t,e.parent,n,i,r),e.setExpanded(n,void 0,r))}function Zge(t,e){return t.rowModel.getRowNode(e)}function Qge(t,e,n,i){t.rowRenderer.addRenderedRowListener(e,n,i)}function Jge(t){return t.rowRenderer.getRenderedNodes()}function eme(t,e,n){t.rowModel.forEachNode(e,n)}function tme(t){return t.rowRenderer.firstRenderedRow}function nme(t){return t.rowRenderer.lastRenderedRow}function ime(t,e){return t.rowModel.getRow(e)}function rme(t){return t.rowModel.getRowCount()}var E8={moduleName:"RowApi",version:Rt,apiFunctions:{redrawRows:Xge,setRowNodeExpanded:x8,getRowNode:Zge,addRenderedRowListener:Qge,getRenderedNodes:Jge,forEachNode:eme,getFirstDisplayedRowIndex:tme,getLastDisplayedRowIndex:nme,getDisplayedRowAtIndex:ime,getDisplayedRowCount:rme}};var ome=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function sme(t){return t.pinnedRowModel?.getPinnedTopRowCount()??0}function ame(t){return t.pinnedRowModel?.getPinnedBottomRowCount()??0}function lme(t,e){return t.pinnedRowModel?.getPinnedTopRow(e)}function cme(t,e){return t.pinnedRowModel?.getPinnedBottomRow(e)}function dme(t,e,n){return t.pinnedRowModel?.forEachPinnedRow(e,n)}var M8={moduleName:"PinnedRow",version:Rt,beans:[_ce],css:[ome],apiFunctions:{getPinnedTopRowCount:sme,getPinnedBottomRowCount:ame,getPinnedTopRow:lme,getPinnedBottomRow:cme,forEachPinnedRow:dme},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}};var ume=class extends he{constructor(t,e){super(),this.cellCtrl=t,this.staticClasses=[],this.beans=e,this.column=t.column}setComp(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let{column:t,cellComp:e}=this,n=t.colDef,i=n.cellClassRules,r=this.getCellClassParams(t,n);oP(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,r,o=>e.toggleCss(o,!0),o=>e.toggleCss(o,!1)),this.cellClassRules=i}applyUserStyles(){let t=this.column,e=t.colDef,n=e.cellStyle;if(!n)return;let i;if(typeof n=="function"){let r=this.getCellClassParams(t,e);i=n(r)}else i=n;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){let{column:t,cellComp:e}=this,n=t.colDef,i=this.getCellClassParams(t,n);this.staticClasses.forEach(o=>e.toggleCss(o,!1));let r=this.beans.cellStyles.getStaticCellClasses(n,i);this.staticClasses=r,r.forEach(o=>e.toggleCss(o,!0))}getCellClassParams(t,e){let{value:n,rowNode:i}=this.cellCtrl;return jt(this.beans.gos,{value:n,data:i.data,node:i,colDef:e,column:t,rowIndex:i.rowIndex})}},hme=class extends he{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(t,e,n,i){oP(this.beans.expressionSvc,void 0,t.cellClassRules,e,n,i),this.processStaticCellClasses(t,e,n)}getStaticCellClasses(t,e){let{cellClass:n}=t;if(!n)return[];let i;return typeof n=="function"?i=n(e):i=n,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(t,e){return new ume(t,e)}processStaticCellClasses(t,e,n){this.getStaticCellClasses(t,e).forEach(r=>{n(r)})}},R8={moduleName:"CellStyle",version:Rt,beans:[hme]},D8={moduleName:"RowStyle",version:Rt,beans:[ole]};var fme=(()=>{let e=class e{constructor(){this.vcr=A(mi)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ot({type:e,selectors:[["ag-component-container"]],standalone:!1,decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),I8=16,_P=0;function pme(t){let e=new Map;for(let n=0;n<I8;n++){let i=t.createComponent(fme);e.set(n,i),yr(i.location.nativeElement)}return e}var gme=new Set(["doesFilterPass","isFilterActive"]),T8=(()=>{let e=class e extends e8{setViewContainerRef(i,r){this.viewContainerRef=i,this.angularFrameworkOverrides=r}createWrapper(i){let r=this.angularFrameworkOverrides,o=this;o.compShards??=pme(this.viewContainerRef);class s extends SP{init(c){r.runInsideAngular(()=>{super.init(c),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return o.createComponent(i)}hasMethod(c){return a.getFrameworkComponentInstance()[c]!=null}callMethod(c,d){let u=this.getFrameworkComponentInstance(),h=u[c];return gme.has(c)?h.apply(u,d):r.runInsideAngular(()=>h.apply(u,d))}addMethod(c,d){a[c]=d}}let a=new s;return a}createComponent(i){return _P=(_P+1)%I8,this.compShards.get(_P).instance.vcr.createComponent(i)}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=ji(e)))(o||e)}})(),e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),SP=class{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,yr(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef?.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},Ux=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e,n){let{frameworkOverrides:i,wrappedListeners:r}=this,o=n;if(i.shouldWrapOutgoing){o=a=>{i.wrapOutgoing(()=>n(a))};let s=r.get(e);s||(s=new Map,r.set(e,s)),s.set(n,o)}return o}wrapGlobal(e){let{frameworkOverrides:n,wrappedGlobalListeners:i}=this,r=e;return n.shouldWrapOutgoing&&(r=(o,s)=>{n.wrapOutgoing(()=>e(o,s))},i.set(e,r)),r}unwrap(e,n){let{wrappedListeners:i}=this,r=i.get(e);if(r){let o=r.get(n);if(o)return r.delete(n),r.size===0&&i.delete(e),o}return n}unwrapGlobal(e){let{wrappedGlobalListeners:n}=this,i=n.get(e);return i?(n.delete(e),i):e}},A8=(()=>{let e=class e extends hP{constructor(i){super("angular"),this._ngZone=i,this.batchFrameworkComps=!0,this.isRunningWithinTestZone=!1,this.wrapIncoming=(r,o)=>this.runOutside(r,o),this.wrapOutgoing=r=>this.runInsideAngular(r),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(r,o)=>o==="resize-observer"||o==="popupPositioning"?this._ngZone.runOutsideAngular(r):r():this.runOutside=r=>this._ngZone.runOutsideAngular(r):this.runOutside=r=>r()}get shouldWrapOutgoing(){return this._ngZone&&$e.isInAngularZone()}createLocalEventListenerWrapper(i,r){if(this.shouldWrapOutgoing)return i??(r.setFrameworkOverrides(this),new Ux(this))}createGlobalEventListenerWrapper(){return new Ux(this)}isFrameworkComponent(i){if(!i)return!1;let r=i.prototype;return r&&"agInit"in r}runInsideAngular(i){return!this._ngZone||$e.isInAngularZone()?i():this._ngZone.run(i)}runOutsideAngular(i,r){return this.runOutside(i,r)}};e.\u0275fac=function(r){return new(r||e)(je($e))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let t=e;return t})(),F8=(()=>{let e=class e{constructor(i,r,o,s){this._viewContainerRef=r,this._angularFrameworkOverrides=o,this._frameworkCompWrapper=s,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressGroupChangesColumnVisibility=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.getFullRowEditValidationErrors=void 0,this.invalidEditValueMode=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.findSearchValue=void 0,this.findOptions=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.alwaysPassFilter=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableFilterHandlers=void 0,this.filterHandlers=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.cellFlashDuration=void 0,this.cellFadeDuration=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableCellSpan=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.rowDragInsertDelay=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupHideParentOfSingleChild=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.treeData=void 0,this.treeDataChildrenField=void 0,this.treeDataParentIdField=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.enableRowPinning=void 0,this.isRowPinnable=void 0,this.isRowPinned=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.rowNumbers=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.themeCssLayer=void 0,this.styleNonce=void 0,this.themeStyleContainer=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.isRowValidDropPosition=void 0,this.toolPanelVisibleChanged=new q,this.toolPanelSizeChanged=new q,this.columnMenuVisibleChanged=new q,this.contextMenuVisibleChanged=new q,this.cutStart=new q,this.cutEnd=new q,this.pasteStart=new q,this.pasteEnd=new q,this.columnVisible=new q,this.columnPinned=new q,this.columnResized=new q,this.columnMoved=new q,this.columnValueChanged=new q,this.columnPivotModeChanged=new q,this.columnPivotChanged=new q,this.columnGroupOpened=new q,this.newColumnsLoaded=new q,this.gridColumnsChanged=new q,this.displayedColumnsChanged=new q,this.virtualColumnsChanged=new q,this.columnEverythingChanged=new q,this.columnsReset=new q,this.columnHeaderMouseOver=new q,this.columnHeaderMouseLeave=new q,this.columnHeaderClicked=new q,this.columnHeaderContextMenu=new q,this.componentStateChanged=new q,this.cellValueChanged=new q,this.cellEditRequest=new q,this.rowValueChanged=new q,this.cellEditingStarted=new q,this.cellEditingStopped=new q,this.rowEditingStarted=new q,this.rowEditingStopped=new q,this.undoStarted=new q,this.undoEnded=new q,this.redoStarted=new q,this.redoEnded=new q,this.cellSelectionDeleteStart=new q,this.cellSelectionDeleteEnd=new q,this.rangeDeleteStart=new q,this.rangeDeleteEnd=new q,this.fillStart=new q,this.fillEnd=new q,this.filterOpened=new q,this.filterChanged=new q,this.filterModified=new q,this.filterUiChanged=new q,this.floatingFilterUiChanged=new q,this.advancedFilterBuilderVisibleChanged=new q,this.findChanged=new q,this.chartCreated=new q,this.chartRangeSelectionChanged=new q,this.chartOptionsChanged=new q,this.chartDestroyed=new q,this.cellKeyDown=new q,this.gridReady=new q,this.firstDataRendered=new q,this.gridSizeChanged=new q,this.modelUpdated=new q,this.virtualRowRemoved=new q,this.viewportChanged=new q,this.bodyScroll=new q,this.bodyScrollEnd=new q,this.dragStarted=new q,this.dragStopped=new q,this.dragCancelled=new q,this.stateUpdated=new q,this.paginationChanged=new q,this.rowDragEnter=new q,this.rowDragMove=new q,this.rowDragLeave=new q,this.rowDragEnd=new q,this.rowDragCancel=new q,this.rowResizeStarted=new q,this.rowResizeEnded=new q,this.columnRowGroupChanged=new q,this.rowGroupOpened=new q,this.expandOrCollapseAll=new q,this.pivotMaxColumnsExceeded=new q,this.pinnedRowDataChanged=new q,this.pinnedRowsChanged=new q,this.rowDataUpdated=new q,this.asyncTransactionsFlushed=new q,this.storeRefreshed=new q,this.headerFocused=new q,this.cellClicked=new q,this.cellDoubleClicked=new q,this.cellFocused=new q,this.cellMouseOver=new q,this.cellMouseOut=new q,this.cellMouseDown=new q,this.rowClicked=new q,this.rowDoubleClicked=new q,this.rowSelected=new q,this.selectionChanged=new q,this.cellContextMenu=new q,this.rangeSelectionChanged=new q,this.cellSelectionChanged=new q,this.tooltipShow=new q,this.tooltipHide=new q,this.sortChanged=new q,this._nativeElement=i.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this._angularFrameworkOverrides.runOutsideAngular(()=>{this._frameworkCompWrapper.setViewContainerRef(this._viewContainerRef,this._angularFrameworkOverrides);let i=Object.keys(this).filter(l=>!(l.startsWith("_")||l=="gridOptions"||l=="modules"||this[l]instanceof q)),r={};i.forEach(l=>{let c=vme(l,this[l]);r[l]=c});let o=uU(this.gridOptions,r,i),s={globalListener:this.globalListener.bind(this),frameworkOverrides:this._angularFrameworkOverrides,providedBeanInstances:{frameworkCompWrapper:this._frameworkCompWrapper},modules:this.modules||[],setThemeOnGridDiv:!0},a=JG(this._nativeElement,o,s);a&&(this.api=a),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this._angularFrameworkOverrides.runOutsideAngular(()=>{let r={};for(let o of Object.keys(i)){let s=i[o];r[o]=s.currentValue}hU(r,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let o=this[i],s=o?.observed??o?.observers?.length>0,a=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,l=!!this.gridOptions&&!!this.gridOptions[a];return s||l}globalListener(i,r){if(this._destroyed)return;let o=this[i];if(o&&this.isEmitterUsed(i)){let s=()=>this._angularFrameworkOverrides.runInsideAngular(()=>o.emit(r));this._holdEvents?this._fullyReady.then(()=>s()):s()}}};e.\u0275fac=function(r){return new(r||e)(Kn(dt),Kn(mi),Kn(A8),Kn(T8))},e.\u0275cmp=ot({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:[2,"suppressContextMenu","suppressContextMenu",L],preventDefaultOnContextMenu:[2,"preventDefaultOnContextMenu","preventDefaultOnContextMenu",L],allowContextMenuWithControlKey:[2,"allowContextMenuWithControlKey","allowContextMenuWithControlKey",L],columnMenu:"columnMenu",suppressMenuHide:[2,"suppressMenuHide","suppressMenuHide",L],enableBrowserTooltips:[2,"enableBrowserTooltips","enableBrowserTooltips",L],tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:[2,"tooltipMouseTrack","tooltipMouseTrack",L],tooltipShowMode:"tooltipShowMode",tooltipInteraction:[2,"tooltipInteraction","tooltipInteraction",L],popupParent:"popupParent",copyHeadersToClipboard:[2,"copyHeadersToClipboard","copyHeadersToClipboard",L],copyGroupHeadersToClipboard:[2,"copyGroupHeadersToClipboard","copyGroupHeadersToClipboard",L],clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:[2,"suppressCopyRowsToClipboard","suppressCopyRowsToClipboard",L],suppressCopySingleCellRanges:[2,"suppressCopySingleCellRanges","suppressCopySingleCellRanges",L],suppressLastEmptyLineOnPaste:[2,"suppressLastEmptyLineOnPaste","suppressLastEmptyLineOnPaste",L],suppressClipboardPaste:[2,"suppressClipboardPaste","suppressClipboardPaste",L],suppressClipboardApi:[2,"suppressClipboardApi","suppressClipboardApi",L],suppressCutToClipboard:[2,"suppressCutToClipboard","suppressCutToClipboard",L],columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:[2,"maintainColumnOrder","maintainColumnOrder",L],enableStrictPivotColumnOrder:[2,"enableStrictPivotColumnOrder","enableStrictPivotColumnOrder",L],suppressFieldDotNotation:[2,"suppressFieldDotNotation","suppressFieldDotNotation",L],headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:[2,"allowDragFromColumnsToolPanel","allowDragFromColumnsToolPanel",L],suppressMovableColumns:[2,"suppressMovableColumns","suppressMovableColumns",L],suppressColumnMoveAnimation:[2,"suppressColumnMoveAnimation","suppressColumnMoveAnimation",L],suppressMoveWhenColumnDragging:[2,"suppressMoveWhenColumnDragging","suppressMoveWhenColumnDragging",L],suppressDragLeaveHidesColumns:[2,"suppressDragLeaveHidesColumns","suppressDragLeaveHidesColumns",L],suppressGroupChangesColumnVisibility:"suppressGroupChangesColumnVisibility",suppressMakeColumnVisibleAfterUnGroup:[2,"suppressMakeColumnVisibleAfterUnGroup","suppressMakeColumnVisibleAfterUnGroup",L],suppressRowGroupHidesColumns:[2,"suppressRowGroupHidesColumns","suppressRowGroupHidesColumns",L],colResizeDefault:"colResizeDefault",suppressAutoSize:[2,"suppressAutoSize","suppressAutoSize",L],autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:[2,"skipHeaderOnAutoSize","skipHeaderOnAutoSize",L],autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",getFullRowEditValidationErrors:"getFullRowEditValidationErrors",invalidEditValueMode:"invalidEditValueMode",singleClickEdit:[2,"singleClickEdit","singleClickEdit",L],suppressClickEdit:[2,"suppressClickEdit","suppressClickEdit",L],readOnlyEdit:[2,"readOnlyEdit","readOnlyEdit",L],stopEditingWhenCellsLoseFocus:[2,"stopEditingWhenCellsLoseFocus","stopEditingWhenCellsLoseFocus",L],enterNavigatesVertically:[2,"enterNavigatesVertically","enterNavigatesVertically",L],enterNavigatesVerticallyAfterEdit:[2,"enterNavigatesVerticallyAfterEdit","enterNavigatesVerticallyAfterEdit",L],enableCellEditingOnBackspace:[2,"enableCellEditingOnBackspace","enableCellEditingOnBackspace",L],undoRedoCellEditing:[2,"undoRedoCellEditing","undoRedoCellEditing",L],undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:[2,"suppressCsvExport","suppressCsvExport",L],defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:[2,"suppressExcelExport","suppressExcelExport",L],excelStyles:"excelStyles",findSearchValue:"findSearchValue",findOptions:"findOptions",quickFilterText:"quickFilterText",cacheQuickFilter:[2,"cacheQuickFilter","cacheQuickFilter",L],includeHiddenColumnsInQuickFilter:[2,"includeHiddenColumnsInQuickFilter","includeHiddenColumnsInQuickFilter",L],quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:[2,"applyQuickFilterBeforePivotOrAgg","applyQuickFilterBeforePivotOrAgg",L],excludeChildrenWhenTreeDataFiltering:[2,"excludeChildrenWhenTreeDataFiltering","excludeChildrenWhenTreeDataFiltering",L],enableAdvancedFilter:[2,"enableAdvancedFilter","enableAdvancedFilter",L],alwaysPassFilter:"alwaysPassFilter",includeHiddenColumnsInAdvancedFilter:[2,"includeHiddenColumnsInAdvancedFilter","includeHiddenColumnsInAdvancedFilter",L],advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:[2,"suppressAdvancedFilterEval","suppressAdvancedFilterEval",L],suppressSetFilterByDefault:[2,"suppressSetFilterByDefault","suppressSetFilterByDefault",L],enableFilterHandlers:[2,"enableFilterHandlers","enableFilterHandlers",L],filterHandlers:"filterHandlers",enableCharts:[2,"enableCharts","enableCharts",L],chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:[2,"masterDetail","masterDetail",L],keepDetailRows:[2,"keepDetailRows","keepDetailRows",L],keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:[2,"detailRowAutoHeight","detailRowAutoHeight",L],context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:[2,"valueCache","valueCache",L],valueCacheNeverExpires:[2,"valueCacheNeverExpires","valueCacheNeverExpires",L],enableCellExpressions:[2,"enableCellExpressions","enableCellExpressions",L],suppressTouch:[2,"suppressTouch","suppressTouch",L],suppressFocusAfterRefresh:[2,"suppressFocusAfterRefresh","suppressFocusAfterRefresh",L],suppressBrowserResizeObserver:[2,"suppressBrowserResizeObserver","suppressBrowserResizeObserver",L],suppressPropertyNamesCheck:[2,"suppressPropertyNamesCheck","suppressPropertyNamesCheck",L],suppressChangeDetection:[2,"suppressChangeDetection","suppressChangeDetection",L],debug:[2,"debug","debug",L],loading:[2,"loading","loading",L],overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:[2,"suppressLoadingOverlay","suppressLoadingOverlay",L],overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:[2,"suppressNoRowsOverlay","suppressNoRowsOverlay",L],pagination:[2,"pagination","pagination",L],paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:[2,"paginationAutoPageSize","paginationAutoPageSize",L],paginateChildRows:[2,"paginateChildRows","paginateChildRows",L],suppressPaginationPanel:[2,"suppressPaginationPanel","suppressPaginationPanel",L],pivotMode:[2,"pivotMode","pivotMode",L],pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:[2,"pivotSuppressAutoColumn","pivotSuppressAutoColumn",L],suppressExpandablePivotGroups:[2,"suppressExpandablePivotGroups","suppressExpandablePivotGroups",L],functionsReadOnly:[2,"functionsReadOnly","functionsReadOnly",L],aggFuncs:"aggFuncs",suppressAggFuncInHeader:[2,"suppressAggFuncInHeader","suppressAggFuncInHeader",L],alwaysAggregateAtRootLevel:[2,"alwaysAggregateAtRootLevel","alwaysAggregateAtRootLevel",L],aggregateOnlyChangedColumns:[2,"aggregateOnlyChangedColumns","aggregateOnlyChangedColumns",L],suppressAggFilteredOnly:[2,"suppressAggFilteredOnly","suppressAggFilteredOnly",L],removePivotHeaderRowWhenSingleValueColumn:[2,"removePivotHeaderRowWhenSingleValueColumn","removePivotHeaderRowWhenSingleValueColumn",L],animateRows:[2,"animateRows","animateRows",L],cellFlashDuration:"cellFlashDuration",cellFadeDuration:"cellFadeDuration",allowShowChangeAfterFilter:[2,"allowShowChangeAfterFilter","allowShowChangeAfterFilter",L],domLayout:"domLayout",ensureDomOrder:[2,"ensureDomOrder","ensureDomOrder",L],enableCellSpan:[2,"enableCellSpan","enableCellSpan",L],enableRtl:[2,"enableRtl","enableRtl",L],suppressColumnVirtualisation:[2,"suppressColumnVirtualisation","suppressColumnVirtualisation",L],suppressMaxRenderedRowRestriction:[2,"suppressMaxRenderedRowRestriction","suppressMaxRenderedRowRestriction",L],suppressRowVirtualisation:[2,"suppressRowVirtualisation","suppressRowVirtualisation",L],rowDragManaged:[2,"rowDragManaged","rowDragManaged",L],rowDragInsertDelay:"rowDragInsertDelay",suppressRowDrag:[2,"suppressRowDrag","suppressRowDrag",L],suppressMoveWhenRowDragging:[2,"suppressMoveWhenRowDragging","suppressMoveWhenRowDragging",L],rowDragEntireRow:[2,"rowDragEntireRow","rowDragEntireRow",L],rowDragMultiRow:[2,"rowDragMultiRow","rowDragMultiRow",L],rowDragText:"rowDragText",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:[2,"embedFullWidthRows","embedFullWidthRows",L],groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:[2,"groupMaintainOrder","groupMaintainOrder",L],groupSelectsChildren:[2,"groupSelectsChildren","groupSelectsChildren",L],groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:[2,"groupSuppressBlankHeader","groupSuppressBlankHeader",L],groupSelectsFiltered:[2,"groupSelectsFiltered","groupSelectsFiltered",L],showOpenedGroup:[2,"showOpenedGroup","showOpenedGroup",L],groupHideParentOfSingleChild:"groupHideParentOfSingleChild",groupRemoveSingleChildren:[2,"groupRemoveSingleChildren","groupRemoveSingleChildren",L],groupRemoveLowestSingleChildren:[2,"groupRemoveLowestSingleChildren","groupRemoveLowestSingleChildren",L],groupHideOpenParents:[2,"groupHideOpenParents","groupHideOpenParents",L],groupAllowUnbalanced:[2,"groupAllowUnbalanced","groupAllowUnbalanced",L],rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",treeData:[2,"treeData","treeData",L],treeDataChildrenField:"treeDataChildrenField",treeDataParentIdField:"treeDataParentIdField",rowGroupPanelSuppressSort:[2,"rowGroupPanelSuppressSort","rowGroupPanelSuppressSort",L],suppressGroupRowsSticky:[2,"suppressGroupRowsSticky","suppressGroupRowsSticky",L],pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",enableRowPinning:"enableRowPinning",isRowPinnable:"isRowPinnable",isRowPinned:"isRowPinned",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:[2,"suppressModelUpdateAfterUpdateTransaction","suppressModelUpdateAfterUpdateTransaction",L],datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideFullWidthLoadingRow:[2,"suppressServerSideFullWidthLoadingRow","suppressServerSideFullWidthLoadingRow",L],cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:[2,"purgeClosedRowNodes","purgeClosedRowNodes",L],serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:[2,"serverSideSortAllLevels","serverSideSortAllLevels",L],serverSideEnableClientSideSort:[2,"serverSideEnableClientSideSort","serverSideEnableClientSideSort",L],serverSideOnlyRefreshFilteredGroups:[2,"serverSideOnlyRefreshFilteredGroups","serverSideOnlyRefreshFilteredGroups",L],serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:[2,"alwaysShowHorizontalScroll","alwaysShowHorizontalScroll",L],alwaysShowVerticalScroll:[2,"alwaysShowVerticalScroll","alwaysShowVerticalScroll",L],debounceVerticalScrollbar:[2,"debounceVerticalScrollbar","debounceVerticalScrollbar",L],suppressHorizontalScroll:[2,"suppressHorizontalScroll","suppressHorizontalScroll",L],suppressScrollOnNewData:[2,"suppressScrollOnNewData","suppressScrollOnNewData",L],suppressScrollWhenPopupsAreOpen:[2,"suppressScrollWhenPopupsAreOpen","suppressScrollWhenPopupsAreOpen",L],suppressAnimationFrame:[2,"suppressAnimationFrame","suppressAnimationFrame",L],suppressMiddleClickScrolls:[2,"suppressMiddleClickScrolls","suppressMiddleClickScrolls",L],suppressPreventDefaultOnMouseWheel:[2,"suppressPreventDefaultOnMouseWheel","suppressPreventDefaultOnMouseWheel",L],scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:[2,"rowMultiSelectWithClick","rowMultiSelectWithClick",L],suppressRowDeselection:[2,"suppressRowDeselection","suppressRowDeselection",L],suppressRowClickSelection:[2,"suppressRowClickSelection","suppressRowClickSelection",L],suppressCellFocus:[2,"suppressCellFocus","suppressCellFocus",L],suppressHeaderFocus:[2,"suppressHeaderFocus","suppressHeaderFocus",L],selectionColumnDef:"selectionColumnDef",rowNumbers:"rowNumbers",suppressMultiRangeSelection:[2,"suppressMultiRangeSelection","suppressMultiRangeSelection",L],enableCellTextSelection:[2,"enableCellTextSelection","enableCellTextSelection",L],enableRangeSelection:[2,"enableRangeSelection","enableRangeSelection",L],enableRangeHandle:[2,"enableRangeHandle","enableRangeHandle",L],enableFillHandle:[2,"enableFillHandle","enableFillHandle",L],fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:[2,"suppressClearOnFillReduction","suppressClearOnFillReduction",L],sortingOrder:"sortingOrder",accentedSort:[2,"accentedSort","accentedSort",L],unSortIcon:[2,"unSortIcon","unSortIcon",L],suppressMultiSort:[2,"suppressMultiSort","suppressMultiSort",L],alwaysMultiSort:[2,"alwaysMultiSort","alwaysMultiSort",L],multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:[2,"suppressMaintainUnsortedOrder","suppressMaintainUnsortedOrder",L],icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:[2,"suppressRowHoverHighlight","suppressRowHoverHighlight",L],suppressRowTransform:[2,"suppressRowTransform","suppressRowTransform",L],columnHoverHighlight:[2,"columnHoverHighlight","columnHoverHighlight",L],gridId:"gridId",deltaSort:[2,"deltaSort","deltaSort",L],treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:[2,"enableGroupEdit","enableGroupEdit",L],initialState:"initialState",theme:"theme",loadThemeGoogleFonts:[2,"loadThemeGoogleFonts","loadThemeGoogleFonts",L],themeCssLayer:"themeCssLayer",styleNonce:"styleNonce",themeStyleContainer:"themeStyleContainer",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:[2,"resetRowDataOnUpdate","resetRowDataOnUpdate",L],processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow",isRowValidDropPosition:"isRowValidDropPosition"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnsReset:"columnsReset",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",filterUiChanged:"filterUiChanged",floatingFilterUiChanged:"floatingFilterUiChanged",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",findChanged:"findChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",rowResizeStarted:"rowResizeStarted",rowResizeEnded:"rowResizeEnded",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",pinnedRowsChanged:"pinnedRowsChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},features:[vi([A8,T8]),gi],decls:0,vars:0,template:function(r,o){},encapsulation:2});let t=e;return t})(),mme=new Set(YG);function vme(t,e){return mme.has(t)?e===""?!0:e==="false"?!1:e:e}var Gx=class t{gridId=ao.required();rowData=ao.required();colDefs=ao.required();gridReady=Vp();rowSelected=Vp();initialState=ao();rowSelection=ao({mode:"singleRow",enableClickSelection:!0});gridReadyEvent(e){this._gridApi=e.api,this.gridReady.emit(e)}_gridApi;rowSelectedEvent({node:e,data:n}){if(!this._gridApi)return;let i=this._gridApi.getSelectedNodes();e.isSelected()?this.rowSelected.emit(n):i.length===0&&this.rowSelected.emit(void 0)}gridOptions={theme:$G.withPart(gP).withParams({iconSize:18,fontSize:12,browserColorScheme:"light",headerFontWeight:500},"light-mode").withParams({iconSize:18,fontSize:12,browserColorScheme:"dark",headerFontWeight:500},"dark-mode"),tooltipShowMode:"whenTruncated",tooltipShowDelay:500,tooltipHideDelay:5e3,defaultColDef:{headerClass:"ag-custom-header",cellClass:"ag-custom-cell",wrapHeaderText:!0,autoHeaderHeight:!0,filterParams:{maxNumConditions:1,buttons:["apply","clear","reset","cancel"]},flex:1,minWidth:140,context:{label:""}},pagination:!0,suppressCellFocus:!1};constructor(){cs(()=>{this.gridOptions.gridId=this.gridId()})}dataTypeDefinitions={};static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-ui-table"]],inputs:{gridId:[1,"gridId"],rowData:[1,"rowData"],colDefs:[1,"colDefs"],initialState:[1,"initialState"],rowSelection:[1,"rowSelection"]},outputs:{gridReady:"gridReady",rowSelected:"rowSelected"},decls:1,vars:6,consts:[[2,"width","100%","height","550px",3,"gridReady","rowSelected","gridOptions","dataTypeDefinitions","rowSelection","initialState","rowData","columnDefs"]],template:function(n,i){n&1&&(be(0,"ag-grid-angular",0),Jt("gridReady",function(o){return i.gridReadyEvent(o)})("rowSelected",function(o){return i.rowSelectedEvent(o)}),xe()),n&2&&Yt("gridOptions",i.gridOptions)("dataTypeDefinitions",i.dataTypeDefinitions)("rowSelection",i.rowSelection())("initialState",i.initialState())("rowData",i.rowData())("columnDefs",i.colDefs())},dependencies:[F8],encapsulation:2})};function yme(t,e){if(t&1&&(Lt(0,"img",1),be(1,"span",2),Vt(2),xe()),t&2){let n=rn();Yt("alt",n.icon().desc)("src",n.icon().url,Fc)("height",24),ze(2),Di(n.value())}}var Yl={DUST_DEVIL:{desc:"dust devil",url:"./icons/disasters/dust_devil.png"},METEOR_SHOWER:{desc:"meteor shower",url:"./icons/disasters/meteor_storm.png"},DUST_STORM:{desc:"dust storm",url:"./icons/disasters/dust_storm.png"},COLD_WAVE:{desc:"cold wave",url:"./icons/disasters/cold_wave.png"},RES_WATER:{desc:"Water",url:"./icons/resources/deposit_decal_water.png"},RES_CONCRETE:{desc:"Concrete",url:"./icons/resources/deposit_decal_concrete.png"},RES_METAL:{desc:"Metals",url:"./icons/resources/deposit_decal_metals.png"},RES_RARE_METAL:{desc:"Rare Metals",url:"./icons/resources/deposit_decal_rare_metals.png"}},Zo=class t{value=It(null);icon=It({url:"",desc:""});agInit(e){this.refresh(e)}refresh(e){switch(this.value.set(e.value),e.colDef.context.iconName){case"METEOR_SHOWER":this.icon.set(Yl.METEOR_SHOWER);break;case"DUST_DEVIL":this.icon.set(Yl.DUST_DEVIL);break;case"DUST_STORM":this.icon.set(Yl.DUST_STORM);break;case"COLD_WAVE":this.icon.set(Yl.COLD_WAVE);break;case"RES_CONCRETE":this.icon.set(Yl.RES_CONCRETE);break;case"RES_WATER":this.icon.set(Yl.RES_WATER);break;case"RES_METAL":this.icon.set(Yl.RES_METAL);break;case"RES_RARE_METAL":this.icon.set(Yl.RES_RARE_METAL);break;default:break}return!0}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-resource-icon-renderer"]],decls:2,vars:1,consts:[[1,"resource-icon"],[3,"alt","src","height"],[1,"ml-2","font-medium"]],template:function(n,i){n&1&&(be(0,"div",0),fn(1,yme,3,4),xe()),n&2&&(ze(),pn(i.value()?1:-1))},encapsulation:2,changeDetection:0})};var Cme=["mat-internal-form-field",""],bme=["*"],P8=(()=>{class t{labelPosition;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){i&2&&Nt("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:Cme,ngContentSelectors:bme,decls:1,vars:0,template:function(i,r){i&1&&(Vn(),Gt(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return t})();var wme=["input"],_me=["label"],Sme=["*"],xme=new se("mat-checkbox-default-options",{providedIn:"root",factory:O8});function O8(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var ir=function(t){return t[t.Init=0]="Init",t[t.Checked=1]="Checked",t[t.Unchecked=2]="Unchecked",t[t.Indeterminate=3]="Indeterminate",t}(ir||{}),xP=class{source;checked},k8=O8(),By=(()=>{class t{_elementRef=A(dt);_changeDetectorRef=A(Bi);_ngZone=A($e);_animationsDisabled=Ji();_options=A(xme,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(n){let i=new xP;return i.source=this,i.checked=n,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new q;indeterminateChange=new q;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=ir.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){A(Dr).load(zl);let n=A(new aa("tabindex"),{optional:!0});this._options=this._options||k8,this.color=this._options.color||k8.color,this.tabIndex=n==null?0:parseInt(n)||0,this.id=this._uniqueId=A(po).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(n){n.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this.indeterminate)}get checked(){return this._checked}set checked(n){n!=this.checked&&(this._checked=n,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(n){n!==this.disabled&&(this._disabled=n,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate()}set indeterminate(n){let i=n!=this._indeterminate();this._indeterminate.set(n),i&&(n?this._transitionCheckState(ir.Indeterminate):this._transitionCheckState(this.checked?ir.Checked:ir.Unchecked),this.indeterminateChange.emit(n)),this._syncIndeterminate(n)}_indeterminate=It(!1);_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(n){this.checked=!!n}registerOnChange(n){this._controlValueAccessorChangeFn=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this.disabled=n}validate(n){return this.required&&n.value!==!0?{required:!0}:null}registerOnValidatorChange(n){this._validatorChangeFn=n}_transitionCheckState(n){let i=this._currentCheckState,r=this._getAnimationTargetElement();if(!(i===n||!r)&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,n),this._currentCheckState=n,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);let o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let n=this._options?.clickAction;!this.disabled&&n!=="noop"?(this.indeterminate&&n!=="check"&&Promise.resolve().then(()=>{this._indeterminate.set(!1),this.indeterminateChange.emit(!1)}),this._checked=!this._checked,this._transitionCheckState(this._checked?ir.Checked:ir.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&n==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(n){n.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(n,i){if(this._animationsDisabled)return"";switch(n){case ir.Init:if(i===ir.Checked)return this._animationClasses.uncheckedToChecked;if(i==ir.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case ir.Unchecked:return i===ir.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case ir.Checked:return i===ir.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case ir.Indeterminate:return i===ir.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(n){let i=this._inputElement;i&&(i.nativeElement.indeterminate=n)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(n){n.target&&this._labelElement.nativeElement.contains(n.target)&&n.stopPropagation()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-checkbox"]],viewQuery:function(i,r){if(i&1&&(kn(wme,5),kn(_me,5)),i&2){let o;$t(o=qt())&&(r._inputElement=o.first),$t(o=qt())&&(r._labelElement=o.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(i,r){i&2&&(ll("id",r.id),Mn("tabindex",null)("aria-label",null)("aria-labelledby",null),Br(r.color?"mat-"+r.color:"mat-accent"),Nt("_mat-animation-noopable",r._animationsDisabled)("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked)("mat-mdc-checkbox-disabled-interactive",r.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",L],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",L],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",L],tabIndex:[2,"tabIndex","tabIndex",n=>n==null?void 0:la(n)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",L],checked:[2,"checked","checked",L],disabled:[2,"disabled","disabled",L],indeterminate:[2,"indeterminate","indeterminate",L]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[vi([{provide:U4,useExisting:_o(()=>t),multi:!0},{provide:vS,useExisting:t,multi:!0}]),gi],ngContentSelectors:Sme,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(i,r){if(i&1){let o=Ni();Vn(),be(0,"div",3),Jt("click",function(a){return wn(o),_n(r._preventBubblingFromLabel(a))}),be(1,"div",4,0)(3,"div",5),Jt("click",function(){return wn(o),_n(r._onTouchTargetClick())}),xe(),be(4,"input",6,1),Jt("blur",function(){return wn(o),_n(r._onBlur())})("click",function(){return wn(o),_n(r._onInputClick())})("change",function(a){return wn(o),_n(r._onInteractionEvent(a))}),xe(),Lt(6,"div",7),be(7,"div",8),Ec(),be(8,"svg",9),Lt(9,"path",10),xe(),fp(),Lt(10,"div",11),xe(),Lt(11,"div",12),xe(),be(12,"label",13,2),Gt(14),xe()()}if(i&2){let o=sa(2);Yt("labelPosition",r.labelPosition),ze(4),Nt("mdc-checkbox--selected",r.checked),Yt("checked",r.checked)("indeterminate",r.indeterminate)("disabled",r.disabled&&!r.disabledInteractive)("id",r.inputId)("required",r.required)("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex),Mn("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("aria-checked",r.indeterminate?"mixed":null)("aria-controls",r.ariaControls)("aria-disabled",r.disabled&&r.disabledInteractive?!0:null)("aria-expanded",r.ariaExpanded)("aria-owns",r.ariaOwns)("name",r.name)("value",r.value),ze(7),Yt("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),ze(),Yt("for",r.inputId)}},dependencies:[TS,P8],styles:[`.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover>.mdc-checkbox__ripple{opacity:var(--mat-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mat-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover>.mat-mdc-checkbox-ripple>.mat-ripple-element{background-color:var(--mat-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mat-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mat-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mat-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mat-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mat-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control+.mdc-checkbox__ripple{background-color:var(--mat-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mat-checkbox-state-layer-size, 40px);height:var(--mat-checkbox-state-layer-size, 40px);top:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);right:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mdc-checkbox--disabled{opacity:.5}}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mat-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})(),Wx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[By,dn,dn]})}return t})();var N8=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn,dn]})}return t})();var Eme=["*"],Mme=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,Rme=["unscopedContent"],Dme=["text"],Tme=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],Ame=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var Ime=new se("ListOption"),Fme=(()=>{class t{_elementRef=A(dt);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return t})(),Pme=(()=>{class t{_elementRef=A(dt);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return t})(),kme=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return t})(),B8=(()=>{class t{_listOption=A(Ime,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,hostVars:4,hostBindings:function(i,r){i&2&&Nt("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())}})}return t})(),Ome=(()=>{class t extends B8{static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275dir=wt({type:t,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Ri]})}return t})(),Lme=(()=>{class t extends B8{static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275dir=wt({type:t,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Ri]})}return t})(),Nme=new se("MAT_LIST_CONFIG"),EP=(()=>{class t{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Hl(n)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(n){this._disabled.set(Hl(n))}_disabled=It(!1);_defaultOptions=A(Nme,{optional:!0});static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,hostVars:1,hostBindings:function(i,r){i&2&&Mn("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return t})(),Bme=(()=>{class t{_elementRef=A(dt);_ngZone=A($e);_listBase=A(EP,{optional:!0});_platform=A(An);_hostElement;_isButtonElement;_noopAnimations=Ji();_avatars;_icons;set lines(n){this._explicitLines=pf(n,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(n){this._disableRipple=Hl(n)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(n){this._disabled.set(Hl(n))}_disabled=It(!1);_subscriptions=new Kt;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){A(Dr).load(zl);let n=A(ny,{optional:!0});this.rippleConfig=n||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Id(this,this._ngZone,this._hostElement,this._platform,A(xt)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(js(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(n){if(!this._lines||!this._titles||!this._unscopedContent)return;n&&this._checkDomForUnscopedTextContent();let i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",i===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",i===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&i===1;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let n=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(n+=1),n}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(n=>n.nodeType!==n.COMMENT_NODE).some(n=>!!(n.textContent&&n.textContent.trim()))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,contentQueries:function(i,r,o){if(i&1&&(si(o,Ome,4),si(o,Lme,4)),i&2){let s;$t(s=qt())&&(r._avatars=s),$t(s=qt())&&(r._icons=s)}},hostVars:4,hostBindings:function(i,r){i&2&&(Mn("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),Nt("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return t})();var jx=(()=>{class t extends EP{static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275cmp=ot({type:t,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],features:[vi([{provide:EP,useExisting:t}]),Ri],ngContentSelectors:Eme,decls:1,vars:0,template:function(i,r){i&1&&(Vn(),Gt(0))},styles:[Mme],encapsulation:2,changeDetection:0})}return t})(),$x=(()=>{class t extends Bme{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(n){this._activated=Hl(n)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let n;return function(r){return(n||(n=ji(t)))(r||t)}})();static \u0275cmp=ot({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(i,r,o){if(i&1&&(si(o,Pme,5),si(o,Fme,5),si(o,kme,5)),i&2){let s;$t(s=qt())&&(r._lines=s),$t(s=qt())&&(r._titles=s),$t(s=qt())&&(r._meta=s)}},viewQuery:function(i,r){if(i&1&&(kn(Rme,5),kn(Dme,5)),i&2){let o;$t(o=qt())&&(r._unscopedContent=o.first),$t(o=qt())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(i,r){i&2&&(Mn("aria-current",r._getAriaCurrent()),Nt("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",r._hasBothLeadingAndTrailing())("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[Ri],ngContentSelectors:Ame,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(i,r){if(i&1){let o=Ni();Vn(Tme),Gt(0),be(1,"span",1),Gt(2,1),Gt(3,2),be(4,"span",2,0),Jt("cdkObserveContent",function(){return wn(o),_n(r._updateItemLines(!0))}),Gt(6,3),xe()(),Gt(7,4),Gt(8,5),Lt(9,"div",3)}},dependencies:[bH],encapsulation:2,changeDetection:0})}return t})();var qx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[xS,dn,yf,qS,N8]})}return t})();function Vme(t,e){if(t&1){let n=Ni();be(0,"mat-list-item")(1,"mat-checkbox",2),Jt("change",function(r){let o=wn(n).$implicit,s=rn();return _n(s.onCheckboxChange(o,r.checked))}),xe(),be(2,"label",3),Vt(3),xe()()}if(t&2){let n=e.$implicit,i=rn();Nt("selected-option",i.selectedValues.has(n)),ze(),Yt("id",n)("checked",i.selectedValues.has(n)),ze(),Yt("for",n),ze(),Di(n)}}var Bf=class t{params;uniqueValues=new Set;sortedUniqueValues=[];selectedValues=new Set;agInit(e){this.params=e,e.colDef?.filterParams&&e.colDef.filterParams.options?(this.uniqueValues=new Set(e.colDef.filterParams.options),this.sortedUniqueValues=Array.from(this.uniqueValues).sort((n,i)=>n.localeCompare(i))):(console.warn("Predefined options not provided. Consider passing them via filterParams."),this.extractUniqueValues(e))}isFilterActive(){return this.selectedValues.size>0&&this.selectedValues.size!==this.uniqueValues.size}doesFilterPass(e){let n=this.params.getValue(e.node,this.params.colDef);return this.selectedValues.has(String(n))}getModel(){return this.selectedValues.size>0?Array.from(this.selectedValues):null}setModel(e){e?this.selectedValues=new Set(e):this.selectedValues.clear()}extractUniqueValues(e){e.api.forEachNode(n=>{let i=n.data?e.getValue(n,e.colDef):void 0;i!=null&&this.uniqueValues.add(String(i))}),this.sortedUniqueValues=Array.from(this.uniqueValues).sort((n,i)=>n.localeCompare(i)),this.selectedValues=new Set(this.uniqueValues)}onCheckboxChange(e,n){n?this.selectedValues.add(e):this.selectedValues.delete(e),this.params.filterChangedCallback()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-custom-set-filter"]],decls:3,vars:0,consts:[[1,"custom-set-filter-container"],[3,"selected-option"],[3,"change","id","checked"],[3,"for"]],template:function(n,i){n&1&&(be(0,"mat-list",0),sl(1,Vme,4,6,"mat-list-item",1,Op),xe()),n&2&&(ze(),al(i.sortedUniqueValues))},dependencies:[Wx,By,qx,jx,$x],styles:[".custom-set-filter-container[_ngcontent-%COMP%]{max-height:240px}"]})};var Hme={capture:!0},zme=["focus","mousedown","mouseenter","touchstart"],MP="mat-ripple-loader-uninitialized",RP="mat-ripple-loader-class-name",H8="mat-ripple-loader-centered",Kx="mat-ripple-loader-disabled",z8=(()=>{class t{_document=A(lt);_animationsDisabled=Ji();_globalRippleOptions=A(ny,{optional:!0});_platform=A(An);_ngZone=A($e);_injector=A(xt);_eventCleanups;_hosts=new Map;constructor(){let n=A(qn).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>zme.map(i=>n.listen(this._document,i,this._onInteraction,Hme)))}ngOnDestroy(){let n=this._hosts.keys();for(let i of n)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(n,i){n.setAttribute(MP,this._globalRippleOptions?.namespace??""),(i.className||!n.hasAttribute(RP))&&n.setAttribute(RP,i.className||""),i.centered&&n.setAttribute(H8,""),i.disabled&&n.setAttribute(Kx,"")}setDisabled(n,i){let r=this._hosts.get(n);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(n))):i?n.setAttribute(Kx,""):n.removeAttribute(Kx)}_onInteraction=n=>{let i=gr(n);if(i instanceof HTMLElement){let r=i.closest(`[${MP}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(n){if(!this._document||this._hosts.has(n))return;n.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",n.getAttribute(RP)),n.append(i);let r=this._globalRippleOptions,o=this._animationsDisabled?0:r?.animation?.enterDuration??ty.enterDuration,s=this._animationsDisabled?0:r?.animation?.exitDuration??ty.exitDuration,a={rippleDisabled:this._animationsDisabled||r?.disabled||n.hasAttribute(Kx),rippleConfig:{centered:n.hasAttribute(H8),terminateOnPointerUp:r?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},l=new Id(a,this._ngZone,i,this._platform,this._injector),c=!a.rippleDisabled;c&&l.setupTriggerEvents(n),this._hosts.set(n,{target:a,renderer:l,hasSetUpEvents:c}),n.removeAttribute(MP)}destroyRipple(n){let i=this._hosts.get(n);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(n))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ume=new se("MAT_BUTTON_CONFIG");function U8(t){return t==null?void 0:la(t)}var G8=(()=>{class t{_elementRef=A(dt);_ngZone=A($e);_animationsDisabled=Ji();_config=A(Ume,{optional:!0});_focusMonitor=A(eI);_cleanupClick;_renderer=A(Mi);_rippleLoader=A(z8);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(n){this.tabIndex=n}constructor(){A(Dr).load(zl);let n=this._elementRef.nativeElement;this._isAnchor=n.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",i){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",n=>{this.disabled&&(n.preventDefault(),n.stopImmediatePropagation())}))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(i,r){i&2&&(Mn("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled())("tabindex",r._getTabIndex()),Br(r.color?"mat-"+r.color:""),Nt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("mat-unthemed",!r.color)("_mat-animation-noopable",r._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",L],disabled:[2,"disabled","disabled",L],ariaDisabled:[2,"aria-disabled","ariaDisabled",L],disabledInteractive:[2,"disabledInteractive","disabledInteractive",L],tabIndex:[2,"tabIndex","tabIndex",U8],_tabindex:[2,"tabindex","_tabindex",U8]}})}return t})();var Gme=["matButton",""],Wme=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],jme=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var W8=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),Yx=(()=>{class t extends G8{get appearance(){return this._appearance}set appearance(n){this.setAppearance(n||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let n=$me(this._elementRef.nativeElement);n&&this.setAppearance(n)}setAppearance(n){if(n===this._appearance)return;let i=this._elementRef.nativeElement.classList,r=this._appearance?W8.get(this._appearance):null,o=W8.get(n);r&&i.remove(...r),i.add(...o),this._appearance=n}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[Ri],attrs:Gme,ngContentSelectors:jme,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Vn(Wme),Lt(0,"span",0),Gt(1),be(2,"span",1),Gt(3,1),xe(),Gt(4,2),Lt(5,"span",2)(6,"span",3)),i&2&&Nt("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();function $me(t){return t.hasAttribute("mat-raised-button")?"elevated":t.hasAttribute("mat-stroked-button")?"outlined":t.hasAttribute("mat-flat-button")?"filled":t.hasAttribute("mat-button")?"text":null}var Xx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn,yf,dn]})}return t})();function qme(t,e){if(t&1){let n=Ni();be(0,"mat-list-item")(1,"mat-checkbox",5),Jt("change",function(r){let o=wn(n).$implicit,s=rn();return _n(s.onCheckboxChange(o,r.checked))}),xe(),be(2,"label",6),Vt(3),xe()()}if(t&2){let n=e.$implicit,i=rn();Nt("selected-option",i.selectedOptions.includes(n)),ze(),Yt("id",n)("value",n)("checked",i.selectedOptions.includes(n)),ze(),Yt("for",n),ze(),Di(n)}}var Zx=class t{params;predefinedOptions=[];selectedOptions=[];agInit(e){this.params=e,e.colDef?.filterParams&&e.colDef.filterParams.options?this.predefinedOptions=e.colDef.filterParams.options:(console.warn("Predefined options not provided. Consider passing them via filterParams."),this.inferPredefinedOptions(this.params))}isFilterActive(){return this.selectedOptions.length>0}doesFilterPass(e){if(this.selectedOptions.length===0)return!0;let n=this.params.getValue(e.node,this.params.colDef);if(!Array.isArray(n))return console.warn(`Value for column '${this.params.colDef.field}' is not an array:`,n),!1;switch(this.params.colDef.filterParams.operation){case"AND":return this.selectedOptions.every(i=>n.some(r=>String(r).toLowerCase()===i.toLowerCase()));default:return this.selectedOptions.some(i=>n.some(r=>String(r).toLowerCase()===i.toLowerCase()))}}getModel(){return this.isFilterActive()?{value:this.selectedOptions}:null}setModel(e){e&&Array.isArray(e.value)?this.selectedOptions=e.value:this.selectedOptions=[]}onCheckboxChange(e,n){n?this.selectedOptions.push(e):this.selectedOptions=this.selectedOptions.filter(i=>i!==e)}applyFilter(){this.params.filterChangedCallback()}resetFilter(){this.selectedOptions=[],this.params.filterChangedCallback()}inferPredefinedOptions(e){let n=new Set;e.api.forEachNode(i=>{let r=i.data?e.getValue(i,e.colDef):void 0;Array.isArray(r)&&r.forEach(o=>n.add(String(o).toLowerCase()))}),this.predefinedOptions=Array.from(n).sort()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-custom-array-filter"]],decls:9,vars:0,consts:[[1,"flex","flex-col","overflow-hidden"],["cdkScrollable","",1,"custom-array-filter-container"],[3,"selected-option"],[1,"flex","flex-row","gap-4","m-2","justify-between"],["mat-flat-button","",3,"click"],[3,"change","id","value","checked"],[3,"for"]],template:function(n,i){n&1&&(be(0,"div",0)(1,"mat-list",1),sl(2,qme,4,7,"mat-list-item",2,Op),xe(),be(4,"div",3)(5,"button",4),Jt("click",function(){return i.resetFilter()}),Vt(6,"Reset"),xe(),be(7,"button",4),Jt("click",function(){return i.applyFilter()}),Vt(8,"Apply"),xe()()()),n&2&&(ze(2),al(i.predefinedOptions))},dependencies:[Xx,Yx,Wx,By,qx,jx,$x,oy,n6],styles:[".custom-array-filter-container[_ngcontent-%COMP%]{max-height:240px;overflow-y:auto}"]})};var $8={BASE:{id:"BASE",label:"Base game (No DLCs)",path:"./data/MapData-Breakthroughs.csv"},GREEN_PLANET:{id:"GREEN_PLANET",label:"Green Planet DLC",path:"./data/MapData-Breakthroughs_GP.csv"},BELOW_AND_BEYOND:{id:"BELOW_AND_BEYOND",label:"Below and Beyond DLC",path:"./data/MapData-Breakthroughs_BB.csv"},GP_BB:{id:"GP_BB",label:"Green Planet + Below and Beyond DLCs",path:"./data/MapData-Breakthroughs_GP-BB.csv"}},DP={"Advanced Drone Drive":"AdvancedDroneDrive","Alien Imprints":"AlienImprints","Ancient Terraforming Device":"AncientTerraformingDevice","Artificial Muscles":"ArtificialMuscles","Autonomous Hubs":"AutonomousHubs","Capture Asteroid":"CaptureAsteroid","Cargobay of holding":"CargobayOfHolding",Cloning:"Cloning","Construction Nanites":"ConstructionNanites","Core Metals":"CoreMetals","Core Rare Metals":"CoreRareMetals","Core Water":"CoreWater","Cryo-sleep":"CryoSleep","Designed Forestation":"DesignedForestation","Dome Streamlining":"DomeStreamlining","Dry Farming":"DryFarming","Eternal Fusion":"EternalFusion","Extractor AI":"ExtractorAI","Factory Automation":"FactoryAutomation","Forever Young":"ForeverYoung","Frictionless Composites":"FrictionlessComposites","Gem Architecture":"GemArchitecture","Gene Selection":"GeneSelection","Giant Crops":"GiantCrops","Global Support":"GlobalSupport","Good Vibrations":"GoodVibrations","Hive Mind":"HiveMind","Hull Polarization":"HullPolarization","Hypersensitive Photovoltaics":"HypersensitivePhotovoltaics","Inspiring Architecture":"InspiringArchitecture","Interplanetary Learning":"InterplanetaryLearning","Lake Vaporators":"LakeVaporators","Landscaping Nanites":"LandscapingNanites","Magnetic Extraction":"MagneticExtraction","Mars Marketing":"MarsMarketing","Martian Diet":"MartianDiet","Martian Steel":"MartianSteel","Martianborn Ingenuity":"MartianbornIngenuity","Mole People":"MolePeople","Multispiral Architecture":"MultispiralArchitecture","Nano Refinement":"NanoRefinement","Neo-Concrete":"NeoConcrete","Neural Empathy":"NeuralEmpathy","Nocturnal Adaptation":"NocturnalAdaptation","Overcharge Amplifications":"OverchargeAmplification","Plasma Rocket":"PlasmaRocket","Plutonium Synthesis":"PlutoniumSynthesis","Prefab Compression":"PrefabCompression","Printed Electronics":"PrintedElectronics","Project Phoenix":"ProjectPhoenix","Rapid Sleep":"RapidSleep","Resilient Vegetation":"ResilientVegetation","Safe Mode":"SafeMode","Service Bots":"ServiceBots","Soylent Green":"SoylentGreen","Space Rehabilitation":"SpaceRehabilitation","Superconducting Computing":"SuperconductingComputing",Superfungus:"Superfungus","Superior Cables":"SuperiorCables","Superior Pipes":"SuperiorPipes","Sustained Workload":"SustainedWorkload","The Positronic Brain":"ThePositronicBrain","Vector Pump":"VectorPump","Vehicle Weight Optimizations":"VehicleWeightOptimizations","Vocation-Oriented Society":"Vocation-Oriented Society","Wireless Power":"WirelessPower","Zero-Space Computing":"ZeroSpaceComputing"},TP=(G=>(G.AdvancedDroneDrive="advanced_drone_drive",G.AlienImprints="alien_imprints",G.AncientTerraformingDevice="ancient_terraforming_device",G.ArtificialMuscles="artificial_muscles",G.AutonomousHubs="autonomous_hubs",G.CaptureAsteroid="capture_asteroid",G.CargobayOfHolding="cargobay_of_holding",G.Cloning="cloning",G.ConstructionNanites="construction_nanites",G.CoreMetals="core_metals",G.CoreRareMetals="core_rare_metals",G.CoreWater="core_water",G.CryoSleep="cryo-sleep",G.DesignedForestation="designed_forestation-",G.DomeStreamlining="dome_streamlining",G.DryFarming="dry_farming",G.EternalFusion="eternal_fusion",G.ExtractorAI="extractor_ai",G.FactoryAutomation="factory_automation",G.ForeverYoung="forever_young",G.FrictionlessComposites="frictionless_composites",G.GemArchitecture="gem_architecture",G.GeneSelection="gene_selection",G.GiantCrops="giant_crops",G.GlobalSupport="global_support",G.GoodVibrations="good_vibrations",G.HiveMind="hive_mind",G.HullPolarization="hull_polarization",G.HypersensitivePhotovoltaics="hypersensitive_photovoltaics",G.InspiringArchitecture="inspiring_architecture",G.InterplanetaryLearning="interplanetary_learning",G.LakeVaporators="lake_vaporators-",G.LandscapingNanites="landscaping_nanites-",G.MagneticExtraction="magnetic_extraction",G.MarsMarketing="mars_marketing",G.MartianbornIngenuity="martianborn_ingenuity",G.MartianDiet="martian_diet",G.MartianSteel="martian_steel",G.MolePeople="mole_people",G.MultispiralArchitecture="multispiral_architecture",G.NanoRefinement="nano_refinement",G.NeoConcrete="neo-concrete",G.NeuralEmpathy="neural_empathy",G.NocturnalAdaptation="nocturnal_adaptation",G.OverchargeAmplification="overcharge_amplifications",G.PlasmaRocket="plasma_rocket",G.PlutoniumSynthesis="plutonium_synthesis",G.PrefabCompression="prefab_compression",G.PrintedElectronics="printed_electronics",G.ProjectPhoenix="project_phoenix",G.RapidSleep="rapid_sleep",G.ResilientVegetation="broadleaf_adaptation-",G.SafeMode="safe_mode",G.ServiceBots="service_bots",G.SoylentGreen="soylent_green",G.SpaceRehabilitation="space_rehabilitation",G.SuperconductingComputing="superconducting_computing",G.Superfungus="superfungus",G.SuperiorCables="superior_cables",G.SuperiorPipes="superior_pipes",G.SustainedWorkload="sustainable_overtime",G.ThePositronicBrain="the_positronic_brain",G.VectorPump="vector_pump",G.VehicleWeightOptimizations="vehicle_optimization",G["Vocation-Oriented Society"]="vocation-oriented_society",G.WirelessPower="wireless_power",G.ZeroSpaceComputing="zero-space_computing",G))(TP||{});var q8={"Albor Tholus":"ALBOR_THOLUS","Arabia Terra":"ARABIA_TERRA","Arcadia Planitia":"ARCADIA_PLANITIA","Argyre Planitia":"ARGYRE_PLANITIA","Arsai Mons":"ARSAI_MONS","Ascraeus Mons":"ASCRAEUS_MONS","Colony Site":"COLONY_SITE","Elysium Mons":"ELYSIUM_MONS","Gale Crater":"GALE_CRATER","Hecatus Tholus":"HECATUS_THOLUS","Hellas Planitia":"HELLAS_PLANITIA","Mars Pathfinder Landing Area":"MARS_PATHFINDER_LANDING_AREA","North Cap":"NORTH_CAP","Olympus Mons":"OLYMPUS_MONS","Opportunity Landing Area":"OPPORTUNITY_LANDING_AREA","Pavonis Mons":"PAVONIS_MONS","Phoenix Landing Area":"PHOENIX_LANDING_AREA","South Cap":"SOUTH_CAP","Spirit Landing Area":"SPIRIT_LANDING_AREA","Tempa Terra":"TEMPA_TERRA","Terra Sabaea":"TERRA_SABAEA","Terra Sireum":"TERRA_SIREUM","Utopia Planitia":"UTOPIA_PLANITIA","Valles Marineris":"VALLES_MARINERIS","Viking 1 Landing Area":"VIKING_1_LANDING_AREA","Viking 2 Landing Area":"VIKING_2_LANDING_AREA"};var AP={BlankBig_01:"Big 01",BlankBig_02:"Big 02",BlankBig_03:"Big 03",BlankBig_04:"Big 04",BlankBigCanyonCMix_01:"Big Canyon Mix 01",BlankBigCanyonCMix_02:"Big Canyon Mix 02",BlankBigCanyonCMix_03:"Big Canyon Mix 03",BlankBigCanyonCMix_04:"Big Canyon Mix 04",BlankBigCanyonCMix_05:"Big Canyon Mix 05",BlankBigCanyonCMix_06:"Big Canyon Mix 06",BlankBigCanyonCMix_07:"Big Canyon Mix 07",BlankBigCanyonCMix_08:"Big Canyon Mix 08",BlankBigCanyonCMix_09:"Big Canyon Mix 09",BlankBigCanyonCMix_10:"Big Canyon Mix 10",BlankBigCliffsCMix_01:"Big Cliffs Mix 01",BlankBigCliffsCMix_02:"Big Cliffs Mix 02",BlankBigCrater_01:"Big Crater 01",BlankBigCraterCMix_01:"Big Crater Mix 01",BlankBigCraterCMix_02:"Big Crater Mix 02",BlankBigHeartCMix_03:"Big Hear Mix 03",BlankBigTerraceCMix_01:"Big Terrace Mix 01",BlankBigTerraceCMix_02:"Big Terrace Mix 02",BlankBigTerraceCMix_03:"Big Terrace Mix 03",BlankBigTerraceCMix_04:"Big Terrace Mix 04",BlankBigTerraceCMix_05:"Big Terrace Mix 05",BlankBigTerraceCMix_06:"Big Terrace Mix 06",BlankBigTerraceCMix_07:"Big Terrace Mix 07",BlankBigTerraceCMix_08:"Big Terrace Mix 08",BlankBigTerraceCMix_09:"Big Terrace Mix 09",BlankBigTerraceCMix_10:"Big Terrace Mix 10",BlankBigTerraceCMix_11:"Big Terrace Mix 11",BlankBigTerraceCMix_12:"Big Terrace Mix 12",BlankBigTerraceCMix_13:"Big Terrace Mix 13",BlankBigTerraceCMix_14:"Big Terrace Mix 14",BlankBigTerraceCMix_15:"Big Terrace Mix 15",BlankBigTerraceCMix_16:"Big Terrace Mix 16",BlankBigTerraceCMix_17:"Big Terrace Mix 17",BlankBigTerraceCMix_18:"Big Terrace Mix 18",BlankBigTerraceCMix_19:"Big Terrace Mix 19",BlankBigTerraceCMix_20:"Big Terrace Mix 20",BlankTerraceBig_05:"Big Terrace 05",BlankUnderground_01:"Underground 01",BlankUnderground_02:"Underground 02",BlankUnderground_03:"Underground 03",BlankUnderground_04:"Underground 04"};var K8=HP(II());var Vf=class t{httpClient=A(ul);_localeBreakName$=this.httpClient.get("./data/locale/bt_names.csv",{responseType:"text"}).pipe(Ye(e=>this.parseCSV(e)));_localeBreakDesc$=this.httpClient.get("./data/locale/bt_desc.csv",{responseType:"text"}).pipe(Ye(e=>this.parseCSV(e)));initializeLocaleData(){return lc([this._localeBreakName$,this._localeBreakDesc$]).pipe(on(([e,n])=>{this.mapBreakthroughLocale({names:e,desc:n})}))}_breakthroughLocales;getAllBreakthroughLocales(){return this._breakthroughLocales}getBreakthroughLocale(e){let n=e.trim(),i=DP[n];return this._breakthroughLocales[i]}removeStyling=e=>e.replaceAll("()","").replaceAll("<color flavor>","").replaceAll("<color em>","").replaceAll("</color>","").replaceAll("<right>","").replaceAll("</right>","").replaceAll("<left>","").replaceAll("</left>","").replaceAll("<hide>","").replaceAll("</hide>","").replaceAll(" (6<image UI/Icons/res_colonist.tga 1300> )","").replaceAll("<image UI/Icons/res_water_2.tga 1300>","").replaceAll("<image UI/Icons/res_temperature.tga 1300>","");mapBreakthroughLocale(e){this._breakthroughLocales=Object.values(DP).reduce((n,i)=>{let r=e.names.find(s=>s.break_id===i),o=e.desc.find(s=>s.break_id===i);return n[i]={id:i,name_loc:{en:r.name_en,br:r.name_br,fr:r.name_fr},desc_loc:{en:this.removeStyling(o.name_en),br:this.removeStyling(o.name_br),fr:this.removeStyling(o.name_fr)}},n},{})}parseCSV=e=>K8.default.parse(e,{skipEmptyLines:!0,header:!0,dynamicTyping:!0}).data;static \u0275fac=function(n){return new(n||t)};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})};var Kme=t=>({"sms-bt-pa":t}),X8=(t,e)=>e.id;function Yme(t,e){if(t&1&&Lt(0,"img",5),t&2){rn();let n=Lb(1);Yt("alt",n.map_name_view)("src","images/maps/"+n.map_name+".png",Fc)}}function Xme(t,e){t&1&&Lt(0,"img",5),t&2&&Yt("alt","placeholder map")("src","https://placehold.co/240x160",Fc)}function Zme(t,e){if(t&1&&(be(0,"div",17),Lt(1,"img",18),be(2,"div",19)(3,"h4",20),Vt(4),xe(),be(5,"p",21),Vt(6),xe()()()),t&2){let n=e.$implicit,i=e.$index,r=rn(2);ze(),Yt("alt",n.name_loc.en)("src","icons/research/"+r.breakthroughIcon[n.id]+".png",Fc),ze(2),Br(dR(6,Kme,i<4)),ze(),Vr(" ",n.name_loc.en," "),ze(2),Vr(" ",n.desc_loc.en," ")}}function Qme(t,e){if(t&1&&sl(0,Zme,7,8,"div",17,X8),t&2){rn();let n=Lb(1);al(n.breakthroughs)}}function Jme(t,e){t&1&&(be(0,"p",13),Vt(1,"No location selected."),xe())}function eve(t,e){if(t&1&&(be(0,"mat-option",15),Vt(1),xe()),t&2){let n=e.$implicit;Yt("value",n),ze(),Di(n.label)}}var Qx=class t{http=A(ul);localeService=A(Vf);breakthroughIcon=TP;gameVersions=Object.values($8);rowData=It([]);colDefs=[{minWidth:140,field:"coordinates",headerName:"Coordinates",sortable:!1,filter:!0},{minWidth:120,field:"named_location",headerName:"Named Location",filter:{component:Bf},filterParams:{options:Object.keys(q8)}},{minWidth:140,field:"map_name_view",headerName:"Map Name",tooltipField:"map_name_view",filter:{component:Bf},filterParams:{options:Object.values(AP)}},{minWidth:200,field:"breakthroughs_view",headerName:"Breakthroughs",filter:{component:Zx},filterParams:{operation:"AND",options:Object.values(this.localeService.getAllBreakthroughLocales()).map(e=>e.name_loc.en)},valueFormatter:e=>e.value.join(", ")},{headerName:"Geography",children:[{field:"topography",headerName:"Topography",filter:{component:Bf}},{columnGroupShow:"open",field:"altitude",headerName:"Altitude",filter:"agNumberColumnFilter"},{columnGroupShow:"open",field:"temperature",headerName:"Temperature",filter:"agNumberColumnFilter"},{columnGroupShow:"open",field:"difficulty",headerName:"Difficulty",filter:"agNumberColumnFilter"}]},{headerName:"Disasters",openByDefault:!0,children:[{columnGroupShow:"closed",field:"sum_disasters",headerName:"Total disasters",filter:"agNumberColumnFilter",resizable:!1},{columnGroupShow:"open",field:"dust_devils",headerName:"Dust Devils",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"DUST_DEVIL"}},{columnGroupShow:"open",field:"dust_storm",headerName:"Dust Storms",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"DUST_STORM"}},{columnGroupShow:"open",field:"meteors",headerName:"Meteors",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"METEOR_SHOWER"}},{columnGroupShow:"open",field:"cold_waves",headerName:"Cold Waves",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"COLD_WAVE"}}]},{headerName:"Resources",openByDefault:!0,children:[{columnGroupShow:"closed",field:"sum_resources",headerName:"Total resources",filter:"agNumberColumnFilter",resizable:!1},{columnGroupShow:"open",field:"concrete",headerName:"Concrete",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"RES_CONCRETE"}},{columnGroupShow:"open",field:"water",headerName:"Water",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"RES_WATER"}},{columnGroupShow:"open",field:"metals",headerName:"Metals",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"RES_METAL"}},{columnGroupShow:"open",field:"rare_metals",headerName:"Rare Metals",filter:"agNumberColumnFilter",cellRenderer:Zo,context:{iconName:"RES_RARE_METAL"}}]}];selectedLocation=It(void 0);_selectedGameVersion$=new Jn(void 0);_mapLocation$=this._selectedGameVersion$.asObservable().pipe($n(e=>e?this.http.get(e.path,{responseType:"text"}).pipe(Ye(n=>this.parseCSV(n))):Je([])));parseCSV=e=>Y8.default.parse(e,{skipEmptyLines:!0,header:!0,dynamicTyping:!0}).data;gridReady(){return this._mapLocation$.pipe(on(e=>{this.rowData.set(this.formatRows(e))})).subscribe()}locationSelected(e){this.selectedLocation.set(e)}selectedGV({value:e}){this._selectedGameVersion$.next(e)}formatRows(e){return e.map(n=>{let i=n["Latitude \xB0"].toString().padStart(2,"0"),r=n["Longitude \xB0"].toString().padStart(3,"0"),o=[];for(let a=1;a<=20;a++){let l=n[`Breakthrough ${a}`];l&&o.push(l)}let s=o.map(a=>this.localeService.getBreakthroughLocale(a));return{coordinates:`${i}${n.Latitude}:${r}${n.Longitude}`,latitude_deg:n["Latitude \xB0"],latitude:n.Latitude,longitude_deg:n["Longitude \xB0"],longitude:n.Longitude,topography:n.Topography,difficulty:n["Difficulty Challenge"],altitude:n.Altitude,temperature:n.Temperature,metals:n.Metals,rare_metals:n["Rare Metals"],concrete:n.Concrete,water:n.Water,dust_devils:n["Dust Devils"],dust_storm:n["Dust Storms"],meteors:n.Meteors,cold_waves:n["Cold Waves"],map_name:n["Map Name"],map_name_view:AP[n["Map Name"]],named_location:n["Named Location"]?n["Named Location"].trim():null,breakthroughs:s,breakthroughs_view:s.map(a=>a.name_loc.en),sum_disasters:n["Dust Storms"]+n["Dust Devils"]+n.Meteors+n["Cold Waves"],sum_resources:n.Metals+n.Concrete+n.Water+n["Rare Metals"]}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-landing-location-table"]],decls:50,vars:11,consts:[[1,"grid","gap-4","grid-cols-5","pb-8"],[1,"col-span-5","md:col-span-2","sms-border"],[1,"m-0","p-2","text-center","sms-header"],[1,"flex","flex-col","gap-1","items-center","justify-center","p-4"],[1,"landing-map"],[1,"sms-image",3,"alt","src"],[1,"text-sm","font-bold"],[1,"flex","flex-col","gap-1","px-4"],[1,"flex","flex-col","sm:flex-row","sm:justify-between"],[1,"w-28","m-0"],[1,"m-0","sm:text-right","text-sm"],[1,"col-span-5","md:col-span-3","sms-border"],[1,"bt-list","flex","flex-col","py-0"],[1,"text-center"],[3,"selectionChange"],[3,"value"],["gridId","landing-location-table",3,"gridReady","rowSelected","rowData","colDefs"],[1,"flex","p-4","gap-4","sms-border-top"],[1,"bt-icon",3,"alt","src"],[1,"flex","flex-col","gap-1"],[1,"m-0"],[1,"m-0","text-justify","text-sm","text"]],template:function(n,i){if(n&1){let r=Ni();be(0,"section",0),Ob(1),be(2,"div",1)(3,"h3",2),Vt(4,"Map Name"),xe(),be(5,"div",3)(6,"div",4),fn(7,Yme,1,2,"img",5)(8,Xme,1,2,"img",5),xe(),be(9,"span",6),Vt(10),xe()(),be(11,"div",7)(12,"div",8)(13,"h5",9),Vt(14,"Location"),xe(),be(15,"p",10),Vt(16),xe()(),be(17,"div",8)(18,"h5",9),Vt(19,"Topography"),xe(),be(20,"p",10),Vt(21),xe()(),be(22,"div",8)(23,"h5",9),Vt(24,"Altitude"),xe(),be(25,"p",10),Vt(26),xe()(),be(27,"div",8)(28,"h5",9),Vt(29,"Temperature"),xe(),be(30,"p",10),Vt(31),xe()(),be(32,"div",8)(33,"h5",9),Vt(34,"Location"),xe(),be(35,"p",10),Vt(36),xe()()()(),be(37,"div",11)(38,"h3",2),Vt(39,"Breakthroughs"),xe(),be(40,"div",12),fn(41,Qme,2,0)(42,Jme,2,0,"p",13),xe()()(),be(43,"mat-form-field")(44,"mat-label"),Vt(45,"Select game version"),xe(),be(46,"mat-select",14),Jt("selectionChange",function(s){return wn(r),_n(i.selectedGV(s))}),sl(47,eve,2,2,"mat-option",15,X8),xe()(),be(49,"sms-ui-table",16),Jt("gridReady",function(){return wn(r),_n(i.gridReady())})("rowSelected",function(s){return wn(r),_n(i.locationSelected(s))}),xe()}if(n&2){ze();let r=lR(i.selectedLocation());ze(6),pn(r?7:8),ze(3),Di(r?r.map_name_view:"---"),ze(6),Vr(" ",r?r.coordinates:"---"," "),ze(5),Vr(" ",r?r.topography:"---"," "),ze(5),Vr(" ",r?r.altitude:"---"," m. "),ze(5),Vr(" ",r?r.temperature:"---"," \u2103 "),ze(5),Vr(" ",r?r.named_location:"---"," "),ze(5),pn(r?41:42),ze(6),al(i.gameVersions),ze(2),Yt("rowData",i.rowData())("colDefs",i.colDefs)}},dependencies:[uy,ry,iy,DI,RI,Fd,sH,aH,Gx],styles:[".bt-list[_ngcontent-%COMP%]{height:380px;overflow-y:auto}.bt-icon[_ngcontent-%COMP%]{width:64px;object-fit:contain}"]})};var Jx=class t{canvasCamera={position:[0,0,20]};canvasLookAt=[0,0,0];static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-landing-location"]],decls:2,vars:0,consts:[[1,"flex","flex-col","gap-8"]],template:function(n,i){n&1&&(be(0,"section",0),Lt(1,"sms-landing-location-table"),xe())},dependencies:[Qx],styles:["#canvas-container[_ngcontent-%COMP%]{width:100%;height:420px}"]})};var Z8=[{path:"**",component:Jx}];var Q8=()=>{NU.registerModules([R8,_8,p8,m8,S8,M8,v8,E8,b8,D8,g8,y8])};Q8();function tve(){let t=A(Vf);return console.log("APP_INITIALIZER: Fetching locale data..."),xE(t.initializeLocaleData().pipe(on(()=>{console.log("APP_INITIALIZER: Preloaded locale data.")})))}var J8={providers:[TM(),fR({eventCoalescing:!0}),vD(Z8),UR(),O4(),Ru(()=>tve())]};var nve=["*",[["mat-toolbar-row"]]],ive=["*","mat-toolbar-row"],rve=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=wt({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return t})(),e5=(()=>{class t{_elementRef=A(dt);_platform=A(An);_document=A(lt);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-toolbar"]],contentQueries:function(i,r,o){if(i&1&&si(o,rve,5),i&2){let s;$t(s=qt())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,r){i&2&&(Br(r.color?"mat-"+r.color:""),Nt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:ive,decls:2,vars:0,template:function(i,r){i&1&&(Vn(nve),Gt(0),Gt(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mat-button-text-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mat-button-outlined-label-text-color: var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return t})();var t5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn,dn]})}return t})();var eE;function sve(){if(eE===void 0&&(eE=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(eE=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return eE}function Vy(t){return sve()?.createHTML(t)||t}function n5(t){return Error(`Unable to find icon with the name "${t}"`)}function ave(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function i5(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function r5(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Va=class{url;svgText;options;svgElement;constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}},s5=(()=>{class t{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(n,i,r,o){this._httpClient=n,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(n,i,r){return this.addSvgIconInNamespace("",n,i,r)}addSvgIconLiteral(n,i,r){return this.addSvgIconLiteralInNamespace("",n,i,r)}addSvgIconInNamespace(n,i,r,o){return this._addSvgIconConfig(n,i,new Va(r,null,o))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,i,r,o){let s=this._sanitizer.sanitize($i.HTML,r);if(!s)throw r5(r);let a=Vy(s);return this._addSvgIconConfig(n,i,new Va("",a,o))}addSvgIconSet(n,i){return this.addSvgIconSetInNamespace("",n,i)}addSvgIconSetLiteral(n,i){return this.addSvgIconSetLiteralInNamespace("",n,i)}addSvgIconSetInNamespace(n,i,r){return this._addSvgIconSetConfig(n,new Va(i,null,r))}addSvgIconSetLiteralInNamespace(n,i,r){let o=this._sanitizer.sanitize($i.HTML,i);if(!o)throw r5(i);let s=Vy(o);return this._addSvgIconSetConfig(n,new Va("",s,r))}registerFontClassAlias(n,i=n){return this._fontCssClassesByAlias.set(n,i),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){let i=this._sanitizer.sanitize($i.RESOURCE_URL,n);if(!i)throw i5(n);let r=this._cachedIconsByUrl.get(i);return r?Je(tE(r)):this._loadSvgIconFromConfig(new Va(n,null)).pipe(on(o=>this._cachedIconsByUrl.set(i,o)),Ye(o=>tE(o)))}getNamedSvgIcon(n,i=""){let r=o5(i,n),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,n),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(n,s):Ua(n5(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?Je(tE(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(Ye(i=>tE(i)))}_getSvgFromIconSetConfigs(n,i){let r=this._extractIconWithNameFromAnySet(n,i);if(r)return Je(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(bo(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize($i.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Je(null)})));return lc(o).pipe(Ye(()=>{let s=this._extractIconWithNameFromAnySet(n,i);if(!s)throw n5(n);return s}))}_extractIconWithNameFromAnySet(n,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(n)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,n,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(on(i=>n.svgText=i),Ye(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?Je(null):this._fetchIcon(n).pipe(on(i=>n.svgText=i))}_extractSvgIconFromSet(n,i,r){let o=n.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(Vy("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(n){let i=this._document.createElement("DIV");i.innerHTML=n;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(n){let i=this._svgElementFromString(Vy("<svg></svg>")),r=n.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<n.childNodes.length;o++)n.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(n.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(n,i){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),i&&i.viewBox&&n.setAttribute("viewBox",i.viewBox),n}_fetchIcon(n){let{url:i,options:r}=n,o=r?.withCredentials??!1;if(!this._httpClient)throw ave();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize($i.RESOURCE_URL,i);if(!s)throw i5(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Ye(c=>Vy(c)),$s(()=>this._inProgressUrlFetches.delete(s)),Zf());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(n,i,r){return this._svgIconConfigs.set(o5(n,i),r),this}_addSvgIconSetConfig(n,i){let r=this._iconSetConfigs.get(n);return r?r.push(i):this._iconSetConfigs.set(n,[i]),this}_svgElementFromConfig(n){if(!n.svgElement){let i=this._svgElementFromString(n.svgText);this._setSvgAttributes(i,n.options),n.svgElement=i}return n.svgElement}_getIconConfigFromResolvers(n,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,n);if(o)return lve(o)?new Va(o.url,null,o.options):new Va(o,null)}}static \u0275fac=function(i){return new(i||t)(je(ul,8),je(GR),je(lt,8),je(Si))};static \u0275prov=le({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tE(t){return t.cloneNode(!0)}function o5(t,e){return t+":"+e}function lve(t){return!!(t.url&&t.options)}var cve=["*"],dve=new se("MAT_ICON_DEFAULT_OPTIONS"),uve=new se("mat-icon-location",{providedIn:"root",factory:hve});function hve(){let t=A(lt),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var a5=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],fve=a5.map(t=>`[${t}]`).join(", "),pve=/^url\(['"]?#(.*?)['"]?\)$/,l5=(()=>{class t{_elementRef=A(dt);_iconRegistry=A(s5);_location=A(uve);_errorHandler=A(Si);_defaultColor;get color(){return this._color||this._defaultColor}set color(n){this._color=n}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(n){let i=this._cleanupFontValue(n);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(n){let i=this._cleanupFontValue(n);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Kt.EMPTY;constructor(){let n=A(new aa("aria-hidden"),{optional:!0}),i=A(dve,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),n||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];let i=n.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let n=this._elementsWithExternalReferences;if(n&&n.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){let n=this._elementRef.nativeElement,i=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=n.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let n=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>n.classList.remove(r)),i.forEach(r=>n.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return typeof n=="string"?n.trim().split(" ")[0]:n}_prependPathToReferences(n){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${n}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(n){let i=n.querySelectorAll(fve),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)a5.forEach(s=>{let a=i[o],l=a.getAttribute(s),c=l?l.match(pve):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:c[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){let[i,r]=this._splitIconName(n);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(sr(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=ot({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Mn("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Br(r.color?"mat-"+r.color:""),Nt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",L],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:cve,decls:1,vars:0,template:function(i,r){i&1&&(Vn(),Gt(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return t})(),c5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=yt({type:t});static \u0275inj=ft({imports:[dn,dn]})}return t})();var nE=class t{_document=A(lt);selectedTheme=It("light");constructor(){let e=this.getThemeInLocalStorage();this.setTheme(e)}toggleTheme(){switch(this.selectedTheme()){case"light":this.setTheme("dark");break;case"dark":this.setTheme("light");break}}setTheme(e){switch(this.selectedTheme.set(e),e){case"dark":this._document.documentElement.classList.add("dark-mode"),this._document.body.dataset.agThemeMode="dark-mode";break;case"light":this._document.documentElement.classList.remove("dark-mode"),this._document.body.dataset.agThemeMode="light-mode";break}this.setThemeInLocalStorage(e)}setThemeInLocalStorage(e){localStorage.setItem("preferred-theme",e)}getThemeInLocalStorage(){return localStorage.getItem("preferred-theme")??"light"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["sms-navigation-bar"]],decls:19,vars:1,consts:[[1,"container","mx-auto"],[1,"p-4","mx-4","flex","items-center","justify-between"],[1,"flex","flex-1"],["matButton","","aria-label","About",1,""],[1,""],["matButton","","aria-label","FAQ",1,""],["matButton","","aria-label","theme",1,"",3,"click"]],template:function(n,i){n&1&&(be(0,"mat-toolbar")(1,"div",0)(2,"div",1)(3,"span"),Vt(4,"Surviving Mars Stats"),xe(),Lt(5,"span",2),be(6,"button",3)(7,"mat-icon"),Vt(8,"home"),xe(),be(9,"span",4),Vt(10,"About"),xe()(),be(11,"button",5)(12,"mat-icon"),Vt(13,"info"),xe(),be(14,"span",4),Vt(15,"FAQ"),xe()(),be(16,"button",6),Jt("click",function(){return i.toggleTheme()}),be(17,"mat-icon"),Vt(18),xe()()()()()),n&2&&(ze(18),Di(i.selectedTheme()==="light"?"dark_mode":"light_mode"))},dependencies:[Xx,Yx,t5,e5,c5,l5],encapsulation:2})};var iE=class t{title="surviving-mars-stats";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ot({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container","mx-auto","py-4"],[1,"p-4","mx-4","sms-border"]],template:function(n,i){n&1&&(Lt(0,"sms-navigation-bar"),be(1,"div",0)(2,"div",1),Lt(3,"router-outlet"),xe()())},dependencies:[CD,ug,nE],styles:["[_nghost-%COMP%]{display:block;height:100dvh}"],changeDetection:0})};VR(iE,J8).catch(t=>console.error(t));
